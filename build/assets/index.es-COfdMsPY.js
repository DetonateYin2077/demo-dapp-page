const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-BLtrTfm0.js","assets/index-CxDmaeOI.js","assets/index-1BPzmCN1.css"])))=>i.map(i=>d[i]);
import{d as F5,e as K5,f as H5,g as V5,j as G5,l as W5,m as J5,n as Q5,o as Y5,q as X5,t as Ys,u as Ua,v as zi,w as ye,x as Z5,y as rg,z as $h,B as e4,D as Oo,F as t4,G as Gl,H as ig,I as r4,J as zh,K as ng,L as sg,P as ag,Q as i4,T as og,U as Ah,V as n4,X as Hr,Y as mi,Z as kh,_ as s4,$ as y0,a0 as w0,a1 as a4}from"./index-CxDmaeOI.js";var Wl=function(r,e,t){if(t||arguments.length===2)for(var i=0,s=e.length,a;i<s;i++)(a||!(i in e))&&(a||(a=Array.prototype.slice.call(e,0,i)),a[i]=e[i]);return r.concat(a||Array.prototype.slice.call(e))},o4=function(){function r(e,t,i){this.name=e,this.version=t,this.os=i,this.type="browser"}return r}(),c4=function(){function r(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return r}(),h4=function(){function r(e,t,i,s){this.name=e,this.version=t,this.os=i,this.bot=s,this.type="bot-device"}return r}(),f4=function(){function r(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return r}(),u4=function(){function r(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return r}(),d4=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,l4=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,Jl=3,p4=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",d4]],Ql=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function g4(r){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new u4:typeof navigator<"u"?b4(navigator.userAgent):y4()}function v4(r){return r!==""&&p4.reduce(function(e,t){var i=t[0],s=t[1];if(e)return e;var a=s.exec(r);return!!a&&[i,a]},!1)}function b4(r){var e=v4(r);if(!e)return null;var t=e[0],i=e[1];if(t==="searchbot")return new f4;var s=i[1]&&i[1].split(".").join("_").split("_").slice(0,3);s?s.length<Jl&&(s=Wl(Wl([],s,!0),w4(Jl-s.length),!0)):s=[];var a=s.join("."),f=m4(r),p=l4.exec(r);return p&&p[1]?new h4(t,a,f,p[1]):new o4(t,a,f)}function m4(r){for(var e=0,t=Ql.length;e<t;e++){var i=Ql[e],s=i[0],a=i[1],f=a.exec(r);if(f)return s}return null}function y4(){var r=typeof process<"u"&&process.version;return r?new c4(process.version.slice(1)):null}function w4(r){for(var e=[],t=0;t<r;t++)e.push("0");return e}function cg(r=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(r):new Uint8Array(r)}function Yu(r,e){e||(e=r.reduce((s,a)=>s+a.length,0));const t=cg(e);let i=0;for(const s of r)t.set(s,i),i+=s.length;return t}const Yl={...F5,...K5,...H5,...V5,...G5,...W5,...J5,...Q5,...Y5,...X5};function hg(r,e,t,i){return{name:r,prefix:e,encoder:{name:r,prefix:e,encode:t},decoder:{decode:i}}}const Xl=hg("utf8","u",r=>"u"+new TextDecoder("utf8").decode(r),r=>new TextEncoder().encode(r.substring(1))),pu=hg("ascii","a",r=>{let e="a";for(let t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return e},r=>{r=r.substring(1);const e=cg(r.length);for(let t=0;t<r.length;t++)e[t]=r.charCodeAt(t);return e}),fg={utf8:Xl,"utf-8":Xl,hex:Yl.base16,latin1:pu,ascii:pu,binary:pu,...Yl};function xr(r,e="utf8"){const t=fg[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(r,"utf8"):t.decoder.decode(`${t.prefix}${r}`)}function Br(r,e="utf8"){const t=fg[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(r.buffer,r.byteOffset,r.byteLength).toString("utf8"):t.encoder.encode(r).substring(1)}const _4={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}},A4=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,x4=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,E4=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function I4(r,e){if(r==="__proto__"||r==="constructor"&&e&&typeof e=="object"&&"prototype"in e){M4(r);return}return e}function M4(r){console.warn(`[destr] Dropping "${r}" key to prevent prototype pollution.`)}function rh(r,e={}){if(typeof r!="string")return r;const t=r.trim();if(r[0]==='"'&&r.endsWith('"')&&!r.includes("\\"))return t.slice(1,-1);if(t.length<=9){const i=t.toLowerCase();if(i==="true")return!0;if(i==="false")return!1;if(i==="undefined")return;if(i==="null")return null;if(i==="nan")return Number.NaN;if(i==="infinity")return Number.POSITIVE_INFINITY;if(i==="-infinity")return Number.NEGATIVE_INFINITY}if(!E4.test(r)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return r}try{if(A4.test(r)||x4.test(r)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(r,I4)}return JSON.parse(r)}catch(i){if(e.strict)throw i;return r}}function S4(r){return!r||typeof r.then!="function"?Promise.resolve(r):r}function gr(r,...e){try{return S4(r(...e))}catch(t){return Promise.reject(t)}}function P4(r){const e=typeof r;return r===null||e!=="object"&&e!=="function"}function R4(r){const e=Object.getPrototypeOf(r);return!e||e.isPrototypeOf(Object)}function lh(r){if(P4(r))return String(r);if(R4(r)||Array.isArray(r))return JSON.stringify(r);if(typeof r.toJSON=="function")return lh(r.toJSON());throw new Error("[unstorage] Cannot stringify value!")}function ug(){if(typeof Buffer>"u")throw new TypeError("[unstorage] Buffer is not supported!")}const Xu="base64:";function N4(r){if(typeof r=="string")return r;ug();const e=Buffer.from(r).toString("base64");return Xu+e}function C4(r){return typeof r!="string"||!r.startsWith(Xu)?r:(ug(),Buffer.from(r.slice(Xu.length),"base64"))}function ti(r){return r?r.split("?")[0].replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,""):""}function O4(...r){return ti(r.join(":"))}function ih(r){return r=ti(r),r?r+":":""}const T4="memory",q4=()=>{const r=new Map;return{name:T4,getInstance:()=>r,hasItem(e){return r.has(e)},getItem(e){return r.get(e)??null},getItemRaw(e){return r.get(e)??null},setItem(e,t){r.set(e,t)},setItemRaw(e,t){r.set(e,t)},removeItem(e){r.delete(e)},getKeys(){return[...r.keys()]},clear(){r.clear()},dispose(){r.clear()}}};function D4(r={}){const e={mounts:{"":r.driver||q4()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},t=v=>{for(const A of e.mountpoints)if(v.startsWith(A))return{base:A,relativeKey:v.slice(A.length),driver:e.mounts[A]};return{base:"",relativeKey:v,driver:e.mounts[""]}},i=(v,A)=>e.mountpoints.filter(E=>E.startsWith(v)||A&&v.startsWith(E)).map(E=>({relativeBase:v.length>E.length?v.slice(E.length):void 0,mountpoint:E,driver:e.mounts[E]})),s=(v,A)=>{if(e.watching){A=ti(A);for(const E of e.watchListeners)E(v,A)}},a=async()=>{if(!e.watching){e.watching=!0;for(const v in e.mounts)e.unwatch[v]=await Zl(e.mounts[v],s,v)}},f=async()=>{if(e.watching){for(const v in e.unwatch)await e.unwatch[v]();e.unwatch={},e.watching=!1}},p=(v,A,E)=>{const N=new Map,O=T=>{let F=N.get(T.base);return F||(F={driver:T.driver,base:T.base,items:[]},N.set(T.base,F)),F};for(const T of v){const F=typeof T=="string",G=ti(F?T:T.key),W=F?void 0:T.value,ee=F||!T.options?A:{...A,...T.options},de=t(G);O(de).items.push({key:G,value:W,relativeKey:de.relativeKey,options:ee})}return Promise.all([...N.values()].map(T=>E(T))).then(T=>T.flat())},y={hasItem(v,A={}){v=ti(v);const{relativeKey:E,driver:N}=t(v);return gr(N.hasItem,E,A)},getItem(v,A={}){v=ti(v);const{relativeKey:E,driver:N}=t(v);return gr(N.getItem,E,A).then(O=>rh(O))},getItems(v,A){return p(v,A,E=>E.driver.getItems?gr(E.driver.getItems,E.items.map(N=>({key:N.relativeKey,options:N.options})),A).then(N=>N.map(O=>({key:O4(E.base,O.key),value:rh(O.value)}))):Promise.all(E.items.map(N=>gr(E.driver.getItem,N.relativeKey,N.options).then(O=>({key:N.key,value:rh(O)})))))},getItemRaw(v,A={}){v=ti(v);const{relativeKey:E,driver:N}=t(v);return N.getItemRaw?gr(N.getItemRaw,E,A):gr(N.getItem,E,A).then(O=>C4(O))},async setItem(v,A,E={}){if(A===void 0)return y.removeItem(v);v=ti(v);const{relativeKey:N,driver:O}=t(v);O.setItem&&(await gr(O.setItem,N,lh(A),E),O.watch||s("update",v))},async setItems(v,A){await p(v,A,async E=>{if(E.driver.setItems)return gr(E.driver.setItems,E.items.map(N=>({key:N.relativeKey,value:lh(N.value),options:N.options})),A);E.driver.setItem&&await Promise.all(E.items.map(N=>gr(E.driver.setItem,N.relativeKey,lh(N.value),N.options)))})},async setItemRaw(v,A,E={}){if(A===void 0)return y.removeItem(v,E);v=ti(v);const{relativeKey:N,driver:O}=t(v);if(O.setItemRaw)await gr(O.setItemRaw,N,A,E);else if(O.setItem)await gr(O.setItem,N,N4(A),E);else return;O.watch||s("update",v)},async removeItem(v,A={}){typeof A=="boolean"&&(A={removeMeta:A}),v=ti(v);const{relativeKey:E,driver:N}=t(v);N.removeItem&&(await gr(N.removeItem,E,A),(A.removeMeta||A.removeMata)&&await gr(N.removeItem,E+"$",A),N.watch||s("remove",v))},async getMeta(v,A={}){typeof A=="boolean"&&(A={nativeOnly:A}),v=ti(v);const{relativeKey:E,driver:N}=t(v),O=Object.create(null);if(N.getMeta&&Object.assign(O,await gr(N.getMeta,E,A)),!A.nativeOnly){const T=await gr(N.getItem,E+"$",A).then(F=>rh(F));T&&typeof T=="object"&&(typeof T.atime=="string"&&(T.atime=new Date(T.atime)),typeof T.mtime=="string"&&(T.mtime=new Date(T.mtime)),Object.assign(O,T))}return O},setMeta(v,A,E={}){return this.setItem(v+"$",A,E)},removeMeta(v,A={}){return this.removeItem(v+"$",A)},async getKeys(v,A={}){v=ih(v);const E=i(v,!0);let N=[];const O=[];for(const T of E){const F=await gr(T.driver.getKeys,T.relativeBase,A);for(const G of F){const W=T.mountpoint+ti(G);N.some(ee=>W.startsWith(ee))||O.push(W)}N=[T.mountpoint,...N.filter(G=>!G.startsWith(T.mountpoint))]}return v?O.filter(T=>T.startsWith(v)&&T[T.length-1]!=="$"):O.filter(T=>T[T.length-1]!=="$")},async clear(v,A={}){v=ih(v),await Promise.all(i(v,!1).map(async E=>{if(E.driver.clear)return gr(E.driver.clear,E.relativeBase,A);if(E.driver.removeItem){const N=await E.driver.getKeys(E.relativeBase||"",A);return Promise.all(N.map(O=>E.driver.removeItem(O,A)))}}))},async dispose(){await Promise.all(Object.values(e.mounts).map(v=>ep(v)))},async watch(v){return await a(),e.watchListeners.push(v),async()=>{e.watchListeners=e.watchListeners.filter(A=>A!==v),e.watchListeners.length===0&&await f()}},async unwatch(){e.watchListeners=[],await f()},mount(v,A){if(v=ih(v),v&&e.mounts[v])throw new Error(`already mounted at ${v}`);return v&&(e.mountpoints.push(v),e.mountpoints.sort((E,N)=>N.length-E.length)),e.mounts[v]=A,e.watching&&Promise.resolve(Zl(A,s,v)).then(E=>{e.unwatch[v]=E}).catch(console.error),y},async unmount(v,A=!0){v=ih(v),!(!v||!e.mounts[v])&&(e.watching&&v in e.unwatch&&(e.unwatch[v](),delete e.unwatch[v]),A&&await ep(e.mounts[v]),e.mountpoints=e.mountpoints.filter(E=>E!==v),delete e.mounts[v])},getMount(v=""){v=ti(v)+":";const A=t(v);return{driver:A.driver,base:A.base}},getMounts(v="",A={}){return v=ti(v),i(v,A.parents).map(N=>({driver:N.driver,base:N.mountpoint}))},keys:(v,A={})=>y.getKeys(v,A),get:(v,A={})=>y.getItem(v,A),set:(v,A,E={})=>y.setItem(v,A,E),has:(v,A={})=>y.hasItem(v,A),del:(v,A={})=>y.removeItem(v,A),remove:(v,A={})=>y.removeItem(v,A)};return y}function Zl(r,e,t){return r.watch?r.watch((i,s)=>e(i,t+s)):()=>{}}async function ep(r){typeof r.dispose=="function"&&await gr(r.dispose)}function ea(r){return new Promise((e,t)=>{r.oncomplete=r.onsuccess=()=>e(r.result),r.onabort=r.onerror=()=>t(r.error)})}function dg(r,e){const t=indexedDB.open(r);t.onupgradeneeded=()=>t.result.createObjectStore(e);const i=ea(t);return(s,a)=>i.then(f=>a(f.transaction(e,s).objectStore(e)))}let gu;function Ho(){return gu||(gu=dg("keyval-store","keyval")),gu}function tp(r,e=Ho()){return e("readonly",t=>ea(t.get(r)))}function B4(r,e,t=Ho()){return t("readwrite",i=>(i.put(e,r),ea(i.transaction)))}function $4(r,e=Ho()){return e("readwrite",t=>(t.delete(r),ea(t.transaction)))}function z4(r=Ho()){return r("readwrite",e=>(e.clear(),ea(e.transaction)))}function k4(r,e){return r.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},ea(r.transaction)}function L4(r=Ho()){return r("readonly",e=>{if(e.getAllKeys)return ea(e.getAllKeys());const t=[];return k4(e,i=>t.push(i.key)).then(()=>t)})}const U4="idb-keyval";var j4=(r={})=>{const e=r.base&&r.base.length>0?`${r.base}:`:"",t=s=>e+s;let i;return r.dbName&&r.storeName&&(i=dg(r.dbName,r.storeName)),{name:U4,options:r,async hasItem(s){return!(typeof await tp(t(s),i)>"u")},async getItem(s){return await tp(t(s),i)??null},setItem(s,a){return B4(t(s),a,i)},removeItem(s){return $4(t(s),i)},getKeys(){return L4(i)},clear(){return z4(i)}}};const F4="WALLET_CONNECT_V2_INDEXED_DB",K4="keyvaluestorage";class H4{constructor(){this.indexedDb=D4({driver:j4({dbName:F4,storeName:K4})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(e=>[e.key,e.value])}async getItem(e){const t=await this.indexedDb.getItem(e);if(t!==null)return t}async setItem(e,t){await this.indexedDb.setItem(e,Ys(t))}async removeItem(e){await this.indexedDb.removeItem(e)}}var vu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ph={exports:{}};(function(){let r;function e(){}r=e,r.prototype.getItem=function(t){return this.hasOwnProperty(t)?String(this[t]):null},r.prototype.setItem=function(t,i){this[t]=String(i)},r.prototype.removeItem=function(t){delete this[t]},r.prototype.clear=function(){const t=this;Object.keys(t).forEach(function(i){t[i]=void 0,delete t[i]})},r.prototype.key=function(t){return t=t||0,Object.keys(this)[t]},r.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof vu<"u"&&vu.localStorage?ph.exports=vu.localStorage:typeof window<"u"&&window.localStorage?ph.exports=window.localStorage:ph.exports=new e})();function V4(r){var e;return[r[0],Ua((e=r[1])!=null?e:"")]}let G4=class{constructor(){this.localStorage=ph.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(V4)}async getItem(e){const t=this.localStorage.getItem(e);if(t!==null)return Ua(t)}async setItem(e,t){this.localStorage.setItem(e,Ys(t))}async removeItem(e){this.localStorage.removeItem(e)}};const W4="wc_storage_version",rp=1,J4=async(r,e,t)=>{const i=W4,s=await e.getItem(i);if(s&&s>=rp){t(e);return}const a=await r.getKeys();if(!a.length){t(e);return}const f=[];for(;a.length;){const p=a.shift();if(!p)continue;const y=p.toLowerCase();if(y.includes("wc@")||y.includes("walletconnect")||y.includes("wc_")||y.includes("wallet_connect")){const v=await r.getItem(p);await e.setItem(p,v),f.push(p)}}await e.setItem(i,rp),t(e),Q4(r,f)},Q4=async(r,e)=>{e.length&&e.forEach(async t=>{await r.removeItem(t)})};let Y4=class{constructor(){this.initialized=!1,this.setInitialized=t=>{this.storage=t,this.initialized=!0};const e=new G4;this.storage=e;try{const t=new H4;J4(e,t,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,t){return await this.initialize(),this.storage.setItem(e,t)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise(e=>{const t=setInterval(()=>{this.initialized&&(clearInterval(t),e())},20)})}};class ta{}let X4=class extends ta{constructor(e){super()}};const ip=ye.FIVE_SECONDS,ja={pulse:"heartbeat_pulse"};class _0 extends X4{constructor(e){super(e),this.events=new zi.EventEmitter,this.interval=ip,this.interval=(e==null?void 0:e.interval)||ip}static async init(e){const t=new _0(e);return await t.init(),t}async init(){await this.initialize()}stop(){clearInterval(this.intervalRef)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async initialize(){this.intervalRef=setInterval(()=>this.pulse(),ye.toMiliseconds(this.interval))}pulse(){this.events.emit(ja.pulse)}}var A0={},lg={};(function(r){Object.defineProperty(r,"__esModule",{value:!0});var e=Z5,t=rg;r.DIGEST_LENGTH=64,r.BLOCK_SIZE=128;var i=function(){function p(){this.digestLength=r.DIGEST_LENGTH,this.blockSize=r.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return p.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},p.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},p.prototype.clean=function(){t.wipe(this._buffer),t.wipe(this._tempHi),t.wipe(this._tempLo),this.reset()},p.prototype.update=function(y,v){if(v===void 0&&(v=y.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var A=0;if(this._bytesHashed+=v,this._bufferLength>0){for(;this._bufferLength<r.BLOCK_SIZE&&v>0;)this._buffer[this._bufferLength++]=y[A++],v--;this._bufferLength===this.blockSize&&(a(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(v>=this.blockSize&&(A=a(this._tempHi,this._tempLo,this._stateHi,this._stateLo,y,A,v),v%=this.blockSize);v>0;)this._buffer[this._bufferLength++]=y[A++],v--;return this},p.prototype.finish=function(y){if(!this._finished){var v=this._bytesHashed,A=this._bufferLength,E=v/536870912|0,N=v<<3,O=v%128<112?128:256;this._buffer[A]=128;for(var T=A+1;T<O-8;T++)this._buffer[T]=0;e.writeUint32BE(E,this._buffer,O-8),e.writeUint32BE(N,this._buffer,O-4),a(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,O),this._finished=!0}for(var T=0;T<this.digestLength/8;T++)e.writeUint32BE(this._stateHi[T],y,T*8),e.writeUint32BE(this._stateLo[T],y,T*8+4);return this},p.prototype.digest=function(){var y=new Uint8Array(this.digestLength);return this.finish(y),y},p.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},p.prototype.restoreState=function(y){return this._stateHi.set(y.stateHi),this._stateLo.set(y.stateLo),this._bufferLength=y.bufferLength,y.buffer&&this._buffer.set(y.buffer),this._bytesHashed=y.bytesHashed,this._finished=!1,this},p.prototype.cleanSavedState=function(y){t.wipe(y.stateHi),t.wipe(y.stateLo),y.buffer&&t.wipe(y.buffer),y.bufferLength=0,y.bytesHashed=0},p}();r.SHA512=i;var s=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function a(p,y,v,A,E,N,O){for(var T=v[0],F=v[1],G=v[2],W=v[3],ee=v[4],de=v[5],se=v[6],ae=v[7],ue=A[0],ne=A[1],ve=A[2],Ae=A[3],ot=A[4],$=A[5],b=A[6],c=A[7],u,g,_,M,S,x,d,l;O>=128;){for(var R=0;R<16;R++){var X=8*R+N;p[R]=e.readUint32BE(E,X),y[R]=e.readUint32BE(E,X+4)}for(var R=0;R<80;R++){var te=T,I=F,J=G,D=W,k=ee,L=de,m=se,z=ae,Y=ue,oe=ne,ce=ve,pe=Ae,ge=ot,Te=$,nt=b,Me=c;if(u=ae,g=c,S=g&65535,x=g>>>16,d=u&65535,l=u>>>16,u=(ee>>>14|ot<<18)^(ee>>>18|ot<<14)^(ot>>>9|ee<<23),g=(ot>>>14|ee<<18)^(ot>>>18|ee<<14)^(ee>>>9|ot<<23),S+=g&65535,x+=g>>>16,d+=u&65535,l+=u>>>16,u=ee&de^~ee&se,g=ot&$^~ot&b,S+=g&65535,x+=g>>>16,d+=u&65535,l+=u>>>16,u=s[R*2],g=s[R*2+1],S+=g&65535,x+=g>>>16,d+=u&65535,l+=u>>>16,u=p[R%16],g=y[R%16],S+=g&65535,x+=g>>>16,d+=u&65535,l+=u>>>16,x+=S>>>16,d+=x>>>16,l+=d>>>16,_=d&65535|l<<16,M=S&65535|x<<16,u=_,g=M,S=g&65535,x=g>>>16,d=u&65535,l=u>>>16,u=(T>>>28|ue<<4)^(ue>>>2|T<<30)^(ue>>>7|T<<25),g=(ue>>>28|T<<4)^(T>>>2|ue<<30)^(T>>>7|ue<<25),S+=g&65535,x+=g>>>16,d+=u&65535,l+=u>>>16,u=T&F^T&G^F&G,g=ue&ne^ue&ve^ne&ve,S+=g&65535,x+=g>>>16,d+=u&65535,l+=u>>>16,x+=S>>>16,d+=x>>>16,l+=d>>>16,z=d&65535|l<<16,Me=S&65535|x<<16,u=D,g=pe,S=g&65535,x=g>>>16,d=u&65535,l=u>>>16,u=_,g=M,S+=g&65535,x+=g>>>16,d+=u&65535,l+=u>>>16,x+=S>>>16,d+=x>>>16,l+=d>>>16,D=d&65535|l<<16,pe=S&65535|x<<16,F=te,G=I,W=J,ee=D,de=k,se=L,ae=m,T=z,ne=Y,ve=oe,Ae=ce,ot=pe,$=ge,b=Te,c=nt,ue=Me,R%16===15)for(var X=0;X<16;X++)u=p[X],g=y[X],S=g&65535,x=g>>>16,d=u&65535,l=u>>>16,u=p[(X+9)%16],g=y[(X+9)%16],S+=g&65535,x+=g>>>16,d+=u&65535,l+=u>>>16,_=p[(X+1)%16],M=y[(X+1)%16],u=(_>>>1|M<<31)^(_>>>8|M<<24)^_>>>7,g=(M>>>1|_<<31)^(M>>>8|_<<24)^(M>>>7|_<<25),S+=g&65535,x+=g>>>16,d+=u&65535,l+=u>>>16,_=p[(X+14)%16],M=y[(X+14)%16],u=(_>>>19|M<<13)^(M>>>29|_<<3)^_>>>6,g=(M>>>19|_<<13)^(_>>>29|M<<3)^(M>>>6|_<<26),S+=g&65535,x+=g>>>16,d+=u&65535,l+=u>>>16,x+=S>>>16,d+=x>>>16,l+=d>>>16,p[X]=d&65535|l<<16,y[X]=S&65535|x<<16}u=T,g=ue,S=g&65535,x=g>>>16,d=u&65535,l=u>>>16,u=v[0],g=A[0],S+=g&65535,x+=g>>>16,d+=u&65535,l+=u>>>16,x+=S>>>16,d+=x>>>16,l+=d>>>16,v[0]=T=d&65535|l<<16,A[0]=ue=S&65535|x<<16,u=F,g=ne,S=g&65535,x=g>>>16,d=u&65535,l=u>>>16,u=v[1],g=A[1],S+=g&65535,x+=g>>>16,d+=u&65535,l+=u>>>16,x+=S>>>16,d+=x>>>16,l+=d>>>16,v[1]=F=d&65535|l<<16,A[1]=ne=S&65535|x<<16,u=G,g=ve,S=g&65535,x=g>>>16,d=u&65535,l=u>>>16,u=v[2],g=A[2],S+=g&65535,x+=g>>>16,d+=u&65535,l+=u>>>16,x+=S>>>16,d+=x>>>16,l+=d>>>16,v[2]=G=d&65535|l<<16,A[2]=ve=S&65535|x<<16,u=W,g=Ae,S=g&65535,x=g>>>16,d=u&65535,l=u>>>16,u=v[3],g=A[3],S+=g&65535,x+=g>>>16,d+=u&65535,l+=u>>>16,x+=S>>>16,d+=x>>>16,l+=d>>>16,v[3]=W=d&65535|l<<16,A[3]=Ae=S&65535|x<<16,u=ee,g=ot,S=g&65535,x=g>>>16,d=u&65535,l=u>>>16,u=v[4],g=A[4],S+=g&65535,x+=g>>>16,d+=u&65535,l+=u>>>16,x+=S>>>16,d+=x>>>16,l+=d>>>16,v[4]=ee=d&65535|l<<16,A[4]=ot=S&65535|x<<16,u=de,g=$,S=g&65535,x=g>>>16,d=u&65535,l=u>>>16,u=v[5],g=A[5],S+=g&65535,x+=g>>>16,d+=u&65535,l+=u>>>16,x+=S>>>16,d+=x>>>16,l+=d>>>16,v[5]=de=d&65535|l<<16,A[5]=$=S&65535|x<<16,u=se,g=b,S=g&65535,x=g>>>16,d=u&65535,l=u>>>16,u=v[6],g=A[6],S+=g&65535,x+=g>>>16,d+=u&65535,l+=u>>>16,x+=S>>>16,d+=x>>>16,l+=d>>>16,v[6]=se=d&65535|l<<16,A[6]=b=S&65535|x<<16,u=ae,g=c,S=g&65535,x=g>>>16,d=u&65535,l=u>>>16,u=v[7],g=A[7],S+=g&65535,x+=g>>>16,d+=u&65535,l+=u>>>16,x+=S>>>16,d+=x>>>16,l+=d>>>16,v[7]=ae=d&65535|l<<16,A[7]=c=S&65535|x<<16,N+=128,O-=128}return N}function f(p){var y=new i;y.update(p);var v=y.digest();return y.clean(),v}r.hash=f})(lg);(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.convertSecretKeyToX25519=r.convertPublicKeyToX25519=r.verify=r.sign=r.extractPublicKeyFromSecretKey=r.generateKeyPair=r.generateKeyPairFromSeed=r.SEED_LENGTH=r.SECRET_KEY_LENGTH=r.PUBLIC_KEY_LENGTH=r.SIGNATURE_LENGTH=void 0;const e=$h,t=lg,i=rg;r.SIGNATURE_LENGTH=64,r.PUBLIC_KEY_LENGTH=32,r.SECRET_KEY_LENGTH=64,r.SEED_LENGTH=32;function s(D){const k=new Float64Array(16);if(D)for(let L=0;L<D.length;L++)k[L]=D[L];return k}const a=new Uint8Array(32);a[0]=9;const f=s(),p=s([1]),y=s([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),v=s([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),A=s([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),E=s([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),N=s([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function O(D,k){for(let L=0;L<16;L++)D[L]=k[L]|0}function T(D){let k=1;for(let L=0;L<16;L++){let m=D[L]+k+65535;k=Math.floor(m/65536),D[L]=m-k*65536}D[0]+=k-1+37*(k-1)}function F(D,k,L){const m=~(L-1);for(let z=0;z<16;z++){const Y=m&(D[z]^k[z]);D[z]^=Y,k[z]^=Y}}function G(D,k){const L=s(),m=s();for(let z=0;z<16;z++)m[z]=k[z];T(m),T(m),T(m);for(let z=0;z<2;z++){L[0]=m[0]-65517;for(let oe=1;oe<15;oe++)L[oe]=m[oe]-65535-(L[oe-1]>>16&1),L[oe-1]&=65535;L[15]=m[15]-32767-(L[14]>>16&1);const Y=L[15]>>16&1;L[14]&=65535,F(m,L,1-Y)}for(let z=0;z<16;z++)D[2*z]=m[z]&255,D[2*z+1]=m[z]>>8}function W(D,k){let L=0;for(let m=0;m<32;m++)L|=D[m]^k[m];return(1&L-1>>>8)-1}function ee(D,k){const L=new Uint8Array(32),m=new Uint8Array(32);return G(L,D),G(m,k),W(L,m)}function de(D){const k=new Uint8Array(32);return G(k,D),k[0]&1}function se(D,k){for(let L=0;L<16;L++)D[L]=k[2*L]+(k[2*L+1]<<8);D[15]&=32767}function ae(D,k,L){for(let m=0;m<16;m++)D[m]=k[m]+L[m]}function ue(D,k,L){for(let m=0;m<16;m++)D[m]=k[m]-L[m]}function ne(D,k,L){let m,z,Y=0,oe=0,ce=0,pe=0,ge=0,Te=0,nt=0,Me=0,Ve=0,ze=0,_e=0,je=0,Ge=0,be=0,Fe=0,De=0,we=0,Je=0,ke=0,Pe=0,ct=0,ft=0,qe=0,ht=0,ut=0,Be=0,wt=0,dt=0,Le=0,At=0,It=0,xe=L[0],Ke=L[1],Qe=L[2],Ee=L[3],We=L[4],He=L[5],Re=L[6],st=L[7],Ye=L[8],Ne=L[9],Xe=L[10],et=L[11],Ie=L[12],Ue=L[13],at=L[14],Ce=L[15];m=k[0],Y+=m*xe,oe+=m*Ke,ce+=m*Qe,pe+=m*Ee,ge+=m*We,Te+=m*He,nt+=m*Re,Me+=m*st,Ve+=m*Ye,ze+=m*Ne,_e+=m*Xe,je+=m*et,Ge+=m*Ie,be+=m*Ue,Fe+=m*at,De+=m*Ce,m=k[1],oe+=m*xe,ce+=m*Ke,pe+=m*Qe,ge+=m*Ee,Te+=m*We,nt+=m*He,Me+=m*Re,Ve+=m*st,ze+=m*Ye,_e+=m*Ne,je+=m*Xe,Ge+=m*et,be+=m*Ie,Fe+=m*Ue,De+=m*at,we+=m*Ce,m=k[2],ce+=m*xe,pe+=m*Ke,ge+=m*Qe,Te+=m*Ee,nt+=m*We,Me+=m*He,Ve+=m*Re,ze+=m*st,_e+=m*Ye,je+=m*Ne,Ge+=m*Xe,be+=m*et,Fe+=m*Ie,De+=m*Ue,we+=m*at,Je+=m*Ce,m=k[3],pe+=m*xe,ge+=m*Ke,Te+=m*Qe,nt+=m*Ee,Me+=m*We,Ve+=m*He,ze+=m*Re,_e+=m*st,je+=m*Ye,Ge+=m*Ne,be+=m*Xe,Fe+=m*et,De+=m*Ie,we+=m*Ue,Je+=m*at,ke+=m*Ce,m=k[4],ge+=m*xe,Te+=m*Ke,nt+=m*Qe,Me+=m*Ee,Ve+=m*We,ze+=m*He,_e+=m*Re,je+=m*st,Ge+=m*Ye,be+=m*Ne,Fe+=m*Xe,De+=m*et,we+=m*Ie,Je+=m*Ue,ke+=m*at,Pe+=m*Ce,m=k[5],Te+=m*xe,nt+=m*Ke,Me+=m*Qe,Ve+=m*Ee,ze+=m*We,_e+=m*He,je+=m*Re,Ge+=m*st,be+=m*Ye,Fe+=m*Ne,De+=m*Xe,we+=m*et,Je+=m*Ie,ke+=m*Ue,Pe+=m*at,ct+=m*Ce,m=k[6],nt+=m*xe,Me+=m*Ke,Ve+=m*Qe,ze+=m*Ee,_e+=m*We,je+=m*He,Ge+=m*Re,be+=m*st,Fe+=m*Ye,De+=m*Ne,we+=m*Xe,Je+=m*et,ke+=m*Ie,Pe+=m*Ue,ct+=m*at,ft+=m*Ce,m=k[7],Me+=m*xe,Ve+=m*Ke,ze+=m*Qe,_e+=m*Ee,je+=m*We,Ge+=m*He,be+=m*Re,Fe+=m*st,De+=m*Ye,we+=m*Ne,Je+=m*Xe,ke+=m*et,Pe+=m*Ie,ct+=m*Ue,ft+=m*at,qe+=m*Ce,m=k[8],Ve+=m*xe,ze+=m*Ke,_e+=m*Qe,je+=m*Ee,Ge+=m*We,be+=m*He,Fe+=m*Re,De+=m*st,we+=m*Ye,Je+=m*Ne,ke+=m*Xe,Pe+=m*et,ct+=m*Ie,ft+=m*Ue,qe+=m*at,ht+=m*Ce,m=k[9],ze+=m*xe,_e+=m*Ke,je+=m*Qe,Ge+=m*Ee,be+=m*We,Fe+=m*He,De+=m*Re,we+=m*st,Je+=m*Ye,ke+=m*Ne,Pe+=m*Xe,ct+=m*et,ft+=m*Ie,qe+=m*Ue,ht+=m*at,ut+=m*Ce,m=k[10],_e+=m*xe,je+=m*Ke,Ge+=m*Qe,be+=m*Ee,Fe+=m*We,De+=m*He,we+=m*Re,Je+=m*st,ke+=m*Ye,Pe+=m*Ne,ct+=m*Xe,ft+=m*et,qe+=m*Ie,ht+=m*Ue,ut+=m*at,Be+=m*Ce,m=k[11],je+=m*xe,Ge+=m*Ke,be+=m*Qe,Fe+=m*Ee,De+=m*We,we+=m*He,Je+=m*Re,ke+=m*st,Pe+=m*Ye,ct+=m*Ne,ft+=m*Xe,qe+=m*et,ht+=m*Ie,ut+=m*Ue,Be+=m*at,wt+=m*Ce,m=k[12],Ge+=m*xe,be+=m*Ke,Fe+=m*Qe,De+=m*Ee,we+=m*We,Je+=m*He,ke+=m*Re,Pe+=m*st,ct+=m*Ye,ft+=m*Ne,qe+=m*Xe,ht+=m*et,ut+=m*Ie,Be+=m*Ue,wt+=m*at,dt+=m*Ce,m=k[13],be+=m*xe,Fe+=m*Ke,De+=m*Qe,we+=m*Ee,Je+=m*We,ke+=m*He,Pe+=m*Re,ct+=m*st,ft+=m*Ye,qe+=m*Ne,ht+=m*Xe,ut+=m*et,Be+=m*Ie,wt+=m*Ue,dt+=m*at,Le+=m*Ce,m=k[14],Fe+=m*xe,De+=m*Ke,we+=m*Qe,Je+=m*Ee,ke+=m*We,Pe+=m*He,ct+=m*Re,ft+=m*st,qe+=m*Ye,ht+=m*Ne,ut+=m*Xe,Be+=m*et,wt+=m*Ie,dt+=m*Ue,Le+=m*at,At+=m*Ce,m=k[15],De+=m*xe,we+=m*Ke,Je+=m*Qe,ke+=m*Ee,Pe+=m*We,ct+=m*He,ft+=m*Re,qe+=m*st,ht+=m*Ye,ut+=m*Ne,Be+=m*Xe,wt+=m*et,dt+=m*Ie,Le+=m*Ue,At+=m*at,It+=m*Ce,Y+=38*we,oe+=38*Je,ce+=38*ke,pe+=38*Pe,ge+=38*ct,Te+=38*ft,nt+=38*qe,Me+=38*ht,Ve+=38*ut,ze+=38*Be,_e+=38*wt,je+=38*dt,Ge+=38*Le,be+=38*At,Fe+=38*It,z=1,m=Y+z+65535,z=Math.floor(m/65536),Y=m-z*65536,m=oe+z+65535,z=Math.floor(m/65536),oe=m-z*65536,m=ce+z+65535,z=Math.floor(m/65536),ce=m-z*65536,m=pe+z+65535,z=Math.floor(m/65536),pe=m-z*65536,m=ge+z+65535,z=Math.floor(m/65536),ge=m-z*65536,m=Te+z+65535,z=Math.floor(m/65536),Te=m-z*65536,m=nt+z+65535,z=Math.floor(m/65536),nt=m-z*65536,m=Me+z+65535,z=Math.floor(m/65536),Me=m-z*65536,m=Ve+z+65535,z=Math.floor(m/65536),Ve=m-z*65536,m=ze+z+65535,z=Math.floor(m/65536),ze=m-z*65536,m=_e+z+65535,z=Math.floor(m/65536),_e=m-z*65536,m=je+z+65535,z=Math.floor(m/65536),je=m-z*65536,m=Ge+z+65535,z=Math.floor(m/65536),Ge=m-z*65536,m=be+z+65535,z=Math.floor(m/65536),be=m-z*65536,m=Fe+z+65535,z=Math.floor(m/65536),Fe=m-z*65536,m=De+z+65535,z=Math.floor(m/65536),De=m-z*65536,Y+=z-1+37*(z-1),z=1,m=Y+z+65535,z=Math.floor(m/65536),Y=m-z*65536,m=oe+z+65535,z=Math.floor(m/65536),oe=m-z*65536,m=ce+z+65535,z=Math.floor(m/65536),ce=m-z*65536,m=pe+z+65535,z=Math.floor(m/65536),pe=m-z*65536,m=ge+z+65535,z=Math.floor(m/65536),ge=m-z*65536,m=Te+z+65535,z=Math.floor(m/65536),Te=m-z*65536,m=nt+z+65535,z=Math.floor(m/65536),nt=m-z*65536,m=Me+z+65535,z=Math.floor(m/65536),Me=m-z*65536,m=Ve+z+65535,z=Math.floor(m/65536),Ve=m-z*65536,m=ze+z+65535,z=Math.floor(m/65536),ze=m-z*65536,m=_e+z+65535,z=Math.floor(m/65536),_e=m-z*65536,m=je+z+65535,z=Math.floor(m/65536),je=m-z*65536,m=Ge+z+65535,z=Math.floor(m/65536),Ge=m-z*65536,m=be+z+65535,z=Math.floor(m/65536),be=m-z*65536,m=Fe+z+65535,z=Math.floor(m/65536),Fe=m-z*65536,m=De+z+65535,z=Math.floor(m/65536),De=m-z*65536,Y+=z-1+37*(z-1),D[0]=Y,D[1]=oe,D[2]=ce,D[3]=pe,D[4]=ge,D[5]=Te,D[6]=nt,D[7]=Me,D[8]=Ve,D[9]=ze,D[10]=_e,D[11]=je,D[12]=Ge,D[13]=be,D[14]=Fe,D[15]=De}function ve(D,k){ne(D,k,k)}function Ae(D,k){const L=s();let m;for(m=0;m<16;m++)L[m]=k[m];for(m=253;m>=0;m--)ve(L,L),m!==2&&m!==4&&ne(L,L,k);for(m=0;m<16;m++)D[m]=L[m]}function ot(D,k){const L=s();let m;for(m=0;m<16;m++)L[m]=k[m];for(m=250;m>=0;m--)ve(L,L),m!==1&&ne(L,L,k);for(m=0;m<16;m++)D[m]=L[m]}function $(D,k){const L=s(),m=s(),z=s(),Y=s(),oe=s(),ce=s(),pe=s(),ge=s(),Te=s();ue(L,D[1],D[0]),ue(Te,k[1],k[0]),ne(L,L,Te),ae(m,D[0],D[1]),ae(Te,k[0],k[1]),ne(m,m,Te),ne(z,D[3],k[3]),ne(z,z,v),ne(Y,D[2],k[2]),ae(Y,Y,Y),ue(oe,m,L),ue(ce,Y,z),ae(pe,Y,z),ae(ge,m,L),ne(D[0],oe,ce),ne(D[1],ge,pe),ne(D[2],pe,ce),ne(D[3],oe,ge)}function b(D,k,L){for(let m=0;m<4;m++)F(D[m],k[m],L)}function c(D,k){const L=s(),m=s(),z=s();Ae(z,k[2]),ne(L,k[0],z),ne(m,k[1],z),G(D,m),D[31]^=de(L)<<7}function u(D,k,L){O(D[0],f),O(D[1],p),O(D[2],p),O(D[3],f);for(let m=255;m>=0;--m){const z=L[m/8|0]>>(m&7)&1;b(D,k,z),$(k,D),$(D,D),b(D,k,z)}}function g(D,k){const L=[s(),s(),s(),s()];O(L[0],A),O(L[1],E),O(L[2],p),ne(L[3],A,E),u(D,L,k)}function _(D){if(D.length!==r.SEED_LENGTH)throw new Error(`ed25519: seed must be ${r.SEED_LENGTH} bytes`);const k=(0,t.hash)(D);k[0]&=248,k[31]&=127,k[31]|=64;const L=new Uint8Array(32),m=[s(),s(),s(),s()];g(m,k),c(L,m);const z=new Uint8Array(64);return z.set(D),z.set(L,32),{publicKey:L,secretKey:z}}r.generateKeyPairFromSeed=_;function M(D){const k=(0,e.randomBytes)(32,D),L=_(k);return(0,i.wipe)(k),L}r.generateKeyPair=M;function S(D){if(D.length!==r.SECRET_KEY_LENGTH)throw new Error(`ed25519: secret key must be ${r.SECRET_KEY_LENGTH} bytes`);return new Uint8Array(D.subarray(32))}r.extractPublicKeyFromSecretKey=S;const x=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function d(D,k){let L,m,z,Y;for(m=63;m>=32;--m){for(L=0,z=m-32,Y=m-12;z<Y;++z)k[z]+=L-16*k[m]*x[z-(m-32)],L=Math.floor((k[z]+128)/256),k[z]-=L*256;k[z]+=L,k[m]=0}for(L=0,z=0;z<32;z++)k[z]+=L-(k[31]>>4)*x[z],L=k[z]>>8,k[z]&=255;for(z=0;z<32;z++)k[z]-=L*x[z];for(m=0;m<32;m++)k[m+1]+=k[m]>>8,D[m]=k[m]&255}function l(D){const k=new Float64Array(64);for(let L=0;L<64;L++)k[L]=D[L];for(let L=0;L<64;L++)D[L]=0;d(D,k)}function R(D,k){const L=new Float64Array(64),m=[s(),s(),s(),s()],z=(0,t.hash)(D.subarray(0,32));z[0]&=248,z[31]&=127,z[31]|=64;const Y=new Uint8Array(64);Y.set(z.subarray(32),32);const oe=new t.SHA512;oe.update(Y.subarray(32)),oe.update(k);const ce=oe.digest();oe.clean(),l(ce),g(m,ce),c(Y,m),oe.reset(),oe.update(Y.subarray(0,32)),oe.update(D.subarray(32)),oe.update(k);const pe=oe.digest();l(pe);for(let ge=0;ge<32;ge++)L[ge]=ce[ge];for(let ge=0;ge<32;ge++)for(let Te=0;Te<32;Te++)L[ge+Te]+=pe[ge]*z[Te];return d(Y.subarray(32),L),Y}r.sign=R;function X(D,k){const L=s(),m=s(),z=s(),Y=s(),oe=s(),ce=s(),pe=s();return O(D[2],p),se(D[1],k),ve(z,D[1]),ne(Y,z,y),ue(z,z,D[2]),ae(Y,D[2],Y),ve(oe,Y),ve(ce,oe),ne(pe,ce,oe),ne(L,pe,z),ne(L,L,Y),ot(L,L),ne(L,L,z),ne(L,L,Y),ne(L,L,Y),ne(D[0],L,Y),ve(m,D[0]),ne(m,m,Y),ee(m,z)&&ne(D[0],D[0],N),ve(m,D[0]),ne(m,m,Y),ee(m,z)?-1:(de(D[0])===k[31]>>7&&ue(D[0],f,D[0]),ne(D[3],D[0],D[1]),0)}function te(D,k,L){const m=new Uint8Array(32),z=[s(),s(),s(),s()],Y=[s(),s(),s(),s()];if(L.length!==r.SIGNATURE_LENGTH)throw new Error(`ed25519: signature must be ${r.SIGNATURE_LENGTH} bytes`);if(X(Y,D))return!1;const oe=new t.SHA512;oe.update(L.subarray(0,32)),oe.update(D),oe.update(k);const ce=oe.digest();return l(ce),u(z,Y,ce),g(Y,L.subarray(32)),$(z,Y),c(m,z),!W(L,m)}r.verify=te;function I(D){let k=[s(),s(),s(),s()];if(X(k,D))throw new Error("Ed25519: invalid public key");let L=s(),m=s(),z=k[1];ae(L,p,z),ue(m,p,z),Ae(m,m),ne(L,L,m);let Y=new Uint8Array(32);return G(Y,L),Y}r.convertPublicKeyToX25519=I;function J(D){const k=(0,t.hash)(D.subarray(0,32));k[0]&=248,k[31]&=127,k[31]|=64;const L=new Uint8Array(k.subarray(0,32));return(0,i.wipe)(k),L}r.convertSecretKeyToX25519=J})(A0);const Z4="EdDSA",ew="JWT",xh=".",Lh="base64url",pg="utf8",gg="utf8",tw=":",rw="did",iw="key",np="base58btc",nw="z",sw="K36",aw=32;function sp(r){return Ua(Br(xr(r,Lh),pg))}function Eh(r){return Br(xr(Ys(r),pg),Lh)}function vg(r){const e=xr(sw,np),t=nw+Br(Yu([e,r]),np);return[rw,iw,t].join(tw)}function ow(r){return Br(r,Lh)}function cw(r){return xr(r,Lh)}function hw(r){return xr([Eh(r.header),Eh(r.payload)].join(xh),gg)}function fw(r){return[Eh(r.header),Eh(r.payload),ow(r.signature)].join(xh)}function Zu(r){const e=r.split(xh),t=sp(e[0]),i=sp(e[1]),s=cw(e[2]),a=xr(e.slice(0,2).join(xh),gg);return{header:t,payload:i,signature:s,data:a}}function ap(r=$h.randomBytes(aw)){return A0.generateKeyPairFromSeed(r)}async function uw(r,e,t,i,s=ye.fromMiliseconds(Date.now())){const a={alg:Z4,typ:ew},f=vg(i.publicKey),p=s+t,y={iss:f,sub:r,aud:e,iat:s,exp:p},v=hw({header:a,payload:y}),A=A0.sign(i.secretKey,v);return fw({header:a,payload:y,signature:A})}const dw="PARSE_ERROR",lw="INVALID_REQUEST",pw="METHOD_NOT_FOUND",gw="INVALID_PARAMS",bg="INTERNAL_ERROR",x0="SERVER_ERROR",vw=[-32700,-32600,-32601,-32602,-32603],Bo={[dw]:{code:-32700,message:"Parse error"},[lw]:{code:-32600,message:"Invalid Request"},[pw]:{code:-32601,message:"Method not found"},[gw]:{code:-32602,message:"Invalid params"},[bg]:{code:-32603,message:"Internal error"},[x0]:{code:-32e3,message:"Server error"}},mg=x0;function bw(r){return vw.includes(r)}function op(r){return Object.keys(Bo).includes(r)?Bo[r]:Bo[mg]}function mw(r){const e=Object.values(Bo).find(t=>t.code===r);return e||Bo[mg]}function yg(r,e,t){return r.message.includes("getaddrinfo ENOTFOUND")||r.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${t} RPC url at ${e}`):r}function ys(r=3){const e=Date.now()*Math.pow(10,r),t=Math.floor(Math.random()*Math.pow(10,r));return e+t}function Vs(r=6){return BigInt(ys(r))}function Ca(r,e,t){return{id:t||ys(),jsonrpc:"2.0",method:r,params:e}}function Uh(r,e){return{id:r,jsonrpc:"2.0",result:e}}function jh(r,e,t){return{id:r,jsonrpc:"2.0",error:yw(e)}}function yw(r,e){return typeof r>"u"?op(bg):(typeof r=="string"&&(r=Object.assign(Object.assign({},op(x0)),{message:r})),bw(r.code)&&(r=mw(r.code)),r)}class ww{}let _w=class extends ww{constructor(){super()}},Aw=class extends _w{constructor(e){super()}};const xw="^https?:",Ew="^wss?:";function Iw(r){const e=r.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function wg(r,e){const t=Iw(r);return typeof t>"u"?!1:new RegExp(e).test(t)}function cp(r){return wg(r,xw)}function hp(r){return wg(r,Ew)}function Mw(r){return new RegExp("wss?://localhost(:d{2,5})?").test(r)}function _g(r){return typeof r=="object"&&"id"in r&&"jsonrpc"in r&&r.jsonrpc==="2.0"}function E0(r){return _g(r)&&"method"in r}function Fh(r){return _g(r)&&(mn(r)||Di(r))}function mn(r){return"result"in r}function Di(r){return"error"in r}class hn extends Aw{constructor(e){super(e),this.events=new zi.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async request(e,t){return this.requestStrict(Ca(e.method,e.params||[],e.id||Vs().toString()),t)}async requestStrict(e,t){return new Promise(async(i,s)=>{if(!this.connection.connected)try{await this.open()}catch(a){s(a)}this.events.on(`${e.id}`,a=>{Di(a)?s(a.error):i(a.result)});try{await this.connection.send(e,t)}catch(a){s(a)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),Fh(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}}const Sw=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),Pw=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",fp=r=>r.split("?")[0],up=10,Rw=Sw();let Nw=class{constructor(e){if(this.url=e,this.events=new zi.EventEmitter,this.registering=!1,!hp(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,t)=>{if(typeof this.socket>"u"){t(new Error("Connection already closed"));return}this.socket.onclose=i=>{this.onClose(i),e()},this.socket.close()})}async send(e){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(Ys(e))}catch(t){this.onError(e.id,t)}}register(e=this.url){if(!hp(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const t=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=t||this.events.listenerCount("open")>=t)&&this.events.setMaxListeners(t+1),new Promise((i,s)=>{this.events.once("register_error",a=>{this.resetMaxListeners(),s(a)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return s(new Error("WebSocket connection is missing or invalid"));i(this.socket)})})}return this.url=e,this.registering=!0,new Promise((t,i)=>{const s=new URLSearchParams(e).get("origin"),a=e4.isReactNative()?{headers:{origin:s}}:{rejectUnauthorized:!Mw(e)},f=new Rw(e,[],a);Pw()?f.onerror=p=>{const y=p;i(this.emitError(y.error))}:f.on("error",p=>{i(this.emitError(p))}),f.onopen=()=>{this.onOpen(f),t(f)}})}onOpen(e){e.onmessage=t=>this.onPayload(t),e.onclose=t=>this.onClose(t),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const t=typeof e.data=="string"?Ua(e.data):e.data;this.events.emit("payload",t)}onError(e,t){const i=this.parseError(t),s=i.message||i.toString(),a=jh(e,s);this.events.emit("payload",a)}parseError(e,t=this.url){return yg(e,fp(t),"WS")}resetMaxListeners(){this.events.getMaxListeners()>up&&this.events.setMaxListeners(up)}emitError(e){const t=this.parseError(new Error((e==null?void 0:e.message)||`WebSocket connection failed for host: ${fp(this.url)}`));return this.events.emit("register_error",t),t}};var Ih={exports:{}};Ih.exports;(function(r,e){var t=200,i="__lodash_hash_undefined__",s=1,a=2,f=9007199254740991,p="[object Arguments]",y="[object Array]",v="[object AsyncFunction]",A="[object Boolean]",E="[object Date]",N="[object Error]",O="[object Function]",T="[object GeneratorFunction]",F="[object Map]",G="[object Number]",W="[object Null]",ee="[object Object]",de="[object Promise]",se="[object Proxy]",ae="[object RegExp]",ue="[object Set]",ne="[object String]",ve="[object Symbol]",Ae="[object Undefined]",ot="[object WeakMap]",$="[object ArrayBuffer]",b="[object DataView]",c="[object Float32Array]",u="[object Float64Array]",g="[object Int8Array]",_="[object Int16Array]",M="[object Int32Array]",S="[object Uint8Array]",x="[object Uint8ClampedArray]",d="[object Uint16Array]",l="[object Uint32Array]",R=/[\\^$.*+?()[\]{}|]/g,X=/^\[object .+?Constructor\]$/,te=/^(?:0|[1-9]\d*)$/,I={};I[c]=I[u]=I[g]=I[_]=I[M]=I[S]=I[x]=I[d]=I[l]=!0,I[p]=I[y]=I[$]=I[A]=I[b]=I[E]=I[N]=I[O]=I[F]=I[G]=I[ee]=I[ae]=I[ue]=I[ne]=I[ot]=!1;var J=typeof Oo=="object"&&Oo&&Oo.Object===Object&&Oo,D=typeof self=="object"&&self&&self.Object===Object&&self,k=J||D||Function("return this")(),L=e&&!e.nodeType&&e,m=L&&!0&&r&&!r.nodeType&&r,z=m&&m.exports===L,Y=z&&J.process,oe=function(){try{return Y&&Y.binding&&Y.binding("util")}catch{}}(),ce=oe&&oe.isTypedArray;function pe(B,K){for(var he=-1,Se=B==null?0:B.length,Ut=0,pt=[];++he<Se;){var Ht=B[he];K(Ht,he,B)&&(pt[Ut++]=Ht)}return pt}function ge(B,K){for(var he=-1,Se=K.length,Ut=B.length;++he<Se;)B[Ut+he]=K[he];return B}function Te(B,K){for(var he=-1,Se=B==null?0:B.length;++he<Se;)if(K(B[he],he,B))return!0;return!1}function nt(B,K){for(var he=-1,Se=Array(B);++he<B;)Se[he]=K(he);return Se}function Me(B){return function(K){return B(K)}}function Ve(B,K){return B.has(K)}function ze(B,K){return B==null?void 0:B[K]}function _e(B){var K=-1,he=Array(B.size);return B.forEach(function(Se,Ut){he[++K]=[Ut,Se]}),he}function je(B,K){return function(he){return B(K(he))}}function Ge(B){var K=-1,he=Array(B.size);return B.forEach(function(Se){he[++K]=Se}),he}var be=Array.prototype,Fe=Function.prototype,De=Object.prototype,we=k["__core-js_shared__"],Je=Fe.toString,ke=De.hasOwnProperty,Pe=function(){var B=/[^.]+$/.exec(we&&we.keys&&we.keys.IE_PROTO||"");return B?"Symbol(src)_1."+B:""}(),ct=De.toString,ft=RegExp("^"+Je.call(ke).replace(R,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),qe=z?k.Buffer:void 0,ht=k.Symbol,ut=k.Uint8Array,Be=De.propertyIsEnumerable,wt=be.splice,dt=ht?ht.toStringTag:void 0,Le=Object.getOwnPropertySymbols,At=qe?qe.isBuffer:void 0,It=je(Object.keys,Object),xe=hi(k,"DataView"),Ke=hi(k,"Map"),Qe=hi(k,"Promise"),Ee=hi(k,"Set"),We=hi(k,"WeakMap"),He=hi(Object,"create"),Re=Ln(xe),st=Ln(Ke),Ye=Ln(Qe),Ne=Ln(Ee),Xe=Ln(We),et=ht?ht.prototype:void 0,Ie=et?et.valueOf:void 0;function Ue(B){var K=-1,he=B==null?0:B.length;for(this.clear();++K<he;){var Se=B[K];this.set(Se[0],Se[1])}}function at(){this.__data__=He?He(null):{},this.size=0}function Ce(B){var K=this.has(B)&&delete this.__data__[B];return this.size-=K?1:0,K}function Ot(B){var K=this.__data__;if(He){var he=K[B];return he===i?void 0:he}return ke.call(K,B)?K[B]:void 0}function Tt(B){var K=this.__data__;return He?K[B]!==void 0:ke.call(K,B)}function tt(B,K){var he=this.__data__;return this.size+=this.has(B)?0:1,he[B]=He&&K===void 0?i:K,this}Ue.prototype.clear=at,Ue.prototype.delete=Ce,Ue.prototype.get=Ot,Ue.prototype.has=Tt,Ue.prototype.set=tt;function bt(B){var K=-1,he=B==null?0:B.length;for(this.clear();++K<he;){var Se=B[K];this.set(Se[0],Se[1])}}function Sr(){this.__data__=[],this.size=0}function Pr(B){var K=this.__data__,he=Ps(K,B);if(he<0)return!1;var Se=K.length-1;return he==Se?K.pop():wt.call(K,he,1),--this.size,!0}function Rr(B){var K=this.__data__,he=Ps(K,B);return he<0?void 0:K[he][1]}function Nr(B){return Ps(this.__data__,B)>-1}function Cr(B,K){var he=this.__data__,Se=Ps(he,B);return Se<0?(++this.size,he.push([B,K])):he[Se][1]=K,this}bt.prototype.clear=Sr,bt.prototype.delete=Pr,bt.prototype.get=Rr,bt.prototype.has=Nr,bt.prototype.set=Cr;function Qt(B){var K=-1,he=B==null?0:B.length;for(this.clear();++K<he;){var Se=B[K];this.set(Se[0],Se[1])}}function Vr(){this.size=0,this.__data__={hash:new Ue,map:new(Ke||bt),string:new Ue}}function Ui(B){var K=os(this,B).delete(B);return this.size-=K?1:0,K}function Gr(B){return os(this,B).get(B)}function ji(B){return os(this,B).has(B)}function Fi(B,K){var he=os(this,B),Se=he.size;return he.set(B,K),this.size+=he.size==Se?0:1,this}Qt.prototype.clear=Vr,Qt.prototype.delete=Ui,Qt.prototype.get=Gr,Qt.prototype.has=ji,Qt.prototype.set=Fi;function Wr(B){var K=-1,he=B==null?0:B.length;for(this.__data__=new Qt;++K<he;)this.add(B[K])}function wi(B){return this.__data__.set(B,i),this}function _i(B){return this.__data__.has(B)}Wr.prototype.add=Wr.prototype.push=wi,Wr.prototype.has=_i;function or(B){var K=this.__data__=new bt(B);this.size=K.size}function Ki(){this.__data__=new bt,this.size=0}function Hi(B){var K=this.__data__,he=K.delete(B);return this.size=K.size,he}function Vi(B){return this.__data__.get(B)}function Ss(B){return this.__data__.has(B)}function ec(B,K){var he=this.__data__;if(he instanceof bt){var Se=he.__data__;if(!Ke||Se.length<t-1)return Se.push([B,K]),this.size=++he.size,this;he=this.__data__=new Qt(Se)}return he.set(B,K),this.size=he.size,this}or.prototype.clear=Ki,or.prototype.delete=Hi,or.prototype.get=Vi,or.prototype.has=Ss,or.prototype.set=ec;function tc(B,K){var he=fa(B),Se=!he&&lc(B),Ut=!he&&!Se&&io(B),pt=!he&&!Se&&!Ut&&vc(B),Ht=he||Se||Ut||pt,sr=Ht?nt(B.length,String):[],Nt=sr.length;for(var jt in B)ke.call(B,jt)&&!(Ht&&(jt=="length"||Ut&&(jt=="offset"||jt=="parent")||pt&&(jt=="buffer"||jt=="byteLength"||jt=="byteOffset")||cc(jt,Nt)))&&sr.push(jt);return sr}function Ps(B,K){for(var he=B.length;he--;)if(dc(B[he][0],K))return he;return-1}function to(B,K,he){var Se=K(B);return fa(B)?Se:ge(Se,he(B))}function Rs(B){return B==null?B===void 0?Ae:W:dt&&dt in Object(B)?ac(B):of(B)}function ro(B){return Cs(B)&&Rs(B)==p}function Ns(B,K,he,Se,Ut){return B===K?!0:B==null||K==null||!Cs(B)&&!Cs(K)?B!==B&&K!==K:rc(B,K,he,Se,Ns,Ut)}function rc(B,K,he,Se,Ut,pt){var Ht=fa(B),sr=fa(K),Nt=Ht?y:un(B),jt=sr?y:un(K);Nt=Nt==p?ee:Nt,jt=jt==p?ee:jt;var er=Nt==ee,Jr=jt==ee,ar=Nt==jt;if(ar&&io(B)){if(!io(K))return!1;Ht=!0,er=!1}if(ar&&!er)return pt||(pt=new or),Ht||vc(B)?ca(B,K,he,Se,Ut,pt):af(B,K,Nt,he,Se,Ut,pt);if(!(he&s)){var Vt=er&&ke.call(B,"__wrapped__"),$r=Jr&&ke.call(K,"__wrapped__");if(Vt||$r){var Gi=Vt?B.value():B,Ai=$r?K.value():K;return pt||(pt=new or),Ut(Gi,Ai,he,Se,pt)}}return ar?(pt||(pt=new or),sc(B,K,he,Se,Ut,pt)):!1}function sf(B){if(!gc(B)||fc(B))return!1;var K=ua(B)?ft:X;return K.test(Ln(B))}function ic(B){return Cs(B)&&pc(B.length)&&!!I[Rs(B)]}function nc(B){if(!uc(B))return It(B);var K=[];for(var he in Object(B))ke.call(B,he)&&he!="constructor"&&K.push(he);return K}function ca(B,K,he,Se,Ut,pt){var Ht=he&s,sr=B.length,Nt=K.length;if(sr!=Nt&&!(Ht&&Nt>sr))return!1;var jt=pt.get(B);if(jt&&pt.get(K))return jt==K;var er=-1,Jr=!0,ar=he&a?new Wr:void 0;for(pt.set(B,K),pt.set(K,B);++er<sr;){var Vt=B[er],$r=K[er];if(Se)var Gi=Ht?Se($r,Vt,er,K,B,pt):Se(Vt,$r,er,B,K,pt);if(Gi!==void 0){if(Gi)continue;Jr=!1;break}if(ar){if(!Te(K,function(Ai,dn){if(!Ve(ar,dn)&&(Vt===Ai||Ut(Vt,Ai,he,Se,pt)))return ar.push(dn)})){Jr=!1;break}}else if(!(Vt===$r||Ut(Vt,$r,he,Se,pt))){Jr=!1;break}}return pt.delete(B),pt.delete(K),Jr}function af(B,K,he,Se,Ut,pt,Ht){switch(he){case b:if(B.byteLength!=K.byteLength||B.byteOffset!=K.byteOffset)return!1;B=B.buffer,K=K.buffer;case $:return!(B.byteLength!=K.byteLength||!pt(new ut(B),new ut(K)));case A:case E:case G:return dc(+B,+K);case N:return B.name==K.name&&B.message==K.message;case ae:case ne:return B==K+"";case F:var sr=_e;case ue:var Nt=Se&s;if(sr||(sr=Ge),B.size!=K.size&&!Nt)return!1;var jt=Ht.get(B);if(jt)return jt==K;Se|=a,Ht.set(B,K);var er=ca(sr(B),sr(K),Se,Ut,pt,Ht);return Ht.delete(B),er;case ve:if(Ie)return Ie.call(B)==Ie.call(K)}return!1}function sc(B,K,he,Se,Ut,pt){var Ht=he&s,sr=ha(B),Nt=sr.length,jt=ha(K),er=jt.length;if(Nt!=er&&!Ht)return!1;for(var Jr=Nt;Jr--;){var ar=sr[Jr];if(!(Ht?ar in K:ke.call(K,ar)))return!1}var Vt=pt.get(B);if(Vt&&pt.get(K))return Vt==K;var $r=!0;pt.set(B,K),pt.set(K,B);for(var Gi=Ht;++Jr<Nt;){ar=sr[Jr];var Ai=B[ar],dn=K[ar];if(Se)var no=Ht?Se(dn,Ai,ar,K,B,pt):Se(Ai,dn,ar,B,K,pt);if(!(no===void 0?Ai===dn||Ut(Ai,dn,he,Se,pt):no)){$r=!1;break}Gi||(Gi=ar=="constructor")}if($r&&!Gi){var Os=B.constructor,dr=K.constructor;Os!=dr&&"constructor"in B&&"constructor"in K&&!(typeof Os=="function"&&Os instanceof Os&&typeof dr=="function"&&dr instanceof dr)&&($r=!1)}return pt.delete(B),pt.delete(K),$r}function ha(B){return to(B,ff,oc)}function os(B,K){var he=B.__data__;return hc(K)?he[typeof K=="string"?"string":"hash"]:he.map}function hi(B,K){var he=ze(B,K);return sf(he)?he:void 0}function ac(B){var K=ke.call(B,dt),he=B[dt];try{B[dt]=void 0;var Se=!0}catch{}var Ut=ct.call(B);return Se&&(K?B[dt]=he:delete B[dt]),Ut}var oc=Le?function(B){return B==null?[]:(B=Object(B),pe(Le(B),function(K){return Be.call(B,K)}))}:Lt,un=Rs;(xe&&un(new xe(new ArrayBuffer(1)))!=b||Ke&&un(new Ke)!=F||Qe&&un(Qe.resolve())!=de||Ee&&un(new Ee)!=ue||We&&un(new We)!=ot)&&(un=function(B){var K=Rs(B),he=K==ee?B.constructor:void 0,Se=he?Ln(he):"";if(Se)switch(Se){case Re:return b;case st:return F;case Ye:return de;case Ne:return ue;case Xe:return ot}return K});function cc(B,K){return K=K??f,!!K&&(typeof B=="number"||te.test(B))&&B>-1&&B%1==0&&B<K}function hc(B){var K=typeof B;return K=="string"||K=="number"||K=="symbol"||K=="boolean"?B!=="__proto__":B===null}function fc(B){return!!Pe&&Pe in B}function uc(B){var K=B&&B.constructor,he=typeof K=="function"&&K.prototype||De;return B===he}function of(B){return ct.call(B)}function Ln(B){if(B!=null){try{return Je.call(B)}catch{}try{return B+""}catch{}}return""}function dc(B,K){return B===K||B!==B&&K!==K}var lc=ro(function(){return arguments}())?ro:function(B){return Cs(B)&&ke.call(B,"callee")&&!Be.call(B,"callee")},fa=Array.isArray;function cf(B){return B!=null&&pc(B.length)&&!ua(B)}var io=At||kt;function hf(B,K){return Ns(B,K)}function ua(B){if(!gc(B))return!1;var K=Rs(B);return K==O||K==T||K==v||K==se}function pc(B){return typeof B=="number"&&B>-1&&B%1==0&&B<=f}function gc(B){var K=typeof B;return B!=null&&(K=="object"||K=="function")}function Cs(B){return B!=null&&typeof B=="object"}var vc=ce?Me(ce):ic;function ff(B){return cf(B)?tc(B):nc(B)}function Lt(){return[]}function kt(){return!1}r.exports=hf})(Ih,Ih.exports);var Cw=Ih.exports;const Ow=t4(Cw);var Tw=Object.defineProperty,qw=Object.defineProperties,Dw=Object.getOwnPropertyDescriptors,dp=Object.getOwnPropertySymbols,Bw=Object.prototype.hasOwnProperty,$w=Object.prototype.propertyIsEnumerable,lp=(r,e,t)=>e in r?Tw(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,pp=(r,e)=>{for(var t in e||(e={}))Bw.call(e,t)&&lp(r,t,e[t]);if(dp)for(var t of dp(e))$w.call(e,t)&&lp(r,t,e[t]);return r},gp=(r,e)=>qw(r,Dw(e));const zw={Accept:"application/json","Content-Type":"application/json"},kw="POST",vp={headers:zw,method:kw},bp=10;let Bn=class{constructor(e,t=!1){if(this.url=e,this.disableProviderPing=t,this.events=new zi.EventEmitter,this.isAvailable=!1,this.registering=!1,!cp(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=t}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(e){this.isAvailable||await this.register();try{const t=Ys(e),i=await(await Gl(this.url,gp(pp({},vp),{body:t}))).json();this.onPayload({data:i})}catch(t){this.onError(e.id,t)}}async register(e=this.url){if(!cp(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){const t=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=t||this.events.listenerCount("open")>=t)&&this.events.setMaxListeners(t+1),new Promise((i,s)=>{this.events.once("register_error",a=>{this.resetMaxListeners(),s(a)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return s(new Error("HTTP connection is missing or invalid"));i()})})}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){const t=Ys({id:1,jsonrpc:"2.0",method:"test",params:[]});await Gl(e,gp(pp({},vp),{body:t}))}this.onOpen()}catch(t){const i=this.parseError(t);throw this.events.emit("register_error",i),this.onClose(),i}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const t=typeof e.data=="string"?Ua(e.data):e.data;this.events.emit("payload",t)}onError(e,t){const i=this.parseError(t),s=i.message||i.toString(),a=jh(e,s);this.events.emit("payload",a)}parseError(e,t=this.url){return yg(e,t,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>bp&&this.events.setMaxListeners(bp)}};var e0={exports:{}};typeof Object.create=="function"?e0.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e0.exports=function(e,t){if(t){e.super_=t;var i=function(){};i.prototype=t.prototype,e.prototype=new i,e.prototype.constructor=e}};var Kh=e0.exports,Ag={};const Lw="elliptic",Uw="6.5.7",jw="EC cryptography",Fw="lib/elliptic.js",Kw=["lib"],Hw={lint:"eslint lib test","lint:fix":"npm run lint -- --fix",unit:"istanbul test _mocha --reporter=spec test/index.js",test:"npm run lint && npm run unit",version:"grunt dist && git add dist/"},Vw={type:"git",url:"git@github.com:indutny/elliptic"},Gw=["EC","Elliptic","curve","Cryptography"],Ww="Fedor Indutny <fedor@indutny.com>",Jw="MIT",Qw={url:"https://github.com/indutny/elliptic/issues"},Yw="https://github.com/indutny/elliptic",Xw={brfs:"^2.0.2",coveralls:"^3.1.0",eslint:"^7.6.0",grunt:"^1.2.1","grunt-browserify":"^5.3.0","grunt-cli":"^1.3.2","grunt-contrib-connect":"^3.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^5.0.0","grunt-mocha-istanbul":"^5.0.2","grunt-saucelabs":"^9.0.1",istanbul:"^0.4.5",mocha:"^8.0.1"},Zw={"bn.js":"^4.11.9",brorand:"^1.1.0","hash.js":"^1.0.0","hmac-drbg":"^1.0.1",inherits:"^2.0.4","minimalistic-assert":"^1.0.1","minimalistic-crypto-utils":"^1.0.1"},e8={name:Lw,version:Uw,description:jw,main:Fw,files:Kw,scripts:Hw,repository:Vw,keywords:Gw,author:Ww,license:Jw,bugs:Qw,homepage:Yw,devDependencies:Xw,dependencies:Zw};var yi={},I0={exports:{}};I0.exports;(function(r){(function(e,t){function i($,b){if(!$)throw new Error(b||"Assertion failed")}function s($,b){$.super_=b;var c=function(){};c.prototype=b.prototype,$.prototype=new c,$.prototype.constructor=$}function a($,b,c){if(a.isBN($))return $;this.negative=0,this.words=null,this.length=0,this.red=null,$!==null&&((b==="le"||b==="be")&&(c=b,b=10),this._init($||0,b||10,c||"be"))}typeof e=="object"?e.exports=a:t.BN=a,a.BN=a,a.wordSize=26;var f;try{typeof window<"u"&&typeof window.Buffer<"u"?f=window.Buffer:f=ig.Buffer}catch{}a.isBN=function(b){return b instanceof a?!0:b!==null&&typeof b=="object"&&b.constructor.wordSize===a.wordSize&&Array.isArray(b.words)},a.max=function(b,c){return b.cmp(c)>0?b:c},a.min=function(b,c){return b.cmp(c)<0?b:c},a.prototype._init=function(b,c,u){if(typeof b=="number")return this._initNumber(b,c,u);if(typeof b=="object")return this._initArray(b,c,u);c==="hex"&&(c=16),i(c===(c|0)&&c>=2&&c<=36),b=b.toString().replace(/\s+/g,"");var g=0;b[0]==="-"&&(g++,this.negative=1),g<b.length&&(c===16?this._parseHex(b,g,u):(this._parseBase(b,c,g),u==="le"&&this._initArray(this.toArray(),c,u)))},a.prototype._initNumber=function(b,c,u){b<0&&(this.negative=1,b=-b),b<67108864?(this.words=[b&67108863],this.length=1):b<4503599627370496?(this.words=[b&67108863,b/67108864&67108863],this.length=2):(i(b<9007199254740992),this.words=[b&67108863,b/67108864&67108863,1],this.length=3),u==="le"&&this._initArray(this.toArray(),c,u)},a.prototype._initArray=function(b,c,u){if(i(typeof b.length=="number"),b.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(b.length/3),this.words=new Array(this.length);for(var g=0;g<this.length;g++)this.words[g]=0;var _,M,S=0;if(u==="be")for(g=b.length-1,_=0;g>=0;g-=3)M=b[g]|b[g-1]<<8|b[g-2]<<16,this.words[_]|=M<<S&67108863,this.words[_+1]=M>>>26-S&67108863,S+=24,S>=26&&(S-=26,_++);else if(u==="le")for(g=0,_=0;g<b.length;g+=3)M=b[g]|b[g+1]<<8|b[g+2]<<16,this.words[_]|=M<<S&67108863,this.words[_+1]=M>>>26-S&67108863,S+=24,S>=26&&(S-=26,_++);return this.strip()};function p($,b){var c=$.charCodeAt(b);return c>=65&&c<=70?c-55:c>=97&&c<=102?c-87:c-48&15}function y($,b,c){var u=p($,c);return c-1>=b&&(u|=p($,c-1)<<4),u}a.prototype._parseHex=function(b,c,u){this.length=Math.ceil((b.length-c)/6),this.words=new Array(this.length);for(var g=0;g<this.length;g++)this.words[g]=0;var _=0,M=0,S;if(u==="be")for(g=b.length-1;g>=c;g-=2)S=y(b,c,g)<<_,this.words[M]|=S&67108863,_>=18?(_-=18,M+=1,this.words[M]|=S>>>26):_+=8;else{var x=b.length-c;for(g=x%2===0?c+1:c;g<b.length;g+=2)S=y(b,c,g)<<_,this.words[M]|=S&67108863,_>=18?(_-=18,M+=1,this.words[M]|=S>>>26):_+=8}this.strip()};function v($,b,c,u){for(var g=0,_=Math.min($.length,c),M=b;M<_;M++){var S=$.charCodeAt(M)-48;g*=u,S>=49?g+=S-49+10:S>=17?g+=S-17+10:g+=S}return g}a.prototype._parseBase=function(b,c,u){this.words=[0],this.length=1;for(var g=0,_=1;_<=67108863;_*=c)g++;g--,_=_/c|0;for(var M=b.length-u,S=M%g,x=Math.min(M,M-S)+u,d=0,l=u;l<x;l+=g)d=v(b,l,l+g,c),this.imuln(_),this.words[0]+d<67108864?this.words[0]+=d:this._iaddn(d);if(S!==0){var R=1;for(d=v(b,l,b.length,c),l=0;l<S;l++)R*=c;this.imuln(R),this.words[0]+d<67108864?this.words[0]+=d:this._iaddn(d)}this.strip()},a.prototype.copy=function(b){b.words=new Array(this.length);for(var c=0;c<this.length;c++)b.words[c]=this.words[c];b.length=this.length,b.negative=this.negative,b.red=this.red},a.prototype.clone=function(){var b=new a(null);return this.copy(b),b},a.prototype._expand=function(b){for(;this.length<b;)this.words[this.length++]=0;return this},a.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},a.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},a.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var A=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],E=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],N=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];a.prototype.toString=function(b,c){b=b||10,c=c|0||1;var u;if(b===16||b==="hex"){u="";for(var g=0,_=0,M=0;M<this.length;M++){var S=this.words[M],x=((S<<g|_)&16777215).toString(16);_=S>>>24-g&16777215,_!==0||M!==this.length-1?u=A[6-x.length]+x+u:u=x+u,g+=2,g>=26&&(g-=26,M--)}for(_!==0&&(u=_.toString(16)+u);u.length%c!==0;)u="0"+u;return this.negative!==0&&(u="-"+u),u}if(b===(b|0)&&b>=2&&b<=36){var d=E[b],l=N[b];u="";var R=this.clone();for(R.negative=0;!R.isZero();){var X=R.modn(l).toString(b);R=R.idivn(l),R.isZero()?u=X+u:u=A[d-X.length]+X+u}for(this.isZero()&&(u="0"+u);u.length%c!==0;)u="0"+u;return this.negative!==0&&(u="-"+u),u}i(!1,"Base should be between 2 and 36")},a.prototype.toNumber=function(){var b=this.words[0];return this.length===2?b+=this.words[1]*67108864:this.length===3&&this.words[2]===1?b+=4503599627370496+this.words[1]*67108864:this.length>2&&i(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-b:b},a.prototype.toJSON=function(){return this.toString(16)},a.prototype.toBuffer=function(b,c){return i(typeof f<"u"),this.toArrayLike(f,b,c)},a.prototype.toArray=function(b,c){return this.toArrayLike(Array,b,c)},a.prototype.toArrayLike=function(b,c,u){var g=this.byteLength(),_=u||Math.max(1,g);i(g<=_,"byte array longer than desired length"),i(_>0,"Requested array length <= 0"),this.strip();var M=c==="le",S=new b(_),x,d,l=this.clone();if(M){for(d=0;!l.isZero();d++)x=l.andln(255),l.iushrn(8),S[d]=x;for(;d<_;d++)S[d]=0}else{for(d=0;d<_-g;d++)S[d]=0;for(d=0;!l.isZero();d++)x=l.andln(255),l.iushrn(8),S[_-d-1]=x}return S},Math.clz32?a.prototype._countBits=function(b){return 32-Math.clz32(b)}:a.prototype._countBits=function(b){var c=b,u=0;return c>=4096&&(u+=13,c>>>=13),c>=64&&(u+=7,c>>>=7),c>=8&&(u+=4,c>>>=4),c>=2&&(u+=2,c>>>=2),u+c},a.prototype._zeroBits=function(b){if(b===0)return 26;var c=b,u=0;return c&8191||(u+=13,c>>>=13),c&127||(u+=7,c>>>=7),c&15||(u+=4,c>>>=4),c&3||(u+=2,c>>>=2),c&1||u++,u},a.prototype.bitLength=function(){var b=this.words[this.length-1],c=this._countBits(b);return(this.length-1)*26+c};function O($){for(var b=new Array($.bitLength()),c=0;c<b.length;c++){var u=c/26|0,g=c%26;b[c]=($.words[u]&1<<g)>>>g}return b}a.prototype.zeroBits=function(){if(this.isZero())return 0;for(var b=0,c=0;c<this.length;c++){var u=this._zeroBits(this.words[c]);if(b+=u,u!==26)break}return b},a.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},a.prototype.toTwos=function(b){return this.negative!==0?this.abs().inotn(b).iaddn(1):this.clone()},a.prototype.fromTwos=function(b){return this.testn(b-1)?this.notn(b).iaddn(1).ineg():this.clone()},a.prototype.isNeg=function(){return this.negative!==0},a.prototype.neg=function(){return this.clone().ineg()},a.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},a.prototype.iuor=function(b){for(;this.length<b.length;)this.words[this.length++]=0;for(var c=0;c<b.length;c++)this.words[c]=this.words[c]|b.words[c];return this.strip()},a.prototype.ior=function(b){return i((this.negative|b.negative)===0),this.iuor(b)},a.prototype.or=function(b){return this.length>b.length?this.clone().ior(b):b.clone().ior(this)},a.prototype.uor=function(b){return this.length>b.length?this.clone().iuor(b):b.clone().iuor(this)},a.prototype.iuand=function(b){var c;this.length>b.length?c=b:c=this;for(var u=0;u<c.length;u++)this.words[u]=this.words[u]&b.words[u];return this.length=c.length,this.strip()},a.prototype.iand=function(b){return i((this.negative|b.negative)===0),this.iuand(b)},a.prototype.and=function(b){return this.length>b.length?this.clone().iand(b):b.clone().iand(this)},a.prototype.uand=function(b){return this.length>b.length?this.clone().iuand(b):b.clone().iuand(this)},a.prototype.iuxor=function(b){var c,u;this.length>b.length?(c=this,u=b):(c=b,u=this);for(var g=0;g<u.length;g++)this.words[g]=c.words[g]^u.words[g];if(this!==c)for(;g<c.length;g++)this.words[g]=c.words[g];return this.length=c.length,this.strip()},a.prototype.ixor=function(b){return i((this.negative|b.negative)===0),this.iuxor(b)},a.prototype.xor=function(b){return this.length>b.length?this.clone().ixor(b):b.clone().ixor(this)},a.prototype.uxor=function(b){return this.length>b.length?this.clone().iuxor(b):b.clone().iuxor(this)},a.prototype.inotn=function(b){i(typeof b=="number"&&b>=0);var c=Math.ceil(b/26)|0,u=b%26;this._expand(c),u>0&&c--;for(var g=0;g<c;g++)this.words[g]=~this.words[g]&67108863;return u>0&&(this.words[g]=~this.words[g]&67108863>>26-u),this.strip()},a.prototype.notn=function(b){return this.clone().inotn(b)},a.prototype.setn=function(b,c){i(typeof b=="number"&&b>=0);var u=b/26|0,g=b%26;return this._expand(u+1),c?this.words[u]=this.words[u]|1<<g:this.words[u]=this.words[u]&~(1<<g),this.strip()},a.prototype.iadd=function(b){var c;if(this.negative!==0&&b.negative===0)return this.negative=0,c=this.isub(b),this.negative^=1,this._normSign();if(this.negative===0&&b.negative!==0)return b.negative=0,c=this.isub(b),b.negative=1,c._normSign();var u,g;this.length>b.length?(u=this,g=b):(u=b,g=this);for(var _=0,M=0;M<g.length;M++)c=(u.words[M]|0)+(g.words[M]|0)+_,this.words[M]=c&67108863,_=c>>>26;for(;_!==0&&M<u.length;M++)c=(u.words[M]|0)+_,this.words[M]=c&67108863,_=c>>>26;if(this.length=u.length,_!==0)this.words[this.length]=_,this.length++;else if(u!==this)for(;M<u.length;M++)this.words[M]=u.words[M];return this},a.prototype.add=function(b){var c;return b.negative!==0&&this.negative===0?(b.negative=0,c=this.sub(b),b.negative^=1,c):b.negative===0&&this.negative!==0?(this.negative=0,c=b.sub(this),this.negative=1,c):this.length>b.length?this.clone().iadd(b):b.clone().iadd(this)},a.prototype.isub=function(b){if(b.negative!==0){b.negative=0;var c=this.iadd(b);return b.negative=1,c._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(b),this.negative=1,this._normSign();var u=this.cmp(b);if(u===0)return this.negative=0,this.length=1,this.words[0]=0,this;var g,_;u>0?(g=this,_=b):(g=b,_=this);for(var M=0,S=0;S<_.length;S++)c=(g.words[S]|0)-(_.words[S]|0)+M,M=c>>26,this.words[S]=c&67108863;for(;M!==0&&S<g.length;S++)c=(g.words[S]|0)+M,M=c>>26,this.words[S]=c&67108863;if(M===0&&S<g.length&&g!==this)for(;S<g.length;S++)this.words[S]=g.words[S];return this.length=Math.max(this.length,S),g!==this&&(this.negative=1),this.strip()},a.prototype.sub=function(b){return this.clone().isub(b)};function T($,b,c){c.negative=b.negative^$.negative;var u=$.length+b.length|0;c.length=u,u=u-1|0;var g=$.words[0]|0,_=b.words[0]|0,M=g*_,S=M&67108863,x=M/67108864|0;c.words[0]=S;for(var d=1;d<u;d++){for(var l=x>>>26,R=x&67108863,X=Math.min(d,b.length-1),te=Math.max(0,d-$.length+1);te<=X;te++){var I=d-te|0;g=$.words[I]|0,_=b.words[te]|0,M=g*_+R,l+=M/67108864|0,R=M&67108863}c.words[d]=R|0,x=l|0}return x!==0?c.words[d]=x|0:c.length--,c.strip()}var F=function(b,c,u){var g=b.words,_=c.words,M=u.words,S=0,x,d,l,R=g[0]|0,X=R&8191,te=R>>>13,I=g[1]|0,J=I&8191,D=I>>>13,k=g[2]|0,L=k&8191,m=k>>>13,z=g[3]|0,Y=z&8191,oe=z>>>13,ce=g[4]|0,pe=ce&8191,ge=ce>>>13,Te=g[5]|0,nt=Te&8191,Me=Te>>>13,Ve=g[6]|0,ze=Ve&8191,_e=Ve>>>13,je=g[7]|0,Ge=je&8191,be=je>>>13,Fe=g[8]|0,De=Fe&8191,we=Fe>>>13,Je=g[9]|0,ke=Je&8191,Pe=Je>>>13,ct=_[0]|0,ft=ct&8191,qe=ct>>>13,ht=_[1]|0,ut=ht&8191,Be=ht>>>13,wt=_[2]|0,dt=wt&8191,Le=wt>>>13,At=_[3]|0,It=At&8191,xe=At>>>13,Ke=_[4]|0,Qe=Ke&8191,Ee=Ke>>>13,We=_[5]|0,He=We&8191,Re=We>>>13,st=_[6]|0,Ye=st&8191,Ne=st>>>13,Xe=_[7]|0,et=Xe&8191,Ie=Xe>>>13,Ue=_[8]|0,at=Ue&8191,Ce=Ue>>>13,Ot=_[9]|0,Tt=Ot&8191,tt=Ot>>>13;u.negative=b.negative^c.negative,u.length=19,x=Math.imul(X,ft),d=Math.imul(X,qe),d=d+Math.imul(te,ft)|0,l=Math.imul(te,qe);var bt=(S+x|0)+((d&8191)<<13)|0;S=(l+(d>>>13)|0)+(bt>>>26)|0,bt&=67108863,x=Math.imul(J,ft),d=Math.imul(J,qe),d=d+Math.imul(D,ft)|0,l=Math.imul(D,qe),x=x+Math.imul(X,ut)|0,d=d+Math.imul(X,Be)|0,d=d+Math.imul(te,ut)|0,l=l+Math.imul(te,Be)|0;var Sr=(S+x|0)+((d&8191)<<13)|0;S=(l+(d>>>13)|0)+(Sr>>>26)|0,Sr&=67108863,x=Math.imul(L,ft),d=Math.imul(L,qe),d=d+Math.imul(m,ft)|0,l=Math.imul(m,qe),x=x+Math.imul(J,ut)|0,d=d+Math.imul(J,Be)|0,d=d+Math.imul(D,ut)|0,l=l+Math.imul(D,Be)|0,x=x+Math.imul(X,dt)|0,d=d+Math.imul(X,Le)|0,d=d+Math.imul(te,dt)|0,l=l+Math.imul(te,Le)|0;var Pr=(S+x|0)+((d&8191)<<13)|0;S=(l+(d>>>13)|0)+(Pr>>>26)|0,Pr&=67108863,x=Math.imul(Y,ft),d=Math.imul(Y,qe),d=d+Math.imul(oe,ft)|0,l=Math.imul(oe,qe),x=x+Math.imul(L,ut)|0,d=d+Math.imul(L,Be)|0,d=d+Math.imul(m,ut)|0,l=l+Math.imul(m,Be)|0,x=x+Math.imul(J,dt)|0,d=d+Math.imul(J,Le)|0,d=d+Math.imul(D,dt)|0,l=l+Math.imul(D,Le)|0,x=x+Math.imul(X,It)|0,d=d+Math.imul(X,xe)|0,d=d+Math.imul(te,It)|0,l=l+Math.imul(te,xe)|0;var Rr=(S+x|0)+((d&8191)<<13)|0;S=(l+(d>>>13)|0)+(Rr>>>26)|0,Rr&=67108863,x=Math.imul(pe,ft),d=Math.imul(pe,qe),d=d+Math.imul(ge,ft)|0,l=Math.imul(ge,qe),x=x+Math.imul(Y,ut)|0,d=d+Math.imul(Y,Be)|0,d=d+Math.imul(oe,ut)|0,l=l+Math.imul(oe,Be)|0,x=x+Math.imul(L,dt)|0,d=d+Math.imul(L,Le)|0,d=d+Math.imul(m,dt)|0,l=l+Math.imul(m,Le)|0,x=x+Math.imul(J,It)|0,d=d+Math.imul(J,xe)|0,d=d+Math.imul(D,It)|0,l=l+Math.imul(D,xe)|0,x=x+Math.imul(X,Qe)|0,d=d+Math.imul(X,Ee)|0,d=d+Math.imul(te,Qe)|0,l=l+Math.imul(te,Ee)|0;var Nr=(S+x|0)+((d&8191)<<13)|0;S=(l+(d>>>13)|0)+(Nr>>>26)|0,Nr&=67108863,x=Math.imul(nt,ft),d=Math.imul(nt,qe),d=d+Math.imul(Me,ft)|0,l=Math.imul(Me,qe),x=x+Math.imul(pe,ut)|0,d=d+Math.imul(pe,Be)|0,d=d+Math.imul(ge,ut)|0,l=l+Math.imul(ge,Be)|0,x=x+Math.imul(Y,dt)|0,d=d+Math.imul(Y,Le)|0,d=d+Math.imul(oe,dt)|0,l=l+Math.imul(oe,Le)|0,x=x+Math.imul(L,It)|0,d=d+Math.imul(L,xe)|0,d=d+Math.imul(m,It)|0,l=l+Math.imul(m,xe)|0,x=x+Math.imul(J,Qe)|0,d=d+Math.imul(J,Ee)|0,d=d+Math.imul(D,Qe)|0,l=l+Math.imul(D,Ee)|0,x=x+Math.imul(X,He)|0,d=d+Math.imul(X,Re)|0,d=d+Math.imul(te,He)|0,l=l+Math.imul(te,Re)|0;var Cr=(S+x|0)+((d&8191)<<13)|0;S=(l+(d>>>13)|0)+(Cr>>>26)|0,Cr&=67108863,x=Math.imul(ze,ft),d=Math.imul(ze,qe),d=d+Math.imul(_e,ft)|0,l=Math.imul(_e,qe),x=x+Math.imul(nt,ut)|0,d=d+Math.imul(nt,Be)|0,d=d+Math.imul(Me,ut)|0,l=l+Math.imul(Me,Be)|0,x=x+Math.imul(pe,dt)|0,d=d+Math.imul(pe,Le)|0,d=d+Math.imul(ge,dt)|0,l=l+Math.imul(ge,Le)|0,x=x+Math.imul(Y,It)|0,d=d+Math.imul(Y,xe)|0,d=d+Math.imul(oe,It)|0,l=l+Math.imul(oe,xe)|0,x=x+Math.imul(L,Qe)|0,d=d+Math.imul(L,Ee)|0,d=d+Math.imul(m,Qe)|0,l=l+Math.imul(m,Ee)|0,x=x+Math.imul(J,He)|0,d=d+Math.imul(J,Re)|0,d=d+Math.imul(D,He)|0,l=l+Math.imul(D,Re)|0,x=x+Math.imul(X,Ye)|0,d=d+Math.imul(X,Ne)|0,d=d+Math.imul(te,Ye)|0,l=l+Math.imul(te,Ne)|0;var Qt=(S+x|0)+((d&8191)<<13)|0;S=(l+(d>>>13)|0)+(Qt>>>26)|0,Qt&=67108863,x=Math.imul(Ge,ft),d=Math.imul(Ge,qe),d=d+Math.imul(be,ft)|0,l=Math.imul(be,qe),x=x+Math.imul(ze,ut)|0,d=d+Math.imul(ze,Be)|0,d=d+Math.imul(_e,ut)|0,l=l+Math.imul(_e,Be)|0,x=x+Math.imul(nt,dt)|0,d=d+Math.imul(nt,Le)|0,d=d+Math.imul(Me,dt)|0,l=l+Math.imul(Me,Le)|0,x=x+Math.imul(pe,It)|0,d=d+Math.imul(pe,xe)|0,d=d+Math.imul(ge,It)|0,l=l+Math.imul(ge,xe)|0,x=x+Math.imul(Y,Qe)|0,d=d+Math.imul(Y,Ee)|0,d=d+Math.imul(oe,Qe)|0,l=l+Math.imul(oe,Ee)|0,x=x+Math.imul(L,He)|0,d=d+Math.imul(L,Re)|0,d=d+Math.imul(m,He)|0,l=l+Math.imul(m,Re)|0,x=x+Math.imul(J,Ye)|0,d=d+Math.imul(J,Ne)|0,d=d+Math.imul(D,Ye)|0,l=l+Math.imul(D,Ne)|0,x=x+Math.imul(X,et)|0,d=d+Math.imul(X,Ie)|0,d=d+Math.imul(te,et)|0,l=l+Math.imul(te,Ie)|0;var Vr=(S+x|0)+((d&8191)<<13)|0;S=(l+(d>>>13)|0)+(Vr>>>26)|0,Vr&=67108863,x=Math.imul(De,ft),d=Math.imul(De,qe),d=d+Math.imul(we,ft)|0,l=Math.imul(we,qe),x=x+Math.imul(Ge,ut)|0,d=d+Math.imul(Ge,Be)|0,d=d+Math.imul(be,ut)|0,l=l+Math.imul(be,Be)|0,x=x+Math.imul(ze,dt)|0,d=d+Math.imul(ze,Le)|0,d=d+Math.imul(_e,dt)|0,l=l+Math.imul(_e,Le)|0,x=x+Math.imul(nt,It)|0,d=d+Math.imul(nt,xe)|0,d=d+Math.imul(Me,It)|0,l=l+Math.imul(Me,xe)|0,x=x+Math.imul(pe,Qe)|0,d=d+Math.imul(pe,Ee)|0,d=d+Math.imul(ge,Qe)|0,l=l+Math.imul(ge,Ee)|0,x=x+Math.imul(Y,He)|0,d=d+Math.imul(Y,Re)|0,d=d+Math.imul(oe,He)|0,l=l+Math.imul(oe,Re)|0,x=x+Math.imul(L,Ye)|0,d=d+Math.imul(L,Ne)|0,d=d+Math.imul(m,Ye)|0,l=l+Math.imul(m,Ne)|0,x=x+Math.imul(J,et)|0,d=d+Math.imul(J,Ie)|0,d=d+Math.imul(D,et)|0,l=l+Math.imul(D,Ie)|0,x=x+Math.imul(X,at)|0,d=d+Math.imul(X,Ce)|0,d=d+Math.imul(te,at)|0,l=l+Math.imul(te,Ce)|0;var Ui=(S+x|0)+((d&8191)<<13)|0;S=(l+(d>>>13)|0)+(Ui>>>26)|0,Ui&=67108863,x=Math.imul(ke,ft),d=Math.imul(ke,qe),d=d+Math.imul(Pe,ft)|0,l=Math.imul(Pe,qe),x=x+Math.imul(De,ut)|0,d=d+Math.imul(De,Be)|0,d=d+Math.imul(we,ut)|0,l=l+Math.imul(we,Be)|0,x=x+Math.imul(Ge,dt)|0,d=d+Math.imul(Ge,Le)|0,d=d+Math.imul(be,dt)|0,l=l+Math.imul(be,Le)|0,x=x+Math.imul(ze,It)|0,d=d+Math.imul(ze,xe)|0,d=d+Math.imul(_e,It)|0,l=l+Math.imul(_e,xe)|0,x=x+Math.imul(nt,Qe)|0,d=d+Math.imul(nt,Ee)|0,d=d+Math.imul(Me,Qe)|0,l=l+Math.imul(Me,Ee)|0,x=x+Math.imul(pe,He)|0,d=d+Math.imul(pe,Re)|0,d=d+Math.imul(ge,He)|0,l=l+Math.imul(ge,Re)|0,x=x+Math.imul(Y,Ye)|0,d=d+Math.imul(Y,Ne)|0,d=d+Math.imul(oe,Ye)|0,l=l+Math.imul(oe,Ne)|0,x=x+Math.imul(L,et)|0,d=d+Math.imul(L,Ie)|0,d=d+Math.imul(m,et)|0,l=l+Math.imul(m,Ie)|0,x=x+Math.imul(J,at)|0,d=d+Math.imul(J,Ce)|0,d=d+Math.imul(D,at)|0,l=l+Math.imul(D,Ce)|0,x=x+Math.imul(X,Tt)|0,d=d+Math.imul(X,tt)|0,d=d+Math.imul(te,Tt)|0,l=l+Math.imul(te,tt)|0;var Gr=(S+x|0)+((d&8191)<<13)|0;S=(l+(d>>>13)|0)+(Gr>>>26)|0,Gr&=67108863,x=Math.imul(ke,ut),d=Math.imul(ke,Be),d=d+Math.imul(Pe,ut)|0,l=Math.imul(Pe,Be),x=x+Math.imul(De,dt)|0,d=d+Math.imul(De,Le)|0,d=d+Math.imul(we,dt)|0,l=l+Math.imul(we,Le)|0,x=x+Math.imul(Ge,It)|0,d=d+Math.imul(Ge,xe)|0,d=d+Math.imul(be,It)|0,l=l+Math.imul(be,xe)|0,x=x+Math.imul(ze,Qe)|0,d=d+Math.imul(ze,Ee)|0,d=d+Math.imul(_e,Qe)|0,l=l+Math.imul(_e,Ee)|0,x=x+Math.imul(nt,He)|0,d=d+Math.imul(nt,Re)|0,d=d+Math.imul(Me,He)|0,l=l+Math.imul(Me,Re)|0,x=x+Math.imul(pe,Ye)|0,d=d+Math.imul(pe,Ne)|0,d=d+Math.imul(ge,Ye)|0,l=l+Math.imul(ge,Ne)|0,x=x+Math.imul(Y,et)|0,d=d+Math.imul(Y,Ie)|0,d=d+Math.imul(oe,et)|0,l=l+Math.imul(oe,Ie)|0,x=x+Math.imul(L,at)|0,d=d+Math.imul(L,Ce)|0,d=d+Math.imul(m,at)|0,l=l+Math.imul(m,Ce)|0,x=x+Math.imul(J,Tt)|0,d=d+Math.imul(J,tt)|0,d=d+Math.imul(D,Tt)|0,l=l+Math.imul(D,tt)|0;var ji=(S+x|0)+((d&8191)<<13)|0;S=(l+(d>>>13)|0)+(ji>>>26)|0,ji&=67108863,x=Math.imul(ke,dt),d=Math.imul(ke,Le),d=d+Math.imul(Pe,dt)|0,l=Math.imul(Pe,Le),x=x+Math.imul(De,It)|0,d=d+Math.imul(De,xe)|0,d=d+Math.imul(we,It)|0,l=l+Math.imul(we,xe)|0,x=x+Math.imul(Ge,Qe)|0,d=d+Math.imul(Ge,Ee)|0,d=d+Math.imul(be,Qe)|0,l=l+Math.imul(be,Ee)|0,x=x+Math.imul(ze,He)|0,d=d+Math.imul(ze,Re)|0,d=d+Math.imul(_e,He)|0,l=l+Math.imul(_e,Re)|0,x=x+Math.imul(nt,Ye)|0,d=d+Math.imul(nt,Ne)|0,d=d+Math.imul(Me,Ye)|0,l=l+Math.imul(Me,Ne)|0,x=x+Math.imul(pe,et)|0,d=d+Math.imul(pe,Ie)|0,d=d+Math.imul(ge,et)|0,l=l+Math.imul(ge,Ie)|0,x=x+Math.imul(Y,at)|0,d=d+Math.imul(Y,Ce)|0,d=d+Math.imul(oe,at)|0,l=l+Math.imul(oe,Ce)|0,x=x+Math.imul(L,Tt)|0,d=d+Math.imul(L,tt)|0,d=d+Math.imul(m,Tt)|0,l=l+Math.imul(m,tt)|0;var Fi=(S+x|0)+((d&8191)<<13)|0;S=(l+(d>>>13)|0)+(Fi>>>26)|0,Fi&=67108863,x=Math.imul(ke,It),d=Math.imul(ke,xe),d=d+Math.imul(Pe,It)|0,l=Math.imul(Pe,xe),x=x+Math.imul(De,Qe)|0,d=d+Math.imul(De,Ee)|0,d=d+Math.imul(we,Qe)|0,l=l+Math.imul(we,Ee)|0,x=x+Math.imul(Ge,He)|0,d=d+Math.imul(Ge,Re)|0,d=d+Math.imul(be,He)|0,l=l+Math.imul(be,Re)|0,x=x+Math.imul(ze,Ye)|0,d=d+Math.imul(ze,Ne)|0,d=d+Math.imul(_e,Ye)|0,l=l+Math.imul(_e,Ne)|0,x=x+Math.imul(nt,et)|0,d=d+Math.imul(nt,Ie)|0,d=d+Math.imul(Me,et)|0,l=l+Math.imul(Me,Ie)|0,x=x+Math.imul(pe,at)|0,d=d+Math.imul(pe,Ce)|0,d=d+Math.imul(ge,at)|0,l=l+Math.imul(ge,Ce)|0,x=x+Math.imul(Y,Tt)|0,d=d+Math.imul(Y,tt)|0,d=d+Math.imul(oe,Tt)|0,l=l+Math.imul(oe,tt)|0;var Wr=(S+x|0)+((d&8191)<<13)|0;S=(l+(d>>>13)|0)+(Wr>>>26)|0,Wr&=67108863,x=Math.imul(ke,Qe),d=Math.imul(ke,Ee),d=d+Math.imul(Pe,Qe)|0,l=Math.imul(Pe,Ee),x=x+Math.imul(De,He)|0,d=d+Math.imul(De,Re)|0,d=d+Math.imul(we,He)|0,l=l+Math.imul(we,Re)|0,x=x+Math.imul(Ge,Ye)|0,d=d+Math.imul(Ge,Ne)|0,d=d+Math.imul(be,Ye)|0,l=l+Math.imul(be,Ne)|0,x=x+Math.imul(ze,et)|0,d=d+Math.imul(ze,Ie)|0,d=d+Math.imul(_e,et)|0,l=l+Math.imul(_e,Ie)|0,x=x+Math.imul(nt,at)|0,d=d+Math.imul(nt,Ce)|0,d=d+Math.imul(Me,at)|0,l=l+Math.imul(Me,Ce)|0,x=x+Math.imul(pe,Tt)|0,d=d+Math.imul(pe,tt)|0,d=d+Math.imul(ge,Tt)|0,l=l+Math.imul(ge,tt)|0;var wi=(S+x|0)+((d&8191)<<13)|0;S=(l+(d>>>13)|0)+(wi>>>26)|0,wi&=67108863,x=Math.imul(ke,He),d=Math.imul(ke,Re),d=d+Math.imul(Pe,He)|0,l=Math.imul(Pe,Re),x=x+Math.imul(De,Ye)|0,d=d+Math.imul(De,Ne)|0,d=d+Math.imul(we,Ye)|0,l=l+Math.imul(we,Ne)|0,x=x+Math.imul(Ge,et)|0,d=d+Math.imul(Ge,Ie)|0,d=d+Math.imul(be,et)|0,l=l+Math.imul(be,Ie)|0,x=x+Math.imul(ze,at)|0,d=d+Math.imul(ze,Ce)|0,d=d+Math.imul(_e,at)|0,l=l+Math.imul(_e,Ce)|0,x=x+Math.imul(nt,Tt)|0,d=d+Math.imul(nt,tt)|0,d=d+Math.imul(Me,Tt)|0,l=l+Math.imul(Me,tt)|0;var _i=(S+x|0)+((d&8191)<<13)|0;S=(l+(d>>>13)|0)+(_i>>>26)|0,_i&=67108863,x=Math.imul(ke,Ye),d=Math.imul(ke,Ne),d=d+Math.imul(Pe,Ye)|0,l=Math.imul(Pe,Ne),x=x+Math.imul(De,et)|0,d=d+Math.imul(De,Ie)|0,d=d+Math.imul(we,et)|0,l=l+Math.imul(we,Ie)|0,x=x+Math.imul(Ge,at)|0,d=d+Math.imul(Ge,Ce)|0,d=d+Math.imul(be,at)|0,l=l+Math.imul(be,Ce)|0,x=x+Math.imul(ze,Tt)|0,d=d+Math.imul(ze,tt)|0,d=d+Math.imul(_e,Tt)|0,l=l+Math.imul(_e,tt)|0;var or=(S+x|0)+((d&8191)<<13)|0;S=(l+(d>>>13)|0)+(or>>>26)|0,or&=67108863,x=Math.imul(ke,et),d=Math.imul(ke,Ie),d=d+Math.imul(Pe,et)|0,l=Math.imul(Pe,Ie),x=x+Math.imul(De,at)|0,d=d+Math.imul(De,Ce)|0,d=d+Math.imul(we,at)|0,l=l+Math.imul(we,Ce)|0,x=x+Math.imul(Ge,Tt)|0,d=d+Math.imul(Ge,tt)|0,d=d+Math.imul(be,Tt)|0,l=l+Math.imul(be,tt)|0;var Ki=(S+x|0)+((d&8191)<<13)|0;S=(l+(d>>>13)|0)+(Ki>>>26)|0,Ki&=67108863,x=Math.imul(ke,at),d=Math.imul(ke,Ce),d=d+Math.imul(Pe,at)|0,l=Math.imul(Pe,Ce),x=x+Math.imul(De,Tt)|0,d=d+Math.imul(De,tt)|0,d=d+Math.imul(we,Tt)|0,l=l+Math.imul(we,tt)|0;var Hi=(S+x|0)+((d&8191)<<13)|0;S=(l+(d>>>13)|0)+(Hi>>>26)|0,Hi&=67108863,x=Math.imul(ke,Tt),d=Math.imul(ke,tt),d=d+Math.imul(Pe,Tt)|0,l=Math.imul(Pe,tt);var Vi=(S+x|0)+((d&8191)<<13)|0;return S=(l+(d>>>13)|0)+(Vi>>>26)|0,Vi&=67108863,M[0]=bt,M[1]=Sr,M[2]=Pr,M[3]=Rr,M[4]=Nr,M[5]=Cr,M[6]=Qt,M[7]=Vr,M[8]=Ui,M[9]=Gr,M[10]=ji,M[11]=Fi,M[12]=Wr,M[13]=wi,M[14]=_i,M[15]=or,M[16]=Ki,M[17]=Hi,M[18]=Vi,S!==0&&(M[19]=S,u.length++),u};Math.imul||(F=T);function G($,b,c){c.negative=b.negative^$.negative,c.length=$.length+b.length;for(var u=0,g=0,_=0;_<c.length-1;_++){var M=g;g=0;for(var S=u&67108863,x=Math.min(_,b.length-1),d=Math.max(0,_-$.length+1);d<=x;d++){var l=_-d,R=$.words[l]|0,X=b.words[d]|0,te=R*X,I=te&67108863;M=M+(te/67108864|0)|0,I=I+S|0,S=I&67108863,M=M+(I>>>26)|0,g+=M>>>26,M&=67108863}c.words[_]=S,u=M,M=g}return u!==0?c.words[_]=u:c.length--,c.strip()}function W($,b,c){var u=new ee;return u.mulp($,b,c)}a.prototype.mulTo=function(b,c){var u,g=this.length+b.length;return this.length===10&&b.length===10?u=F(this,b,c):g<63?u=T(this,b,c):g<1024?u=G(this,b,c):u=W(this,b,c),u};function ee($,b){this.x=$,this.y=b}ee.prototype.makeRBT=function(b){for(var c=new Array(b),u=a.prototype._countBits(b)-1,g=0;g<b;g++)c[g]=this.revBin(g,u,b);return c},ee.prototype.revBin=function(b,c,u){if(b===0||b===u-1)return b;for(var g=0,_=0;_<c;_++)g|=(b&1)<<c-_-1,b>>=1;return g},ee.prototype.permute=function(b,c,u,g,_,M){for(var S=0;S<M;S++)g[S]=c[b[S]],_[S]=u[b[S]]},ee.prototype.transform=function(b,c,u,g,_,M){this.permute(M,b,c,u,g,_);for(var S=1;S<_;S<<=1)for(var x=S<<1,d=Math.cos(2*Math.PI/x),l=Math.sin(2*Math.PI/x),R=0;R<_;R+=x)for(var X=d,te=l,I=0;I<S;I++){var J=u[R+I],D=g[R+I],k=u[R+I+S],L=g[R+I+S],m=X*k-te*L;L=X*L+te*k,k=m,u[R+I]=J+k,g[R+I]=D+L,u[R+I+S]=J-k,g[R+I+S]=D-L,I!==x&&(m=d*X-l*te,te=d*te+l*X,X=m)}},ee.prototype.guessLen13b=function(b,c){var u=Math.max(c,b)|1,g=u&1,_=0;for(u=u/2|0;u;u=u>>>1)_++;return 1<<_+1+g},ee.prototype.conjugate=function(b,c,u){if(!(u<=1))for(var g=0;g<u/2;g++){var _=b[g];b[g]=b[u-g-1],b[u-g-1]=_,_=c[g],c[g]=-c[u-g-1],c[u-g-1]=-_}},ee.prototype.normalize13b=function(b,c){for(var u=0,g=0;g<c/2;g++){var _=Math.round(b[2*g+1]/c)*8192+Math.round(b[2*g]/c)+u;b[g]=_&67108863,_<67108864?u=0:u=_/67108864|0}return b},ee.prototype.convert13b=function(b,c,u,g){for(var _=0,M=0;M<c;M++)_=_+(b[M]|0),u[2*M]=_&8191,_=_>>>13,u[2*M+1]=_&8191,_=_>>>13;for(M=2*c;M<g;++M)u[M]=0;i(_===0),i((_&-8192)===0)},ee.prototype.stub=function(b){for(var c=new Array(b),u=0;u<b;u++)c[u]=0;return c},ee.prototype.mulp=function(b,c,u){var g=2*this.guessLen13b(b.length,c.length),_=this.makeRBT(g),M=this.stub(g),S=new Array(g),x=new Array(g),d=new Array(g),l=new Array(g),R=new Array(g),X=new Array(g),te=u.words;te.length=g,this.convert13b(b.words,b.length,S,g),this.convert13b(c.words,c.length,l,g),this.transform(S,M,x,d,g,_),this.transform(l,M,R,X,g,_);for(var I=0;I<g;I++){var J=x[I]*R[I]-d[I]*X[I];d[I]=x[I]*X[I]+d[I]*R[I],x[I]=J}return this.conjugate(x,d,g),this.transform(x,d,te,M,g,_),this.conjugate(te,M,g),this.normalize13b(te,g),u.negative=b.negative^c.negative,u.length=b.length+c.length,u.strip()},a.prototype.mul=function(b){var c=new a(null);return c.words=new Array(this.length+b.length),this.mulTo(b,c)},a.prototype.mulf=function(b){var c=new a(null);return c.words=new Array(this.length+b.length),W(this,b,c)},a.prototype.imul=function(b){return this.clone().mulTo(b,this)},a.prototype.imuln=function(b){i(typeof b=="number"),i(b<67108864);for(var c=0,u=0;u<this.length;u++){var g=(this.words[u]|0)*b,_=(g&67108863)+(c&67108863);c>>=26,c+=g/67108864|0,c+=_>>>26,this.words[u]=_&67108863}return c!==0&&(this.words[u]=c,this.length++),this},a.prototype.muln=function(b){return this.clone().imuln(b)},a.prototype.sqr=function(){return this.mul(this)},a.prototype.isqr=function(){return this.imul(this.clone())},a.prototype.pow=function(b){var c=O(b);if(c.length===0)return new a(1);for(var u=this,g=0;g<c.length&&c[g]===0;g++,u=u.sqr());if(++g<c.length)for(var _=u.sqr();g<c.length;g++,_=_.sqr())c[g]!==0&&(u=u.mul(_));return u},a.prototype.iushln=function(b){i(typeof b=="number"&&b>=0);var c=b%26,u=(b-c)/26,g=67108863>>>26-c<<26-c,_;if(c!==0){var M=0;for(_=0;_<this.length;_++){var S=this.words[_]&g,x=(this.words[_]|0)-S<<c;this.words[_]=x|M,M=S>>>26-c}M&&(this.words[_]=M,this.length++)}if(u!==0){for(_=this.length-1;_>=0;_--)this.words[_+u]=this.words[_];for(_=0;_<u;_++)this.words[_]=0;this.length+=u}return this.strip()},a.prototype.ishln=function(b){return i(this.negative===0),this.iushln(b)},a.prototype.iushrn=function(b,c,u){i(typeof b=="number"&&b>=0);var g;c?g=(c-c%26)/26:g=0;var _=b%26,M=Math.min((b-_)/26,this.length),S=67108863^67108863>>>_<<_,x=u;if(g-=M,g=Math.max(0,g),x){for(var d=0;d<M;d++)x.words[d]=this.words[d];x.length=M}if(M!==0)if(this.length>M)for(this.length-=M,d=0;d<this.length;d++)this.words[d]=this.words[d+M];else this.words[0]=0,this.length=1;var l=0;for(d=this.length-1;d>=0&&(l!==0||d>=g);d--){var R=this.words[d]|0;this.words[d]=l<<26-_|R>>>_,l=R&S}return x&&l!==0&&(x.words[x.length++]=l),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},a.prototype.ishrn=function(b,c,u){return i(this.negative===0),this.iushrn(b,c,u)},a.prototype.shln=function(b){return this.clone().ishln(b)},a.prototype.ushln=function(b){return this.clone().iushln(b)},a.prototype.shrn=function(b){return this.clone().ishrn(b)},a.prototype.ushrn=function(b){return this.clone().iushrn(b)},a.prototype.testn=function(b){i(typeof b=="number"&&b>=0);var c=b%26,u=(b-c)/26,g=1<<c;if(this.length<=u)return!1;var _=this.words[u];return!!(_&g)},a.prototype.imaskn=function(b){i(typeof b=="number"&&b>=0);var c=b%26,u=(b-c)/26;if(i(this.negative===0,"imaskn works only with positive numbers"),this.length<=u)return this;if(c!==0&&u++,this.length=Math.min(u,this.length),c!==0){var g=67108863^67108863>>>c<<c;this.words[this.length-1]&=g}return this.strip()},a.prototype.maskn=function(b){return this.clone().imaskn(b)},a.prototype.iaddn=function(b){return i(typeof b=="number"),i(b<67108864),b<0?this.isubn(-b):this.negative!==0?this.length===1&&(this.words[0]|0)<b?(this.words[0]=b-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(b),this.negative=1,this):this._iaddn(b)},a.prototype._iaddn=function(b){this.words[0]+=b;for(var c=0;c<this.length&&this.words[c]>=67108864;c++)this.words[c]-=67108864,c===this.length-1?this.words[c+1]=1:this.words[c+1]++;return this.length=Math.max(this.length,c+1),this},a.prototype.isubn=function(b){if(i(typeof b=="number"),i(b<67108864),b<0)return this.iaddn(-b);if(this.negative!==0)return this.negative=0,this.iaddn(b),this.negative=1,this;if(this.words[0]-=b,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var c=0;c<this.length&&this.words[c]<0;c++)this.words[c]+=67108864,this.words[c+1]-=1;return this.strip()},a.prototype.addn=function(b){return this.clone().iaddn(b)},a.prototype.subn=function(b){return this.clone().isubn(b)},a.prototype.iabs=function(){return this.negative=0,this},a.prototype.abs=function(){return this.clone().iabs()},a.prototype._ishlnsubmul=function(b,c,u){var g=b.length+u,_;this._expand(g);var M,S=0;for(_=0;_<b.length;_++){M=(this.words[_+u]|0)+S;var x=(b.words[_]|0)*c;M-=x&67108863,S=(M>>26)-(x/67108864|0),this.words[_+u]=M&67108863}for(;_<this.length-u;_++)M=(this.words[_+u]|0)+S,S=M>>26,this.words[_+u]=M&67108863;if(S===0)return this.strip();for(i(S===-1),S=0,_=0;_<this.length;_++)M=-(this.words[_]|0)+S,S=M>>26,this.words[_]=M&67108863;return this.negative=1,this.strip()},a.prototype._wordDiv=function(b,c){var u=this.length-b.length,g=this.clone(),_=b,M=_.words[_.length-1]|0,S=this._countBits(M);u=26-S,u!==0&&(_=_.ushln(u),g.iushln(u),M=_.words[_.length-1]|0);var x=g.length-_.length,d;if(c!=="mod"){d=new a(null),d.length=x+1,d.words=new Array(d.length);for(var l=0;l<d.length;l++)d.words[l]=0}var R=g.clone()._ishlnsubmul(_,1,x);R.negative===0&&(g=R,d&&(d.words[x]=1));for(var X=x-1;X>=0;X--){var te=(g.words[_.length+X]|0)*67108864+(g.words[_.length+X-1]|0);for(te=Math.min(te/M|0,67108863),g._ishlnsubmul(_,te,X);g.negative!==0;)te--,g.negative=0,g._ishlnsubmul(_,1,X),g.isZero()||(g.negative^=1);d&&(d.words[X]=te)}return d&&d.strip(),g.strip(),c!=="div"&&u!==0&&g.iushrn(u),{div:d||null,mod:g}},a.prototype.divmod=function(b,c,u){if(i(!b.isZero()),this.isZero())return{div:new a(0),mod:new a(0)};var g,_,M;return this.negative!==0&&b.negative===0?(M=this.neg().divmod(b,c),c!=="mod"&&(g=M.div.neg()),c!=="div"&&(_=M.mod.neg(),u&&_.negative!==0&&_.iadd(b)),{div:g,mod:_}):this.negative===0&&b.negative!==0?(M=this.divmod(b.neg(),c),c!=="mod"&&(g=M.div.neg()),{div:g,mod:M.mod}):this.negative&b.negative?(M=this.neg().divmod(b.neg(),c),c!=="div"&&(_=M.mod.neg(),u&&_.negative!==0&&_.isub(b)),{div:M.div,mod:_}):b.length>this.length||this.cmp(b)<0?{div:new a(0),mod:this}:b.length===1?c==="div"?{div:this.divn(b.words[0]),mod:null}:c==="mod"?{div:null,mod:new a(this.modn(b.words[0]))}:{div:this.divn(b.words[0]),mod:new a(this.modn(b.words[0]))}:this._wordDiv(b,c)},a.prototype.div=function(b){return this.divmod(b,"div",!1).div},a.prototype.mod=function(b){return this.divmod(b,"mod",!1).mod},a.prototype.umod=function(b){return this.divmod(b,"mod",!0).mod},a.prototype.divRound=function(b){var c=this.divmod(b);if(c.mod.isZero())return c.div;var u=c.div.negative!==0?c.mod.isub(b):c.mod,g=b.ushrn(1),_=b.andln(1),M=u.cmp(g);return M<0||_===1&&M===0?c.div:c.div.negative!==0?c.div.isubn(1):c.div.iaddn(1)},a.prototype.modn=function(b){i(b<=67108863);for(var c=(1<<26)%b,u=0,g=this.length-1;g>=0;g--)u=(c*u+(this.words[g]|0))%b;return u},a.prototype.idivn=function(b){i(b<=67108863);for(var c=0,u=this.length-1;u>=0;u--){var g=(this.words[u]|0)+c*67108864;this.words[u]=g/b|0,c=g%b}return this.strip()},a.prototype.divn=function(b){return this.clone().idivn(b)},a.prototype.egcd=function(b){i(b.negative===0),i(!b.isZero());var c=this,u=b.clone();c.negative!==0?c=c.umod(b):c=c.clone();for(var g=new a(1),_=new a(0),M=new a(0),S=new a(1),x=0;c.isEven()&&u.isEven();)c.iushrn(1),u.iushrn(1),++x;for(var d=u.clone(),l=c.clone();!c.isZero();){for(var R=0,X=1;!(c.words[0]&X)&&R<26;++R,X<<=1);if(R>0)for(c.iushrn(R);R-- >0;)(g.isOdd()||_.isOdd())&&(g.iadd(d),_.isub(l)),g.iushrn(1),_.iushrn(1);for(var te=0,I=1;!(u.words[0]&I)&&te<26;++te,I<<=1);if(te>0)for(u.iushrn(te);te-- >0;)(M.isOdd()||S.isOdd())&&(M.iadd(d),S.isub(l)),M.iushrn(1),S.iushrn(1);c.cmp(u)>=0?(c.isub(u),g.isub(M),_.isub(S)):(u.isub(c),M.isub(g),S.isub(_))}return{a:M,b:S,gcd:u.iushln(x)}},a.prototype._invmp=function(b){i(b.negative===0),i(!b.isZero());var c=this,u=b.clone();c.negative!==0?c=c.umod(b):c=c.clone();for(var g=new a(1),_=new a(0),M=u.clone();c.cmpn(1)>0&&u.cmpn(1)>0;){for(var S=0,x=1;!(c.words[0]&x)&&S<26;++S,x<<=1);if(S>0)for(c.iushrn(S);S-- >0;)g.isOdd()&&g.iadd(M),g.iushrn(1);for(var d=0,l=1;!(u.words[0]&l)&&d<26;++d,l<<=1);if(d>0)for(u.iushrn(d);d-- >0;)_.isOdd()&&_.iadd(M),_.iushrn(1);c.cmp(u)>=0?(c.isub(u),g.isub(_)):(u.isub(c),_.isub(g))}var R;return c.cmpn(1)===0?R=g:R=_,R.cmpn(0)<0&&R.iadd(b),R},a.prototype.gcd=function(b){if(this.isZero())return b.abs();if(b.isZero())return this.abs();var c=this.clone(),u=b.clone();c.negative=0,u.negative=0;for(var g=0;c.isEven()&&u.isEven();g++)c.iushrn(1),u.iushrn(1);do{for(;c.isEven();)c.iushrn(1);for(;u.isEven();)u.iushrn(1);var _=c.cmp(u);if(_<0){var M=c;c=u,u=M}else if(_===0||u.cmpn(1)===0)break;c.isub(u)}while(!0);return u.iushln(g)},a.prototype.invm=function(b){return this.egcd(b).a.umod(b)},a.prototype.isEven=function(){return(this.words[0]&1)===0},a.prototype.isOdd=function(){return(this.words[0]&1)===1},a.prototype.andln=function(b){return this.words[0]&b},a.prototype.bincn=function(b){i(typeof b=="number");var c=b%26,u=(b-c)/26,g=1<<c;if(this.length<=u)return this._expand(u+1),this.words[u]|=g,this;for(var _=g,M=u;_!==0&&M<this.length;M++){var S=this.words[M]|0;S+=_,_=S>>>26,S&=67108863,this.words[M]=S}return _!==0&&(this.words[M]=_,this.length++),this},a.prototype.isZero=function(){return this.length===1&&this.words[0]===0},a.prototype.cmpn=function(b){var c=b<0;if(this.negative!==0&&!c)return-1;if(this.negative===0&&c)return 1;this.strip();var u;if(this.length>1)u=1;else{c&&(b=-b),i(b<=67108863,"Number is too big");var g=this.words[0]|0;u=g===b?0:g<b?-1:1}return this.negative!==0?-u|0:u},a.prototype.cmp=function(b){if(this.negative!==0&&b.negative===0)return-1;if(this.negative===0&&b.negative!==0)return 1;var c=this.ucmp(b);return this.negative!==0?-c|0:c},a.prototype.ucmp=function(b){if(this.length>b.length)return 1;if(this.length<b.length)return-1;for(var c=0,u=this.length-1;u>=0;u--){var g=this.words[u]|0,_=b.words[u]|0;if(g!==_){g<_?c=-1:g>_&&(c=1);break}}return c},a.prototype.gtn=function(b){return this.cmpn(b)===1},a.prototype.gt=function(b){return this.cmp(b)===1},a.prototype.gten=function(b){return this.cmpn(b)>=0},a.prototype.gte=function(b){return this.cmp(b)>=0},a.prototype.ltn=function(b){return this.cmpn(b)===-1},a.prototype.lt=function(b){return this.cmp(b)===-1},a.prototype.lten=function(b){return this.cmpn(b)<=0},a.prototype.lte=function(b){return this.cmp(b)<=0},a.prototype.eqn=function(b){return this.cmpn(b)===0},a.prototype.eq=function(b){return this.cmp(b)===0},a.red=function(b){return new Ae(b)},a.prototype.toRed=function(b){return i(!this.red,"Already a number in reduction context"),i(this.negative===0,"red works only with positives"),b.convertTo(this)._forceRed(b)},a.prototype.fromRed=function(){return i(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},a.prototype._forceRed=function(b){return this.red=b,this},a.prototype.forceRed=function(b){return i(!this.red,"Already a number in reduction context"),this._forceRed(b)},a.prototype.redAdd=function(b){return i(this.red,"redAdd works only with red numbers"),this.red.add(this,b)},a.prototype.redIAdd=function(b){return i(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,b)},a.prototype.redSub=function(b){return i(this.red,"redSub works only with red numbers"),this.red.sub(this,b)},a.prototype.redISub=function(b){return i(this.red,"redISub works only with red numbers"),this.red.isub(this,b)},a.prototype.redShl=function(b){return i(this.red,"redShl works only with red numbers"),this.red.shl(this,b)},a.prototype.redMul=function(b){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,b),this.red.mul(this,b)},a.prototype.redIMul=function(b){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,b),this.red.imul(this,b)},a.prototype.redSqr=function(){return i(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},a.prototype.redISqr=function(){return i(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},a.prototype.redSqrt=function(){return i(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},a.prototype.redInvm=function(){return i(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},a.prototype.redNeg=function(){return i(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},a.prototype.redPow=function(b){return i(this.red&&!b.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,b)};var de={k256:null,p224:null,p192:null,p25519:null};function se($,b){this.name=$,this.p=new a(b,16),this.n=this.p.bitLength(),this.k=new a(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}se.prototype._tmp=function(){var b=new a(null);return b.words=new Array(Math.ceil(this.n/13)),b},se.prototype.ireduce=function(b){var c=b,u;do this.split(c,this.tmp),c=this.imulK(c),c=c.iadd(this.tmp),u=c.bitLength();while(u>this.n);var g=u<this.n?-1:c.ucmp(this.p);return g===0?(c.words[0]=0,c.length=1):g>0?c.isub(this.p):c.strip!==void 0?c.strip():c._strip(),c},se.prototype.split=function(b,c){b.iushrn(this.n,0,c)},se.prototype.imulK=function(b){return b.imul(this.k)};function ae(){se.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}s(ae,se),ae.prototype.split=function(b,c){for(var u=4194303,g=Math.min(b.length,9),_=0;_<g;_++)c.words[_]=b.words[_];if(c.length=g,b.length<=9){b.words[0]=0,b.length=1;return}var M=b.words[9];for(c.words[c.length++]=M&u,_=10;_<b.length;_++){var S=b.words[_]|0;b.words[_-10]=(S&u)<<4|M>>>22,M=S}M>>>=22,b.words[_-10]=M,M===0&&b.length>10?b.length-=10:b.length-=9},ae.prototype.imulK=function(b){b.words[b.length]=0,b.words[b.length+1]=0,b.length+=2;for(var c=0,u=0;u<b.length;u++){var g=b.words[u]|0;c+=g*977,b.words[u]=c&67108863,c=g*64+(c/67108864|0)}return b.words[b.length-1]===0&&(b.length--,b.words[b.length-1]===0&&b.length--),b};function ue(){se.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}s(ue,se);function ne(){se.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}s(ne,se);function ve(){se.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}s(ve,se),ve.prototype.imulK=function(b){for(var c=0,u=0;u<b.length;u++){var g=(b.words[u]|0)*19+c,_=g&67108863;g>>>=26,b.words[u]=_,c=g}return c!==0&&(b.words[b.length++]=c),b},a._prime=function(b){if(de[b])return de[b];var c;if(b==="k256")c=new ae;else if(b==="p224")c=new ue;else if(b==="p192")c=new ne;else if(b==="p25519")c=new ve;else throw new Error("Unknown prime "+b);return de[b]=c,c};function Ae($){if(typeof $=="string"){var b=a._prime($);this.m=b.p,this.prime=b}else i($.gtn(1),"modulus must be greater than 1"),this.m=$,this.prime=null}Ae.prototype._verify1=function(b){i(b.negative===0,"red works only with positives"),i(b.red,"red works only with red numbers")},Ae.prototype._verify2=function(b,c){i((b.negative|c.negative)===0,"red works only with positives"),i(b.red&&b.red===c.red,"red works only with red numbers")},Ae.prototype.imod=function(b){return this.prime?this.prime.ireduce(b)._forceRed(this):b.umod(this.m)._forceRed(this)},Ae.prototype.neg=function(b){return b.isZero()?b.clone():this.m.sub(b)._forceRed(this)},Ae.prototype.add=function(b,c){this._verify2(b,c);var u=b.add(c);return u.cmp(this.m)>=0&&u.isub(this.m),u._forceRed(this)},Ae.prototype.iadd=function(b,c){this._verify2(b,c);var u=b.iadd(c);return u.cmp(this.m)>=0&&u.isub(this.m),u},Ae.prototype.sub=function(b,c){this._verify2(b,c);var u=b.sub(c);return u.cmpn(0)<0&&u.iadd(this.m),u._forceRed(this)},Ae.prototype.isub=function(b,c){this._verify2(b,c);var u=b.isub(c);return u.cmpn(0)<0&&u.iadd(this.m),u},Ae.prototype.shl=function(b,c){return this._verify1(b),this.imod(b.ushln(c))},Ae.prototype.imul=function(b,c){return this._verify2(b,c),this.imod(b.imul(c))},Ae.prototype.mul=function(b,c){return this._verify2(b,c),this.imod(b.mul(c))},Ae.prototype.isqr=function(b){return this.imul(b,b.clone())},Ae.prototype.sqr=function(b){return this.mul(b,b)},Ae.prototype.sqrt=function(b){if(b.isZero())return b.clone();var c=this.m.andln(3);if(i(c%2===1),c===3){var u=this.m.add(new a(1)).iushrn(2);return this.pow(b,u)}for(var g=this.m.subn(1),_=0;!g.isZero()&&g.andln(1)===0;)_++,g.iushrn(1);i(!g.isZero());var M=new a(1).toRed(this),S=M.redNeg(),x=this.m.subn(1).iushrn(1),d=this.m.bitLength();for(d=new a(2*d*d).toRed(this);this.pow(d,x).cmp(S)!==0;)d.redIAdd(S);for(var l=this.pow(d,g),R=this.pow(b,g.addn(1).iushrn(1)),X=this.pow(b,g),te=_;X.cmp(M)!==0;){for(var I=X,J=0;I.cmp(M)!==0;J++)I=I.redSqr();i(J<te);var D=this.pow(l,new a(1).iushln(te-J-1));R=R.redMul(D),l=D.redSqr(),X=X.redMul(l),te=J}return R},Ae.prototype.invm=function(b){var c=b._invmp(this.m);return c.negative!==0?(c.negative=0,this.imod(c).redNeg()):this.imod(c)},Ae.prototype.pow=function(b,c){if(c.isZero())return new a(1).toRed(this);if(c.cmpn(1)===0)return b.clone();var u=4,g=new Array(1<<u);g[0]=new a(1).toRed(this),g[1]=b;for(var _=2;_<g.length;_++)g[_]=this.mul(g[_-1],b);var M=g[0],S=0,x=0,d=c.bitLength()%26;for(d===0&&(d=26),_=c.length-1;_>=0;_--){for(var l=c.words[_],R=d-1;R>=0;R--){var X=l>>R&1;if(M!==g[0]&&(M=this.sqr(M)),X===0&&S===0){x=0;continue}S<<=1,S|=X,x++,!(x!==u&&(_!==0||R!==0))&&(M=this.mul(M,g[S]),x=0,S=0)}d=26}return M},Ae.prototype.convertTo=function(b){var c=b.umod(this.m);return c===b?c.clone():c},Ae.prototype.convertFrom=function(b){var c=b.clone();return c.red=null,c},a.mont=function(b){return new ot(b)};function ot($){Ae.call(this,$),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new a(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}s(ot,Ae),ot.prototype.convertTo=function(b){return this.imod(b.ushln(this.shift))},ot.prototype.convertFrom=function(b){var c=this.imod(b.mul(this.rinv));return c.red=null,c},ot.prototype.imul=function(b,c){if(b.isZero()||c.isZero())return b.words[0]=0,b.length=1,b;var u=b.imul(c),g=u.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),_=u.isub(g).iushrn(this.shift),M=_;return _.cmp(this.m)>=0?M=_.isub(this.m):_.cmpn(0)<0&&(M=_.iadd(this.m)),M._forceRed(this)},ot.prototype.mul=function(b,c){if(b.isZero()||c.isZero())return new a(0)._forceRed(this);var u=b.mul(c),g=u.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),_=u.isub(g).iushrn(this.shift),M=_;return _.cmp(this.m)>=0?M=_.isub(this.m):_.cmpn(0)<0&&(M=_.iadd(this.m)),M._forceRed(this)},ot.prototype.invm=function(b){var c=this.imod(b._invmp(this.m).mul(this.r2));return c._forceRed(this)}})(r,Oo)})(I0);var as=I0.exports,ra=xg;function xg(r,e){if(!r)throw new Error(e||"Assertion failed")}xg.equal=function(e,t,i){if(e!=t)throw new Error(i||"Assertion failed: "+e+" != "+t)};var M0={};(function(r){var e=r;function t(a,f){if(Array.isArray(a))return a.slice();if(!a)return[];var p=[];if(typeof a!="string"){for(var y=0;y<a.length;y++)p[y]=a[y]|0;return p}if(f==="hex"){a=a.replace(/[^a-z0-9]+/ig,""),a.length%2!==0&&(a="0"+a);for(var y=0;y<a.length;y+=2)p.push(parseInt(a[y]+a[y+1],16))}else for(var y=0;y<a.length;y++){var v=a.charCodeAt(y),A=v>>8,E=v&255;A?p.push(A,E):p.push(E)}return p}e.toArray=t;function i(a){return a.length===1?"0"+a:a}e.zero2=i;function s(a){for(var f="",p=0;p<a.length;p++)f+=i(a[p].toString(16));return f}e.toHex=s,e.encode=function(f,p){return p==="hex"?s(f):f}})(M0);(function(r){var e=r,t=as,i=ra,s=M0;e.assert=i,e.toArray=s.toArray,e.zero2=s.zero2,e.toHex=s.toHex,e.encode=s.encode;function a(A,E,N){var O=new Array(Math.max(A.bitLength(),N)+1),T;for(T=0;T<O.length;T+=1)O[T]=0;var F=1<<E+1,G=A.clone();for(T=0;T<O.length;T++){var W,ee=G.andln(F-1);G.isOdd()?(ee>(F>>1)-1?W=(F>>1)-ee:W=ee,G.isubn(W)):W=0,O[T]=W,G.iushrn(1)}return O}e.getNAF=a;function f(A,E){var N=[[],[]];A=A.clone(),E=E.clone();for(var O=0,T=0,F;A.cmpn(-O)>0||E.cmpn(-T)>0;){var G=A.andln(3)+O&3,W=E.andln(3)+T&3;G===3&&(G=-1),W===3&&(W=-1);var ee;G&1?(F=A.andln(7)+O&7,(F===3||F===5)&&W===2?ee=-G:ee=G):ee=0,N[0].push(ee);var de;W&1?(F=E.andln(7)+T&7,(F===3||F===5)&&G===2?de=-W:de=W):de=0,N[1].push(de),2*O===ee+1&&(O=1-O),2*T===de+1&&(T=1-T),A.iushrn(1),E.iushrn(1)}return N}e.getJSF=f;function p(A,E,N){var O="_"+E;A.prototype[E]=function(){return this[O]!==void 0?this[O]:this[O]=N.call(this)}}e.cachedProperty=p;function y(A){return typeof A=="string"?e.toArray(A,"hex"):A}e.parseBytes=y;function v(A){return new t(A,"hex","le")}e.intFromLE=v})(yi);var S0={exports:{}},bu;S0.exports=function(e){return bu||(bu=new Es(null)),bu.generate(e)};function Es(r){this.rand=r}S0.exports.Rand=Es;Es.prototype.generate=function(e){return this._rand(e)};Es.prototype._rand=function(e){if(this.rand.getBytes)return this.rand.getBytes(e);for(var t=new Uint8Array(e),i=0;i<t.length;i++)t[i]=this.rand.getByte();return t};if(typeof self=="object")self.crypto&&self.crypto.getRandomValues?Es.prototype._rand=function(e){var t=new Uint8Array(e);return self.crypto.getRandomValues(t),t}:self.msCrypto&&self.msCrypto.getRandomValues?Es.prototype._rand=function(e){var t=new Uint8Array(e);return self.msCrypto.getRandomValues(t),t}:typeof window=="object"&&(Es.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var mp=ig;if(typeof mp.randomBytes!="function")throw new Error("Not supported");Es.prototype._rand=function(e){return mp.randomBytes(e)}}catch{}var Eg=S0.exports,P0={},Us=as,Vo=yi,Mh=Vo.getNAF,t8=Vo.getJSF,Sh=Vo.assert;function Ms(r,e){this.type=r,this.p=new Us(e.p,16),this.red=e.prime?Us.red(e.prime):Us.mont(this.p),this.zero=new Us(0).toRed(this.red),this.one=new Us(1).toRed(this.red),this.two=new Us(2).toRed(this.red),this.n=e.n&&new Us(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var t=this.n&&this.p.div(this.n);!t||t.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var Hh=Ms;Ms.prototype.point=function(){throw new Error("Not implemented")};Ms.prototype.validate=function(){throw new Error("Not implemented")};Ms.prototype._fixedNafMul=function(e,t){Sh(e.precomputed);var i=e._getDoubles(),s=Mh(t,1,this._bitLength),a=(1<<i.step+1)-(i.step%2===0?2:1);a/=3;var f=[],p,y;for(p=0;p<s.length;p+=i.step){y=0;for(var v=p+i.step-1;v>=p;v--)y=(y<<1)+s[v];f.push(y)}for(var A=this.jpoint(null,null,null),E=this.jpoint(null,null,null),N=a;N>0;N--){for(p=0;p<f.length;p++)y=f[p],y===N?E=E.mixedAdd(i.points[p]):y===-N&&(E=E.mixedAdd(i.points[p].neg()));A=A.add(E)}return A.toP()};Ms.prototype._wnafMul=function(e,t){var i=4,s=e._getNAFPoints(i);i=s.wnd;for(var a=s.points,f=Mh(t,i,this._bitLength),p=this.jpoint(null,null,null),y=f.length-1;y>=0;y--){for(var v=0;y>=0&&f[y]===0;y--)v++;if(y>=0&&v++,p=p.dblp(v),y<0)break;var A=f[y];Sh(A!==0),e.type==="affine"?A>0?p=p.mixedAdd(a[A-1>>1]):p=p.mixedAdd(a[-A-1>>1].neg()):A>0?p=p.add(a[A-1>>1]):p=p.add(a[-A-1>>1].neg())}return e.type==="affine"?p.toP():p};Ms.prototype._wnafMulAdd=function(e,t,i,s,a){var f=this._wnafT1,p=this._wnafT2,y=this._wnafT3,v=0,A,E,N;for(A=0;A<s;A++){N=t[A];var O=N._getNAFPoints(e);f[A]=O.wnd,p[A]=O.points}for(A=s-1;A>=1;A-=2){var T=A-1,F=A;if(f[T]!==1||f[F]!==1){y[T]=Mh(i[T],f[T],this._bitLength),y[F]=Mh(i[F],f[F],this._bitLength),v=Math.max(y[T].length,v),v=Math.max(y[F].length,v);continue}var G=[t[T],null,null,t[F]];t[T].y.cmp(t[F].y)===0?(G[1]=t[T].add(t[F]),G[2]=t[T].toJ().mixedAdd(t[F].neg())):t[T].y.cmp(t[F].y.redNeg())===0?(G[1]=t[T].toJ().mixedAdd(t[F]),G[2]=t[T].add(t[F].neg())):(G[1]=t[T].toJ().mixedAdd(t[F]),G[2]=t[T].toJ().mixedAdd(t[F].neg()));var W=[-3,-1,-5,-7,0,7,5,1,3],ee=t8(i[T],i[F]);for(v=Math.max(ee[0].length,v),y[T]=new Array(v),y[F]=new Array(v),E=0;E<v;E++){var de=ee[0][E]|0,se=ee[1][E]|0;y[T][E]=W[(de+1)*3+(se+1)],y[F][E]=0,p[T]=G}}var ae=this.jpoint(null,null,null),ue=this._wnafT4;for(A=v;A>=0;A--){for(var ne=0;A>=0;){var ve=!0;for(E=0;E<s;E++)ue[E]=y[E][A]|0,ue[E]!==0&&(ve=!1);if(!ve)break;ne++,A--}if(A>=0&&ne++,ae=ae.dblp(ne),A<0)break;for(E=0;E<s;E++){var Ae=ue[E];Ae!==0&&(Ae>0?N=p[E][Ae-1>>1]:Ae<0&&(N=p[E][-Ae-1>>1].neg()),N.type==="affine"?ae=ae.mixedAdd(N):ae=ae.add(N))}}for(A=0;A<s;A++)p[A]=null;return a?ae:ae.toP()};function ki(r,e){this.curve=r,this.type=e,this.precomputed=null}Ms.BasePoint=ki;ki.prototype.eq=function(){throw new Error("Not implemented")};ki.prototype.validate=function(){return this.curve.validate(this)};Ms.prototype.decodePoint=function(e,t){e=Vo.toArray(e,t);var i=this.p.byteLength();if((e[0]===4||e[0]===6||e[0]===7)&&e.length-1===2*i){e[0]===6?Sh(e[e.length-1]%2===0):e[0]===7&&Sh(e[e.length-1]%2===1);var s=this.point(e.slice(1,1+i),e.slice(1+i,1+2*i));return s}else if((e[0]===2||e[0]===3)&&e.length-1===i)return this.pointFromX(e.slice(1,1+i),e[0]===3);throw new Error("Unknown point format")};ki.prototype.encodeCompressed=function(e){return this.encode(e,!0)};ki.prototype._encode=function(e){var t=this.curve.p.byteLength(),i=this.getX().toArray("be",t);return e?[this.getY().isEven()?2:3].concat(i):[4].concat(i,this.getY().toArray("be",t))};ki.prototype.encode=function(e,t){return Vo.encode(this._encode(t),e)};ki.prototype.precompute=function(e){if(this.precomputed)return this;var t={doubles:null,naf:null,beta:null};return t.naf=this._getNAFPoints(8),t.doubles=this._getDoubles(4,e),t.beta=this._getBeta(),this.precomputed=t,this};ki.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var t=this.precomputed.doubles;return t?t.points.length>=Math.ceil((e.bitLength()+1)/t.step):!1};ki.prototype._getDoubles=function(e,t){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var i=[this],s=this,a=0;a<t;a+=e){for(var f=0;f<e;f++)s=s.dbl();i.push(s)}return{step:e,points:i}};ki.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var t=[this],i=(1<<e)-1,s=i===1?null:this.dbl(),a=1;a<i;a++)t[a]=t[a-1].add(s);return{wnd:e,points:t}};ki.prototype._getBeta=function(){return null};ki.prototype.dblp=function(e){for(var t=this,i=0;i<e;i++)t=t.dbl();return t};var r8=yi,Zt=as,R0=Kh,Fa=Hh,i8=r8.assert;function Li(r){Fa.call(this,"short",r),this.a=new Zt(r.a,16).toRed(this.red),this.b=new Zt(r.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(r),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}R0(Li,Fa);var n8=Li;Li.prototype._getEndomorphism=function(e){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var t,i;if(e.beta)t=new Zt(e.beta,16).toRed(this.red);else{var s=this._getEndoRoots(this.p);t=s[0].cmp(s[1])<0?s[0]:s[1],t=t.toRed(this.red)}if(e.lambda)i=new Zt(e.lambda,16);else{var a=this._getEndoRoots(this.n);this.g.mul(a[0]).x.cmp(this.g.x.redMul(t))===0?i=a[0]:(i=a[1],i8(this.g.mul(i).x.cmp(this.g.x.redMul(t))===0))}var f;return e.basis?f=e.basis.map(function(p){return{a:new Zt(p.a,16),b:new Zt(p.b,16)}}):f=this._getEndoBasis(i),{beta:t,lambda:i,basis:f}}};Li.prototype._getEndoRoots=function(e){var t=e===this.p?this.red:Zt.mont(e),i=new Zt(2).toRed(t).redInvm(),s=i.redNeg(),a=new Zt(3).toRed(t).redNeg().redSqrt().redMul(i),f=s.redAdd(a).fromRed(),p=s.redSub(a).fromRed();return[f,p]};Li.prototype._getEndoBasis=function(e){for(var t=this.n.ushrn(Math.floor(this.n.bitLength()/2)),i=e,s=this.n.clone(),a=new Zt(1),f=new Zt(0),p=new Zt(0),y=new Zt(1),v,A,E,N,O,T,F,G=0,W,ee;i.cmpn(0)!==0;){var de=s.div(i);W=s.sub(de.mul(i)),ee=p.sub(de.mul(a));var se=y.sub(de.mul(f));if(!E&&W.cmp(t)<0)v=F.neg(),A=a,E=W.neg(),N=ee;else if(E&&++G===2)break;F=W,s=i,i=W,p=a,a=ee,y=f,f=se}O=W.neg(),T=ee;var ae=E.sqr().add(N.sqr()),ue=O.sqr().add(T.sqr());return ue.cmp(ae)>=0&&(O=v,T=A),E.negative&&(E=E.neg(),N=N.neg()),O.negative&&(O=O.neg(),T=T.neg()),[{a:E,b:N},{a:O,b:T}]};Li.prototype._endoSplit=function(e){var t=this.endo.basis,i=t[0],s=t[1],a=s.b.mul(e).divRound(this.n),f=i.b.neg().mul(e).divRound(this.n),p=a.mul(i.a),y=f.mul(s.a),v=a.mul(i.b),A=f.mul(s.b),E=e.sub(p).sub(y),N=v.add(A).neg();return{k1:E,k2:N}};Li.prototype.pointFromX=function(e,t){e=new Zt(e,16),e.red||(e=e.toRed(this.red));var i=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),s=i.redSqrt();if(s.redSqr().redSub(i).cmp(this.zero)!==0)throw new Error("invalid point");var a=s.fromRed().isOdd();return(t&&!a||!t&&a)&&(s=s.redNeg()),this.point(e,s)};Li.prototype.validate=function(e){if(e.inf)return!0;var t=e.x,i=e.y,s=this.a.redMul(t),a=t.redSqr().redMul(t).redIAdd(s).redIAdd(this.b);return i.redSqr().redISub(a).cmpn(0)===0};Li.prototype._endoWnafMulAdd=function(e,t,i){for(var s=this._endoWnafT1,a=this._endoWnafT2,f=0;f<e.length;f++){var p=this._endoSplit(t[f]),y=e[f],v=y._getBeta();p.k1.negative&&(p.k1.ineg(),y=y.neg(!0)),p.k2.negative&&(p.k2.ineg(),v=v.neg(!0)),s[f*2]=y,s[f*2+1]=v,a[f*2]=p.k1,a[f*2+1]=p.k2}for(var A=this._wnafMulAdd(1,s,a,f*2,i),E=0;E<f*2;E++)s[E]=null,a[E]=null;return A};function mr(r,e,t,i){Fa.BasePoint.call(this,r,"affine"),e===null&&t===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new Zt(e,16),this.y=new Zt(t,16),i&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}R0(mr,Fa.BasePoint);Li.prototype.point=function(e,t,i){return new mr(this,e,t,i)};Li.prototype.pointFromJSON=function(e,t){return mr.fromJSON(this,e,t)};mr.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var t=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var i=this.curve,s=function(a){return i.point(a.x.redMul(i.endo.beta),a.y)};e.beta=t,t.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(s)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(s)}}}return t}};mr.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]};mr.fromJSON=function(e,t,i){typeof t=="string"&&(t=JSON.parse(t));var s=e.point(t[0],t[1],i);if(!t[2])return s;function a(p){return e.point(p[0],p[1],i)}var f=t[2];return s.precomputed={beta:null,doubles:f.doubles&&{step:f.doubles.step,points:[s].concat(f.doubles.points.map(a))},naf:f.naf&&{wnd:f.naf.wnd,points:[s].concat(f.naf.points.map(a))}},s};mr.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};mr.prototype.isInfinity=function(){return this.inf};mr.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(this.x.cmp(e.x)===0)return this.curve.point(null,null);var t=this.y.redSub(e.y);t.cmpn(0)!==0&&(t=t.redMul(this.x.redSub(e.x).redInvm()));var i=t.redSqr().redISub(this.x).redISub(e.x),s=t.redMul(this.x.redSub(i)).redISub(this.y);return this.curve.point(i,s)};mr.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(e.cmpn(0)===0)return this.curve.point(null,null);var t=this.curve.a,i=this.x.redSqr(),s=e.redInvm(),a=i.redAdd(i).redIAdd(i).redIAdd(t).redMul(s),f=a.redSqr().redISub(this.x.redAdd(this.x)),p=a.redMul(this.x.redSub(f)).redISub(this.y);return this.curve.point(f,p)};mr.prototype.getX=function(){return this.x.fromRed()};mr.prototype.getY=function(){return this.y.fromRed()};mr.prototype.mul=function(e){return e=new Zt(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)};mr.prototype.mulAdd=function(e,t,i){var s=[this,t],a=[e,i];return this.curve.endo?this.curve._endoWnafMulAdd(s,a):this.curve._wnafMulAdd(1,s,a,2)};mr.prototype.jmulAdd=function(e,t,i){var s=[this,t],a=[e,i];return this.curve.endo?this.curve._endoWnafMulAdd(s,a,!0):this.curve._wnafMulAdd(1,s,a,2,!0)};mr.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||this.x.cmp(e.x)===0&&this.y.cmp(e.y)===0)};mr.prototype.neg=function(e){if(this.inf)return this;var t=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var i=this.precomputed,s=function(a){return a.neg()};t.precomputed={naf:i.naf&&{wnd:i.naf.wnd,points:i.naf.points.map(s)},doubles:i.doubles&&{step:i.doubles.step,points:i.doubles.points.map(s)}}}return t};mr.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var e=this.curve.jpoint(this.x,this.y,this.curve.one);return e};function Ir(r,e,t,i){Fa.BasePoint.call(this,r,"jacobian"),e===null&&t===null&&i===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new Zt(0)):(this.x=new Zt(e,16),this.y=new Zt(t,16),this.z=new Zt(i,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}R0(Ir,Fa.BasePoint);Li.prototype.jpoint=function(e,t,i){return new Ir(this,e,t,i)};Ir.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),t=e.redSqr(),i=this.x.redMul(t),s=this.y.redMul(t).redMul(e);return this.curve.point(i,s)};Ir.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};Ir.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.z.redSqr(),i=this.z.redSqr(),s=this.x.redMul(t),a=e.x.redMul(i),f=this.y.redMul(t.redMul(e.z)),p=e.y.redMul(i.redMul(this.z)),y=s.redSub(a),v=f.redSub(p);if(y.cmpn(0)===0)return v.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var A=y.redSqr(),E=A.redMul(y),N=s.redMul(A),O=v.redSqr().redIAdd(E).redISub(N).redISub(N),T=v.redMul(N.redISub(O)).redISub(f.redMul(E)),F=this.z.redMul(e.z).redMul(y);return this.curve.jpoint(O,T,F)};Ir.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var t=this.z.redSqr(),i=this.x,s=e.x.redMul(t),a=this.y,f=e.y.redMul(t).redMul(this.z),p=i.redSub(s),y=a.redSub(f);if(p.cmpn(0)===0)return y.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var v=p.redSqr(),A=v.redMul(p),E=i.redMul(v),N=y.redSqr().redIAdd(A).redISub(E).redISub(E),O=y.redMul(E.redISub(N)).redISub(a.redMul(A)),T=this.z.redMul(p);return this.curve.jpoint(N,O,T)};Ir.prototype.dblp=function(e){if(e===0)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var t;if(this.curve.zeroA||this.curve.threeA){var i=this;for(t=0;t<e;t++)i=i.dbl();return i}var s=this.curve.a,a=this.curve.tinv,f=this.x,p=this.y,y=this.z,v=y.redSqr().redSqr(),A=p.redAdd(p);for(t=0;t<e;t++){var E=f.redSqr(),N=A.redSqr(),O=N.redSqr(),T=E.redAdd(E).redIAdd(E).redIAdd(s.redMul(v)),F=f.redMul(N),G=T.redSqr().redISub(F.redAdd(F)),W=F.redISub(G),ee=T.redMul(W);ee=ee.redIAdd(ee).redISub(O);var de=A.redMul(y);t+1<e&&(v=v.redMul(O)),f=G,y=de,A=ee}return this.curve.jpoint(f,A.redMul(a),y)};Ir.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()};Ir.prototype._zeroDbl=function(){var e,t,i;if(this.zOne){var s=this.x.redSqr(),a=this.y.redSqr(),f=a.redSqr(),p=this.x.redAdd(a).redSqr().redISub(s).redISub(f);p=p.redIAdd(p);var y=s.redAdd(s).redIAdd(s),v=y.redSqr().redISub(p).redISub(p),A=f.redIAdd(f);A=A.redIAdd(A),A=A.redIAdd(A),e=v,t=y.redMul(p.redISub(v)).redISub(A),i=this.y.redAdd(this.y)}else{var E=this.x.redSqr(),N=this.y.redSqr(),O=N.redSqr(),T=this.x.redAdd(N).redSqr().redISub(E).redISub(O);T=T.redIAdd(T);var F=E.redAdd(E).redIAdd(E),G=F.redSqr(),W=O.redIAdd(O);W=W.redIAdd(W),W=W.redIAdd(W),e=G.redISub(T).redISub(T),t=F.redMul(T.redISub(e)).redISub(W),i=this.y.redMul(this.z),i=i.redIAdd(i)}return this.curve.jpoint(e,t,i)};Ir.prototype._threeDbl=function(){var e,t,i;if(this.zOne){var s=this.x.redSqr(),a=this.y.redSqr(),f=a.redSqr(),p=this.x.redAdd(a).redSqr().redISub(s).redISub(f);p=p.redIAdd(p);var y=s.redAdd(s).redIAdd(s).redIAdd(this.curve.a),v=y.redSqr().redISub(p).redISub(p);e=v;var A=f.redIAdd(f);A=A.redIAdd(A),A=A.redIAdd(A),t=y.redMul(p.redISub(v)).redISub(A),i=this.y.redAdd(this.y)}else{var E=this.z.redSqr(),N=this.y.redSqr(),O=this.x.redMul(N),T=this.x.redSub(E).redMul(this.x.redAdd(E));T=T.redAdd(T).redIAdd(T);var F=O.redIAdd(O);F=F.redIAdd(F);var G=F.redAdd(F);e=T.redSqr().redISub(G),i=this.y.redAdd(this.z).redSqr().redISub(N).redISub(E);var W=N.redSqr();W=W.redIAdd(W),W=W.redIAdd(W),W=W.redIAdd(W),t=T.redMul(F.redISub(e)).redISub(W)}return this.curve.jpoint(e,t,i)};Ir.prototype._dbl=function(){var e=this.curve.a,t=this.x,i=this.y,s=this.z,a=s.redSqr().redSqr(),f=t.redSqr(),p=i.redSqr(),y=f.redAdd(f).redIAdd(f).redIAdd(e.redMul(a)),v=t.redAdd(t);v=v.redIAdd(v);var A=v.redMul(p),E=y.redSqr().redISub(A.redAdd(A)),N=A.redISub(E),O=p.redSqr();O=O.redIAdd(O),O=O.redIAdd(O),O=O.redIAdd(O);var T=y.redMul(N).redISub(O),F=i.redAdd(i).redMul(s);return this.curve.jpoint(E,T,F)};Ir.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),t=this.y.redSqr(),i=this.z.redSqr(),s=t.redSqr(),a=e.redAdd(e).redIAdd(e),f=a.redSqr(),p=this.x.redAdd(t).redSqr().redISub(e).redISub(s);p=p.redIAdd(p),p=p.redAdd(p).redIAdd(p),p=p.redISub(f);var y=p.redSqr(),v=s.redIAdd(s);v=v.redIAdd(v),v=v.redIAdd(v),v=v.redIAdd(v);var A=a.redIAdd(p).redSqr().redISub(f).redISub(y).redISub(v),E=t.redMul(A);E=E.redIAdd(E),E=E.redIAdd(E);var N=this.x.redMul(y).redISub(E);N=N.redIAdd(N),N=N.redIAdd(N);var O=this.y.redMul(A.redMul(v.redISub(A)).redISub(p.redMul(y)));O=O.redIAdd(O),O=O.redIAdd(O),O=O.redIAdd(O);var T=this.z.redAdd(p).redSqr().redISub(i).redISub(y);return this.curve.jpoint(N,O,T)};Ir.prototype.mul=function(e,t){return e=new Zt(e,t),this.curve._wnafMul(this,e)};Ir.prototype.eq=function(e){if(e.type==="affine")return this.eq(e.toJ());if(this===e)return!0;var t=this.z.redSqr(),i=e.z.redSqr();if(this.x.redMul(i).redISub(e.x.redMul(t)).cmpn(0)!==0)return!1;var s=t.redMul(this.z),a=i.redMul(e.z);return this.y.redMul(a).redISub(e.y.redMul(s)).cmpn(0)===0};Ir.prototype.eqXToP=function(e){var t=this.z.redSqr(),i=e.toRed(this.curve.red).redMul(t);if(this.x.cmp(i)===0)return!0;for(var s=e.clone(),a=this.curve.redN.redMul(t);;){if(s.iadd(this.curve.n),s.cmp(this.curve.p)>=0)return!1;if(i.redIAdd(a),this.x.cmp(i)===0)return!0}};Ir.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};Ir.prototype.isInfinity=function(){return this.z.cmpn(0)===0};var Ra=as,Ig=Kh,Vh=Hh,s8=yi;function Ka(r){Vh.call(this,"mont",r),this.a=new Ra(r.a,16).toRed(this.red),this.b=new Ra(r.b,16).toRed(this.red),this.i4=new Ra(4).toRed(this.red).redInvm(),this.two=new Ra(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}Ig(Ka,Vh);var a8=Ka;Ka.prototype.validate=function(e){var t=e.normalize().x,i=t.redSqr(),s=i.redMul(t).redAdd(i.redMul(this.a)).redAdd(t),a=s.redSqrt();return a.redSqr().cmp(s)===0};function br(r,e,t){Vh.BasePoint.call(this,r,"projective"),e===null&&t===null?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new Ra(e,16),this.z=new Ra(t,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}Ig(br,Vh.BasePoint);Ka.prototype.decodePoint=function(e,t){return this.point(s8.toArray(e,t),1)};Ka.prototype.point=function(e,t){return new br(this,e,t)};Ka.prototype.pointFromJSON=function(e){return br.fromJSON(this,e)};br.prototype.precompute=function(){};br.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())};br.fromJSON=function(e,t){return new br(e,t[0],t[1]||e.one)};br.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};br.prototype.isInfinity=function(){return this.z.cmpn(0)===0};br.prototype.dbl=function(){var e=this.x.redAdd(this.z),t=e.redSqr(),i=this.x.redSub(this.z),s=i.redSqr(),a=t.redSub(s),f=t.redMul(s),p=a.redMul(s.redAdd(this.curve.a24.redMul(a)));return this.curve.point(f,p)};br.prototype.add=function(){throw new Error("Not supported on Montgomery curve")};br.prototype.diffAdd=function(e,t){var i=this.x.redAdd(this.z),s=this.x.redSub(this.z),a=e.x.redAdd(e.z),f=e.x.redSub(e.z),p=f.redMul(i),y=a.redMul(s),v=t.z.redMul(p.redAdd(y).redSqr()),A=t.x.redMul(p.redISub(y).redSqr());return this.curve.point(v,A)};br.prototype.mul=function(e){for(var t=e.clone(),i=this,s=this.curve.point(null,null),a=this,f=[];t.cmpn(0)!==0;t.iushrn(1))f.push(t.andln(1));for(var p=f.length-1;p>=0;p--)f[p]===0?(i=i.diffAdd(s,a),s=s.dbl()):(s=i.diffAdd(s,a),i=i.dbl());return s};br.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")};br.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")};br.prototype.eq=function(e){return this.getX().cmp(e.getX())===0};br.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this};br.prototype.getX=function(){return this.normalize(),this.x.fromRed()};var o8=yi,rs=as,Mg=Kh,Gh=Hh,c8=o8.assert;function $n(r){this.twisted=(r.a|0)!==1,this.mOneA=this.twisted&&(r.a|0)===-1,this.extended=this.mOneA,Gh.call(this,"edwards",r),this.a=new rs(r.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new rs(r.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new rs(r.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),c8(!this.twisted||this.c.fromRed().cmpn(1)===0),this.oneC=(r.c|0)===1}Mg($n,Gh);var h8=$n;$n.prototype._mulA=function(e){return this.mOneA?e.redNeg():this.a.redMul(e)};$n.prototype._mulC=function(e){return this.oneC?e:this.c.redMul(e)};$n.prototype.jpoint=function(e,t,i,s){return this.point(e,t,i,s)};$n.prototype.pointFromX=function(e,t){e=new rs(e,16),e.red||(e=e.toRed(this.red));var i=e.redSqr(),s=this.c2.redSub(this.a.redMul(i)),a=this.one.redSub(this.c2.redMul(this.d).redMul(i)),f=s.redMul(a.redInvm()),p=f.redSqrt();if(p.redSqr().redSub(f).cmp(this.zero)!==0)throw new Error("invalid point");var y=p.fromRed().isOdd();return(t&&!y||!t&&y)&&(p=p.redNeg()),this.point(e,p)};$n.prototype.pointFromY=function(e,t){e=new rs(e,16),e.red||(e=e.toRed(this.red));var i=e.redSqr(),s=i.redSub(this.c2),a=i.redMul(this.d).redMul(this.c2).redSub(this.a),f=s.redMul(a.redInvm());if(f.cmp(this.zero)===0){if(t)throw new Error("invalid point");return this.point(this.zero,e)}var p=f.redSqrt();if(p.redSqr().redSub(f).cmp(this.zero)!==0)throw new Error("invalid point");return p.fromRed().isOdd()!==t&&(p=p.redNeg()),this.point(p,e)};$n.prototype.validate=function(e){if(e.isInfinity())return!0;e.normalize();var t=e.x.redSqr(),i=e.y.redSqr(),s=t.redMul(this.a).redAdd(i),a=this.c2.redMul(this.one.redAdd(this.d.redMul(t).redMul(i)));return s.cmp(a)===0};function Kt(r,e,t,i,s){Gh.BasePoint.call(this,r,"projective"),e===null&&t===null&&i===null?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new rs(e,16),this.y=new rs(t,16),this.z=i?new rs(i,16):this.curve.one,this.t=s&&new rs(s,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}Mg(Kt,Gh.BasePoint);$n.prototype.pointFromJSON=function(e){return Kt.fromJSON(this,e)};$n.prototype.point=function(e,t,i,s){return new Kt(this,e,t,i,s)};Kt.fromJSON=function(e,t){return new Kt(e,t[0],t[1],t[2])};Kt.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};Kt.prototype.isInfinity=function(){return this.x.cmpn(0)===0&&(this.y.cmp(this.z)===0||this.zOne&&this.y.cmp(this.curve.c)===0)};Kt.prototype._extDbl=function(){var e=this.x.redSqr(),t=this.y.redSqr(),i=this.z.redSqr();i=i.redIAdd(i);var s=this.curve._mulA(e),a=this.x.redAdd(this.y).redSqr().redISub(e).redISub(t),f=s.redAdd(t),p=f.redSub(i),y=s.redSub(t),v=a.redMul(p),A=f.redMul(y),E=a.redMul(y),N=p.redMul(f);return this.curve.point(v,A,N,E)};Kt.prototype._projDbl=function(){var e=this.x.redAdd(this.y).redSqr(),t=this.x.redSqr(),i=this.y.redSqr(),s,a,f,p,y,v;if(this.curve.twisted){p=this.curve._mulA(t);var A=p.redAdd(i);this.zOne?(s=e.redSub(t).redSub(i).redMul(A.redSub(this.curve.two)),a=A.redMul(p.redSub(i)),f=A.redSqr().redSub(A).redSub(A)):(y=this.z.redSqr(),v=A.redSub(y).redISub(y),s=e.redSub(t).redISub(i).redMul(v),a=A.redMul(p.redSub(i)),f=A.redMul(v))}else p=t.redAdd(i),y=this.curve._mulC(this.z).redSqr(),v=p.redSub(y).redSub(y),s=this.curve._mulC(e.redISub(p)).redMul(v),a=this.curve._mulC(p).redMul(t.redISub(i)),f=p.redMul(v);return this.curve.point(s,a,f)};Kt.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()};Kt.prototype._extAdd=function(e){var t=this.y.redSub(this.x).redMul(e.y.redSub(e.x)),i=this.y.redAdd(this.x).redMul(e.y.redAdd(e.x)),s=this.t.redMul(this.curve.dd).redMul(e.t),a=this.z.redMul(e.z.redAdd(e.z)),f=i.redSub(t),p=a.redSub(s),y=a.redAdd(s),v=i.redAdd(t),A=f.redMul(p),E=y.redMul(v),N=f.redMul(v),O=p.redMul(y);return this.curve.point(A,E,O,N)};Kt.prototype._projAdd=function(e){var t=this.z.redMul(e.z),i=t.redSqr(),s=this.x.redMul(e.x),a=this.y.redMul(e.y),f=this.curve.d.redMul(s).redMul(a),p=i.redSub(f),y=i.redAdd(f),v=this.x.redAdd(this.y).redMul(e.x.redAdd(e.y)).redISub(s).redISub(a),A=t.redMul(p).redMul(v),E,N;return this.curve.twisted?(E=t.redMul(y).redMul(a.redSub(this.curve._mulA(s))),N=p.redMul(y)):(E=t.redMul(y).redMul(a.redSub(s)),N=this.curve._mulC(p).redMul(y)),this.curve.point(A,E,N)};Kt.prototype.add=function(e){return this.isInfinity()?e:e.isInfinity()?this:this.curve.extended?this._extAdd(e):this._projAdd(e)};Kt.prototype.mul=function(e){return this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve._wnafMul(this,e)};Kt.prototype.mulAdd=function(e,t,i){return this.curve._wnafMulAdd(1,[this,t],[e,i],2,!1)};Kt.prototype.jmulAdd=function(e,t,i){return this.curve._wnafMulAdd(1,[this,t],[e,i],2,!0)};Kt.prototype.normalize=function(){if(this.zOne)return this;var e=this.z.redInvm();return this.x=this.x.redMul(e),this.y=this.y.redMul(e),this.t&&(this.t=this.t.redMul(e)),this.z=this.curve.one,this.zOne=!0,this};Kt.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())};Kt.prototype.getX=function(){return this.normalize(),this.x.fromRed()};Kt.prototype.getY=function(){return this.normalize(),this.y.fromRed()};Kt.prototype.eq=function(e){return this===e||this.getX().cmp(e.getX())===0&&this.getY().cmp(e.getY())===0};Kt.prototype.eqXToP=function(e){var t=e.toRed(this.curve.red).redMul(this.z);if(this.x.cmp(t)===0)return!0;for(var i=e.clone(),s=this.curve.redN.redMul(this.z);;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(t.redIAdd(s),this.x.cmp(t)===0)return!0}};Kt.prototype.toP=Kt.prototype.normalize;Kt.prototype.mixedAdd=Kt.prototype.add;(function(r){var e=r;e.base=Hh,e.short=n8,e.mont=a8,e.edwards=h8})(P0);var Wh={},Jh={},Pt={},f8=ra,u8=Kh;Pt.inherits=u8;function d8(r,e){return(r.charCodeAt(e)&64512)!==55296||e<0||e+1>=r.length?!1:(r.charCodeAt(e+1)&64512)===56320}function l8(r,e){if(Array.isArray(r))return r.slice();if(!r)return[];var t=[];if(typeof r=="string")if(e){if(e==="hex")for(r=r.replace(/[^a-z0-9]+/ig,""),r.length%2!==0&&(r="0"+r),s=0;s<r.length;s+=2)t.push(parseInt(r[s]+r[s+1],16))}else for(var i=0,s=0;s<r.length;s++){var a=r.charCodeAt(s);a<128?t[i++]=a:a<2048?(t[i++]=a>>6|192,t[i++]=a&63|128):d8(r,s)?(a=65536+((a&1023)<<10)+(r.charCodeAt(++s)&1023),t[i++]=a>>18|240,t[i++]=a>>12&63|128,t[i++]=a>>6&63|128,t[i++]=a&63|128):(t[i++]=a>>12|224,t[i++]=a>>6&63|128,t[i++]=a&63|128)}else for(s=0;s<r.length;s++)t[s]=r[s]|0;return t}Pt.toArray=l8;function p8(r){for(var e="",t=0;t<r.length;t++)e+=Pg(r[t].toString(16));return e}Pt.toHex=p8;function Sg(r){var e=r>>>24|r>>>8&65280|r<<8&16711680|(r&255)<<24;return e>>>0}Pt.htonl=Sg;function g8(r,e){for(var t="",i=0;i<r.length;i++){var s=r[i];e==="little"&&(s=Sg(s)),t+=Rg(s.toString(16))}return t}Pt.toHex32=g8;function Pg(r){return r.length===1?"0"+r:r}Pt.zero2=Pg;function Rg(r){return r.length===7?"0"+r:r.length===6?"00"+r:r.length===5?"000"+r:r.length===4?"0000"+r:r.length===3?"00000"+r:r.length===2?"000000"+r:r.length===1?"0000000"+r:r}Pt.zero8=Rg;function v8(r,e,t,i){var s=t-e;f8(s%4===0);for(var a=new Array(s/4),f=0,p=e;f<a.length;f++,p+=4){var y;i==="big"?y=r[p]<<24|r[p+1]<<16|r[p+2]<<8|r[p+3]:y=r[p+3]<<24|r[p+2]<<16|r[p+1]<<8|r[p],a[f]=y>>>0}return a}Pt.join32=v8;function b8(r,e){for(var t=new Array(r.length*4),i=0,s=0;i<r.length;i++,s+=4){var a=r[i];e==="big"?(t[s]=a>>>24,t[s+1]=a>>>16&255,t[s+2]=a>>>8&255,t[s+3]=a&255):(t[s+3]=a>>>24,t[s+2]=a>>>16&255,t[s+1]=a>>>8&255,t[s]=a&255)}return t}Pt.split32=b8;function m8(r,e){return r>>>e|r<<32-e}Pt.rotr32=m8;function y8(r,e){return r<<e|r>>>32-e}Pt.rotl32=y8;function w8(r,e){return r+e>>>0}Pt.sum32=w8;function _8(r,e,t){return r+e+t>>>0}Pt.sum32_3=_8;function A8(r,e,t,i){return r+e+t+i>>>0}Pt.sum32_4=A8;function x8(r,e,t,i,s){return r+e+t+i+s>>>0}Pt.sum32_5=x8;function E8(r,e,t,i){var s=r[e],a=r[e+1],f=i+a>>>0,p=(f<i?1:0)+t+s;r[e]=p>>>0,r[e+1]=f}Pt.sum64=E8;function I8(r,e,t,i){var s=e+i>>>0,a=(s<e?1:0)+r+t;return a>>>0}Pt.sum64_hi=I8;function M8(r,e,t,i){var s=e+i;return s>>>0}Pt.sum64_lo=M8;function S8(r,e,t,i,s,a,f,p){var y=0,v=e;v=v+i>>>0,y+=v<e?1:0,v=v+a>>>0,y+=v<a?1:0,v=v+p>>>0,y+=v<p?1:0;var A=r+t+s+f+y;return A>>>0}Pt.sum64_4_hi=S8;function P8(r,e,t,i,s,a,f,p){var y=e+i+a+p;return y>>>0}Pt.sum64_4_lo=P8;function R8(r,e,t,i,s,a,f,p,y,v){var A=0,E=e;E=E+i>>>0,A+=E<e?1:0,E=E+a>>>0,A+=E<a?1:0,E=E+p>>>0,A+=E<p?1:0,E=E+v>>>0,A+=E<v?1:0;var N=r+t+s+f+y+A;return N>>>0}Pt.sum64_5_hi=R8;function N8(r,e,t,i,s,a,f,p,y,v){var A=e+i+a+p+v;return A>>>0}Pt.sum64_5_lo=N8;function C8(r,e,t){var i=e<<32-t|r>>>t;return i>>>0}Pt.rotr64_hi=C8;function O8(r,e,t){var i=r<<32-t|e>>>t;return i>>>0}Pt.rotr64_lo=O8;function T8(r,e,t){return r>>>t}Pt.shr64_hi=T8;function q8(r,e,t){var i=r<<32-t|e>>>t;return i>>>0}Pt.shr64_lo=q8;var Ha={},yp=Pt,D8=ra;function Qh(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}Ha.BlockHash=Qh;Qh.prototype.update=function(e,t){if(e=yp.toArray(e,t),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){e=this.pending;var i=e.length%this._delta8;this.pending=e.slice(e.length-i,e.length),this.pending.length===0&&(this.pending=null),e=yp.join32(e,0,e.length-i,this.endian);for(var s=0;s<e.length;s+=this._delta32)this._update(e,s,s+this._delta32)}return this};Qh.prototype.digest=function(e){return this.update(this._pad()),D8(this.pending===null),this._digest(e)};Qh.prototype._pad=function(){var e=this.pendingTotal,t=this._delta8,i=t-(e+this.padLength)%t,s=new Array(i+this.padLength);s[0]=128;for(var a=1;a<i;a++)s[a]=0;if(e<<=3,this.endian==="big"){for(var f=8;f<this.padLength;f++)s[a++]=0;s[a++]=0,s[a++]=0,s[a++]=0,s[a++]=0,s[a++]=e>>>24&255,s[a++]=e>>>16&255,s[a++]=e>>>8&255,s[a++]=e&255}else for(s[a++]=e&255,s[a++]=e>>>8&255,s[a++]=e>>>16&255,s[a++]=e>>>24&255,s[a++]=0,s[a++]=0,s[a++]=0,s[a++]=0,f=8;f<this.padLength;f++)s[a++]=0;return s};var Va={},zn={},B8=Pt,En=B8.rotr32;function $8(r,e,t,i){if(r===0)return Ng(e,t,i);if(r===1||r===3)return Og(e,t,i);if(r===2)return Cg(e,t,i)}zn.ft_1=$8;function Ng(r,e,t){return r&e^~r&t}zn.ch32=Ng;function Cg(r,e,t){return r&e^r&t^e&t}zn.maj32=Cg;function Og(r,e,t){return r^e^t}zn.p32=Og;function z8(r){return En(r,2)^En(r,13)^En(r,22)}zn.s0_256=z8;function k8(r){return En(r,6)^En(r,11)^En(r,25)}zn.s1_256=k8;function L8(r){return En(r,7)^En(r,18)^r>>>3}zn.g0_256=L8;function U8(r){return En(r,17)^En(r,19)^r>>>10}zn.g1_256=U8;var Da=Pt,j8=Ha,F8=zn,mu=Da.rotl32,_o=Da.sum32,K8=Da.sum32_5,H8=F8.ft_1,Tg=j8.BlockHash,V8=[1518500249,1859775393,2400959708,3395469782];function Cn(){if(!(this instanceof Cn))return new Cn;Tg.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}Da.inherits(Cn,Tg);var G8=Cn;Cn.blockSize=512;Cn.outSize=160;Cn.hmacStrength=80;Cn.padLength=64;Cn.prototype._update=function(e,t){for(var i=this.W,s=0;s<16;s++)i[s]=e[t+s];for(;s<i.length;s++)i[s]=mu(i[s-3]^i[s-8]^i[s-14]^i[s-16],1);var a=this.h[0],f=this.h[1],p=this.h[2],y=this.h[3],v=this.h[4];for(s=0;s<i.length;s++){var A=~~(s/20),E=K8(mu(a,5),H8(A,f,p,y),v,i[s],V8[A]);v=y,y=p,p=mu(f,30),f=a,a=E}this.h[0]=_o(this.h[0],a),this.h[1]=_o(this.h[1],f),this.h[2]=_o(this.h[2],p),this.h[3]=_o(this.h[3],y),this.h[4]=_o(this.h[4],v)};Cn.prototype._digest=function(e){return e==="hex"?Da.toHex32(this.h,"big"):Da.split32(this.h,"big")};var Ba=Pt,W8=Ha,Ga=zn,J8=ra,Xi=Ba.sum32,Q8=Ba.sum32_4,Y8=Ba.sum32_5,X8=Ga.ch32,Z8=Ga.maj32,e7=Ga.s0_256,t7=Ga.s1_256,r7=Ga.g0_256,i7=Ga.g1_256,qg=W8.BlockHash,n7=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function On(){if(!(this instanceof On))return new On;qg.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=n7,this.W=new Array(64)}Ba.inherits(On,qg);var Dg=On;On.blockSize=512;On.outSize=256;On.hmacStrength=192;On.padLength=64;On.prototype._update=function(e,t){for(var i=this.W,s=0;s<16;s++)i[s]=e[t+s];for(;s<i.length;s++)i[s]=Q8(i7(i[s-2]),i[s-7],r7(i[s-15]),i[s-16]);var a=this.h[0],f=this.h[1],p=this.h[2],y=this.h[3],v=this.h[4],A=this.h[5],E=this.h[6],N=this.h[7];for(J8(this.k.length===i.length),s=0;s<i.length;s++){var O=Y8(N,t7(v),X8(v,A,E),this.k[s],i[s]),T=Xi(e7(a),Z8(a,f,p));N=E,E=A,A=v,v=Xi(y,O),y=p,p=f,f=a,a=Xi(O,T)}this.h[0]=Xi(this.h[0],a),this.h[1]=Xi(this.h[1],f),this.h[2]=Xi(this.h[2],p),this.h[3]=Xi(this.h[3],y),this.h[4]=Xi(this.h[4],v),this.h[5]=Xi(this.h[5],A),this.h[6]=Xi(this.h[6],E),this.h[7]=Xi(this.h[7],N)};On.prototype._digest=function(e){return e==="hex"?Ba.toHex32(this.h,"big"):Ba.split32(this.h,"big")};var t0=Pt,Bg=Dg;function ns(){if(!(this instanceof ns))return new ns;Bg.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}t0.inherits(ns,Bg);var s7=ns;ns.blockSize=512;ns.outSize=224;ns.hmacStrength=192;ns.padLength=64;ns.prototype._digest=function(e){return e==="hex"?t0.toHex32(this.h.slice(0,7),"big"):t0.split32(this.h.slice(0,7),"big")};var ai=Pt,a7=Ha,o7=ra,In=ai.rotr64_hi,Mn=ai.rotr64_lo,$g=ai.shr64_hi,zg=ai.shr64_lo,bs=ai.sum64,yu=ai.sum64_hi,wu=ai.sum64_lo,c7=ai.sum64_4_hi,h7=ai.sum64_4_lo,f7=ai.sum64_5_hi,u7=ai.sum64_5_lo,kg=a7.BlockHash,d7=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function on(){if(!(this instanceof on))return new on;kg.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=d7,this.W=new Array(160)}ai.inherits(on,kg);var Lg=on;on.blockSize=1024;on.outSize=512;on.hmacStrength=192;on.padLength=128;on.prototype._prepareBlock=function(e,t){for(var i=this.W,s=0;s<32;s++)i[s]=e[t+s];for(;s<i.length;s+=2){var a=x7(i[s-4],i[s-3]),f=E7(i[s-4],i[s-3]),p=i[s-14],y=i[s-13],v=_7(i[s-30],i[s-29]),A=A7(i[s-30],i[s-29]),E=i[s-32],N=i[s-31];i[s]=c7(a,f,p,y,v,A,E,N),i[s+1]=h7(a,f,p,y,v,A,E,N)}};on.prototype._update=function(e,t){this._prepareBlock(e,t);var i=this.W,s=this.h[0],a=this.h[1],f=this.h[2],p=this.h[3],y=this.h[4],v=this.h[5],A=this.h[6],E=this.h[7],N=this.h[8],O=this.h[9],T=this.h[10],F=this.h[11],G=this.h[12],W=this.h[13],ee=this.h[14],de=this.h[15];o7(this.k.length===i.length);for(var se=0;se<i.length;se+=2){var ae=ee,ue=de,ne=y7(N,O),ve=w7(N,O),Ae=l7(N,O,T,F,G),ot=p7(N,O,T,F,G,W),$=this.k[se],b=this.k[se+1],c=i[se],u=i[se+1],g=f7(ae,ue,ne,ve,Ae,ot,$,b,c,u),_=u7(ae,ue,ne,ve,Ae,ot,$,b,c,u);ae=b7(s,a),ue=m7(s,a),ne=g7(s,a,f,p,y),ve=v7(s,a,f,p,y,v);var M=yu(ae,ue,ne,ve),S=wu(ae,ue,ne,ve);ee=G,de=W,G=T,W=F,T=N,F=O,N=yu(A,E,g,_),O=wu(E,E,g,_),A=y,E=v,y=f,v=p,f=s,p=a,s=yu(g,_,M,S),a=wu(g,_,M,S)}bs(this.h,0,s,a),bs(this.h,2,f,p),bs(this.h,4,y,v),bs(this.h,6,A,E),bs(this.h,8,N,O),bs(this.h,10,T,F),bs(this.h,12,G,W),bs(this.h,14,ee,de)};on.prototype._digest=function(e){return e==="hex"?ai.toHex32(this.h,"big"):ai.split32(this.h,"big")};function l7(r,e,t,i,s){var a=r&t^~r&s;return a<0&&(a+=4294967296),a}function p7(r,e,t,i,s,a){var f=e&i^~e&a;return f<0&&(f+=4294967296),f}function g7(r,e,t,i,s){var a=r&t^r&s^t&s;return a<0&&(a+=4294967296),a}function v7(r,e,t,i,s,a){var f=e&i^e&a^i&a;return f<0&&(f+=4294967296),f}function b7(r,e){var t=In(r,e,28),i=In(e,r,2),s=In(e,r,7),a=t^i^s;return a<0&&(a+=4294967296),a}function m7(r,e){var t=Mn(r,e,28),i=Mn(e,r,2),s=Mn(e,r,7),a=t^i^s;return a<0&&(a+=4294967296),a}function y7(r,e){var t=In(r,e,14),i=In(r,e,18),s=In(e,r,9),a=t^i^s;return a<0&&(a+=4294967296),a}function w7(r,e){var t=Mn(r,e,14),i=Mn(r,e,18),s=Mn(e,r,9),a=t^i^s;return a<0&&(a+=4294967296),a}function _7(r,e){var t=In(r,e,1),i=In(r,e,8),s=$g(r,e,7),a=t^i^s;return a<0&&(a+=4294967296),a}function A7(r,e){var t=Mn(r,e,1),i=Mn(r,e,8),s=zg(r,e,7),a=t^i^s;return a<0&&(a+=4294967296),a}function x7(r,e){var t=In(r,e,19),i=In(e,r,29),s=$g(r,e,6),a=t^i^s;return a<0&&(a+=4294967296),a}function E7(r,e){var t=Mn(r,e,19),i=Mn(e,r,29),s=zg(r,e,6),a=t^i^s;return a<0&&(a+=4294967296),a}var r0=Pt,Ug=Lg;function ss(){if(!(this instanceof ss))return new ss;Ug.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}r0.inherits(ss,Ug);var I7=ss;ss.blockSize=1024;ss.outSize=384;ss.hmacStrength=192;ss.padLength=128;ss.prototype._digest=function(e){return e==="hex"?r0.toHex32(this.h.slice(0,12),"big"):r0.split32(this.h.slice(0,12),"big")};Va.sha1=G8;Va.sha224=s7;Va.sha256=Dg;Va.sha384=I7;Va.sha512=Lg;var jg={},Xs=Pt,M7=Ha,nh=Xs.rotl32,wp=Xs.sum32,Ao=Xs.sum32_3,_p=Xs.sum32_4,Fg=M7.BlockHash;function Tn(){if(!(this instanceof Tn))return new Tn;Fg.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}Xs.inherits(Tn,Fg);jg.ripemd160=Tn;Tn.blockSize=512;Tn.outSize=160;Tn.hmacStrength=192;Tn.padLength=64;Tn.prototype._update=function(e,t){for(var i=this.h[0],s=this.h[1],a=this.h[2],f=this.h[3],p=this.h[4],y=i,v=s,A=a,E=f,N=p,O=0;O<80;O++){var T=wp(nh(_p(i,Ap(O,s,a,f),e[R7[O]+t],S7(O)),C7[O]),p);i=p,p=f,f=nh(a,10),a=s,s=T,T=wp(nh(_p(y,Ap(79-O,v,A,E),e[N7[O]+t],P7(O)),O7[O]),N),y=N,N=E,E=nh(A,10),A=v,v=T}T=Ao(this.h[1],a,E),this.h[1]=Ao(this.h[2],f,N),this.h[2]=Ao(this.h[3],p,y),this.h[3]=Ao(this.h[4],i,v),this.h[4]=Ao(this.h[0],s,A),this.h[0]=T};Tn.prototype._digest=function(e){return e==="hex"?Xs.toHex32(this.h,"little"):Xs.split32(this.h,"little")};function Ap(r,e,t,i){return r<=15?e^t^i:r<=31?e&t|~e&i:r<=47?(e|~t)^i:r<=63?e&i|t&~i:e^(t|~i)}function S7(r){return r<=15?0:r<=31?1518500249:r<=47?1859775393:r<=63?2400959708:2840853838}function P7(r){return r<=15?1352829926:r<=31?1548603684:r<=47?1836072691:r<=63?2053994217:0}var R7=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],N7=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],C7=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],O7=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],T7=Pt,q7=ra;function $a(r,e,t){if(!(this instanceof $a))return new $a(r,e,t);this.Hash=r,this.blockSize=r.blockSize/8,this.outSize=r.outSize/8,this.inner=null,this.outer=null,this._init(T7.toArray(e,t))}var D7=$a;$a.prototype._init=function(e){e.length>this.blockSize&&(e=new this.Hash().update(e).digest()),q7(e.length<=this.blockSize);for(var t=e.length;t<this.blockSize;t++)e.push(0);for(t=0;t<e.length;t++)e[t]^=54;for(this.inner=new this.Hash().update(e),t=0;t<e.length;t++)e[t]^=106;this.outer=new this.Hash().update(e)};$a.prototype.update=function(e,t){return this.inner.update(e,t),this};$a.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)};(function(r){var e=r;e.utils=Pt,e.common=Ha,e.sha=Va,e.ripemd=jg,e.hmac=D7,e.sha1=e.sha.sha1,e.sha256=e.sha.sha256,e.sha224=e.sha.sha224,e.sha384=e.sha.sha384,e.sha512=e.sha.sha512,e.ripemd160=e.ripemd.ripemd160})(Jh);var _u,xp;function B7(){return xp||(xp=1,_u={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}),_u}(function(r){var e=r,t=Jh,i=P0,s=yi,a=s.assert;function f(v){v.type==="short"?this.curve=new i.short(v):v.type==="edwards"?this.curve=new i.edwards(v):this.curve=new i.mont(v),this.g=this.curve.g,this.n=this.curve.n,this.hash=v.hash,a(this.g.validate(),"Invalid curve"),a(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}e.PresetCurve=f;function p(v,A){Object.defineProperty(e,v,{configurable:!0,enumerable:!0,get:function(){var E=new f(A);return Object.defineProperty(e,v,{configurable:!0,enumerable:!0,value:E}),E}})}p("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:t.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),p("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:t.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),p("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:t.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),p("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:t.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),p("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:t.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),p("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:t.sha256,gRed:!1,g:["9"]}),p("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:t.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var y;try{y=B7()}catch{y=void 0}p("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:t.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",y]})})(Wh);var $7=Jh,Ws=M0,Kg=ra;function Is(r){if(!(this instanceof Is))return new Is(r);this.hash=r.hash,this.predResist=!!r.predResist,this.outLen=this.hash.outSize,this.minEntropy=r.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=Ws.toArray(r.entropy,r.entropyEnc||"hex"),t=Ws.toArray(r.nonce,r.nonceEnc||"hex"),i=Ws.toArray(r.pers,r.persEnc||"hex");Kg(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,t,i)}var z7=Is;Is.prototype._init=function(e,t,i){var s=e.concat(t).concat(i);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var a=0;a<this.V.length;a++)this.K[a]=0,this.V[a]=1;this._update(s),this._reseed=1,this.reseedInterval=281474976710656};Is.prototype._hmac=function(){return new $7.hmac(this.hash,this.K)};Is.prototype._update=function(e){var t=this._hmac().update(this.V).update([0]);e&&(t=t.update(e)),this.K=t.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())};Is.prototype.reseed=function(e,t,i,s){typeof t!="string"&&(s=i,i=t,t=null),e=Ws.toArray(e,t),i=Ws.toArray(i,s),Kg(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(i||[])),this._reseed=1};Is.prototype.generate=function(e,t,i,s){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof t!="string"&&(s=i,i=t,t=null),i&&(i=Ws.toArray(i,s||"hex"),this._update(i));for(var a=[];a.length<e;)this.V=this._hmac().update(this.V).digest(),a=a.concat(this.V);var f=a.slice(0,e);return this._update(i),this._reseed++,Ws.encode(f,t)};var k7=as,L7=yi,i0=L7.assert;function Dr(r,e){this.ec=r,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}var U7=Dr;Dr.fromPublic=function(e,t,i){return t instanceof Dr?t:new Dr(e,{pub:t,pubEnc:i})};Dr.fromPrivate=function(e,t,i){return t instanceof Dr?t:new Dr(e,{priv:t,privEnc:i})};Dr.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}};Dr.prototype.getPublic=function(e,t){return typeof e=="string"&&(t=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),t?this.pub.encode(t,e):this.pub};Dr.prototype.getPrivate=function(e){return e==="hex"?this.priv.toString(16,2):this.priv};Dr.prototype._importPrivate=function(e,t){this.priv=new k7(e,t||16),this.priv=this.priv.umod(this.ec.curve.n)};Dr.prototype._importPublic=function(e,t){if(e.x||e.y){this.ec.curve.type==="mont"?i0(e.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&i0(e.x&&e.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(e.x,e.y);return}this.pub=this.ec.curve.decodePoint(e,t)};Dr.prototype.derive=function(e){return e.validate()||i0(e.validate(),"public point not validated"),e.mul(this.priv).getX()};Dr.prototype.sign=function(e,t,i){return this.ec.sign(e,this,t,i)};Dr.prototype.verify=function(e,t){return this.ec.verify(e,t,this)};Dr.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var Ph=as,N0=yi,j7=N0.assert;function Yh(r,e){if(r instanceof Yh)return r;this._importDER(r,e)||(j7(r.r&&r.s,"Signature without r or s"),this.r=new Ph(r.r,16),this.s=new Ph(r.s,16),r.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=r.recoveryParam)}var F7=Yh;function K7(){this.place=0}function Au(r,e){var t=r[e.place++];if(!(t&128))return t;var i=t&15;if(i===0||i>4||r[e.place]===0)return!1;for(var s=0,a=0,f=e.place;a<i;a++,f++)s<<=8,s|=r[f],s>>>=0;return s<=127?!1:(e.place=f,s)}function Ep(r){for(var e=0,t=r.length-1;!r[e]&&!(r[e+1]&128)&&e<t;)e++;return e===0?r:r.slice(e)}Yh.prototype._importDER=function(e,t){e=N0.toArray(e,t);var i=new K7;if(e[i.place++]!==48)return!1;var s=Au(e,i);if(s===!1||s+i.place!==e.length||e[i.place++]!==2)return!1;var a=Au(e,i);if(a===!1||e[i.place]&128)return!1;var f=e.slice(i.place,a+i.place);if(i.place+=a,e[i.place++]!==2)return!1;var p=Au(e,i);if(p===!1||e.length!==p+i.place||e[i.place]&128)return!1;var y=e.slice(i.place,p+i.place);if(f[0]===0)if(f[1]&128)f=f.slice(1);else return!1;if(y[0]===0)if(y[1]&128)y=y.slice(1);else return!1;return this.r=new Ph(f),this.s=new Ph(y),this.recoveryParam=null,!0};function xu(r,e){if(e<128){r.push(e);return}var t=1+(Math.log(e)/Math.LN2>>>3);for(r.push(t|128);--t;)r.push(e>>>(t<<3)&255);r.push(e)}Yh.prototype.toDER=function(e){var t=this.r.toArray(),i=this.s.toArray();for(t[0]&128&&(t=[0].concat(t)),i[0]&128&&(i=[0].concat(i)),t=Ep(t),i=Ep(i);!i[0]&&!(i[1]&128);)i=i.slice(1);var s=[2];xu(s,t.length),s=s.concat(t),s.push(2),xu(s,i.length);var a=s.concat(i),f=[48];return xu(f,a.length),f=f.concat(a),N0.encode(f,e)};var Js=as,Hg=z7,H7=yi,Eu=Wh,V7=Eg,Vg=H7.assert,C0=U7,Xh=F7;function $i(r){if(!(this instanceof $i))return new $i(r);typeof r=="string"&&(Vg(Object.prototype.hasOwnProperty.call(Eu,r),"Unknown curve "+r),r=Eu[r]),r instanceof Eu.PresetCurve&&(r={curve:r}),this.curve=r.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=r.curve.g,this.g.precompute(r.curve.n.bitLength()+1),this.hash=r.hash||r.curve.hash}var G7=$i;$i.prototype.keyPair=function(e){return new C0(this,e)};$i.prototype.keyFromPrivate=function(e,t){return C0.fromPrivate(this,e,t)};$i.prototype.keyFromPublic=function(e,t){return C0.fromPublic(this,e,t)};$i.prototype.genKeyPair=function(e){e||(e={});for(var t=new Hg({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||V7(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),i=this.n.byteLength(),s=this.n.sub(new Js(2));;){var a=new Js(t.generate(i));if(!(a.cmp(s)>0))return a.iaddn(1),this.keyFromPrivate(a)}};$i.prototype._truncateToN=function(e,t){var i=e.byteLength()*8-this.n.bitLength();return i>0&&(e=e.ushrn(i)),!t&&e.cmp(this.n)>=0?e.sub(this.n):e};$i.prototype.sign=function(e,t,i,s){typeof i=="object"&&(s=i,i=null),s||(s={}),t=this.keyFromPrivate(t,i),e=this._truncateToN(new Js(e,16));for(var a=this.n.byteLength(),f=t.getPrivate().toArray("be",a),p=e.toArray("be",a),y=new Hg({hash:this.hash,entropy:f,nonce:p,pers:s.pers,persEnc:s.persEnc||"utf8"}),v=this.n.sub(new Js(1)),A=0;;A++){var E=s.k?s.k(A):new Js(y.generate(this.n.byteLength()));if(E=this._truncateToN(E,!0),!(E.cmpn(1)<=0||E.cmp(v)>=0)){var N=this.g.mul(E);if(!N.isInfinity()){var O=N.getX(),T=O.umod(this.n);if(T.cmpn(0)!==0){var F=E.invm(this.n).mul(T.mul(t.getPrivate()).iadd(e));if(F=F.umod(this.n),F.cmpn(0)!==0){var G=(N.getY().isOdd()?1:0)|(O.cmp(T)!==0?2:0);return s.canonical&&F.cmp(this.nh)>0&&(F=this.n.sub(F),G^=1),new Xh({r:T,s:F,recoveryParam:G})}}}}}};$i.prototype.verify=function(e,t,i,s){e=this._truncateToN(new Js(e,16)),i=this.keyFromPublic(i,s),t=new Xh(t,"hex");var a=t.r,f=t.s;if(a.cmpn(1)<0||a.cmp(this.n)>=0||f.cmpn(1)<0||f.cmp(this.n)>=0)return!1;var p=f.invm(this.n),y=p.mul(e).umod(this.n),v=p.mul(a).umod(this.n),A;return this.curve._maxwellTrick?(A=this.g.jmulAdd(y,i.getPublic(),v),A.isInfinity()?!1:A.eqXToP(a)):(A=this.g.mulAdd(y,i.getPublic(),v),A.isInfinity()?!1:A.getX().umod(this.n).cmp(a)===0)};$i.prototype.recoverPubKey=function(r,e,t,i){Vg((3&t)===t,"The recovery param is more than two bits"),e=new Xh(e,i);var s=this.n,a=new Js(r),f=e.r,p=e.s,y=t&1,v=t>>1;if(f.cmp(this.curve.p.umod(this.curve.n))>=0&&v)throw new Error("Unable to find sencond key candinate");v?f=this.curve.pointFromX(f.add(this.curve.n),y):f=this.curve.pointFromX(f,y);var A=e.r.invm(s),E=s.sub(a).mul(A).umod(s),N=p.mul(A).umod(s);return this.g.mulAdd(E,f,N)};$i.prototype.getKeyRecoveryParam=function(r,e,t,i){if(e=new Xh(e,i),e.recoveryParam!==null)return e.recoveryParam;for(var s=0;s<4;s++){var a;try{a=this.recoverPubKey(r,e,s)}catch{continue}if(a.eq(t))return s}throw new Error("Unable to find valid recovery factor")};var Go=yi,Gg=Go.assert,Ip=Go.parseBytes,Wa=Go.cachedProperty;function vr(r,e){this.eddsa=r,this._secret=Ip(e.secret),r.isPoint(e.pub)?this._pub=e.pub:this._pubBytes=Ip(e.pub)}vr.fromPublic=function(e,t){return t instanceof vr?t:new vr(e,{pub:t})};vr.fromSecret=function(e,t){return t instanceof vr?t:new vr(e,{secret:t})};vr.prototype.secret=function(){return this._secret};Wa(vr,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())});Wa(vr,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())});Wa(vr,"privBytes",function(){var e=this.eddsa,t=this.hash(),i=e.encodingLength-1,s=t.slice(0,e.encodingLength);return s[0]&=248,s[i]&=127,s[i]|=64,s});Wa(vr,"priv",function(){return this.eddsa.decodeInt(this.privBytes())});Wa(vr,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()});Wa(vr,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)});vr.prototype.sign=function(e){return Gg(this._secret,"KeyPair can only verify"),this.eddsa.sign(e,this)};vr.prototype.verify=function(e,t){return this.eddsa.verify(e,t,this)};vr.prototype.getSecret=function(e){return Gg(this._secret,"KeyPair is public only"),Go.encode(this.secret(),e)};vr.prototype.getPublic=function(e){return Go.encode(this.pubBytes(),e)};var W7=vr,J7=as,Zh=yi,Mp=Zh.assert,ef=Zh.cachedProperty,Q7=Zh.parseBytes;function ia(r,e){this.eddsa=r,typeof e!="object"&&(e=Q7(e)),Array.isArray(e)&&(Mp(e.length===r.encodingLength*2,"Signature has invalid size"),e={R:e.slice(0,r.encodingLength),S:e.slice(r.encodingLength)}),Mp(e.R&&e.S,"Signature without R or S"),r.isPoint(e.R)&&(this._R=e.R),e.S instanceof J7&&(this._S=e.S),this._Rencoded=Array.isArray(e.R)?e.R:e.Rencoded,this._Sencoded=Array.isArray(e.S)?e.S:e.Sencoded}ef(ia,"S",function(){return this.eddsa.decodeInt(this.Sencoded())});ef(ia,"R",function(){return this.eddsa.decodePoint(this.Rencoded())});ef(ia,"Rencoded",function(){return this.eddsa.encodePoint(this.R())});ef(ia,"Sencoded",function(){return this.eddsa.encodeInt(this.S())});ia.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())};ia.prototype.toHex=function(){return Zh.encode(this.toBytes(),"hex").toUpperCase()};var Y7=ia,X7=Jh,Z7=Wh,za=yi,e9=za.assert,Wg=za.parseBytes,Jg=W7,Sp=Y7;function oi(r){if(e9(r==="ed25519","only tested with ed25519 so far"),!(this instanceof oi))return new oi(r);r=Z7[r].curve,this.curve=r,this.g=r.g,this.g.precompute(r.n.bitLength()+1),this.pointClass=r.point().constructor,this.encodingLength=Math.ceil(r.n.bitLength()/8),this.hash=X7.sha512}var t9=oi;oi.prototype.sign=function(e,t){e=Wg(e);var i=this.keyFromSecret(t),s=this.hashInt(i.messagePrefix(),e),a=this.g.mul(s),f=this.encodePoint(a),p=this.hashInt(f,i.pubBytes(),e).mul(i.priv()),y=s.add(p).umod(this.curve.n);return this.makeSignature({R:a,S:y,Rencoded:f})};oi.prototype.verify=function(e,t,i){if(e=Wg(e),t=this.makeSignature(t),t.S().gte(t.eddsa.curve.n)||t.S().isNeg())return!1;var s=this.keyFromPublic(i),a=this.hashInt(t.Rencoded(),s.pubBytes(),e),f=this.g.mul(t.S()),p=t.R().add(s.pub().mul(a));return p.eq(f)};oi.prototype.hashInt=function(){for(var e=this.hash(),t=0;t<arguments.length;t++)e.update(arguments[t]);return za.intFromLE(e.digest()).umod(this.curve.n)};oi.prototype.keyFromPublic=function(e){return Jg.fromPublic(this,e)};oi.prototype.keyFromSecret=function(e){return Jg.fromSecret(this,e)};oi.prototype.makeSignature=function(e){return e instanceof Sp?e:new Sp(this,e)};oi.prototype.encodePoint=function(e){var t=e.getY().toArray("le",this.encodingLength);return t[this.encodingLength-1]|=e.getX().isOdd()?128:0,t};oi.prototype.decodePoint=function(e){e=za.parseBytes(e);var t=e.length-1,i=e.slice(0,t).concat(e[t]&-129),s=(e[t]&128)!==0,a=za.intFromLE(i);return this.curve.pointFromY(a,s)};oi.prototype.encodeInt=function(e){return e.toArray("le",this.encodingLength)};oi.prototype.decodeInt=function(e){return za.intFromLE(e)};oi.prototype.isPoint=function(e){return e instanceof this.pointClass};(function(r){var e=r;e.version=e8.version,e.utils=yi,e.rand=Eg,e.curve=P0,e.curves=Wh,e.ec=G7,e.eddsa=t9})(Ag);const r9=":";function $o(r){const[e,t]=r.split(r9);return{namespace:e,reference:t}}function Pp(r,e=[]){const t=[];return Object.keys(r).forEach(i=>{if(e.length&&!e.includes(i))return;const s=r[i];t.push(...s.accounts)}),t}function Qg(r,e){return r.includes(":")?[r]:e.chains||[]}var i9=Object.defineProperty,Rp=Object.getOwnPropertySymbols,n9=Object.prototype.hasOwnProperty,s9=Object.prototype.propertyIsEnumerable,Np=(r,e,t)=>e in r?i9(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Cp=(r,e)=>{for(var t in e||(e={}))n9.call(e,t)&&Np(r,t,e[t]);if(Rp)for(var t of Rp(e))s9.call(e,t)&&Np(r,t,e[t]);return r};const a9="ReactNative",gi={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},o9="js";function Uo(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function Wo(){return!sg()&&!!ng()&&navigator.product===a9}function Jo(){return!Uo()&&!!ng()&&!!sg()}function Qo(){return Wo()?gi.reactNative:Uo()?gi.node:Jo()?gi.browser:gi.unknown}function c9(){var r;try{return Wo()&&typeof global<"u"&&typeof(global==null?void 0:global.Application)<"u"?(r=global.Application)==null?void 0:r.applicationId:void 0}catch{return}}function h9(r,e){let t=Ah.parse(r);return t=Cp(Cp({},t),e),r=Ah.stringify(t),r}function f9(){return r4()||{name:"",description:"",url:"",icons:[""]}}function u9(){if(Qo()===gi.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:t,Version:i}=global.Platform;return[t,i].join("-")}const r=g4();if(r===null)return"unknown";const e=r.os?r.os.replace(" ","").toLowerCase():"unknown";return r.type==="browser"?[e,r.name,r.version].join("-"):[e,r.version].join("-")}function d9(){var r;const e=Qo();return e===gi.browser?[e,((r=n4())==null?void 0:r.host)||"unknown"].join(":"):e}function l9(r,e,t){const i=u9(),s=d9();return[[r,e].join("-"),[o9,t].join("-"),i,s].join("/")}function p9({protocol:r,version:e,relayUrl:t,sdkVersion:i,auth:s,projectId:a,useOnCloseEvent:f,bundleId:p}){const y=t.split("?"),v=l9(r,e,i),A={auth:s,ua:v,projectId:a,useOnCloseEvent:f||void 0,origin:p||void 0},E=h9(y[1]||"",A);return y[0]+"?"+E}function Gs(r,e){return r.filter(t=>e.includes(t)).length===r.length}function Yg(r){return Object.fromEntries(r.entries())}function Xg(r){return new Map(Object.entries(r))}function Hs(r=ye.FIVE_MINUTES,e){const t=ye.toMiliseconds(r||ye.FIVE_MINUTES);let i,s,a;return{resolve:f=>{a&&i&&(clearTimeout(a),i(f))},reject:f=>{a&&s&&(clearTimeout(a),s(f))},done:()=>new Promise((f,p)=>{a=setTimeout(()=>{p(new Error(e))},t),i=f,s=p})}}function Oa(r,e,t){return new Promise(async(i,s)=>{const a=setTimeout(()=>s(new Error(t)),e);try{const f=await r;i(f)}catch(f){s(f)}clearTimeout(a)})}function Zg(r,e){if(typeof e=="string"&&e.startsWith(`${r}:`))return e;if(r.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(r.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${r}`)}function g9(r){return Zg("topic",r)}function v9(r){return Zg("id",r)}function ev(r){const[e,t]=r.split(":"),i={id:void 0,topic:void 0};if(e==="topic"&&typeof t=="string")i.topic=t;else if(e==="id"&&Number.isInteger(Number(t)))i.id=Number(t);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${t}`);return i}function Ar(r,e){return ye.fromMiliseconds(Date.now()+ye.toMiliseconds(r))}function ws(r){return Date.now()>=ye.toMiliseconds(r)}function Et(r,e){return`${r}${e?`:${e}`:""}`}function gh(r=[],e=[]){return[...new Set([...r,...e])]}async function b9({id:r,topic:e,wcDeepLink:t}){try{if(!t)return;const i=typeof t=="string"?JSON.parse(t):t;let s=i==null?void 0:i.href;if(typeof s!="string")return;s.endsWith("/")&&(s=s.slice(0,-1));const a=`${s}/wc?requestId=${r}&sessionTopic=${e}`,f=Qo();f===gi.browser?a.startsWith("https://")||a.startsWith("http://")?window.open(a,"_blank","noreferrer noopener"):window.open(a,"_self","noreferrer noopener"):f===gi.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(a)}catch(i){console.error(i)}}async function m9(r,e){try{return await r.getItem(e)||(Jo()?localStorage.getItem(e):void 0)}catch(t){console.error(t)}}function y9(){return typeof crypto<"u"&&crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,r=>{const e=Math.random()*16|0;return(r==="x"?e:e&3|8).toString(16)})}var tv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function w9(r){var e=r.default;if(typeof e=="function"){var t=function(){return e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(r).forEach(function(i){var s=Object.getOwnPropertyDescriptor(r,i);Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:function(){return r[i]}})}),t}var rv={exports:{}};/**
* [js-sha3]{@link https://github.com/emn178/js-sha3}
*
* @version 0.8.0
* @author Chen, Yi-Cyuan [emn178@gmail.com]
* @copyright Chen, Yi-Cyuan 2015-2018
* @license MIT
*/(function(r){(function(){var e="input is invalid type",t="finalize already called",i=typeof window=="object",s=i?window:{};s.JS_SHA3_NO_WINDOW&&(i=!1);var a=!i&&typeof self=="object",f=!s.JS_SHA3_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;f?s=tv:a&&(s=self);var p=!s.JS_SHA3_NO_COMMON_JS&&!0&&r.exports,y=!s.JS_SHA3_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",v="0123456789abcdef".split(""),A=[31,7936,2031616,520093696],E=[4,1024,262144,67108864],N=[1,256,65536,16777216],O=[6,1536,393216,100663296],T=[0,8,16,24],F=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],G=[224,256,384,512],W=[128,256],ee=["hex","buffer","arrayBuffer","array","digest"],de={128:168,256:136};(s.JS_SHA3_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(I){return Object.prototype.toString.call(I)==="[object Array]"}),y&&(s.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(I){return typeof I=="object"&&I.buffer&&I.buffer.constructor===ArrayBuffer});for(var se=function(I,J,D){return function(k){return new R(I,J,I).update(k)[D]()}},ae=function(I,J,D){return function(k,L){return new R(I,J,L).update(k)[D]()}},ue=function(I,J,D){return function(k,L,m,z){return u["cshake"+I].update(k,L,m,z)[D]()}},ne=function(I,J,D){return function(k,L,m,z){return u["kmac"+I].update(k,L,m,z)[D]()}},ve=function(I,J,D,k){for(var L=0;L<ee.length;++L){var m=ee[L];I[m]=J(D,k,m)}return I},Ae=function(I,J){var D=se(I,J,"hex");return D.create=function(){return new R(I,J,I)},D.update=function(k){return D.create().update(k)},ve(D,se,I,J)},ot=function(I,J){var D=ae(I,J,"hex");return D.create=function(k){return new R(I,J,k)},D.update=function(k,L){return D.create(L).update(k)},ve(D,ae,I,J)},$=function(I,J){var D=de[I],k=ue(I,J,"hex");return k.create=function(L,m,z){return!m&&!z?u["shake"+I].create(L):new R(I,J,L).bytepad([m,z],D)},k.update=function(L,m,z,Y){return k.create(m,z,Y).update(L)},ve(k,ue,I,J)},b=function(I,J){var D=de[I],k=ne(I,J,"hex");return k.create=function(L,m,z){return new X(I,J,m).bytepad(["KMAC",z],D).bytepad([L],D)},k.update=function(L,m,z,Y){return k.create(L,z,Y).update(m)},ve(k,ne,I,J)},c=[{name:"keccak",padding:N,bits:G,createMethod:Ae},{name:"sha3",padding:O,bits:G,createMethod:Ae},{name:"shake",padding:A,bits:W,createMethod:ot},{name:"cshake",padding:E,bits:W,createMethod:$},{name:"kmac",padding:E,bits:W,createMethod:b}],u={},g=[],_=0;_<c.length;++_)for(var M=c[_],S=M.bits,x=0;x<S.length;++x){var d=M.name+"_"+S[x];if(g.push(d),u[d]=M.createMethod(S[x],M.padding),M.name!=="sha3"){var l=M.name+S[x];g.push(l),u[l]=u[d]}}function R(I,J,D){this.blocks=[],this.s=[],this.padding=J,this.outputBits=D,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(I<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=D>>5,this.extraBytes=(D&31)>>3;for(var k=0;k<50;++k)this.s[k]=0}R.prototype.update=function(I){if(this.finalized)throw new Error(t);var J,D=typeof I;if(D!=="string"){if(D==="object"){if(I===null)throw new Error(e);if(y&&I.constructor===ArrayBuffer)I=new Uint8Array(I);else if(!Array.isArray(I)&&(!y||!ArrayBuffer.isView(I)))throw new Error(e)}else throw new Error(e);J=!0}for(var k=this.blocks,L=this.byteCount,m=I.length,z=this.blockCount,Y=0,oe=this.s,ce,pe;Y<m;){if(this.reset)for(this.reset=!1,k[0]=this.block,ce=1;ce<z+1;++ce)k[ce]=0;if(J)for(ce=this.start;Y<m&&ce<L;++Y)k[ce>>2]|=I[Y]<<T[ce++&3];else for(ce=this.start;Y<m&&ce<L;++Y)pe=I.charCodeAt(Y),pe<128?k[ce>>2]|=pe<<T[ce++&3]:pe<2048?(k[ce>>2]|=(192|pe>>6)<<T[ce++&3],k[ce>>2]|=(128|pe&63)<<T[ce++&3]):pe<55296||pe>=57344?(k[ce>>2]|=(224|pe>>12)<<T[ce++&3],k[ce>>2]|=(128|pe>>6&63)<<T[ce++&3],k[ce>>2]|=(128|pe&63)<<T[ce++&3]):(pe=65536+((pe&1023)<<10|I.charCodeAt(++Y)&1023),k[ce>>2]|=(240|pe>>18)<<T[ce++&3],k[ce>>2]|=(128|pe>>12&63)<<T[ce++&3],k[ce>>2]|=(128|pe>>6&63)<<T[ce++&3],k[ce>>2]|=(128|pe&63)<<T[ce++&3]);if(this.lastByteIndex=ce,ce>=L){for(this.start=ce-L,this.block=k[z],ce=0;ce<z;++ce)oe[ce]^=k[ce];te(oe),this.reset=!0}else this.start=ce}return this},R.prototype.encode=function(I,J){var D=I&255,k=1,L=[D];for(I=I>>8,D=I&255;D>0;)L.unshift(D),I=I>>8,D=I&255,++k;return J?L.push(k):L.unshift(k),this.update(L),L.length},R.prototype.encodeString=function(I){var J,D=typeof I;if(D!=="string"){if(D==="object"){if(I===null)throw new Error(e);if(y&&I.constructor===ArrayBuffer)I=new Uint8Array(I);else if(!Array.isArray(I)&&(!y||!ArrayBuffer.isView(I)))throw new Error(e)}else throw new Error(e);J=!0}var k=0,L=I.length;if(J)k=L;else for(var m=0;m<I.length;++m){var z=I.charCodeAt(m);z<128?k+=1:z<2048?k+=2:z<55296||z>=57344?k+=3:(z=65536+((z&1023)<<10|I.charCodeAt(++m)&1023),k+=4)}return k+=this.encode(k*8),this.update(I),k},R.prototype.bytepad=function(I,J){for(var D=this.encode(J),k=0;k<I.length;++k)D+=this.encodeString(I[k]);var L=J-D%J,m=[];return m.length=L,this.update(m),this},R.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var I=this.blocks,J=this.lastByteIndex,D=this.blockCount,k=this.s;if(I[J>>2]|=this.padding[J&3],this.lastByteIndex===this.byteCount)for(I[0]=I[D],J=1;J<D+1;++J)I[J]=0;for(I[D-1]|=2147483648,J=0;J<D;++J)k[J]^=I[J];te(k)}},R.prototype.toString=R.prototype.hex=function(){this.finalize();for(var I=this.blockCount,J=this.s,D=this.outputBlocks,k=this.extraBytes,L=0,m=0,z="",Y;m<D;){for(L=0;L<I&&m<D;++L,++m)Y=J[L],z+=v[Y>>4&15]+v[Y&15]+v[Y>>12&15]+v[Y>>8&15]+v[Y>>20&15]+v[Y>>16&15]+v[Y>>28&15]+v[Y>>24&15];m%I===0&&(te(J),L=0)}return k&&(Y=J[L],z+=v[Y>>4&15]+v[Y&15],k>1&&(z+=v[Y>>12&15]+v[Y>>8&15]),k>2&&(z+=v[Y>>20&15]+v[Y>>16&15])),z},R.prototype.arrayBuffer=function(){this.finalize();var I=this.blockCount,J=this.s,D=this.outputBlocks,k=this.extraBytes,L=0,m=0,z=this.outputBits>>3,Y;k?Y=new ArrayBuffer(D+1<<2):Y=new ArrayBuffer(z);for(var oe=new Uint32Array(Y);m<D;){for(L=0;L<I&&m<D;++L,++m)oe[m]=J[L];m%I===0&&te(J)}return k&&(oe[L]=J[L],Y=Y.slice(0,z)),Y},R.prototype.buffer=R.prototype.arrayBuffer,R.prototype.digest=R.prototype.array=function(){this.finalize();for(var I=this.blockCount,J=this.s,D=this.outputBlocks,k=this.extraBytes,L=0,m=0,z=[],Y,oe;m<D;){for(L=0;L<I&&m<D;++L,++m)Y=m<<2,oe=J[L],z[Y]=oe&255,z[Y+1]=oe>>8&255,z[Y+2]=oe>>16&255,z[Y+3]=oe>>24&255;m%I===0&&te(J)}return k&&(Y=m<<2,oe=J[L],z[Y]=oe&255,k>1&&(z[Y+1]=oe>>8&255),k>2&&(z[Y+2]=oe>>16&255)),z};function X(I,J,D){R.call(this,I,J,D)}X.prototype=new R,X.prototype.finalize=function(){return this.encode(this.outputBits,!0),R.prototype.finalize.call(this)};var te=function(I){var J,D,k,L,m,z,Y,oe,ce,pe,ge,Te,nt,Me,Ve,ze,_e,je,Ge,be,Fe,De,we,Je,ke,Pe,ct,ft,qe,ht,ut,Be,wt,dt,Le,At,It,xe,Ke,Qe,Ee,We,He,Re,st,Ye,Ne,Xe,et,Ie,Ue,at,Ce,Ot,Tt,tt,bt,Sr,Pr,Rr,Nr,Cr,Qt;for(k=0;k<48;k+=2)L=I[0]^I[10]^I[20]^I[30]^I[40],m=I[1]^I[11]^I[21]^I[31]^I[41],z=I[2]^I[12]^I[22]^I[32]^I[42],Y=I[3]^I[13]^I[23]^I[33]^I[43],oe=I[4]^I[14]^I[24]^I[34]^I[44],ce=I[5]^I[15]^I[25]^I[35]^I[45],pe=I[6]^I[16]^I[26]^I[36]^I[46],ge=I[7]^I[17]^I[27]^I[37]^I[47],Te=I[8]^I[18]^I[28]^I[38]^I[48],nt=I[9]^I[19]^I[29]^I[39]^I[49],J=Te^(z<<1|Y>>>31),D=nt^(Y<<1|z>>>31),I[0]^=J,I[1]^=D,I[10]^=J,I[11]^=D,I[20]^=J,I[21]^=D,I[30]^=J,I[31]^=D,I[40]^=J,I[41]^=D,J=L^(oe<<1|ce>>>31),D=m^(ce<<1|oe>>>31),I[2]^=J,I[3]^=D,I[12]^=J,I[13]^=D,I[22]^=J,I[23]^=D,I[32]^=J,I[33]^=D,I[42]^=J,I[43]^=D,J=z^(pe<<1|ge>>>31),D=Y^(ge<<1|pe>>>31),I[4]^=J,I[5]^=D,I[14]^=J,I[15]^=D,I[24]^=J,I[25]^=D,I[34]^=J,I[35]^=D,I[44]^=J,I[45]^=D,J=oe^(Te<<1|nt>>>31),D=ce^(nt<<1|Te>>>31),I[6]^=J,I[7]^=D,I[16]^=J,I[17]^=D,I[26]^=J,I[27]^=D,I[36]^=J,I[37]^=D,I[46]^=J,I[47]^=D,J=pe^(L<<1|m>>>31),D=ge^(m<<1|L>>>31),I[8]^=J,I[9]^=D,I[18]^=J,I[19]^=D,I[28]^=J,I[29]^=D,I[38]^=J,I[39]^=D,I[48]^=J,I[49]^=D,Me=I[0],Ve=I[1],Ye=I[11]<<4|I[10]>>>28,Ne=I[10]<<4|I[11]>>>28,ft=I[20]<<3|I[21]>>>29,qe=I[21]<<3|I[20]>>>29,Rr=I[31]<<9|I[30]>>>23,Nr=I[30]<<9|I[31]>>>23,We=I[40]<<18|I[41]>>>14,He=I[41]<<18|I[40]>>>14,dt=I[2]<<1|I[3]>>>31,Le=I[3]<<1|I[2]>>>31,ze=I[13]<<12|I[12]>>>20,_e=I[12]<<12|I[13]>>>20,Xe=I[22]<<10|I[23]>>>22,et=I[23]<<10|I[22]>>>22,ht=I[33]<<13|I[32]>>>19,ut=I[32]<<13|I[33]>>>19,Cr=I[42]<<2|I[43]>>>30,Qt=I[43]<<2|I[42]>>>30,Ot=I[5]<<30|I[4]>>>2,Tt=I[4]<<30|I[5]>>>2,At=I[14]<<6|I[15]>>>26,It=I[15]<<6|I[14]>>>26,je=I[25]<<11|I[24]>>>21,Ge=I[24]<<11|I[25]>>>21,Ie=I[34]<<15|I[35]>>>17,Ue=I[35]<<15|I[34]>>>17,Be=I[45]<<29|I[44]>>>3,wt=I[44]<<29|I[45]>>>3,Je=I[6]<<28|I[7]>>>4,ke=I[7]<<28|I[6]>>>4,tt=I[17]<<23|I[16]>>>9,bt=I[16]<<23|I[17]>>>9,xe=I[26]<<25|I[27]>>>7,Ke=I[27]<<25|I[26]>>>7,be=I[36]<<21|I[37]>>>11,Fe=I[37]<<21|I[36]>>>11,at=I[47]<<24|I[46]>>>8,Ce=I[46]<<24|I[47]>>>8,Re=I[8]<<27|I[9]>>>5,st=I[9]<<27|I[8]>>>5,Pe=I[18]<<20|I[19]>>>12,ct=I[19]<<20|I[18]>>>12,Sr=I[29]<<7|I[28]>>>25,Pr=I[28]<<7|I[29]>>>25,Qe=I[38]<<8|I[39]>>>24,Ee=I[39]<<8|I[38]>>>24,De=I[48]<<14|I[49]>>>18,we=I[49]<<14|I[48]>>>18,I[0]=Me^~ze&je,I[1]=Ve^~_e&Ge,I[10]=Je^~Pe&ft,I[11]=ke^~ct&qe,I[20]=dt^~At&xe,I[21]=Le^~It&Ke,I[30]=Re^~Ye&Xe,I[31]=st^~Ne&et,I[40]=Ot^~tt&Sr,I[41]=Tt^~bt&Pr,I[2]=ze^~je&be,I[3]=_e^~Ge&Fe,I[12]=Pe^~ft&ht,I[13]=ct^~qe&ut,I[22]=At^~xe&Qe,I[23]=It^~Ke&Ee,I[32]=Ye^~Xe&Ie,I[33]=Ne^~et&Ue,I[42]=tt^~Sr&Rr,I[43]=bt^~Pr&Nr,I[4]=je^~be&De,I[5]=Ge^~Fe&we,I[14]=ft^~ht&Be,I[15]=qe^~ut&wt,I[24]=xe^~Qe&We,I[25]=Ke^~Ee&He,I[34]=Xe^~Ie&at,I[35]=et^~Ue&Ce,I[44]=Sr^~Rr&Cr,I[45]=Pr^~Nr&Qt,I[6]=be^~De&Me,I[7]=Fe^~we&Ve,I[16]=ht^~Be&Je,I[17]=ut^~wt&ke,I[26]=Qe^~We&dt,I[27]=Ee^~He&Le,I[36]=Ie^~at&Re,I[37]=Ue^~Ce&st,I[46]=Rr^~Cr&Ot,I[47]=Nr^~Qt&Tt,I[8]=De^~Me&ze,I[9]=we^~Ve&_e,I[18]=Be^~Je&Pe,I[19]=wt^~ke&ct,I[28]=We^~dt&At,I[29]=He^~Le&It,I[38]=at^~Re&Ye,I[39]=Ce^~st&Ne,I[48]=Cr^~Ot&tt,I[49]=Qt^~Tt&bt,I[0]^=F[k],I[1]^=F[k+1]};if(p)r.exports=u;else for(_=0;_<g.length;++_)s[g[_]]=u[g[_]]})()})(rv);var _9=rv.exports;const A9="logger/5.7.0";let Op=!1,Tp=!1;const vh={debug:1,default:2,info:2,warning:3,error:4,off:5};let qp=vh.default,Iu=null;function x9(){try{const r=[];if(["NFD","NFC","NFKD","NFKC"].forEach(e=>{try{if("test".normalize(e)!=="test")throw new Error("bad normalize")}catch{r.push(e)}}),r.length)throw new Error("missing "+r.join(", "));if("".normalize("NFD")!=="e")throw new Error("broken implementation")}catch(r){return r.message}return null}const Dp=x9();var n0;(function(r){r.DEBUG="DEBUG",r.INFO="INFO",r.WARNING="WARNING",r.ERROR="ERROR",r.OFF="OFF"})(n0||(n0={}));var nn;(function(r){r.UNKNOWN_ERROR="UNKNOWN_ERROR",r.NOT_IMPLEMENTED="NOT_IMPLEMENTED",r.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",r.NETWORK_ERROR="NETWORK_ERROR",r.SERVER_ERROR="SERVER_ERROR",r.TIMEOUT="TIMEOUT",r.BUFFER_OVERRUN="BUFFER_OVERRUN",r.NUMERIC_FAULT="NUMERIC_FAULT",r.MISSING_NEW="MISSING_NEW",r.INVALID_ARGUMENT="INVALID_ARGUMENT",r.MISSING_ARGUMENT="MISSING_ARGUMENT",r.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",r.CALL_EXCEPTION="CALL_EXCEPTION",r.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",r.NONCE_EXPIRED="NONCE_EXPIRED",r.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",r.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",r.TRANSACTION_REPLACED="TRANSACTION_REPLACED",r.ACTION_REJECTED="ACTION_REJECTED"})(nn||(nn={}));const Bp="0123456789abcdef";let Er=class ur{constructor(e){Object.defineProperty(this,"version",{enumerable:!0,value:e,writable:!1})}_log(e,t){const i=e.toLowerCase();vh[i]==null&&this.throwArgumentError("invalid log level name","logLevel",e),!(qp>vh[i])&&console.log.apply(console,t)}debug(...e){this._log(ur.levels.DEBUG,e)}info(...e){this._log(ur.levels.INFO,e)}warn(...e){this._log(ur.levels.WARNING,e)}makeError(e,t,i){if(Tp)return this.makeError("censored error",t,{});t||(t=ur.errors.UNKNOWN_ERROR),i||(i={});const s=[];Object.keys(i).forEach(y=>{const v=i[y];try{if(v instanceof Uint8Array){let A="";for(let E=0;E<v.length;E++)A+=Bp[v[E]>>4],A+=Bp[v[E]&15];s.push(y+"=Uint8Array(0x"+A+")")}else s.push(y+"="+JSON.stringify(v))}catch{s.push(y+"="+JSON.stringify(i[y].toString()))}}),s.push(`code=${t}`),s.push(`version=${this.version}`);const a=e;let f="";switch(t){case nn.NUMERIC_FAULT:{f="NUMERIC_FAULT";const y=e;switch(y){case"overflow":case"underflow":case"division-by-zero":f+="-"+y;break;case"negative-power":case"negative-width":f+="-unsupported";break;case"unbound-bitwise-result":f+="-unbound-result";break}break}case nn.CALL_EXCEPTION:case nn.INSUFFICIENT_FUNDS:case nn.MISSING_NEW:case nn.NONCE_EXPIRED:case nn.REPLACEMENT_UNDERPRICED:case nn.TRANSACTION_REPLACED:case nn.UNPREDICTABLE_GAS_LIMIT:f=t;break}f&&(e+=" [ See: https://links.ethers.org/v5-errors-"+f+" ]"),s.length&&(e+=" ("+s.join(", ")+")");const p=new Error(e);return p.reason=a,p.code=t,Object.keys(i).forEach(function(y){p[y]=i[y]}),p}throwError(e,t,i){throw this.makeError(e,t,i)}throwArgumentError(e,t,i){return this.throwError(e,ur.errors.INVALID_ARGUMENT,{argument:t,value:i})}assert(e,t,i,s){e||this.throwError(t,i,s)}assertArgument(e,t,i,s){e||this.throwArgumentError(t,i,s)}checkNormalize(e){Dp&&this.throwError("platform missing String.prototype.normalize",ur.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:Dp})}checkSafeUint53(e,t){typeof e=="number"&&(t==null&&(t="value not safe"),(e<0||e>=9007199254740991)&&this.throwError(t,ur.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:e}),e%1&&this.throwError(t,ur.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:e}))}checkArgumentCount(e,t,i){i?i=": "+i:i="",e<t&&this.throwError("missing argument"+i,ur.errors.MISSING_ARGUMENT,{count:e,expectedCount:t}),e>t&&this.throwError("too many arguments"+i,ur.errors.UNEXPECTED_ARGUMENT,{count:e,expectedCount:t})}checkNew(e,t){(e===Object||e==null)&&this.throwError("missing new",ur.errors.MISSING_NEW,{name:t.name})}checkAbstract(e,t){e===t?this.throwError("cannot instantiate abstract class "+JSON.stringify(t.name)+" directly; use a sub-class",ur.errors.UNSUPPORTED_OPERATION,{name:e.name,operation:"new"}):(e===Object||e==null)&&this.throwError("missing new",ur.errors.MISSING_NEW,{name:t.name})}static globalLogger(){return Iu||(Iu=new ur(A9)),Iu}static setCensorship(e,t){if(!e&&t&&this.globalLogger().throwError("cannot permanently disable censorship",ur.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),Op){if(!e)return;this.globalLogger().throwError("error censorship permanent",ur.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}Tp=!!e,Op=!!t}static setLogLevel(e){const t=vh[e.toLowerCase()];if(t==null){ur.globalLogger().warn("invalid log level - "+e);return}qp=t}static from(e){return new ur(e)}};Er.errors=nn,Er.levels=n0;const E9="bytes/5.7.0",ir=new Er(E9);function iv(r){return!!r.toHexString}function Ta(r){return r.slice||(r.slice=function(){const e=Array.prototype.slice.call(arguments);return Ta(new Uint8Array(Array.prototype.slice.apply(r,e)))}),r}function I9(r){return vi(r)&&!(r.length%2)||Ja(r)}function $p(r){return typeof r=="number"&&r==r&&r%1===0}function Ja(r){if(r==null)return!1;if(r.constructor===Uint8Array)return!0;if(typeof r=="string"||!$p(r.length)||r.length<0)return!1;for(let e=0;e<r.length;e++){const t=r[e];if(!$p(t)||t<0||t>=256)return!1}return!0}function Xt(r,e){if(e||(e={}),typeof r=="number"){ir.checkSafeUint53(r,"invalid arrayify value");const t=[];for(;r;)t.unshift(r&255),r=parseInt(String(r/256));return t.length===0&&t.push(0),Ta(new Uint8Array(t))}if(e.allowMissingPrefix&&typeof r=="string"&&r.substring(0,2)!=="0x"&&(r="0x"+r),iv(r)&&(r=r.toHexString()),vi(r)){let t=r.substring(2);t.length%2&&(e.hexPad==="left"?t="0"+t:e.hexPad==="right"?t+="0":ir.throwArgumentError("hex data is odd-length","value",r));const i=[];for(let s=0;s<t.length;s+=2)i.push(parseInt(t.substring(s,s+2),16));return Ta(new Uint8Array(i))}return Ja(r)?Ta(new Uint8Array(r)):ir.throwArgumentError("invalid arrayify value","value",r)}function M9(r){const e=r.map(s=>Xt(s)),t=e.reduce((s,a)=>s+a.length,0),i=new Uint8Array(t);return e.reduce((s,a)=>(i.set(a,s),s+a.length),0),Ta(i)}function S9(r,e){r=Xt(r),r.length>e&&ir.throwArgumentError("value out of range","value",arguments[0]);const t=new Uint8Array(e);return t.set(r,e-r.length),Ta(t)}function vi(r,e){return!(typeof r!="string"||!r.match(/^0x[0-9A-Fa-f]*$/)||e&&r.length!==2+2*e)}const Mu="0123456789abcdef";function ii(r,e){if(e||(e={}),typeof r=="number"){ir.checkSafeUint53(r,"invalid hexlify value");let t="";for(;r;)t=Mu[r&15]+t,r=Math.floor(r/16);return t.length?(t.length%2&&(t="0"+t),"0x"+t):"0x00"}if(typeof r=="bigint")return r=r.toString(16),r.length%2?"0x0"+r:"0x"+r;if(e.allowMissingPrefix&&typeof r=="string"&&r.substring(0,2)!=="0x"&&(r="0x"+r),iv(r))return r.toHexString();if(vi(r))return r.length%2&&(e.hexPad==="left"?r="0x0"+r.substring(2):e.hexPad==="right"?r+="0":ir.throwArgumentError("hex data is odd-length","value",r)),r.toLowerCase();if(Ja(r)){let t="0x";for(let i=0;i<r.length;i++){let s=r[i];t+=Mu[(s&240)>>4]+Mu[s&15]}return t}return ir.throwArgumentError("invalid hexlify value","value",r)}function P9(r){if(typeof r!="string")r=ii(r);else if(!vi(r)||r.length%2)return null;return(r.length-2)/2}function zp(r,e,t){return typeof r!="string"?r=ii(r):(!vi(r)||r.length%2)&&ir.throwArgumentError("invalid hexData","value",r),e=2+2*e,t!=null?"0x"+r.substring(e,2+2*t):"0x"+r.substring(e)}function Sn(r,e){for(typeof r!="string"?r=ii(r):vi(r)||ir.throwArgumentError("invalid hex string","value",r),r.length>2*e+2&&ir.throwArgumentError("value out of range","value",arguments[1]);r.length<2*e+2;)r="0x0"+r.substring(2);return r}function nv(r){const e={r:"0x",s:"0x",_vs:"0x",recoveryParam:0,v:0,yParityAndS:"0x",compact:"0x"};if(I9(r)){let t=Xt(r);t.length===64?(e.v=27+(t[32]>>7),t[32]&=127,e.r=ii(t.slice(0,32)),e.s=ii(t.slice(32,64))):t.length===65?(e.r=ii(t.slice(0,32)),e.s=ii(t.slice(32,64)),e.v=t[64]):ir.throwArgumentError("invalid signature string","signature",r),e.v<27&&(e.v===0||e.v===1?e.v+=27:ir.throwArgumentError("signature invalid v byte","signature",r)),e.recoveryParam=1-e.v%2,e.recoveryParam&&(t[32]|=128),e._vs=ii(t.slice(32,64))}else{if(e.r=r.r,e.s=r.s,e.v=r.v,e.recoveryParam=r.recoveryParam,e._vs=r._vs,e._vs!=null){const s=S9(Xt(e._vs),32);e._vs=ii(s);const a=s[0]>=128?1:0;e.recoveryParam==null?e.recoveryParam=a:e.recoveryParam!==a&&ir.throwArgumentError("signature recoveryParam mismatch _vs","signature",r),s[0]&=127;const f=ii(s);e.s==null?e.s=f:e.s!==f&&ir.throwArgumentError("signature v mismatch _vs","signature",r)}if(e.recoveryParam==null)e.v==null?ir.throwArgumentError("signature missing v and recoveryParam","signature",r):e.v===0||e.v===1?e.recoveryParam=e.v:e.recoveryParam=1-e.v%2;else if(e.v==null)e.v=27+e.recoveryParam;else{const s=e.v===0||e.v===1?e.v:1-e.v%2;e.recoveryParam!==s&&ir.throwArgumentError("signature recoveryParam mismatch v","signature",r)}e.r==null||!vi(e.r)?ir.throwArgumentError("signature missing or invalid r","signature",r):e.r=Sn(e.r,32),e.s==null||!vi(e.s)?ir.throwArgumentError("signature missing or invalid s","signature",r):e.s=Sn(e.s,32);const t=Xt(e.s);t[0]>=128&&ir.throwArgumentError("signature s out of range","signature",r),e.recoveryParam&&(t[0]|=128);const i=ii(t);e._vs&&(vi(e._vs)||ir.throwArgumentError("signature invalid _vs","signature",r),e._vs=Sn(e._vs,32)),e._vs==null?e._vs=i:e._vs!==i&&ir.throwArgumentError("signature _vs mismatch v and s","signature",r)}return e.yParityAndS=e._vs,e.compact=e.r+e.yParityAndS.substring(2),e}function O0(r){return"0x"+_9.keccak_256(Xt(r))}var sv={exports:{}},R9={},N9=Object.freeze({__proto__:null,default:R9}),C9=w9(N9);(function(r){(function(e,t){function i(c,u){if(!c)throw new Error(u||"Assertion failed")}function s(c,u){c.super_=u;var g=function(){};g.prototype=u.prototype,c.prototype=new g,c.prototype.constructor=c}function a(c,u,g){if(a.isBN(c))return c;this.negative=0,this.words=null,this.length=0,this.red=null,c!==null&&((u==="le"||u==="be")&&(g=u,u=10),this._init(c||0,u||10,g||"be"))}typeof e=="object"?e.exports=a:t.BN=a,a.BN=a,a.wordSize=26;var f;try{typeof window<"u"&&typeof window.Buffer<"u"?f=window.Buffer:f=C9.Buffer}catch{}a.isBN=function(c){return c instanceof a?!0:c!==null&&typeof c=="object"&&c.constructor.wordSize===a.wordSize&&Array.isArray(c.words)},a.max=function(c,u){return c.cmp(u)>0?c:u},a.min=function(c,u){return c.cmp(u)<0?c:u},a.prototype._init=function(c,u,g){if(typeof c=="number")return this._initNumber(c,u,g);if(typeof c=="object")return this._initArray(c,u,g);u==="hex"&&(u=16),i(u===(u|0)&&u>=2&&u<=36),c=c.toString().replace(/\s+/g,"");var _=0;c[0]==="-"&&(_++,this.negative=1),_<c.length&&(u===16?this._parseHex(c,_,g):(this._parseBase(c,u,_),g==="le"&&this._initArray(this.toArray(),u,g)))},a.prototype._initNumber=function(c,u,g){c<0&&(this.negative=1,c=-c),c<67108864?(this.words=[c&67108863],this.length=1):c<4503599627370496?(this.words=[c&67108863,c/67108864&67108863],this.length=2):(i(c<9007199254740992),this.words=[c&67108863,c/67108864&67108863,1],this.length=3),g==="le"&&this._initArray(this.toArray(),u,g)},a.prototype._initArray=function(c,u,g){if(i(typeof c.length=="number"),c.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(c.length/3),this.words=new Array(this.length);for(var _=0;_<this.length;_++)this.words[_]=0;var M,S,x=0;if(g==="be")for(_=c.length-1,M=0;_>=0;_-=3)S=c[_]|c[_-1]<<8|c[_-2]<<16,this.words[M]|=S<<x&67108863,this.words[M+1]=S>>>26-x&67108863,x+=24,x>=26&&(x-=26,M++);else if(g==="le")for(_=0,M=0;_<c.length;_+=3)S=c[_]|c[_+1]<<8|c[_+2]<<16,this.words[M]|=S<<x&67108863,this.words[M+1]=S>>>26-x&67108863,x+=24,x>=26&&(x-=26,M++);return this._strip()};function p(c,u){var g=c.charCodeAt(u);if(g>=48&&g<=57)return g-48;if(g>=65&&g<=70)return g-55;if(g>=97&&g<=102)return g-87;i(!1,"Invalid character in "+c)}function y(c,u,g){var _=p(c,g);return g-1>=u&&(_|=p(c,g-1)<<4),_}a.prototype._parseHex=function(c,u,g){this.length=Math.ceil((c.length-u)/6),this.words=new Array(this.length);for(var _=0;_<this.length;_++)this.words[_]=0;var M=0,S=0,x;if(g==="be")for(_=c.length-1;_>=u;_-=2)x=y(c,u,_)<<M,this.words[S]|=x&67108863,M>=18?(M-=18,S+=1,this.words[S]|=x>>>26):M+=8;else{var d=c.length-u;for(_=d%2===0?u+1:u;_<c.length;_+=2)x=y(c,u,_)<<M,this.words[S]|=x&67108863,M>=18?(M-=18,S+=1,this.words[S]|=x>>>26):M+=8}this._strip()};function v(c,u,g,_){for(var M=0,S=0,x=Math.min(c.length,g),d=u;d<x;d++){var l=c.charCodeAt(d)-48;M*=_,l>=49?S=l-49+10:l>=17?S=l-17+10:S=l,i(l>=0&&S<_,"Invalid character"),M+=S}return M}a.prototype._parseBase=function(c,u,g){this.words=[0],this.length=1;for(var _=0,M=1;M<=67108863;M*=u)_++;_--,M=M/u|0;for(var S=c.length-g,x=S%_,d=Math.min(S,S-x)+g,l=0,R=g;R<d;R+=_)l=v(c,R,R+_,u),this.imuln(M),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l);if(x!==0){var X=1;for(l=v(c,R,c.length,u),R=0;R<x;R++)X*=u;this.imuln(X),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l)}this._strip()},a.prototype.copy=function(c){c.words=new Array(this.length);for(var u=0;u<this.length;u++)c.words[u]=this.words[u];c.length=this.length,c.negative=this.negative,c.red=this.red};function A(c,u){c.words=u.words,c.length=u.length,c.negative=u.negative,c.red=u.red}if(a.prototype._move=function(c){A(c,this)},a.prototype.clone=function(){var c=new a(null);return this.copy(c),c},a.prototype._expand=function(c){for(;this.length<c;)this.words[this.length++]=0;return this},a.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},a.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{a.prototype[Symbol.for("nodejs.util.inspect.custom")]=E}catch{a.prototype.inspect=E}else a.prototype.inspect=E;function E(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var N=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],O=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],T=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];a.prototype.toString=function(c,u){c=c||10,u=u|0||1;var g;if(c===16||c==="hex"){g="";for(var _=0,M=0,S=0;S<this.length;S++){var x=this.words[S],d=((x<<_|M)&16777215).toString(16);M=x>>>24-_&16777215,_+=2,_>=26&&(_-=26,S--),M!==0||S!==this.length-1?g=N[6-d.length]+d+g:g=d+g}for(M!==0&&(g=M.toString(16)+g);g.length%u!==0;)g="0"+g;return this.negative!==0&&(g="-"+g),g}if(c===(c|0)&&c>=2&&c<=36){var l=O[c],R=T[c];g="";var X=this.clone();for(X.negative=0;!X.isZero();){var te=X.modrn(R).toString(c);X=X.idivn(R),X.isZero()?g=te+g:g=N[l-te.length]+te+g}for(this.isZero()&&(g="0"+g);g.length%u!==0;)g="0"+g;return this.negative!==0&&(g="-"+g),g}i(!1,"Base should be between 2 and 36")},a.prototype.toNumber=function(){var c=this.words[0];return this.length===2?c+=this.words[1]*67108864:this.length===3&&this.words[2]===1?c+=4503599627370496+this.words[1]*67108864:this.length>2&&i(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-c:c},a.prototype.toJSON=function(){return this.toString(16,2)},f&&(a.prototype.toBuffer=function(c,u){return this.toArrayLike(f,c,u)}),a.prototype.toArray=function(c,u){return this.toArrayLike(Array,c,u)};var F=function(c,u){return c.allocUnsafe?c.allocUnsafe(u):new c(u)};a.prototype.toArrayLike=function(c,u,g){this._strip();var _=this.byteLength(),M=g||Math.max(1,_);i(_<=M,"byte array longer than desired length"),i(M>0,"Requested array length <= 0");var S=F(c,M),x=u==="le"?"LE":"BE";return this["_toArrayLike"+x](S,_),S},a.prototype._toArrayLikeLE=function(c,u){for(var g=0,_=0,M=0,S=0;M<this.length;M++){var x=this.words[M]<<S|_;c[g++]=x&255,g<c.length&&(c[g++]=x>>8&255),g<c.length&&(c[g++]=x>>16&255),S===6?(g<c.length&&(c[g++]=x>>24&255),_=0,S=0):(_=x>>>24,S+=2)}if(g<c.length)for(c[g++]=_;g<c.length;)c[g++]=0},a.prototype._toArrayLikeBE=function(c,u){for(var g=c.length-1,_=0,M=0,S=0;M<this.length;M++){var x=this.words[M]<<S|_;c[g--]=x&255,g>=0&&(c[g--]=x>>8&255),g>=0&&(c[g--]=x>>16&255),S===6?(g>=0&&(c[g--]=x>>24&255),_=0,S=0):(_=x>>>24,S+=2)}if(g>=0)for(c[g--]=_;g>=0;)c[g--]=0},Math.clz32?a.prototype._countBits=function(c){return 32-Math.clz32(c)}:a.prototype._countBits=function(c){var u=c,g=0;return u>=4096&&(g+=13,u>>>=13),u>=64&&(g+=7,u>>>=7),u>=8&&(g+=4,u>>>=4),u>=2&&(g+=2,u>>>=2),g+u},a.prototype._zeroBits=function(c){if(c===0)return 26;var u=c,g=0;return u&8191||(g+=13,u>>>=13),u&127||(g+=7,u>>>=7),u&15||(g+=4,u>>>=4),u&3||(g+=2,u>>>=2),u&1||g++,g},a.prototype.bitLength=function(){var c=this.words[this.length-1],u=this._countBits(c);return(this.length-1)*26+u};function G(c){for(var u=new Array(c.bitLength()),g=0;g<u.length;g++){var _=g/26|0,M=g%26;u[g]=c.words[_]>>>M&1}return u}a.prototype.zeroBits=function(){if(this.isZero())return 0;for(var c=0,u=0;u<this.length;u++){var g=this._zeroBits(this.words[u]);if(c+=g,g!==26)break}return c},a.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},a.prototype.toTwos=function(c){return this.negative!==0?this.abs().inotn(c).iaddn(1):this.clone()},a.prototype.fromTwos=function(c){return this.testn(c-1)?this.notn(c).iaddn(1).ineg():this.clone()},a.prototype.isNeg=function(){return this.negative!==0},a.prototype.neg=function(){return this.clone().ineg()},a.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},a.prototype.iuor=function(c){for(;this.length<c.length;)this.words[this.length++]=0;for(var u=0;u<c.length;u++)this.words[u]=this.words[u]|c.words[u];return this._strip()},a.prototype.ior=function(c){return i((this.negative|c.negative)===0),this.iuor(c)},a.prototype.or=function(c){return this.length>c.length?this.clone().ior(c):c.clone().ior(this)},a.prototype.uor=function(c){return this.length>c.length?this.clone().iuor(c):c.clone().iuor(this)},a.prototype.iuand=function(c){var u;this.length>c.length?u=c:u=this;for(var g=0;g<u.length;g++)this.words[g]=this.words[g]&c.words[g];return this.length=u.length,this._strip()},a.prototype.iand=function(c){return i((this.negative|c.negative)===0),this.iuand(c)},a.prototype.and=function(c){return this.length>c.length?this.clone().iand(c):c.clone().iand(this)},a.prototype.uand=function(c){return this.length>c.length?this.clone().iuand(c):c.clone().iuand(this)},a.prototype.iuxor=function(c){var u,g;this.length>c.length?(u=this,g=c):(u=c,g=this);for(var _=0;_<g.length;_++)this.words[_]=u.words[_]^g.words[_];if(this!==u)for(;_<u.length;_++)this.words[_]=u.words[_];return this.length=u.length,this._strip()},a.prototype.ixor=function(c){return i((this.negative|c.negative)===0),this.iuxor(c)},a.prototype.xor=function(c){return this.length>c.length?this.clone().ixor(c):c.clone().ixor(this)},a.prototype.uxor=function(c){return this.length>c.length?this.clone().iuxor(c):c.clone().iuxor(this)},a.prototype.inotn=function(c){i(typeof c=="number"&&c>=0);var u=Math.ceil(c/26)|0,g=c%26;this._expand(u),g>0&&u--;for(var _=0;_<u;_++)this.words[_]=~this.words[_]&67108863;return g>0&&(this.words[_]=~this.words[_]&67108863>>26-g),this._strip()},a.prototype.notn=function(c){return this.clone().inotn(c)},a.prototype.setn=function(c,u){i(typeof c=="number"&&c>=0);var g=c/26|0,_=c%26;return this._expand(g+1),u?this.words[g]=this.words[g]|1<<_:this.words[g]=this.words[g]&~(1<<_),this._strip()},a.prototype.iadd=function(c){var u;if(this.negative!==0&&c.negative===0)return this.negative=0,u=this.isub(c),this.negative^=1,this._normSign();if(this.negative===0&&c.negative!==0)return c.negative=0,u=this.isub(c),c.negative=1,u._normSign();var g,_;this.length>c.length?(g=this,_=c):(g=c,_=this);for(var M=0,S=0;S<_.length;S++)u=(g.words[S]|0)+(_.words[S]|0)+M,this.words[S]=u&67108863,M=u>>>26;for(;M!==0&&S<g.length;S++)u=(g.words[S]|0)+M,this.words[S]=u&67108863,M=u>>>26;if(this.length=g.length,M!==0)this.words[this.length]=M,this.length++;else if(g!==this)for(;S<g.length;S++)this.words[S]=g.words[S];return this},a.prototype.add=function(c){var u;return c.negative!==0&&this.negative===0?(c.negative=0,u=this.sub(c),c.negative^=1,u):c.negative===0&&this.negative!==0?(this.negative=0,u=c.sub(this),this.negative=1,u):this.length>c.length?this.clone().iadd(c):c.clone().iadd(this)},a.prototype.isub=function(c){if(c.negative!==0){c.negative=0;var u=this.iadd(c);return c.negative=1,u._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(c),this.negative=1,this._normSign();var g=this.cmp(c);if(g===0)return this.negative=0,this.length=1,this.words[0]=0,this;var _,M;g>0?(_=this,M=c):(_=c,M=this);for(var S=0,x=0;x<M.length;x++)u=(_.words[x]|0)-(M.words[x]|0)+S,S=u>>26,this.words[x]=u&67108863;for(;S!==0&&x<_.length;x++)u=(_.words[x]|0)+S,S=u>>26,this.words[x]=u&67108863;if(S===0&&x<_.length&&_!==this)for(;x<_.length;x++)this.words[x]=_.words[x];return this.length=Math.max(this.length,x),_!==this&&(this.negative=1),this._strip()},a.prototype.sub=function(c){return this.clone().isub(c)};function W(c,u,g){g.negative=u.negative^c.negative;var _=c.length+u.length|0;g.length=_,_=_-1|0;var M=c.words[0]|0,S=u.words[0]|0,x=M*S,d=x&67108863,l=x/67108864|0;g.words[0]=d;for(var R=1;R<_;R++){for(var X=l>>>26,te=l&67108863,I=Math.min(R,u.length-1),J=Math.max(0,R-c.length+1);J<=I;J++){var D=R-J|0;M=c.words[D]|0,S=u.words[J]|0,x=M*S+te,X+=x/67108864|0,te=x&67108863}g.words[R]=te|0,l=X|0}return l!==0?g.words[R]=l|0:g.length--,g._strip()}var ee=function(c,u,g){var _=c.words,M=u.words,S=g.words,x=0,d,l,R,X=_[0]|0,te=X&8191,I=X>>>13,J=_[1]|0,D=J&8191,k=J>>>13,L=_[2]|0,m=L&8191,z=L>>>13,Y=_[3]|0,oe=Y&8191,ce=Y>>>13,pe=_[4]|0,ge=pe&8191,Te=pe>>>13,nt=_[5]|0,Me=nt&8191,Ve=nt>>>13,ze=_[6]|0,_e=ze&8191,je=ze>>>13,Ge=_[7]|0,be=Ge&8191,Fe=Ge>>>13,De=_[8]|0,we=De&8191,Je=De>>>13,ke=_[9]|0,Pe=ke&8191,ct=ke>>>13,ft=M[0]|0,qe=ft&8191,ht=ft>>>13,ut=M[1]|0,Be=ut&8191,wt=ut>>>13,dt=M[2]|0,Le=dt&8191,At=dt>>>13,It=M[3]|0,xe=It&8191,Ke=It>>>13,Qe=M[4]|0,Ee=Qe&8191,We=Qe>>>13,He=M[5]|0,Re=He&8191,st=He>>>13,Ye=M[6]|0,Ne=Ye&8191,Xe=Ye>>>13,et=M[7]|0,Ie=et&8191,Ue=et>>>13,at=M[8]|0,Ce=at&8191,Ot=at>>>13,Tt=M[9]|0,tt=Tt&8191,bt=Tt>>>13;g.negative=c.negative^u.negative,g.length=19,d=Math.imul(te,qe),l=Math.imul(te,ht),l=l+Math.imul(I,qe)|0,R=Math.imul(I,ht);var Sr=(x+d|0)+((l&8191)<<13)|0;x=(R+(l>>>13)|0)+(Sr>>>26)|0,Sr&=67108863,d=Math.imul(D,qe),l=Math.imul(D,ht),l=l+Math.imul(k,qe)|0,R=Math.imul(k,ht),d=d+Math.imul(te,Be)|0,l=l+Math.imul(te,wt)|0,l=l+Math.imul(I,Be)|0,R=R+Math.imul(I,wt)|0;var Pr=(x+d|0)+((l&8191)<<13)|0;x=(R+(l>>>13)|0)+(Pr>>>26)|0,Pr&=67108863,d=Math.imul(m,qe),l=Math.imul(m,ht),l=l+Math.imul(z,qe)|0,R=Math.imul(z,ht),d=d+Math.imul(D,Be)|0,l=l+Math.imul(D,wt)|0,l=l+Math.imul(k,Be)|0,R=R+Math.imul(k,wt)|0,d=d+Math.imul(te,Le)|0,l=l+Math.imul(te,At)|0,l=l+Math.imul(I,Le)|0,R=R+Math.imul(I,At)|0;var Rr=(x+d|0)+((l&8191)<<13)|0;x=(R+(l>>>13)|0)+(Rr>>>26)|0,Rr&=67108863,d=Math.imul(oe,qe),l=Math.imul(oe,ht),l=l+Math.imul(ce,qe)|0,R=Math.imul(ce,ht),d=d+Math.imul(m,Be)|0,l=l+Math.imul(m,wt)|0,l=l+Math.imul(z,Be)|0,R=R+Math.imul(z,wt)|0,d=d+Math.imul(D,Le)|0,l=l+Math.imul(D,At)|0,l=l+Math.imul(k,Le)|0,R=R+Math.imul(k,At)|0,d=d+Math.imul(te,xe)|0,l=l+Math.imul(te,Ke)|0,l=l+Math.imul(I,xe)|0,R=R+Math.imul(I,Ke)|0;var Nr=(x+d|0)+((l&8191)<<13)|0;x=(R+(l>>>13)|0)+(Nr>>>26)|0,Nr&=67108863,d=Math.imul(ge,qe),l=Math.imul(ge,ht),l=l+Math.imul(Te,qe)|0,R=Math.imul(Te,ht),d=d+Math.imul(oe,Be)|0,l=l+Math.imul(oe,wt)|0,l=l+Math.imul(ce,Be)|0,R=R+Math.imul(ce,wt)|0,d=d+Math.imul(m,Le)|0,l=l+Math.imul(m,At)|0,l=l+Math.imul(z,Le)|0,R=R+Math.imul(z,At)|0,d=d+Math.imul(D,xe)|0,l=l+Math.imul(D,Ke)|0,l=l+Math.imul(k,xe)|0,R=R+Math.imul(k,Ke)|0,d=d+Math.imul(te,Ee)|0,l=l+Math.imul(te,We)|0,l=l+Math.imul(I,Ee)|0,R=R+Math.imul(I,We)|0;var Cr=(x+d|0)+((l&8191)<<13)|0;x=(R+(l>>>13)|0)+(Cr>>>26)|0,Cr&=67108863,d=Math.imul(Me,qe),l=Math.imul(Me,ht),l=l+Math.imul(Ve,qe)|0,R=Math.imul(Ve,ht),d=d+Math.imul(ge,Be)|0,l=l+Math.imul(ge,wt)|0,l=l+Math.imul(Te,Be)|0,R=R+Math.imul(Te,wt)|0,d=d+Math.imul(oe,Le)|0,l=l+Math.imul(oe,At)|0,l=l+Math.imul(ce,Le)|0,R=R+Math.imul(ce,At)|0,d=d+Math.imul(m,xe)|0,l=l+Math.imul(m,Ke)|0,l=l+Math.imul(z,xe)|0,R=R+Math.imul(z,Ke)|0,d=d+Math.imul(D,Ee)|0,l=l+Math.imul(D,We)|0,l=l+Math.imul(k,Ee)|0,R=R+Math.imul(k,We)|0,d=d+Math.imul(te,Re)|0,l=l+Math.imul(te,st)|0,l=l+Math.imul(I,Re)|0,R=R+Math.imul(I,st)|0;var Qt=(x+d|0)+((l&8191)<<13)|0;x=(R+(l>>>13)|0)+(Qt>>>26)|0,Qt&=67108863,d=Math.imul(_e,qe),l=Math.imul(_e,ht),l=l+Math.imul(je,qe)|0,R=Math.imul(je,ht),d=d+Math.imul(Me,Be)|0,l=l+Math.imul(Me,wt)|0,l=l+Math.imul(Ve,Be)|0,R=R+Math.imul(Ve,wt)|0,d=d+Math.imul(ge,Le)|0,l=l+Math.imul(ge,At)|0,l=l+Math.imul(Te,Le)|0,R=R+Math.imul(Te,At)|0,d=d+Math.imul(oe,xe)|0,l=l+Math.imul(oe,Ke)|0,l=l+Math.imul(ce,xe)|0,R=R+Math.imul(ce,Ke)|0,d=d+Math.imul(m,Ee)|0,l=l+Math.imul(m,We)|0,l=l+Math.imul(z,Ee)|0,R=R+Math.imul(z,We)|0,d=d+Math.imul(D,Re)|0,l=l+Math.imul(D,st)|0,l=l+Math.imul(k,Re)|0,R=R+Math.imul(k,st)|0,d=d+Math.imul(te,Ne)|0,l=l+Math.imul(te,Xe)|0,l=l+Math.imul(I,Ne)|0,R=R+Math.imul(I,Xe)|0;var Vr=(x+d|0)+((l&8191)<<13)|0;x=(R+(l>>>13)|0)+(Vr>>>26)|0,Vr&=67108863,d=Math.imul(be,qe),l=Math.imul(be,ht),l=l+Math.imul(Fe,qe)|0,R=Math.imul(Fe,ht),d=d+Math.imul(_e,Be)|0,l=l+Math.imul(_e,wt)|0,l=l+Math.imul(je,Be)|0,R=R+Math.imul(je,wt)|0,d=d+Math.imul(Me,Le)|0,l=l+Math.imul(Me,At)|0,l=l+Math.imul(Ve,Le)|0,R=R+Math.imul(Ve,At)|0,d=d+Math.imul(ge,xe)|0,l=l+Math.imul(ge,Ke)|0,l=l+Math.imul(Te,xe)|0,R=R+Math.imul(Te,Ke)|0,d=d+Math.imul(oe,Ee)|0,l=l+Math.imul(oe,We)|0,l=l+Math.imul(ce,Ee)|0,R=R+Math.imul(ce,We)|0,d=d+Math.imul(m,Re)|0,l=l+Math.imul(m,st)|0,l=l+Math.imul(z,Re)|0,R=R+Math.imul(z,st)|0,d=d+Math.imul(D,Ne)|0,l=l+Math.imul(D,Xe)|0,l=l+Math.imul(k,Ne)|0,R=R+Math.imul(k,Xe)|0,d=d+Math.imul(te,Ie)|0,l=l+Math.imul(te,Ue)|0,l=l+Math.imul(I,Ie)|0,R=R+Math.imul(I,Ue)|0;var Ui=(x+d|0)+((l&8191)<<13)|0;x=(R+(l>>>13)|0)+(Ui>>>26)|0,Ui&=67108863,d=Math.imul(we,qe),l=Math.imul(we,ht),l=l+Math.imul(Je,qe)|0,R=Math.imul(Je,ht),d=d+Math.imul(be,Be)|0,l=l+Math.imul(be,wt)|0,l=l+Math.imul(Fe,Be)|0,R=R+Math.imul(Fe,wt)|0,d=d+Math.imul(_e,Le)|0,l=l+Math.imul(_e,At)|0,l=l+Math.imul(je,Le)|0,R=R+Math.imul(je,At)|0,d=d+Math.imul(Me,xe)|0,l=l+Math.imul(Me,Ke)|0,l=l+Math.imul(Ve,xe)|0,R=R+Math.imul(Ve,Ke)|0,d=d+Math.imul(ge,Ee)|0,l=l+Math.imul(ge,We)|0,l=l+Math.imul(Te,Ee)|0,R=R+Math.imul(Te,We)|0,d=d+Math.imul(oe,Re)|0,l=l+Math.imul(oe,st)|0,l=l+Math.imul(ce,Re)|0,R=R+Math.imul(ce,st)|0,d=d+Math.imul(m,Ne)|0,l=l+Math.imul(m,Xe)|0,l=l+Math.imul(z,Ne)|0,R=R+Math.imul(z,Xe)|0,d=d+Math.imul(D,Ie)|0,l=l+Math.imul(D,Ue)|0,l=l+Math.imul(k,Ie)|0,R=R+Math.imul(k,Ue)|0,d=d+Math.imul(te,Ce)|0,l=l+Math.imul(te,Ot)|0,l=l+Math.imul(I,Ce)|0,R=R+Math.imul(I,Ot)|0;var Gr=(x+d|0)+((l&8191)<<13)|0;x=(R+(l>>>13)|0)+(Gr>>>26)|0,Gr&=67108863,d=Math.imul(Pe,qe),l=Math.imul(Pe,ht),l=l+Math.imul(ct,qe)|0,R=Math.imul(ct,ht),d=d+Math.imul(we,Be)|0,l=l+Math.imul(we,wt)|0,l=l+Math.imul(Je,Be)|0,R=R+Math.imul(Je,wt)|0,d=d+Math.imul(be,Le)|0,l=l+Math.imul(be,At)|0,l=l+Math.imul(Fe,Le)|0,R=R+Math.imul(Fe,At)|0,d=d+Math.imul(_e,xe)|0,l=l+Math.imul(_e,Ke)|0,l=l+Math.imul(je,xe)|0,R=R+Math.imul(je,Ke)|0,d=d+Math.imul(Me,Ee)|0,l=l+Math.imul(Me,We)|0,l=l+Math.imul(Ve,Ee)|0,R=R+Math.imul(Ve,We)|0,d=d+Math.imul(ge,Re)|0,l=l+Math.imul(ge,st)|0,l=l+Math.imul(Te,Re)|0,R=R+Math.imul(Te,st)|0,d=d+Math.imul(oe,Ne)|0,l=l+Math.imul(oe,Xe)|0,l=l+Math.imul(ce,Ne)|0,R=R+Math.imul(ce,Xe)|0,d=d+Math.imul(m,Ie)|0,l=l+Math.imul(m,Ue)|0,l=l+Math.imul(z,Ie)|0,R=R+Math.imul(z,Ue)|0,d=d+Math.imul(D,Ce)|0,l=l+Math.imul(D,Ot)|0,l=l+Math.imul(k,Ce)|0,R=R+Math.imul(k,Ot)|0,d=d+Math.imul(te,tt)|0,l=l+Math.imul(te,bt)|0,l=l+Math.imul(I,tt)|0,R=R+Math.imul(I,bt)|0;var ji=(x+d|0)+((l&8191)<<13)|0;x=(R+(l>>>13)|0)+(ji>>>26)|0,ji&=67108863,d=Math.imul(Pe,Be),l=Math.imul(Pe,wt),l=l+Math.imul(ct,Be)|0,R=Math.imul(ct,wt),d=d+Math.imul(we,Le)|0,l=l+Math.imul(we,At)|0,l=l+Math.imul(Je,Le)|0,R=R+Math.imul(Je,At)|0,d=d+Math.imul(be,xe)|0,l=l+Math.imul(be,Ke)|0,l=l+Math.imul(Fe,xe)|0,R=R+Math.imul(Fe,Ke)|0,d=d+Math.imul(_e,Ee)|0,l=l+Math.imul(_e,We)|0,l=l+Math.imul(je,Ee)|0,R=R+Math.imul(je,We)|0,d=d+Math.imul(Me,Re)|0,l=l+Math.imul(Me,st)|0,l=l+Math.imul(Ve,Re)|0,R=R+Math.imul(Ve,st)|0,d=d+Math.imul(ge,Ne)|0,l=l+Math.imul(ge,Xe)|0,l=l+Math.imul(Te,Ne)|0,R=R+Math.imul(Te,Xe)|0,d=d+Math.imul(oe,Ie)|0,l=l+Math.imul(oe,Ue)|0,l=l+Math.imul(ce,Ie)|0,R=R+Math.imul(ce,Ue)|0,d=d+Math.imul(m,Ce)|0,l=l+Math.imul(m,Ot)|0,l=l+Math.imul(z,Ce)|0,R=R+Math.imul(z,Ot)|0,d=d+Math.imul(D,tt)|0,l=l+Math.imul(D,bt)|0,l=l+Math.imul(k,tt)|0,R=R+Math.imul(k,bt)|0;var Fi=(x+d|0)+((l&8191)<<13)|0;x=(R+(l>>>13)|0)+(Fi>>>26)|0,Fi&=67108863,d=Math.imul(Pe,Le),l=Math.imul(Pe,At),l=l+Math.imul(ct,Le)|0,R=Math.imul(ct,At),d=d+Math.imul(we,xe)|0,l=l+Math.imul(we,Ke)|0,l=l+Math.imul(Je,xe)|0,R=R+Math.imul(Je,Ke)|0,d=d+Math.imul(be,Ee)|0,l=l+Math.imul(be,We)|0,l=l+Math.imul(Fe,Ee)|0,R=R+Math.imul(Fe,We)|0,d=d+Math.imul(_e,Re)|0,l=l+Math.imul(_e,st)|0,l=l+Math.imul(je,Re)|0,R=R+Math.imul(je,st)|0,d=d+Math.imul(Me,Ne)|0,l=l+Math.imul(Me,Xe)|0,l=l+Math.imul(Ve,Ne)|0,R=R+Math.imul(Ve,Xe)|0,d=d+Math.imul(ge,Ie)|0,l=l+Math.imul(ge,Ue)|0,l=l+Math.imul(Te,Ie)|0,R=R+Math.imul(Te,Ue)|0,d=d+Math.imul(oe,Ce)|0,l=l+Math.imul(oe,Ot)|0,l=l+Math.imul(ce,Ce)|0,R=R+Math.imul(ce,Ot)|0,d=d+Math.imul(m,tt)|0,l=l+Math.imul(m,bt)|0,l=l+Math.imul(z,tt)|0,R=R+Math.imul(z,bt)|0;var Wr=(x+d|0)+((l&8191)<<13)|0;x=(R+(l>>>13)|0)+(Wr>>>26)|0,Wr&=67108863,d=Math.imul(Pe,xe),l=Math.imul(Pe,Ke),l=l+Math.imul(ct,xe)|0,R=Math.imul(ct,Ke),d=d+Math.imul(we,Ee)|0,l=l+Math.imul(we,We)|0,l=l+Math.imul(Je,Ee)|0,R=R+Math.imul(Je,We)|0,d=d+Math.imul(be,Re)|0,l=l+Math.imul(be,st)|0,l=l+Math.imul(Fe,Re)|0,R=R+Math.imul(Fe,st)|0,d=d+Math.imul(_e,Ne)|0,l=l+Math.imul(_e,Xe)|0,l=l+Math.imul(je,Ne)|0,R=R+Math.imul(je,Xe)|0,d=d+Math.imul(Me,Ie)|0,l=l+Math.imul(Me,Ue)|0,l=l+Math.imul(Ve,Ie)|0,R=R+Math.imul(Ve,Ue)|0,d=d+Math.imul(ge,Ce)|0,l=l+Math.imul(ge,Ot)|0,l=l+Math.imul(Te,Ce)|0,R=R+Math.imul(Te,Ot)|0,d=d+Math.imul(oe,tt)|0,l=l+Math.imul(oe,bt)|0,l=l+Math.imul(ce,tt)|0,R=R+Math.imul(ce,bt)|0;var wi=(x+d|0)+((l&8191)<<13)|0;x=(R+(l>>>13)|0)+(wi>>>26)|0,wi&=67108863,d=Math.imul(Pe,Ee),l=Math.imul(Pe,We),l=l+Math.imul(ct,Ee)|0,R=Math.imul(ct,We),d=d+Math.imul(we,Re)|0,l=l+Math.imul(we,st)|0,l=l+Math.imul(Je,Re)|0,R=R+Math.imul(Je,st)|0,d=d+Math.imul(be,Ne)|0,l=l+Math.imul(be,Xe)|0,l=l+Math.imul(Fe,Ne)|0,R=R+Math.imul(Fe,Xe)|0,d=d+Math.imul(_e,Ie)|0,l=l+Math.imul(_e,Ue)|0,l=l+Math.imul(je,Ie)|0,R=R+Math.imul(je,Ue)|0,d=d+Math.imul(Me,Ce)|0,l=l+Math.imul(Me,Ot)|0,l=l+Math.imul(Ve,Ce)|0,R=R+Math.imul(Ve,Ot)|0,d=d+Math.imul(ge,tt)|0,l=l+Math.imul(ge,bt)|0,l=l+Math.imul(Te,tt)|0,R=R+Math.imul(Te,bt)|0;var _i=(x+d|0)+((l&8191)<<13)|0;x=(R+(l>>>13)|0)+(_i>>>26)|0,_i&=67108863,d=Math.imul(Pe,Re),l=Math.imul(Pe,st),l=l+Math.imul(ct,Re)|0,R=Math.imul(ct,st),d=d+Math.imul(we,Ne)|0,l=l+Math.imul(we,Xe)|0,l=l+Math.imul(Je,Ne)|0,R=R+Math.imul(Je,Xe)|0,d=d+Math.imul(be,Ie)|0,l=l+Math.imul(be,Ue)|0,l=l+Math.imul(Fe,Ie)|0,R=R+Math.imul(Fe,Ue)|0,d=d+Math.imul(_e,Ce)|0,l=l+Math.imul(_e,Ot)|0,l=l+Math.imul(je,Ce)|0,R=R+Math.imul(je,Ot)|0,d=d+Math.imul(Me,tt)|0,l=l+Math.imul(Me,bt)|0,l=l+Math.imul(Ve,tt)|0,R=R+Math.imul(Ve,bt)|0;var or=(x+d|0)+((l&8191)<<13)|0;x=(R+(l>>>13)|0)+(or>>>26)|0,or&=67108863,d=Math.imul(Pe,Ne),l=Math.imul(Pe,Xe),l=l+Math.imul(ct,Ne)|0,R=Math.imul(ct,Xe),d=d+Math.imul(we,Ie)|0,l=l+Math.imul(we,Ue)|0,l=l+Math.imul(Je,Ie)|0,R=R+Math.imul(Je,Ue)|0,d=d+Math.imul(be,Ce)|0,l=l+Math.imul(be,Ot)|0,l=l+Math.imul(Fe,Ce)|0,R=R+Math.imul(Fe,Ot)|0,d=d+Math.imul(_e,tt)|0,l=l+Math.imul(_e,bt)|0,l=l+Math.imul(je,tt)|0,R=R+Math.imul(je,bt)|0;var Ki=(x+d|0)+((l&8191)<<13)|0;x=(R+(l>>>13)|0)+(Ki>>>26)|0,Ki&=67108863,d=Math.imul(Pe,Ie),l=Math.imul(Pe,Ue),l=l+Math.imul(ct,Ie)|0,R=Math.imul(ct,Ue),d=d+Math.imul(we,Ce)|0,l=l+Math.imul(we,Ot)|0,l=l+Math.imul(Je,Ce)|0,R=R+Math.imul(Je,Ot)|0,d=d+Math.imul(be,tt)|0,l=l+Math.imul(be,bt)|0,l=l+Math.imul(Fe,tt)|0,R=R+Math.imul(Fe,bt)|0;var Hi=(x+d|0)+((l&8191)<<13)|0;x=(R+(l>>>13)|0)+(Hi>>>26)|0,Hi&=67108863,d=Math.imul(Pe,Ce),l=Math.imul(Pe,Ot),l=l+Math.imul(ct,Ce)|0,R=Math.imul(ct,Ot),d=d+Math.imul(we,tt)|0,l=l+Math.imul(we,bt)|0,l=l+Math.imul(Je,tt)|0,R=R+Math.imul(Je,bt)|0;var Vi=(x+d|0)+((l&8191)<<13)|0;x=(R+(l>>>13)|0)+(Vi>>>26)|0,Vi&=67108863,d=Math.imul(Pe,tt),l=Math.imul(Pe,bt),l=l+Math.imul(ct,tt)|0,R=Math.imul(ct,bt);var Ss=(x+d|0)+((l&8191)<<13)|0;return x=(R+(l>>>13)|0)+(Ss>>>26)|0,Ss&=67108863,S[0]=Sr,S[1]=Pr,S[2]=Rr,S[3]=Nr,S[4]=Cr,S[5]=Qt,S[6]=Vr,S[7]=Ui,S[8]=Gr,S[9]=ji,S[10]=Fi,S[11]=Wr,S[12]=wi,S[13]=_i,S[14]=or,S[15]=Ki,S[16]=Hi,S[17]=Vi,S[18]=Ss,x!==0&&(S[19]=x,g.length++),g};Math.imul||(ee=W);function de(c,u,g){g.negative=u.negative^c.negative,g.length=c.length+u.length;for(var _=0,M=0,S=0;S<g.length-1;S++){var x=M;M=0;for(var d=_&67108863,l=Math.min(S,u.length-1),R=Math.max(0,S-c.length+1);R<=l;R++){var X=S-R,te=c.words[X]|0,I=u.words[R]|0,J=te*I,D=J&67108863;x=x+(J/67108864|0)|0,D=D+d|0,d=D&67108863,x=x+(D>>>26)|0,M+=x>>>26,x&=67108863}g.words[S]=d,_=x,x=M}return _!==0?g.words[S]=_:g.length--,g._strip()}function se(c,u,g){return de(c,u,g)}a.prototype.mulTo=function(c,u){var g,_=this.length+c.length;return this.length===10&&c.length===10?g=ee(this,c,u):_<63?g=W(this,c,u):_<1024?g=de(this,c,u):g=se(this,c,u),g},a.prototype.mul=function(c){var u=new a(null);return u.words=new Array(this.length+c.length),this.mulTo(c,u)},a.prototype.mulf=function(c){var u=new a(null);return u.words=new Array(this.length+c.length),se(this,c,u)},a.prototype.imul=function(c){return this.clone().mulTo(c,this)},a.prototype.imuln=function(c){var u=c<0;u&&(c=-c),i(typeof c=="number"),i(c<67108864);for(var g=0,_=0;_<this.length;_++){var M=(this.words[_]|0)*c,S=(M&67108863)+(g&67108863);g>>=26,g+=M/67108864|0,g+=S>>>26,this.words[_]=S&67108863}return g!==0&&(this.words[_]=g,this.length++),u?this.ineg():this},a.prototype.muln=function(c){return this.clone().imuln(c)},a.prototype.sqr=function(){return this.mul(this)},a.prototype.isqr=function(){return this.imul(this.clone())},a.prototype.pow=function(c){var u=G(c);if(u.length===0)return new a(1);for(var g=this,_=0;_<u.length&&u[_]===0;_++,g=g.sqr());if(++_<u.length)for(var M=g.sqr();_<u.length;_++,M=M.sqr())u[_]!==0&&(g=g.mul(M));return g},a.prototype.iushln=function(c){i(typeof c=="number"&&c>=0);var u=c%26,g=(c-u)/26,_=67108863>>>26-u<<26-u,M;if(u!==0){var S=0;for(M=0;M<this.length;M++){var x=this.words[M]&_,d=(this.words[M]|0)-x<<u;this.words[M]=d|S,S=x>>>26-u}S&&(this.words[M]=S,this.length++)}if(g!==0){for(M=this.length-1;M>=0;M--)this.words[M+g]=this.words[M];for(M=0;M<g;M++)this.words[M]=0;this.length+=g}return this._strip()},a.prototype.ishln=function(c){return i(this.negative===0),this.iushln(c)},a.prototype.iushrn=function(c,u,g){i(typeof c=="number"&&c>=0);var _;u?_=(u-u%26)/26:_=0;var M=c%26,S=Math.min((c-M)/26,this.length),x=67108863^67108863>>>M<<M,d=g;if(_-=S,_=Math.max(0,_),d){for(var l=0;l<S;l++)d.words[l]=this.words[l];d.length=S}if(S!==0)if(this.length>S)for(this.length-=S,l=0;l<this.length;l++)this.words[l]=this.words[l+S];else this.words[0]=0,this.length=1;var R=0;for(l=this.length-1;l>=0&&(R!==0||l>=_);l--){var X=this.words[l]|0;this.words[l]=R<<26-M|X>>>M,R=X&x}return d&&R!==0&&(d.words[d.length++]=R),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},a.prototype.ishrn=function(c,u,g){return i(this.negative===0),this.iushrn(c,u,g)},a.prototype.shln=function(c){return this.clone().ishln(c)},a.prototype.ushln=function(c){return this.clone().iushln(c)},a.prototype.shrn=function(c){return this.clone().ishrn(c)},a.prototype.ushrn=function(c){return this.clone().iushrn(c)},a.prototype.testn=function(c){i(typeof c=="number"&&c>=0);var u=c%26,g=(c-u)/26,_=1<<u;if(this.length<=g)return!1;var M=this.words[g];return!!(M&_)},a.prototype.imaskn=function(c){i(typeof c=="number"&&c>=0);var u=c%26,g=(c-u)/26;if(i(this.negative===0,"imaskn works only with positive numbers"),this.length<=g)return this;if(u!==0&&g++,this.length=Math.min(g,this.length),u!==0){var _=67108863^67108863>>>u<<u;this.words[this.length-1]&=_}return this._strip()},a.prototype.maskn=function(c){return this.clone().imaskn(c)},a.prototype.iaddn=function(c){return i(typeof c=="number"),i(c<67108864),c<0?this.isubn(-c):this.negative!==0?this.length===1&&(this.words[0]|0)<=c?(this.words[0]=c-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(c),this.negative=1,this):this._iaddn(c)},a.prototype._iaddn=function(c){this.words[0]+=c;for(var u=0;u<this.length&&this.words[u]>=67108864;u++)this.words[u]-=67108864,u===this.length-1?this.words[u+1]=1:this.words[u+1]++;return this.length=Math.max(this.length,u+1),this},a.prototype.isubn=function(c){if(i(typeof c=="number"),i(c<67108864),c<0)return this.iaddn(-c);if(this.negative!==0)return this.negative=0,this.iaddn(c),this.negative=1,this;if(this.words[0]-=c,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var u=0;u<this.length&&this.words[u]<0;u++)this.words[u]+=67108864,this.words[u+1]-=1;return this._strip()},a.prototype.addn=function(c){return this.clone().iaddn(c)},a.prototype.subn=function(c){return this.clone().isubn(c)},a.prototype.iabs=function(){return this.negative=0,this},a.prototype.abs=function(){return this.clone().iabs()},a.prototype._ishlnsubmul=function(c,u,g){var _=c.length+g,M;this._expand(_);var S,x=0;for(M=0;M<c.length;M++){S=(this.words[M+g]|0)+x;var d=(c.words[M]|0)*u;S-=d&67108863,x=(S>>26)-(d/67108864|0),this.words[M+g]=S&67108863}for(;M<this.length-g;M++)S=(this.words[M+g]|0)+x,x=S>>26,this.words[M+g]=S&67108863;if(x===0)return this._strip();for(i(x===-1),x=0,M=0;M<this.length;M++)S=-(this.words[M]|0)+x,x=S>>26,this.words[M]=S&67108863;return this.negative=1,this._strip()},a.prototype._wordDiv=function(c,u){var g=this.length-c.length,_=this.clone(),M=c,S=M.words[M.length-1]|0,x=this._countBits(S);g=26-x,g!==0&&(M=M.ushln(g),_.iushln(g),S=M.words[M.length-1]|0);var d=_.length-M.length,l;if(u!=="mod"){l=new a(null),l.length=d+1,l.words=new Array(l.length);for(var R=0;R<l.length;R++)l.words[R]=0}var X=_.clone()._ishlnsubmul(M,1,d);X.negative===0&&(_=X,l&&(l.words[d]=1));for(var te=d-1;te>=0;te--){var I=(_.words[M.length+te]|0)*67108864+(_.words[M.length+te-1]|0);for(I=Math.min(I/S|0,67108863),_._ishlnsubmul(M,I,te);_.negative!==0;)I--,_.negative=0,_._ishlnsubmul(M,1,te),_.isZero()||(_.negative^=1);l&&(l.words[te]=I)}return l&&l._strip(),_._strip(),u!=="div"&&g!==0&&_.iushrn(g),{div:l||null,mod:_}},a.prototype.divmod=function(c,u,g){if(i(!c.isZero()),this.isZero())return{div:new a(0),mod:new a(0)};var _,M,S;return this.negative!==0&&c.negative===0?(S=this.neg().divmod(c,u),u!=="mod"&&(_=S.div.neg()),u!=="div"&&(M=S.mod.neg(),g&&M.negative!==0&&M.iadd(c)),{div:_,mod:M}):this.negative===0&&c.negative!==0?(S=this.divmod(c.neg(),u),u!=="mod"&&(_=S.div.neg()),{div:_,mod:S.mod}):this.negative&c.negative?(S=this.neg().divmod(c.neg(),u),u!=="div"&&(M=S.mod.neg(),g&&M.negative!==0&&M.isub(c)),{div:S.div,mod:M}):c.length>this.length||this.cmp(c)<0?{div:new a(0),mod:this}:c.length===1?u==="div"?{div:this.divn(c.words[0]),mod:null}:u==="mod"?{div:null,mod:new a(this.modrn(c.words[0]))}:{div:this.divn(c.words[0]),mod:new a(this.modrn(c.words[0]))}:this._wordDiv(c,u)},a.prototype.div=function(c){return this.divmod(c,"div",!1).div},a.prototype.mod=function(c){return this.divmod(c,"mod",!1).mod},a.prototype.umod=function(c){return this.divmod(c,"mod",!0).mod},a.prototype.divRound=function(c){var u=this.divmod(c);if(u.mod.isZero())return u.div;var g=u.div.negative!==0?u.mod.isub(c):u.mod,_=c.ushrn(1),M=c.andln(1),S=g.cmp(_);return S<0||M===1&&S===0?u.div:u.div.negative!==0?u.div.isubn(1):u.div.iaddn(1)},a.prototype.modrn=function(c){var u=c<0;u&&(c=-c),i(c<=67108863);for(var g=(1<<26)%c,_=0,M=this.length-1;M>=0;M--)_=(g*_+(this.words[M]|0))%c;return u?-_:_},a.prototype.modn=function(c){return this.modrn(c)},a.prototype.idivn=function(c){var u=c<0;u&&(c=-c),i(c<=67108863);for(var g=0,_=this.length-1;_>=0;_--){var M=(this.words[_]|0)+g*67108864;this.words[_]=M/c|0,g=M%c}return this._strip(),u?this.ineg():this},a.prototype.divn=function(c){return this.clone().idivn(c)},a.prototype.egcd=function(c){i(c.negative===0),i(!c.isZero());var u=this,g=c.clone();u.negative!==0?u=u.umod(c):u=u.clone();for(var _=new a(1),M=new a(0),S=new a(0),x=new a(1),d=0;u.isEven()&&g.isEven();)u.iushrn(1),g.iushrn(1),++d;for(var l=g.clone(),R=u.clone();!u.isZero();){for(var X=0,te=1;!(u.words[0]&te)&&X<26;++X,te<<=1);if(X>0)for(u.iushrn(X);X-- >0;)(_.isOdd()||M.isOdd())&&(_.iadd(l),M.isub(R)),_.iushrn(1),M.iushrn(1);for(var I=0,J=1;!(g.words[0]&J)&&I<26;++I,J<<=1);if(I>0)for(g.iushrn(I);I-- >0;)(S.isOdd()||x.isOdd())&&(S.iadd(l),x.isub(R)),S.iushrn(1),x.iushrn(1);u.cmp(g)>=0?(u.isub(g),_.isub(S),M.isub(x)):(g.isub(u),S.isub(_),x.isub(M))}return{a:S,b:x,gcd:g.iushln(d)}},a.prototype._invmp=function(c){i(c.negative===0),i(!c.isZero());var u=this,g=c.clone();u.negative!==0?u=u.umod(c):u=u.clone();for(var _=new a(1),M=new a(0),S=g.clone();u.cmpn(1)>0&&g.cmpn(1)>0;){for(var x=0,d=1;!(u.words[0]&d)&&x<26;++x,d<<=1);if(x>0)for(u.iushrn(x);x-- >0;)_.isOdd()&&_.iadd(S),_.iushrn(1);for(var l=0,R=1;!(g.words[0]&R)&&l<26;++l,R<<=1);if(l>0)for(g.iushrn(l);l-- >0;)M.isOdd()&&M.iadd(S),M.iushrn(1);u.cmp(g)>=0?(u.isub(g),_.isub(M)):(g.isub(u),M.isub(_))}var X;return u.cmpn(1)===0?X=_:X=M,X.cmpn(0)<0&&X.iadd(c),X},a.prototype.gcd=function(c){if(this.isZero())return c.abs();if(c.isZero())return this.abs();var u=this.clone(),g=c.clone();u.negative=0,g.negative=0;for(var _=0;u.isEven()&&g.isEven();_++)u.iushrn(1),g.iushrn(1);do{for(;u.isEven();)u.iushrn(1);for(;g.isEven();)g.iushrn(1);var M=u.cmp(g);if(M<0){var S=u;u=g,g=S}else if(M===0||g.cmpn(1)===0)break;u.isub(g)}while(!0);return g.iushln(_)},a.prototype.invm=function(c){return this.egcd(c).a.umod(c)},a.prototype.isEven=function(){return(this.words[0]&1)===0},a.prototype.isOdd=function(){return(this.words[0]&1)===1},a.prototype.andln=function(c){return this.words[0]&c},a.prototype.bincn=function(c){i(typeof c=="number");var u=c%26,g=(c-u)/26,_=1<<u;if(this.length<=g)return this._expand(g+1),this.words[g]|=_,this;for(var M=_,S=g;M!==0&&S<this.length;S++){var x=this.words[S]|0;x+=M,M=x>>>26,x&=67108863,this.words[S]=x}return M!==0&&(this.words[S]=M,this.length++),this},a.prototype.isZero=function(){return this.length===1&&this.words[0]===0},a.prototype.cmpn=function(c){var u=c<0;if(this.negative!==0&&!u)return-1;if(this.negative===0&&u)return 1;this._strip();var g;if(this.length>1)g=1;else{u&&(c=-c),i(c<=67108863,"Number is too big");var _=this.words[0]|0;g=_===c?0:_<c?-1:1}return this.negative!==0?-g|0:g},a.prototype.cmp=function(c){if(this.negative!==0&&c.negative===0)return-1;if(this.negative===0&&c.negative!==0)return 1;var u=this.ucmp(c);return this.negative!==0?-u|0:u},a.prototype.ucmp=function(c){if(this.length>c.length)return 1;if(this.length<c.length)return-1;for(var u=0,g=this.length-1;g>=0;g--){var _=this.words[g]|0,M=c.words[g]|0;if(_!==M){_<M?u=-1:_>M&&(u=1);break}}return u},a.prototype.gtn=function(c){return this.cmpn(c)===1},a.prototype.gt=function(c){return this.cmp(c)===1},a.prototype.gten=function(c){return this.cmpn(c)>=0},a.prototype.gte=function(c){return this.cmp(c)>=0},a.prototype.ltn=function(c){return this.cmpn(c)===-1},a.prototype.lt=function(c){return this.cmp(c)===-1},a.prototype.lten=function(c){return this.cmpn(c)<=0},a.prototype.lte=function(c){return this.cmp(c)<=0},a.prototype.eqn=function(c){return this.cmpn(c)===0},a.prototype.eq=function(c){return this.cmp(c)===0},a.red=function(c){return new $(c)},a.prototype.toRed=function(c){return i(!this.red,"Already a number in reduction context"),i(this.negative===0,"red works only with positives"),c.convertTo(this)._forceRed(c)},a.prototype.fromRed=function(){return i(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},a.prototype._forceRed=function(c){return this.red=c,this},a.prototype.forceRed=function(c){return i(!this.red,"Already a number in reduction context"),this._forceRed(c)},a.prototype.redAdd=function(c){return i(this.red,"redAdd works only with red numbers"),this.red.add(this,c)},a.prototype.redIAdd=function(c){return i(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,c)},a.prototype.redSub=function(c){return i(this.red,"redSub works only with red numbers"),this.red.sub(this,c)},a.prototype.redISub=function(c){return i(this.red,"redISub works only with red numbers"),this.red.isub(this,c)},a.prototype.redShl=function(c){return i(this.red,"redShl works only with red numbers"),this.red.shl(this,c)},a.prototype.redMul=function(c){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,c),this.red.mul(this,c)},a.prototype.redIMul=function(c){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,c),this.red.imul(this,c)},a.prototype.redSqr=function(){return i(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},a.prototype.redISqr=function(){return i(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},a.prototype.redSqrt=function(){return i(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},a.prototype.redInvm=function(){return i(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},a.prototype.redNeg=function(){return i(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},a.prototype.redPow=function(c){return i(this.red&&!c.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,c)};var ae={k256:null,p224:null,p192:null,p25519:null};function ue(c,u){this.name=c,this.p=new a(u,16),this.n=this.p.bitLength(),this.k=new a(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}ue.prototype._tmp=function(){var c=new a(null);return c.words=new Array(Math.ceil(this.n/13)),c},ue.prototype.ireduce=function(c){var u=c,g;do this.split(u,this.tmp),u=this.imulK(u),u=u.iadd(this.tmp),g=u.bitLength();while(g>this.n);var _=g<this.n?-1:u.ucmp(this.p);return _===0?(u.words[0]=0,u.length=1):_>0?u.isub(this.p):u.strip!==void 0?u.strip():u._strip(),u},ue.prototype.split=function(c,u){c.iushrn(this.n,0,u)},ue.prototype.imulK=function(c){return c.imul(this.k)};function ne(){ue.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}s(ne,ue),ne.prototype.split=function(c,u){for(var g=4194303,_=Math.min(c.length,9),M=0;M<_;M++)u.words[M]=c.words[M];if(u.length=_,c.length<=9){c.words[0]=0,c.length=1;return}var S=c.words[9];for(u.words[u.length++]=S&g,M=10;M<c.length;M++){var x=c.words[M]|0;c.words[M-10]=(x&g)<<4|S>>>22,S=x}S>>>=22,c.words[M-10]=S,S===0&&c.length>10?c.length-=10:c.length-=9},ne.prototype.imulK=function(c){c.words[c.length]=0,c.words[c.length+1]=0,c.length+=2;for(var u=0,g=0;g<c.length;g++){var _=c.words[g]|0;u+=_*977,c.words[g]=u&67108863,u=_*64+(u/67108864|0)}return c.words[c.length-1]===0&&(c.length--,c.words[c.length-1]===0&&c.length--),c};function ve(){ue.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}s(ve,ue);function Ae(){ue.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}s(Ae,ue);function ot(){ue.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}s(ot,ue),ot.prototype.imulK=function(c){for(var u=0,g=0;g<c.length;g++){var _=(c.words[g]|0)*19+u,M=_&67108863;_>>>=26,c.words[g]=M,u=_}return u!==0&&(c.words[c.length++]=u),c},a._prime=function(c){if(ae[c])return ae[c];var u;if(c==="k256")u=new ne;else if(c==="p224")u=new ve;else if(c==="p192")u=new Ae;else if(c==="p25519")u=new ot;else throw new Error("Unknown prime "+c);return ae[c]=u,u};function $(c){if(typeof c=="string"){var u=a._prime(c);this.m=u.p,this.prime=u}else i(c.gtn(1),"modulus must be greater than 1"),this.m=c,this.prime=null}$.prototype._verify1=function(c){i(c.negative===0,"red works only with positives"),i(c.red,"red works only with red numbers")},$.prototype._verify2=function(c,u){i((c.negative|u.negative)===0,"red works only with positives"),i(c.red&&c.red===u.red,"red works only with red numbers")},$.prototype.imod=function(c){return this.prime?this.prime.ireduce(c)._forceRed(this):(A(c,c.umod(this.m)._forceRed(this)),c)},$.prototype.neg=function(c){return c.isZero()?c.clone():this.m.sub(c)._forceRed(this)},$.prototype.add=function(c,u){this._verify2(c,u);var g=c.add(u);return g.cmp(this.m)>=0&&g.isub(this.m),g._forceRed(this)},$.prototype.iadd=function(c,u){this._verify2(c,u);var g=c.iadd(u);return g.cmp(this.m)>=0&&g.isub(this.m),g},$.prototype.sub=function(c,u){this._verify2(c,u);var g=c.sub(u);return g.cmpn(0)<0&&g.iadd(this.m),g._forceRed(this)},$.prototype.isub=function(c,u){this._verify2(c,u);var g=c.isub(u);return g.cmpn(0)<0&&g.iadd(this.m),g},$.prototype.shl=function(c,u){return this._verify1(c),this.imod(c.ushln(u))},$.prototype.imul=function(c,u){return this._verify2(c,u),this.imod(c.imul(u))},$.prototype.mul=function(c,u){return this._verify2(c,u),this.imod(c.mul(u))},$.prototype.isqr=function(c){return this.imul(c,c.clone())},$.prototype.sqr=function(c){return this.mul(c,c)},$.prototype.sqrt=function(c){if(c.isZero())return c.clone();var u=this.m.andln(3);if(i(u%2===1),u===3){var g=this.m.add(new a(1)).iushrn(2);return this.pow(c,g)}for(var _=this.m.subn(1),M=0;!_.isZero()&&_.andln(1)===0;)M++,_.iushrn(1);i(!_.isZero());var S=new a(1).toRed(this),x=S.redNeg(),d=this.m.subn(1).iushrn(1),l=this.m.bitLength();for(l=new a(2*l*l).toRed(this);this.pow(l,d).cmp(x)!==0;)l.redIAdd(x);for(var R=this.pow(l,_),X=this.pow(c,_.addn(1).iushrn(1)),te=this.pow(c,_),I=M;te.cmp(S)!==0;){for(var J=te,D=0;J.cmp(S)!==0;D++)J=J.redSqr();i(D<I);var k=this.pow(R,new a(1).iushln(I-D-1));X=X.redMul(k),R=k.redSqr(),te=te.redMul(R),I=D}return X},$.prototype.invm=function(c){var u=c._invmp(this.m);return u.negative!==0?(u.negative=0,this.imod(u).redNeg()):this.imod(u)},$.prototype.pow=function(c,u){if(u.isZero())return new a(1).toRed(this);if(u.cmpn(1)===0)return c.clone();var g=4,_=new Array(1<<g);_[0]=new a(1).toRed(this),_[1]=c;for(var M=2;M<_.length;M++)_[M]=this.mul(_[M-1],c);var S=_[0],x=0,d=0,l=u.bitLength()%26;for(l===0&&(l=26),M=u.length-1;M>=0;M--){for(var R=u.words[M],X=l-1;X>=0;X--){var te=R>>X&1;if(S!==_[0]&&(S=this.sqr(S)),te===0&&x===0){d=0;continue}x<<=1,x|=te,d++,!(d!==g&&(M!==0||X!==0))&&(S=this.mul(S,_[x]),d=0,x=0)}l=26}return S},$.prototype.convertTo=function(c){var u=c.umod(this.m);return u===c?u.clone():u},$.prototype.convertFrom=function(c){var u=c.clone();return u.red=null,u},a.mont=function(c){return new b(c)};function b(c){$.call(this,c),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new a(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}s(b,$),b.prototype.convertTo=function(c){return this.imod(c.ushln(this.shift))},b.prototype.convertFrom=function(c){var u=this.imod(c.mul(this.rinv));return u.red=null,u},b.prototype.imul=function(c,u){if(c.isZero()||u.isZero())return c.words[0]=0,c.length=1,c;var g=c.imul(u),_=g.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),M=g.isub(_).iushrn(this.shift),S=M;return M.cmp(this.m)>=0?S=M.isub(this.m):M.cmpn(0)<0&&(S=M.iadd(this.m)),S._forceRed(this)},b.prototype.mul=function(c,u){if(c.isZero()||u.isZero())return new a(0)._forceRed(this);var g=c.mul(u),_=g.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),M=g.isub(_).iushrn(this.shift),S=M;return M.cmp(this.m)>=0?S=M.isub(this.m):M.cmpn(0)<0&&(S=M.iadd(this.m)),S._forceRed(this)},b.prototype.invm=function(c){var u=this.imod(c._invmp(this.m).mul(this.r2));return u._forceRed(this)}})(r,tv)})(sv);var vt=sv.exports;const av="bignumber/5.7.0";var Rh=vt.BN;const Xn=new Er(av),Su={},kp=9007199254740991;function O9(r){return r!=null&&(Kr.isBigNumber(r)||typeof r=="number"&&r%1===0||typeof r=="string"&&!!r.match(/^-?[0-9]+$/)||vi(r)||typeof r=="bigint"||Ja(r))}let Lp=!1,Kr=class rn{constructor(e,t){e!==Su&&Xn.throwError("cannot call constructor directly; use BigNumber.from",Er.errors.UNSUPPORTED_OPERATION,{operation:"new (BigNumber)"}),this._hex=t,this._isBigNumber=!0,Object.freeze(this)}fromTwos(e){return ei(St(this).fromTwos(e))}toTwos(e){return ei(St(this).toTwos(e))}abs(){return this._hex[0]==="-"?rn.from(this._hex.substring(1)):this}add(e){return ei(St(this).add(St(e)))}sub(e){return ei(St(this).sub(St(e)))}div(e){return rn.from(e).isZero()&&Ni("division-by-zero","div"),ei(St(this).div(St(e)))}mul(e){return ei(St(this).mul(St(e)))}mod(e){const t=St(e);return t.isNeg()&&Ni("division-by-zero","mod"),ei(St(this).umod(t))}pow(e){const t=St(e);return t.isNeg()&&Ni("negative-power","pow"),ei(St(this).pow(t))}and(e){const t=St(e);return(this.isNegative()||t.isNeg())&&Ni("unbound-bitwise-result","and"),ei(St(this).and(t))}or(e){const t=St(e);return(this.isNegative()||t.isNeg())&&Ni("unbound-bitwise-result","or"),ei(St(this).or(t))}xor(e){const t=St(e);return(this.isNegative()||t.isNeg())&&Ni("unbound-bitwise-result","xor"),ei(St(this).xor(t))}mask(e){return(this.isNegative()||e<0)&&Ni("negative-width","mask"),ei(St(this).maskn(e))}shl(e){return(this.isNegative()||e<0)&&Ni("negative-width","shl"),ei(St(this).shln(e))}shr(e){return(this.isNegative()||e<0)&&Ni("negative-width","shr"),ei(St(this).shrn(e))}eq(e){return St(this).eq(St(e))}lt(e){return St(this).lt(St(e))}lte(e){return St(this).lte(St(e))}gt(e){return St(this).gt(St(e))}gte(e){return St(this).gte(St(e))}isNegative(){return this._hex[0]==="-"}isZero(){return St(this).isZero()}toNumber(){try{return St(this).toNumber()}catch{Ni("overflow","toNumber",this.toString())}return null}toBigInt(){try{return BigInt(this.toString())}catch{}return Xn.throwError("this platform does not support BigInt",Er.errors.UNSUPPORTED_OPERATION,{value:this.toString()})}toString(){return arguments.length>0&&(arguments[0]===10?Lp||(Lp=!0,Xn.warn("BigNumber.toString does not accept any parameters; base-10 is assumed")):arguments[0]===16?Xn.throwError("BigNumber.toString does not accept any parameters; use bigNumber.toHexString()",Er.errors.UNEXPECTED_ARGUMENT,{}):Xn.throwError("BigNumber.toString does not accept parameters",Er.errors.UNEXPECTED_ARGUMENT,{})),St(this).toString(10)}toHexString(){return this._hex}toJSON(e){return{type:"BigNumber",hex:this.toHexString()}}static from(e){if(e instanceof rn)return e;if(typeof e=="string")return e.match(/^-?0x[0-9a-f]+$/i)?new rn(Su,jo(e)):e.match(/^-?[0-9]+$/)?new rn(Su,jo(new Rh(e))):Xn.throwArgumentError("invalid BigNumber string","value",e);if(typeof e=="number")return e%1&&Ni("underflow","BigNumber.from",e),(e>=kp||e<=-kp)&&Ni("overflow","BigNumber.from",e),rn.from(String(e));const t=e;if(typeof t=="bigint")return rn.from(t.toString());if(Ja(t))return rn.from(ii(t));if(t)if(t.toHexString){const i=t.toHexString();if(typeof i=="string")return rn.from(i)}else{let i=t._hex;if(i==null&&t.type==="BigNumber"&&(i=t.hex),typeof i=="string"&&(vi(i)||i[0]==="-"&&vi(i.substring(1))))return rn.from(i)}return Xn.throwArgumentError("invalid BigNumber value","value",e)}static isBigNumber(e){return!!(e&&e._isBigNumber)}};function jo(r){if(typeof r!="string")return jo(r.toString(16));if(r[0]==="-")return r=r.substring(1),r[0]==="-"&&Xn.throwArgumentError("invalid hex","value",r),r=jo(r),r==="0x00"?r:"-"+r;if(r.substring(0,2)!=="0x"&&(r="0x"+r),r==="0x")return"0x00";for(r.length%2&&(r="0x0"+r.substring(2));r.length>4&&r.substring(0,4)==="0x00";)r="0x"+r.substring(4);return r}function ei(r){return Kr.from(jo(r))}function St(r){const e=Kr.from(r).toHexString();return e[0]==="-"?new Rh("-"+e.substring(3),16):new Rh(e.substring(2),16)}function Ni(r,e,t){const i={fault:r,operation:e};return t!=null&&(i.value=t),Xn.throwError(r,Er.errors.NUMERIC_FAULT,i)}function T9(r){return new Rh(r,36).toString(16)}const jr=new Er(av),zo={},ov=Kr.from(0),cv=Kr.from(-1);function hv(r,e,t,i){const s={fault:e,operation:t};return i!==void 0&&(s.value=i),jr.throwError(r,Er.errors.NUMERIC_FAULT,s)}let ko="0";for(;ko.length<256;)ko+=ko;function T0(r){if(typeof r!="number")try{r=Kr.from(r).toNumber()}catch{}return typeof r=="number"&&r>=0&&r<=256&&!(r%1)?"1"+ko.substring(0,r):jr.throwArgumentError("invalid decimal size","decimals",r)}function Pu(r,e){e==null&&(e=0);const t=T0(e);r=Kr.from(r);const i=r.lt(ov);i&&(r=r.mul(cv));let s=r.mod(t).toString();for(;s.length<t.length-1;)s="0"+s;s=s.match(/^([0-9]*[1-9]|0)(0*)/)[1];const a=r.div(t).toString();return t.length===1?r=a:r=a+"."+s,i&&(r="-"+r),r}function Qn(r,e){e==null&&(e=0);const t=T0(e);(typeof r!="string"||!r.match(/^-?[0-9.]+$/))&&jr.throwArgumentError("invalid decimal value","value",r);const i=r.substring(0,1)==="-";i&&(r=r.substring(1)),r==="."&&jr.throwArgumentError("missing value","value",r);const s=r.split(".");s.length>2&&jr.throwArgumentError("too many decimal points","value",r);let a=s[0],f=s[1];for(a||(a="0"),f||(f="0");f[f.length-1]==="0";)f=f.substring(0,f.length-1);for(f.length>t.length-1&&hv("fractional component exceeds decimals","underflow","parseFixed"),f===""&&(f="0");f.length<t.length-1;)f+="0";const p=Kr.from(a),y=Kr.from(f);let v=p.mul(t).add(y);return i&&(v=v.mul(cv)),v}let Ru=class s0{constructor(e,t,i,s){e!==zo&&jr.throwError("cannot use FixedFormat constructor; use FixedFormat.from",Er.errors.UNSUPPORTED_OPERATION,{operation:"new FixedFormat"}),this.signed=t,this.width=i,this.decimals=s,this.name=(t?"":"u")+"fixed"+String(i)+"x"+String(s),this._multiplier=T0(s),Object.freeze(this)}static from(e){if(e instanceof s0)return e;typeof e=="number"&&(e=`fixed128x${e}`);let t=!0,i=128,s=18;if(typeof e=="string"){if(e!=="fixed")if(e==="ufixed")t=!1;else{const a=e.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);a||jr.throwArgumentError("invalid fixed format","format",e),t=a[1]!=="u",i=parseInt(a[2]),s=parseInt(a[3])}}else if(e){const a=(f,p,y)=>e[f]==null?y:(typeof e[f]!==p&&jr.throwArgumentError("invalid fixed format ("+f+" not "+p+")","format."+f,e[f]),e[f]);t=a("signed","boolean",t),i=a("width","number",i),s=a("decimals","number",s)}return i%8&&jr.throwArgumentError("invalid fixed format width (not byte aligned)","format.width",i),s>80&&jr.throwArgumentError("invalid fixed format (decimals too large)","format.decimals",s),new s0(zo,t,i,s)}},fv=class Ur{constructor(e,t,i,s){e!==zo&&jr.throwError("cannot use FixedNumber constructor; use FixedNumber.from",Er.errors.UNSUPPORTED_OPERATION,{operation:"new FixedFormat"}),this.format=s,this._hex=t,this._value=i,this._isFixedNumber=!0,Object.freeze(this)}_checkFormat(e){this.format.name!==e.format.name&&jr.throwArgumentError("incompatible format; use fixedNumber.toFormat","other",e)}addUnsafe(e){this._checkFormat(e);const t=Qn(this._value,this.format.decimals),i=Qn(e._value,e.format.decimals);return Ur.fromValue(t.add(i),this.format.decimals,this.format)}subUnsafe(e){this._checkFormat(e);const t=Qn(this._value,this.format.decimals),i=Qn(e._value,e.format.decimals);return Ur.fromValue(t.sub(i),this.format.decimals,this.format)}mulUnsafe(e){this._checkFormat(e);const t=Qn(this._value,this.format.decimals),i=Qn(e._value,e.format.decimals);return Ur.fromValue(t.mul(i).div(this.format._multiplier),this.format.decimals,this.format)}divUnsafe(e){this._checkFormat(e);const t=Qn(this._value,this.format.decimals),i=Qn(e._value,e.format.decimals);return Ur.fromValue(t.mul(this.format._multiplier).div(i),this.format.decimals,this.format)}floor(){const e=this.toString().split(".");e.length===1&&e.push("0");let t=Ur.from(e[0],this.format);const i=!e[1].match(/^(0*)$/);return this.isNegative()&&i&&(t=t.subUnsafe(Up.toFormat(t.format))),t}ceiling(){const e=this.toString().split(".");e.length===1&&e.push("0");let t=Ur.from(e[0],this.format);const i=!e[1].match(/^(0*)$/);return!this.isNegative()&&i&&(t=t.addUnsafe(Up.toFormat(t.format))),t}round(e){e==null&&(e=0);const t=this.toString().split(".");if(t.length===1&&t.push("0"),(e<0||e>80||e%1)&&jr.throwArgumentError("invalid decimal count","decimals",e),t[1].length<=e)return this;const i=Ur.from("1"+ko.substring(0,e),this.format),s=q9.toFormat(this.format);return this.mulUnsafe(i).addUnsafe(s).floor().divUnsafe(i)}isZero(){return this._value==="0.0"||this._value==="0"}isNegative(){return this._value[0]==="-"}toString(){return this._value}toHexString(e){if(e==null)return this._hex;e%8&&jr.throwArgumentError("invalid byte width","width",e);const t=Kr.from(this._hex).fromTwos(this.format.width).toTwos(e).toHexString();return Sn(t,e/8)}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(e){return Ur.fromString(this._value,e)}static fromValue(e,t,i){return i==null&&t!=null&&!O9(t)&&(i=t,t=null),t==null&&(t=0),i==null&&(i="fixed"),Ur.fromString(Pu(e,t),Ru.from(i))}static fromString(e,t){t==null&&(t="fixed");const i=Ru.from(t),s=Qn(e,i.decimals);!i.signed&&s.lt(ov)&&hv("unsigned value cannot be negative","overflow","value",e);let a=null;i.signed?a=s.toTwos(i.width).toHexString():(a=s.toHexString(),a=Sn(a,i.width/8));const f=Pu(s,i.decimals);return new Ur(zo,a,f,i)}static fromBytes(e,t){t==null&&(t="fixed");const i=Ru.from(t);if(Xt(e).length>i.width/8)throw new Error("overflow");let s=Kr.from(e);i.signed&&(s=s.fromTwos(i.width));const a=s.toTwos((i.signed?0:1)+i.width).toHexString(),f=Pu(s,i.decimals);return new Ur(zo,a,f,i)}static from(e,t){if(typeof e=="string")return Ur.fromString(e,t);if(Ja(e))return Ur.fromBytes(e,t);try{return Ur.fromValue(e,0,t)}catch(i){if(i.code!==Er.errors.INVALID_ARGUMENT)throw i}return jr.throwArgumentError("invalid FixedNumber value","value",e)}static isFixedNumber(e){return!!(e&&e._isFixedNumber)}};const Up=fv.from(1),q9=fv.from("0.5"),D9="strings/5.7.0",B9=new Er(D9);var Nh;(function(r){r.current="",r.NFC="NFC",r.NFD="NFD",r.NFKC="NFKC",r.NFKD="NFKD"})(Nh||(Nh={}));var jp;(function(r){r.UNEXPECTED_CONTINUE="unexpected continuation byte",r.BAD_PREFIX="bad codepoint prefix",r.OVERRUN="string overrun",r.MISSING_CONTINUE="missing continuation byte",r.OUT_OF_RANGE="out of UTF-8 range",r.UTF16_SURROGATE="UTF-16 surrogate",r.OVERLONG="overlong representation"})(jp||(jp={}));function Nu(r,e=Nh.current){e!=Nh.current&&(B9.checkNormalize(),r=r.normalize(e));let t=[];for(let i=0;i<r.length;i++){const s=r.charCodeAt(i);if(s<128)t.push(s);else if(s<2048)t.push(s>>6|192),t.push(s&63|128);else if((s&64512)==55296){i++;const a=r.charCodeAt(i);if(i>=r.length||(a&64512)!==56320)throw new Error("invalid utf-8 string");const f=65536+((s&1023)<<10)+(a&1023);t.push(f>>18|240),t.push(f>>12&63|128),t.push(f>>6&63|128),t.push(f&63|128)}else t.push(s>>12|224),t.push(s>>6&63|128),t.push(s&63|128)}return Xt(t)}function $9(r){if(r.length%4!==0)throw new Error("bad data");let e=[];for(let t=0;t<r.length;t+=4)e.push(parseInt(r.substring(t,t+4),16));return e}function Cu(r,e){e||(e=function(s){return[parseInt(s,16)]});let t=0,i={};return r.split(",").forEach(s=>{let a=s.split(":");t+=parseInt(a[0],16),i[t]=e(a[1])}),i}function Fp(r){let e=0;return r.split(",").map(t=>{let i=t.split("-");i.length===1?i[1]="0":i[1]===""&&(i[1]="1");let s=e+parseInt(i[0],16);return e=parseInt(i[1],16),{l:s,h:e}})}Fp("221,13-1b,5f-,40-10,51-f,11-3,3-3,2-2,2-4,8,2,15,2d,28-8,88,48,27-,3-5,11-20,27-,8,28,3-5,12,18,b-a,1c-4,6-16,2-d,2-2,2,1b-4,17-9,8f-,10,f,1f-2,1c-34,33-14e,4,36-,13-,6-2,1a-f,4,9-,3-,17,8,2-2,5-,2,8-,3-,4-8,2-3,3,6-,16-6,2-,7-3,3-,17,8,3,3,3-,2,6-3,3-,4-a,5,2-6,10-b,4,8,2,4,17,8,3,6-,b,4,4-,2-e,2-4,b-10,4,9-,3-,17,8,3-,5-,9-2,3-,4-7,3-3,3,4-3,c-10,3,7-2,4,5-2,3,2,3-2,3-2,4-2,9,4-3,6-2,4,5-8,2-e,d-d,4,9,4,18,b,6-3,8,4,5-6,3-8,3-3,b-11,3,9,4,18,b,6-3,8,4,5-6,3-6,2,3-3,b-11,3,9,4,18,11-3,7-,4,5-8,2-7,3-3,b-11,3,13-2,19,a,2-,8-2,2-3,7,2,9-11,4-b,3b-3,1e-24,3,2-,3,2-,2-5,5,8,4,2,2-,3,e,4-,6,2,7-,b-,3-21,49,23-5,1c-3,9,25,10-,2-2f,23,6,3,8-2,5-5,1b-45,27-9,2a-,2-3,5b-4,45-4,53-5,8,40,2,5-,8,2,5-,28,2,5-,20,2,5-,8,2,5-,8,8,18,20,2,5-,8,28,14-5,1d-22,56-b,277-8,1e-2,52-e,e,8-a,18-8,15-b,e,4,3-b,5e-2,b-15,10,b-5,59-7,2b-555,9d-3,5b-5,17-,7-,27-,7-,9,2,2,2,20-,36,10,f-,7,14-,4,a,54-3,2-6,6-5,9-,1c-10,13-1d,1c-14,3c-,10-6,32-b,240-30,28-18,c-14,a0,115-,3,66-,b-76,5,5-,1d,24,2,5-2,2,8-,35-2,19,f-10,1d-3,311-37f,1b,5a-b,d7-19,d-3,41,57-,68-4,29-3,5f,29-37,2e-2,25-c,2c-2,4e-3,30,78-3,64-,20,19b7-49,51a7-59,48e-2,38-738,2ba5-5b,222f-,3c-94,8-b,6-4,1b,6,2,3,3,6d-20,16e-f,41-,37-7,2e-2,11-f,5-b,18-,b,14,5-3,6,88-,2,bf-2,7-,7-,7-,4-2,8,8-9,8-2ff,20,5-b,1c-b4,27-,27-cbb1,f7-9,28-2,b5-221,56,48,3-,2-,3-,5,d,2,5,3,42,5-,9,8,1d,5,6,2-2,8,153-3,123-3,33-27fd,a6da-5128,21f-5df,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3,2-1d,61-ff7d"),"ad,34f,1806,180b,180c,180d,200b,200c,200d,2060,feff".split(",").map(r=>parseInt(r,16)),Cu("b5:3bc,c3:ff,7:73,2:253,5:254,3:256,1:257,5:259,1:25b,3:260,1:263,2:269,1:268,5:26f,1:272,2:275,7:280,3:283,5:288,3:28a,1:28b,5:292,3f:195,1:1bf,29:19e,125:3b9,8b:3b2,1:3b8,1:3c5,3:3c6,1:3c0,1a:3ba,1:3c1,1:3c3,2:3b8,1:3b5,1bc9:3b9,1c:1f76,1:1f77,f:1f7a,1:1f7b,d:1f78,1:1f79,1:1f7c,1:1f7d,107:63,5:25b,4:68,1:68,1:68,3:69,1:69,1:6c,3:6e,4:70,1:71,1:72,1:72,1:72,7:7a,2:3c9,2:7a,2:6b,1:e5,1:62,1:63,3:65,1:66,2:6d,b:3b3,1:3c0,6:64,1b574:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3"),Cu("179:1,2:1,2:1,5:1,2:1,a:4f,a:1,8:1,2:1,2:1,3:1,5:1,3:1,4:1,2:1,3:1,4:1,8:2,1:1,2:2,1:1,2:2,27:2,195:26,2:25,1:25,1:25,2:40,2:3f,1:3f,33:1,11:-6,1:-9,1ac7:-3a,6d:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,b:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,c:-8,2:-8,2:-8,2:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,49:-8,1:-8,1:-4a,1:-4a,d:-56,1:-56,1:-56,1:-56,d:-8,1:-8,f:-8,1:-8,3:-7"),Cu("df:00730073,51:00690307,19:02BC006E,a7:006A030C,18a:002003B9,16:03B903080301,20:03C503080301,1d7:05650582,190f:00680331,1:00740308,1:0077030A,1:0079030A,1:006102BE,b6:03C50313,2:03C503130300,2:03C503130301,2:03C503130342,2a:1F0003B9,1:1F0103B9,1:1F0203B9,1:1F0303B9,1:1F0403B9,1:1F0503B9,1:1F0603B9,1:1F0703B9,1:1F0003B9,1:1F0103B9,1:1F0203B9,1:1F0303B9,1:1F0403B9,1:1F0503B9,1:1F0603B9,1:1F0703B9,1:1F2003B9,1:1F2103B9,1:1F2203B9,1:1F2303B9,1:1F2403B9,1:1F2503B9,1:1F2603B9,1:1F2703B9,1:1F2003B9,1:1F2103B9,1:1F2203B9,1:1F2303B9,1:1F2403B9,1:1F2503B9,1:1F2603B9,1:1F2703B9,1:1F6003B9,1:1F6103B9,1:1F6203B9,1:1F6303B9,1:1F6403B9,1:1F6503B9,1:1F6603B9,1:1F6703B9,1:1F6003B9,1:1F6103B9,1:1F6203B9,1:1F6303B9,1:1F6403B9,1:1F6503B9,1:1F6603B9,1:1F6703B9,3:1F7003B9,1:03B103B9,1:03AC03B9,2:03B10342,1:03B1034203B9,5:03B103B9,6:1F7403B9,1:03B703B9,1:03AE03B9,2:03B70342,1:03B7034203B9,5:03B703B9,6:03B903080300,1:03B903080301,3:03B90342,1:03B903080342,b:03C503080300,1:03C503080301,1:03C10313,2:03C50342,1:03C503080342,b:1F7C03B9,1:03C903B9,1:03CE03B9,2:03C90342,1:03C9034203B9,5:03C903B9,ac:00720073,5b:00B00063,6:00B00066,d:006E006F,a:0073006D,1:00740065006C,1:0074006D,124f:006800700061,2:00610075,2:006F0076,b:00700061,1:006E0061,1:03BC0061,1:006D0061,1:006B0061,1:006B0062,1:006D0062,1:00670062,3:00700066,1:006E0066,1:03BC0066,4:0068007A,1:006B0068007A,1:006D0068007A,1:00670068007A,1:00740068007A,15:00700061,1:006B00700061,1:006D00700061,1:006700700061,8:00700076,1:006E0076,1:03BC0076,1:006D0076,1:006B0076,1:006D0076,1:00700077,1:006E0077,1:03BC0077,1:006D0077,1:006B0077,1:006D0077,1:006B03C9,1:006D03C9,2:00620071,3:00632215006B0067,1:0063006F002E,1:00640062,1:00670079,2:00680070,2:006B006B,1:006B006D,9:00700068,2:00700070006D,1:00700072,2:00730076,1:00770062,c723:00660066,1:00660069,1:0066006C,1:006600660069,1:00660066006C,1:00730074,1:00730074,d:05740576,1:05740565,1:0574056B,1:057E0576,1:0574056D",$9),Fp("80-20,2a0-,39c,32,f71,18e,7f2-f,19-7,30-4,7-5,f81-b,5,a800-20ff,4d1-1f,110,fa-6,d174-7,2e84-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,2,1f-5f,ff7f-20001");function z9(r){r=atob(r);const e=[];for(let t=0;t<r.length;t++)e.push(r.charCodeAt(t));return Xt(e)}function uv(r,e){e==null&&(e=1);const t=[],i=t.forEach,s=function(a,f){i.call(a,function(p){f>0&&Array.isArray(p)?s(p,f-1):t.push(p)})};return s(r,e),t}function k9(r){const e={};for(let t=0;t<r.length;t++){const i=r[t];e[i[0]]=i[1]}return e}function L9(r){let e=0;function t(){return r[e++]<<8|r[e++]}let i=t(),s=1,a=[0,1];for(let ae=1;ae<i;ae++)a.push(s+=t());let f=t(),p=e;e+=f;let y=0,v=0;function A(){return y==0&&(v=v<<8|r[e++],y=8),v>>--y&1}const E=31,N=Math.pow(2,E),O=N>>>1,T=O>>1,F=N-1;let G=0;for(let ae=0;ae<E;ae++)G=G<<1|A();let W=[],ee=0,de=N;for(;;){let ae=Math.floor(((G-ee+1)*s-1)/de),ue=0,ne=i;for(;ne-ue>1;){let ot=ue+ne>>>1;ae<a[ot]?ne=ot:ue=ot}if(ue==0)break;W.push(ue);let ve=ee+Math.floor(de*a[ue]/s),Ae=ee+Math.floor(de*a[ue+1]/s)-1;for(;!((ve^Ae)&O);)G=G<<1&F|A(),ve=ve<<1&F,Ae=Ae<<1&F|1;for(;ve&~Ae&T;)G=G&O|G<<1&F>>>1|A(),ve=ve<<1^O,Ae=(Ae^O)<<1|O|1;ee=ve,de=1+Ae-ve}let se=i-4;return W.map(ae=>{switch(ae-se){case 3:return se+65792+(r[p++]<<16|r[p++]<<8|r[p++]);case 2:return se+256+(r[p++]<<8|r[p++]);case 1:return se+r[p++];default:return ae-1}})}function U9(r){let e=0;return()=>r[e++]}function j9(r){return U9(L9(r))}function F9(r){return r&1?~r>>1:r>>1}function K9(r,e){let t=Array(r);for(let i=0;i<r;i++)t[i]=1+e();return t}function Kp(r,e){let t=Array(r);for(let i=0,s=-1;i<r;i++)t[i]=s+=1+e();return t}function H9(r,e){let t=Array(r);for(let i=0,s=0;i<r;i++)t[i]=s+=F9(e());return t}function Ch(r,e){let t=Kp(r(),r),i=r(),s=Kp(i,r),a=K9(i,r);for(let f=0;f<i;f++)for(let p=0;p<a[f];p++)t.push(s[f]+p);return e?t.map(f=>e[f]):t}function V9(r){let e=[];for(;;){let t=r();if(t==0)break;e.push(W9(t,r))}for(;;){let t=r()-1;if(t<0)break;e.push(J9(t,r))}return k9(uv(e))}function G9(r){let e=[];for(;;){let t=r();if(t==0)break;e.push(t)}return e}function dv(r,e,t){let i=Array(r).fill(void 0).map(()=>[]);for(let s=0;s<e;s++)H9(r,t).forEach((a,f)=>i[f].push(a));return i}function W9(r,e){let t=1+e(),i=e(),s=G9(e),a=dv(s.length,1+r,e);return uv(a.map((f,p)=>{const y=f[0],v=f.slice(1);return Array(s[p]).fill(void 0).map((A,E)=>{let N=E*i;return[y+E*t,v.map(O=>O+N)]})}))}function J9(r,e){let t=1+e();return dv(t,1+r,e).map(i=>[i[0],i.slice(1)])}function Q9(r){let e=Ch(r).sort((i,s)=>i-s);return t();function t(){let i=[];for(;;){let v=Ch(r,e);if(v.length==0)break;i.push({set:new Set(v),node:t()})}i.sort((v,A)=>A.set.size-v.set.size);let s=r(),a=s%3;s=s/3|0;let f=!!(s&1);s>>=1;let p=s==1,y=s==2;return{branches:i,valid:a,fe0f:f,save:p,check:y}}}function Y9(){return j9(z9("AEQF2AO2DEsA2wIrAGsBRABxAN8AZwCcAEwAqgA0AGwAUgByADcATAAVAFYAIQAyACEAKAAYAFgAGwAjABQAMAAmADIAFAAfABQAKwATACoADgAbAA8AHQAYABoAGQAxADgALAAoADwAEwA9ABMAGgARAA4ADwAWABMAFgAIAA8AHgQXBYMA5BHJAS8JtAYoAe4AExozi0UAH21tAaMnBT8CrnIyhrMDhRgDygIBUAEHcoFHUPe8AXBjAewCjgDQR8IICIcEcQLwATXCDgzvHwBmBoHNAqsBdBcUAykgDhAMShskMgo8AY8jqAQfAUAfHw8BDw87MioGlCIPBwZCa4ELatMAAMspJVgsDl8AIhckSg8XAHdvTwBcIQEiDT4OPhUqbyECAEoAS34Aej8Ybx83JgT/Xw8gHxZ/7w8RICxPHA9vBw+Pfw8PHwAPFv+fAsAvCc8vEr8ivwD/EQ8Bol8OEBa/A78hrwAPCU8vESNvvwWfHwNfAVoDHr+ZAAED34YaAdJPAK7PLwSEgDLHAGo1Pz8Pvx9fUwMrpb8O/58VTzAPIBoXIyQJNF8hpwIVAT8YGAUADDNBaX3RAMomJCg9EhUeA29MABsZBTMNJipjOhc19gcIDR8bBwQHEggCWi6DIgLuAQYA+BAFCha3A5XiAEsqM7UFFgFLhAMjFTMYE1Klnw74nRVBG/ASCm0BYRN/BrsU3VoWy+S0vV8LQx+vN8gF2AC2AK5EAWwApgYDKmAAroQ0NDQ0AT+OCg7wAAIHRAbpNgVcBV0APTA5BfbPFgMLzcYL/QqqA82eBALKCjQCjqYCht0/k2+OAsXQAoP3ASTKDgDw6ACKAUYCMpIKJpRaAE4A5womABzZvs0REEKiACIQAd5QdAECAj4Ywg/wGqY2AVgAYADYvAoCGAEubA0gvAY2ALAAbpbvqpyEAGAEpgQAJgAG7gAgAEACmghUFwCqAMpAINQIwC4DthRAAPcycKgApoIdABwBfCisABoATwBqASIAvhnSBP8aH/ECeAKXAq40NjgDBTwFYQU6AXs3oABgAD4XNgmcCY1eCl5tIFZeUqGgyoNHABgAEQAaABNwWQAmABMATPMa3T34ADldyprmM1M2XociUQgLzvwAXT3xABgAEQAaABNwIGFAnADD8AAgAD4BBJWzaCcIAIEBFMAWwKoAAdq9BWAF5wLQpALEtQAKUSGkahR4GnJM+gsAwCgeFAiUAECQ0BQuL8AAIAAAADKeIheclvFqQAAETr4iAMxIARMgAMIoHhQIAn0E0pDQFC4HhznoAAAAIAI2C0/4lvFqQAAETgBJJwYCAy4ABgYAFAA8MBKYEH4eRhTkAjYeFcgACAYAeABsOqyQ5gRwDayqugEgaIIAtgoACgDmEABmBAWGme5OBJJA2m4cDeoAmITWAXwrMgOgAGwBCh6CBXYF1Tzg1wKAAFdiuABRAFwAXQBsAG8AdgBrAHYAbwCEAHEwfxQBVE5TEQADVFhTBwBDANILAqcCzgLTApQCrQL6vAAMAL8APLhNBKkE6glGKTAU4Dr4N2EYEwBCkABKk8rHAbYBmwIoAiU4Ajf/Aq4CowCAANIChzgaNBsCsTgeODcFXrgClQKdAqQBiQGYAqsCsjTsNHsfNPA0ixsAWTWiOAMFPDQSNCk2BDZHNow2TTZUNhk28Jk9VzI3QkEoAoICoQKwAqcAQAAxBV4FXbS9BW47YkIXP1ciUqs05DS/FwABUwJW11e6nHuYZmSh/RAYA8oMKvZ8KASoUAJYWAJ6ILAsAZSoqjpgA0ocBIhmDgDWAAawRDQoAAcuAj5iAHABZiR2AIgiHgCaAU68ACxuHAG0ygM8MiZIAlgBdF4GagJqAPZOHAMuBgoATkYAsABiAHgAMLoGDPj0HpKEBAAOJgAuALggTAHWAeAMEDbd20Uege0ADwAWADkAQgA9OHd+2MUQZBBhBgNNDkxxPxUQArEPqwvqERoM1irQ090ANK4H8ANYB/ADWANYB/AH8ANYB/ADWANYA1gDWBwP8B/YxRBkD00EcgWTBZAE2wiIJk4RhgctCNdUEnQjHEwDSgEBIypJITuYMxAlR0wRTQgIATZHbKx9PQNMMbBU+pCnA9AyVDlxBgMedhKlAC8PeCE1uk6DekxxpQpQT7NX9wBFBgASqwAS5gBJDSgAUCwGPQBI4zTYABNGAE2bAE3KAExdGABKaAbgAFBXAFCOAFBJABI2SWdObALDOq0//QomCZhvwHdTBkIQHCemEPgMNAG2ATwN7kvZBPIGPATKH34ZGg/OlZ0Ipi3eDO4m5C6igFsj9iqEBe5L9TzeC05RaQ9aC2YJ5DpkgU8DIgEOIowK3g06CG4Q9ArKbA3mEUYHOgPWSZsApgcCCxIdNhW2JhFirQsKOXgG/Br3C5AmsBMqev0F1BoiBk4BKhsAANAu6IWxWjJcHU9gBgQLJiPIFKlQIQ0mQLh4SRocBxYlqgKSQ3FKiFE3HpQh9zw+DWcuFFF9B/Y8BhlQC4I8n0asRQ8R0z6OPUkiSkwtBDaALDAnjAnQD4YMunxzAVoJIgmyDHITMhEYN8YIOgcaLpclJxYIIkaWYJsE+KAD9BPSAwwFQAlCBxQDthwuEy8VKgUOgSXYAvQ21i60ApBWgQEYBcwPJh/gEFFH4Q7qCJwCZgOEJewALhUiABginAhEZABgj9lTBi7MCMhqbSN1A2gU6GIRdAeSDlgHqBw0FcAc4nDJXgyGCSiksAlcAXYJmgFgBOQICjVcjKEgQmdUi1kYnCBiQUBd/QIyDGYVoES+h3kCjA9sEhwBNgF0BzoNAgJ4Ee4RbBCWCOyGBTW2M/k6JgRQIYQgEgooA1BszwsoJvoM+WoBpBJjAw00PnfvZ6xgtyUX/gcaMsZBYSHyC5NPzgydGsIYQ1QvGeUHwAP0GvQn60FYBgADpAQUOk4z7wS+C2oIjAlAAEoOpBgH2BhrCnKM0QEyjAG4mgNYkoQCcJAGOAcMAGgMiAV65gAeAqgIpAAGANADWAA6Aq4HngAaAIZCAT4DKDABIuYCkAOUCDLMAZYwAfQqBBzEDBYA+DhuSwLDsgKAa2ajBd5ZAo8CSjYBTiYEBk9IUgOwcuIA3ABMBhTgSAEWrEvMG+REAeBwLADIAPwABjYHBkIBzgH0bgC4AWALMgmjtLYBTuoqAIQAFmwB2AKKAN4ANgCA8gFUAE4FWvoF1AJQSgESMhksWGIBvAMgATQBDgB6BsyOpsoIIARuB9QCEBwV4gLvLwe2AgMi4BPOQsYCvd9WADIXUu5eZwqoCqdeaAC0YTQHMnM9UQAPH6k+yAdy/BZIiQImSwBQ5gBQQzSaNTFWSTYBpwGqKQK38AFtqwBI/wK37gK3rQK3sAK6280C0gK33AK3zxAAUEIAUD9SklKDArekArw5AEQAzAHCO147WTteO1k7XjtZO147WTteO1kDmChYI03AVU0oJqkKbV9GYewMpw3VRMk6ShPcYFJgMxPJLbgUwhXPJVcZPhq9JwYl5VUKDwUt1GYxCC00dhe9AEApaYNCY4ceMQpMHOhTklT5LRwAskujM7ANrRsWREEFSHXuYisWDwojAmSCAmJDXE6wXDchAqH4AmiZAmYKAp+FOBwMAmY8AmYnBG8EgAN/FAN+kzkHOXgYOYM6JCQCbB4CMjc4CwJtyAJtr/CLADRoRiwBaADfAOIASwYHmQyOAP8MwwAOtgJ3MAJ2o0ACeUxEAni7Hl3cRa9G9AJ8QAJ6yQJ9CgJ88UgBSH5kJQAsFklZSlwWGErNAtECAtDNSygDiFADh+dExpEzAvKiXQQDA69Lz0wuJgTQTU1NsAKLQAKK2cIcCB5EaAa4Ao44Ao5dQZiCAo7aAo5deVG1UzYLUtVUhgKT/AKTDQDqAB1VH1WwVdEHLBwplocy4nhnRTw6ApegAu+zWCKpAFomApaQApZ9nQCqWa1aCoJOADwClrYClk9cRVzSApnMApllXMtdCBoCnJw5wzqeApwXAp+cAp65iwAeEDIrEAKd8gKekwC2PmE1YfACntQCoG8BqgKeoCACnk+mY8lkKCYsAiewAiZ/AqD8AqBN2AKmMAKlzwKoAAB+AqfzaH1osgAESmodatICrOQCrK8CrWgCrQMCVx4CVd0CseLYAx9PbJgCsr4OArLpGGzhbWRtSWADJc4Ctl08QG6RAylGArhfArlIFgK5K3hwN3DiAr0aAy2zAzISAr6JcgMDM3ICvhtzI3NQAsPMAsMFc4N0TDZGdOEDPKgDPJsDPcACxX0CxkgCxhGKAshqUgLIRQLJUALJLwJkngLd03h6YniveSZL0QMYpGcDAmH1GfSVJXsMXpNevBICz2wCz20wTFTT9BSgAMeuAs90ASrrA04TfkwGAtwoAtuLAtJQA1JdA1NgAQIDVY2AikABzBfuYUZ2AILPg44C2sgC2d+EEYRKpz0DhqYAMANkD4ZyWvoAVgLfZgLeuXR4AuIw7RUB8zEoAfScAfLTiALr9ALpcXoAAur6AurlAPpIAboC7ooC652Wq5cEAu5AA4XhmHpw4XGiAvMEAGoDjheZlAL3FAORbwOSiAL3mQL52gL4Z5odmqy8OJsfA52EAv77ARwAOp8dn7QDBY4DpmsDptoA0sYDBmuhiaIGCgMMSgFgASACtgNGAJwEgLpoBgC8BGzAEowcggCEDC6kdjoAJAM0C5IKRoABZCgiAIzw3AYBLACkfng9ogigkgNmWAN6AEQCvrkEVqTGAwCsBRbAA+4iQkMCHR072jI2PTbUNsk2RjY5NvA23TZKNiU3EDcZN5I+RTxDRTBCJkK5VBYKFhZfwQCWygU3AJBRHpu+OytgNxa61A40GMsYjsn7BVwFXQVcBV0FaAVdBVwFXQVcBV0FXAVdBVwFXUsaCNyKAK4AAQUHBwKU7oICoW1e7jAEzgPxA+YDwgCkBFDAwADABKzAAOxFLhitA1UFTDeyPkM+bj51QkRCuwTQWWQ8X+0AWBYzsACNA8xwzAGm7EZ/QisoCTAbLDs6fnLfb8H2GccsbgFw13M1HAVkBW/Jxsm9CNRO8E8FDD0FBQw9FkcClOYCoMFegpDfADgcMiA2AJQACB8AsigKAIzIEAJKeBIApY5yPZQIAKQiHb4fvj5BKSRPQrZCOz0oXyxgOywfKAnGbgMClQaCAkILXgdeCD9IIGUgQj5fPoY+dT52Ao5CM0dAX9BTVG9SDzFwWTQAbxBzJF/lOEIQQglCCkKJIAls5AcClQICoKPMODEFxhi6KSAbiyfIRrMjtCgdWCAkPlFBIitCsEJRzAbMAV/OEyQzDg0OAQQEJ36i328/Mk9AybDJsQlq3tDRApUKAkFzXf1d/j9uALYP6hCoFgCTGD8kPsFKQiobrm0+zj0KSD8kPnVCRBwMDyJRTHFgMTJa5rwXQiQ2YfI/JD7BMEJEHGINTw4TOFlIRzwJO0icMQpyPyQ+wzJCRBv6DVgnKB01NgUKj2bwYzMqCoBkznBgEF+zYDIocwRIX+NgHj4HICNfh2C4CwdwFWpTG/lgUhYGAwRfv2Ts8mAaXzVgml/XYIJfuWC4HI1gUF9pYJZgMR6ilQHMAOwLAlDRefC0in4AXAEJA6PjCwc0IamOANMMCAECRQDFNRTZBgd+CwQlRA+r6+gLBDEFBnwUBXgKATIArwAGRAAHA3cDdAN2A3kDdwN9A3oDdQN7A30DfAN4A3oDfQAYEAAlAtYASwMAUAFsAHcKAHcAmgB3AHUAdQB2AHVu8UgAygDAAHcAdQB1AHYAdQALCgB3AAsAmgB3AAsCOwB3AAtu8UgAygDAAHgKAJoAdwB3AHUAdQB2AHUAeAB1AHUAdgB1bvFIAMoAwAALCgCaAHcACwB3AAsCOwB3AAtu8UgAygDAAH4ACwGgALcBpwC6AahdAu0COwLtbvFIAMoAwAALCgCaAu0ACwLtAAsCOwLtAAtu8UgAygDAA24ACwNvAAu0VsQAAzsAABCkjUIpAAsAUIusOggWcgMeBxVsGwL67U/2HlzmWOEeOgALASvuAAseAfpKUpnpGgYJDCIZM6YyARUE9ThqAD5iXQgnAJYJPnOzw0ZAEZxEKsIAkA4DhAHnTAIDxxUDK0lxCQlPYgIvIQVYJQBVqE1GakUAKGYiDToSBA1EtAYAXQJYAIF8GgMHRyAAIAjOe9YncekRAA0KACUrjwE7Ayc6AAYWAqaiKG4McEcqANoN3+Mg9TwCBhIkuCny+JwUQ29L008JluRxu3K+oAdqiHOqFH0AG5SUIfUJ5SxCGfxdipRzqTmT4V5Zb+r1Uo4Vm+NqSSEl2mNvR2JhIa8SpYO6ntdwFXHCWTCK8f2+Hxo7uiG3drDycAuKIMP5bhi06ACnqArH1rz4Rqg//lm6SgJGEVbF9xJHISaR6HxqxSnkw6shDnelHKNEfGUXSJRJ1GcsmtJw25xrZMDK9gXSm1/YMkdX4/6NKYOdtk/NQ3/NnDASjTc3fPjIjW/5sVfVObX2oTDWkr1dF9f3kxBsD3/3aQO8hPfRz+e0uEiJqt1161griu7gz8hDDwtpy+F+BWtefnKHZPAxcZoWbnznhJpy0e842j36bcNzGnIEusgGX0a8ZxsnjcSsPDZ09yZ36fCQbriHeQ72JRMILNl6ePPf2HWoVwgWAm1fb3V2sAY0+B6rAXqSwPBgseVmoqsBTSrm91+XasMYYySI8eeRxH3ZvHkMz3BQ5aJ3iUVbYPNM3/7emRtjlsMgv/9VyTsyt/mK+8fgWeT6SoFaclXqn42dAIsvAarF5vNNWHzKSkKQ/8Hfk5ZWK7r9yliOsooyBjRhfkHP4Q2DkWXQi6FG/9r/IwbmkV5T7JSopHKn1pJwm9tb5Ot0oyN1Z2mPpKXHTxx2nlK08fKk1hEYA8WgVVWL5lgx0iTv+KdojJeU23ZDjmiubXOxVXJKKi2Wjuh2HLZOFLiSC7Tls5SMh4f+Pj6xUSrNjFqLGehRNB8lC0QSLNmkJJx/wSG3MnjE9T1CkPwJI0wH2lfzwETIiVqUxg0dfu5q39Gt+hwdcxkhhNvQ4TyrBceof3Mhs/IxFci1HmHr4FMZgXEEczPiGCx0HRwzAqDq2j9AVm1kwN0mRVLWLylgtoPNapF5cY4Y1wJh/e0BBwZj44YgZrDNqvD/9Hv7GFYdUQeDJuQ3EWI4HaKqavU1XjC/n41kT4L79kqGq0kLhdTZvgP3TA3fS0ozVz+5piZsoOtIvBUFoMKbNcmBL6YxxaUAusHB38XrS8dQMnQwJfUUkpRoGr5AUeWicvBTzyK9g77+yCkf5PAysL7r/JjcZgrbvRpMW9iyaxZvKO6ceZN2EwIxKwVFPuvFuiEPGCoagbMo+SpydLrXqBzNCDGFCrO/rkcwa2xhokQZ5CdZ0AsU3JfSqJ6n5I14YA+P/uAgfhPU84Tlw7cEFfp7AEE8ey4sP12PTt4Cods1GRgDOB5xvyiR5m+Bx8O5nBCNctU8BevfV5A08x6RHd5jcwPTMDSZJOedIZ1cGQ704lxbAzqZOP05ZxaOghzSdvFBHYqomATARyAADK4elP8Ly3IrUZKfWh23Xy20uBUmLS4Pfagu9+oyVa2iPgqRP3F2CTUsvJ7+RYnN8fFZbU/HVvxvcFFDKkiTqV5UBZ3Gz54JAKByi9hkKMZJvuGgcSYXFmw08UyoQyVdfTD1/dMkCHXcTGAKeROgArsvmRrQTLUOXioOHGK2QkjHuoYFgXciZoTJd6Fs5q1QX1G+p/e26hYsEf7QZD1nnIyl/SFkNtYYmmBhpBrxl9WbY0YpHWRuw2Ll/tj9mD8P4snVzJl4F9J+1arVeTb9E5r2ILH04qStjxQNwn3m4YNqxmaNbLAqW2TN6LidwuJRqS+NXbtqxoeDXpxeGWmxzSkWxjkyCkX4NQRme6q5SAcC+M7+9ETfA/EwrzQajKakCwYyeunP6ZFlxU2oMEn1Pz31zeStW74G406ZJFCl1wAXIoUKkWotYEpOuXB1uVNxJ63dpJEqfxBeptwIHNrPz8BllZoIcBoXwgfJ+8VAUnVPvRvexnw0Ma/WiGYuJO5y8QTvEYBigFmhUxY5RqzE8OcywN/8m4UYrlaniJO75XQ6KSo9+tWHlu+hMi0UVdiKQp7NelnoZUzNaIyBPVeOwK6GNp+FfHuPOoyhaWuNvTYFkvxscMQWDh+zeFCFkgwbXftiV23ywJ4+uwRqmg9k3KzwIQpzppt8DBBOMbrqwQM5Gb05sEwdKzMiAqOloaA/lr0KA+1pr0/+HiWoiIjHA/wir2nIuS3PeU/ji3O6ZwoxcR1SZ9FhtLC5S0FIzFhbBWcGVP/KpxOPSiUoAdWUpqKH++6Scz507iCcxYI6rdMBICPJZea7OcmeFw5mObJSiqpjg2UoWNIs+cFhyDSt6geV5qgi3FunmwwDoGSMgerFOZGX1m0dMCYo5XOruxO063dwENK9DbnVM9wYFREzh4vyU1WYYJ/LRRp6oxgjqP/X5a8/4Af6p6NWkQferzBmXme0zY/4nwMJm/wd1tIqSwGz+E3xPEAOoZlJit3XddD7/BT1pllzOx+8bmQtANQ/S6fZexc6qi3W+Q2xcmXTUhuS5mpHQRvcxZUN0S5+PL9lXWUAaRZhEH8hTdAcuNMMCuVNKTEGtSUKNi3O6KhSaTzck8csZ2vWRZ+d7mW8c4IKwXIYd25S/zIftPkwPzufjEvOHWVD1m+FjpDVUTV0DGDuHj6QnaEwLu/dEgdLQOg9E1Sro9XHJ8ykLAwtPu+pxqKDuFexqON1sKQm7rwbE1E68UCfA/erovrTCG+DBSNg0l4goDQvZN6uNlbyLpcZAwj2UclycvLpIZMgv4yRlpb3YuMftozorbcGVHt/VeDV3+Fdf1TP0iuaCsPi2G4XeGhsyF1ubVDxkoJhmniQ0/jSg/eYML9KLfnCFgISWkp91eauR3IQvED0nAPXK+6hPCYs+n3+hCZbiskmVMG2da+0EsZPonUeIY8EbfusQXjsK/eFDaosbPjEfQS0RKG7yj5GG69M7MeO1HmiUYocgygJHL6M1qzUDDwUSmr99V7Sdr2F3JjQAJY+F0yH33Iv3+C9M38eML7gTgmNu/r2bUMiPvpYbZ6v1/IaESirBHNa7mPKn4dEmYg7v/+HQgPN1G79jBQ1+soydfDC2r+h2Bl/KIc5KjMK7OH6nb1jLsNf0EHVe2KBiE51ox636uyG6Lho0t3J34L5QY/ilE3mikaF4HKXG1mG1rCevT1Vv6GavltxoQe/bMrpZvRggnBxSEPEeEzkEdOxTnPXHVjUYdw8JYvjB/o7Eegc3Ma+NUxLLnsK0kJlinPmUHzHGtrk5+CAbVzFOBqpyy3QVUnzTDfC/0XD94/okH+OB+i7g9lolhWIjSnfIb+Eq43ZXOWmwvjyV/qqD+t0e+7mTEM74qP/Ozt8nmC7mRpyu63OB4KnUzFc074SqoyPUAgM+/TJGFo6T44EHnQU4X4z6qannVqgw/U7zCpwcmXV1AubIrvOmkKHazJAR55ePjp5tLBsN8vAqs3NAHdcEHOR2xQ0lsNAFzSUuxFQCFYvXLZJdOj9p4fNq6p0HBGUik2YzaI4xySy91KzhQ0+q1hjxvImRwPRf76tChlRkhRCi74NXZ9qUNeIwP+s5p+3m5nwPdNOHgSLD79n7O9m1n1uDHiMntq4nkYwV5OZ1ENbXxFd4PgrlvavZsyUO4MqYlqqn1O8W/I1dEZq5dXhrbETLaZIbC2Kj/Aa/QM+fqUOHdf0tXAQ1huZ3cmWECWSXy/43j35+Mvq9xws7JKseriZ1pEWKc8qlzNrGPUGcVgOa9cPJYIJsGnJTAUsEcDOEVULO5x0rXBijc1lgXEzQQKhROf8zIV82w8eswc78YX11KYLWQRcgHNJElBxfXr72lS2RBSl07qTKorO2uUDZr3sFhYsvnhLZn0A94KRzJ/7DEGIAhW5ZWFpL8gEwu1aLA9MuWZzNwl8Oze9Y+bX+v9gywRVnoB5I/8kXTXU3141yRLYrIOOz6SOnyHNy4SieqzkBXharjfjqq1q6tklaEbA8Qfm2DaIPs7OTq/nvJBjKfO2H9bH2cCMh1+5gspfycu8f/cuuRmtDjyqZ7uCIMyjdV3a+p3fqmXsRx4C8lujezIFHnQiVTXLXuI1XrwN3+siYYj2HHTvESUx8DlOTXpak9qFRK+L3mgJ1WsD7F4cu1aJoFoYQnu+wGDMOjJM3kiBQWHCcvhJ/HRdxodOQp45YZaOTA22Nb4XKCVxqkbwMYFhzYQYIAnCW8FW14uf98jhUG2zrKhQQ0q0CEq0t5nXyvUyvR8DvD69LU+g3i+HFWQMQ8PqZuHD+sNKAV0+M6EJC0szq7rEr7B5bQ8BcNHzvDMc9eqB5ZCQdTf80Obn4uzjwpYU7SISdtV0QGa9D3Wrh2BDQtpBKxaNFV+/Cy2P/Sv+8s7Ud0Fd74X4+o/TNztWgETUapy+majNQ68Lq3ee0ZO48VEbTZYiH1Co4OlfWef82RWeyUXo7woM03PyapGfikTnQinoNq5z5veLpeMV3HCAMTaZmA1oGLAn7XS3XYsz+XK7VMQsc4XKrmDXOLU/pSXVNUq8dIqTba///3x6LiLS6xs1xuCAYSfcQ3+rQgmu7uvf3THKt5Ooo97TqcbRqxx7EASizaQCBQllG/rYxVapMLgtLbZS64w1MDBMXX+PQpBKNwqUKOf2DDRDUXQf9EhOS0Qj4nTmlA8dzSLz/G1d+Ud8MTy/6ghhdiLpeerGY/UlDOfiuqFsMUU5/UYlP+BAmgRLuNpvrUaLlVkrqDievNVEAwF+4CoM1MZTmjxjJMsKJq+u8Zd7tNCUFy6LiyYXRJQ4VyvEQFFaCGKsxIwQkk7EzZ6LTJq2hUuPhvAW+gQnSG6J+MszC+7QCRHcnqDdyNRJ6T9xyS87A6MDutbzKGvGktpbXqtzWtXb9HsfK2cBMomjN9a4y+TaJLnXxAeX/HWzmf4cR4vALt/P4w4qgKY04ml4ZdLOinFYS6cup3G/1ie4+t1eOnpBNlqGqs75ilzkT4+DsZQxNvaSKJ//6zIbbk/M7LOhFmRc/1R+kBtz7JFGdZm/COotIdvQoXpTqP/1uqEUmCb/QWoGLMwO5ANcHzxdY48IGP5+J+zKOTBFZ4Pid+GTM+Wq12MV/H86xEJptBa6T+p3kgpwLedManBHC2GgNrFpoN2xnrMz9WFWX/8/ygSBkavq2Uv7FdCsLEYLu9LLIvAU0bNRDtzYl+/vXmjpIvuJFYjmI0im6QEYqnIeMsNjXG4vIutIGHijeAG/9EDBozKV5cldkHbLxHh25vT+ZEzbhXlqvpzKJwcEgfNwLAKFeo0/pvEE10XDB+EXRTXtSzJozQKFFAJhMxYkVaCW+E9AL7tMeU8acxidHqzb6lX4691UsDpy/LLRmT+epgW56+5Cw8tB4kMUv6s9lh3eRKbyGs+H/4mQMaYzPTf2OOdokEn+zzgvoD3FqNKk8QqGAXVsqcGdXrT62fSPkR2vROFi68A6se86UxRUk4cajfPyCC4G5wDhD+zNq4jodQ4u4n/m37Lr36n4LIAAsVr02dFi9AiwA81MYs2rm4eDlDNmdMRvEKRHfBwW5DdMNp0jPFZMeARqF/wL4XBfd+EMLBfMzpH5GH6NaW+1vrvMdg+VxDzatk3MXgO3ro3P/DpcC6+Mo4MySJhKJhSR01SGGGp5hPWmrrUgrv3lDnP+HhcI3nt3YqBoVAVTBAQT5iuhTg8nvPtd8ZeYj6w1x6RqGUBrSku7+N1+BaasZvjTk64RoIDlL8brpEcJx3OmY7jLoZsswdtmhfC/G21llXhITOwmvRDDeTTPbyASOa16cF5/A1fZAidJpqju3wYAy9avPR1ya6eNp9K8XYrrtuxlqi+bDKwlfrYdR0RRiKRVTLOH85+ZY7XSmzRpfZBJjaTa81VDcJHpZnZnSQLASGYW9l51ZV/h7eVzTi3Hv6hUsgc/51AqJRTkpbFVLXXszoBL8nBX0u/0jBLT8nH+fJePbrwURT58OY+UieRjd1vs04w0VG5VN2U6MoGZkQzKN/ptz0Q366dxoTGmj7i1NQGHi9GgnquXFYdrCfZBmeb7s0T6yrdlZH5cZuwHFyIJ/kAtGsTg0xH5taAAq44BAk1CPk9KVVbqQzrCUiFdF/6gtlPQ8bHHc1G1W92MXGZ5HEHftyLYs8mbD/9xYRUWkHmlM0zC2ilJlnNgV4bfALpQghxOUoZL7VTqtCHIaQSXm+YUMnpkXybnV+A6xlm2CVy8fn0Xlm2XRa0+zzOa21JWWmixfiPMSCZ7qA4rS93VN3pkpF1s5TonQjisHf7iU9ZGvUPOAKZcR1pbeVf/Ul7OhepGCaId9wOtqo7pJ7yLcBZ0pFkOF28y4zEI/kcUNmutBHaQpBdNM8vjCS6HZRokkeo88TBAjGyG7SR+6vUgTcyK9Imalj0kuxz0wmK+byQU11AiJFk/ya5dNduRClcnU64yGu/ieWSeOos1t3ep+RPIWQ2pyTYVbZltTbsb7NiwSi3AV+8KLWk7LxCnfZUetEM8ThnsSoGH38/nyAwFguJp8FjvlHtcWZuU4hPva0rHfr0UhOOJ/F6vS62FW7KzkmRll2HEc7oUq4fyi5T70Vl7YVIfsPHUCdHesf9Lk7WNVWO75JDkYbMI8TOW8JKVtLY9d6UJRITO8oKo0xS+o99Yy04iniGHAaGj88kEWgwv0OrHdY/nr76DOGNS59hXCGXzTKUvDl9iKpLSWYN1lxIeyywdNpTkhay74w2jFT6NS8qkjo5CxA1yfSYwp6AJIZNKIeEK5PJAW7ORgWgwp0VgzYpqovMrWxbu+DGZ6Lhie1RAqpzm8VUzKJOH3mCzWuTOLsN3VT/dv2eeYe9UjbR8YTBsLz7q60VN1sU51k+um1f8JxD5pPhbhSC8rRaB454tmh6YUWrJI3+GWY0qeWioj/tbkYITOkJaeuGt4JrJvHA+l0Gu7kY7XOaa05alMnRWVCXqFgLIwSY4uF59Ue5SU4QKuc/HamDxbr0x6csCetXGoP7Qn1Bk/J9DsynO/UD6iZ1Hyrz+jit0hDCwi/E9OjgKTbB3ZQKQ/0ZOvevfNHG0NK4Aj3Cp7NpRk07RT1i/S0EL93Ag8GRgKI9CfpajKyK6+Jj/PI1KO5/85VAwz2AwzP8FTBb075IxCXv6T9RVvWT2tUaqxDS92zrGUbWzUYk9mSs82pECH+fkqsDt93VW++4YsR/dHCYcQSYTO/KaBMDj9LSD/J/+z20Kq8XvZUAIHtm9hRPP3ItbuAu2Hm5lkPs92pd7kCxgRs0xOVBnZ13ccdA0aunrwv9SdqElJRC3g+oCu+nXyCgmXUs9yMjTMAIHfxZV+aPKcZeUBWt057Xo85Ks1Ir5gzEHCWqZEhrLZMuF11ziGtFQUds/EESajhagzcKsxamcSZxGth4UII+adPhQkUnx2WyN+4YWR+r3f8MnkyGFuR4zjzxJS8WsQYR5PTyRaD9ixa6Mh741nBHbzfjXHskGDq179xaRNrCIB1z1xRfWfjqw2pHc1zk9xlPpL8sQWAIuETZZhbnmL54rceXVNRvUiKrrqIkeogsl0XXb17ylNb0f4GA9Wd44vffEG8FSZGHEL2fbaTGRcSiCeA8PmA/f6Hz8HCS76fXUHwgwkzSwlI71ekZ7Fapmlk/KC+Hs8hUcw3N2LN5LhkVYyizYFl/uPeVP5lsoJHhhfWvvSWruCUW1ZcJOeuTbrDgywJ/qG07gZJplnTvLcYdNaH0KMYOYMGX+rB4NGPFmQsNaIwlWrfCezxre8zXBrsMT+edVLbLqN1BqB76JH4BvZTqUIMfGwPGEn+EnmTV86fPBaYbFL3DFEhjB45CewkXEAtJxk4/Ms2pPXnaRqdky0HOYdcUcE2zcXq4vaIvW2/v0nHFJH2XXe22ueDmq/18XGtELSq85j9X8q0tcNSSKJIX8FTuJF/Pf8j5PhqG2u+osvsLxYrvvfeVJL+4tkcXcr9JV7v0ERmj/X6fM3NC4j6dS1+9Umr2oPavqiAydTZPLMNRGY23LO9zAVDly7jD+70G5TPPLdhRIl4WxcYjLnM+SNcJ26FOrkrISUtPObIz5Zb3AG612krnpy15RMW+1cQjlnWFI6538qky9axd2oJmHIHP08KyP0ubGO+TQNOYuv2uh17yCIvR8VcStw7o1g0NM60sk+8Tq7YfIBJrtp53GkvzXH7OA0p8/n/u1satf/VJhtR1l8Wa6Gmaug7haSpaCaYQax6ta0mkutlb+eAOSG1aobM81D9A4iS1RRlzBBoVX6tU1S6WE2N9ORY6DfeLRC4l9Rvr5h95XDWB2mR1d4WFudpsgVYwiTwT31ljskD8ZyDOlm5DkGh9N/UB/0AI5Xvb8ZBmai2hQ4BWMqFwYnzxwB26YHSOv9WgY3JXnvoN+2R4rqGVh/LLDMtpFP+SpMGJNWvbIl5SOodbCczW2RKleksPoUeGEzrjtKHVdtZA+kfqO+rVx/iclCqwoopepvJpSTDjT+b9GWylGRF8EDbGlw6eUzmJM95Ovoz+kwLX3c2fTjFeYEsE7vUZm3mqdGJuKh2w9/QGSaqRHs99aScGOdDqkFcACoqdbBoQqqjamhH6Q9ng39JCg3lrGJwd50Qk9ovnqBTr8MME7Ps2wiVfygUmPoUBJJfJWX5Nda0nuncbFkA=="))}const sh=Y9();new Set(Ch(sh)),new Set(Ch(sh)),V9(sh),Q9(sh);const X9=new Uint8Array(32);X9.fill(0);const Z9=`Ethereum Signed Message:
`;function lv(r){return typeof r=="string"&&(r=Nu(r)),O0(M9([Nu(Z9),Nu(String(r.length)),r]))}const e_="address/5.7.0",To=new Er(e_);function Hp(r){vi(r,20)||To.throwArgumentError("invalid address","address",r),r=r.toLowerCase();const e=r.substring(2).split(""),t=new Uint8Array(40);for(let s=0;s<40;s++)t[s]=e[s].charCodeAt(0);const i=Xt(O0(t));for(let s=0;s<40;s+=2)i[s>>1]>>4>=8&&(e[s]=e[s].toUpperCase()),(i[s>>1]&15)>=8&&(e[s+1]=e[s+1].toUpperCase());return"0x"+e.join("")}const t_=9007199254740991;function r_(r){return Math.log10?Math.log10(r):Math.log(r)/Math.LN10}const q0={};for(let r=0;r<10;r++)q0[String(r)]=String(r);for(let r=0;r<26;r++)q0[String.fromCharCode(65+r)]=String(10+r);const Vp=Math.floor(r_(t_));function i_(r){r=r.toUpperCase(),r=r.substring(4)+r.substring(0,2)+"00";let e=r.split("").map(i=>q0[i]).join("");for(;e.length>=Vp;){let i=e.substring(0,Vp);e=parseInt(i,10)%97+e.substring(i.length)}let t=String(98-parseInt(e,10)%97);for(;t.length<2;)t="0"+t;return t}function n_(r){let e=null;if(typeof r!="string"&&To.throwArgumentError("invalid address","address",r),r.match(/^(0x)?[0-9a-fA-F]{40}$/))r.substring(0,2)!=="0x"&&(r="0x"+r),e=Hp(r),r.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&e!==r&&To.throwArgumentError("bad address checksum","address",r);else if(r.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){for(r.substring(2,4)!==i_(r)&&To.throwArgumentError("bad icap checksum","address",r),e=T9(r.substring(4));e.length<40;)e="0"+e;e=Hp("0x"+e)}else To.throwArgumentError("invalid address","address",r);return e}function xo(r,e,t){Object.defineProperty(r,e,{enumerable:!0,value:t,writable:!1})}const s_=new Uint8Array(32);s_.fill(0),Kr.from(-1);const a_=Kr.from(0),o_=Kr.from(1);Kr.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),Sn(o_.toHexString(),32),Sn(a_.toHexString(),32);var yn={},Rt={},Yo=pv;function pv(r,e){if(!r)throw new Error(e||"Assertion failed")}pv.equal=function(r,e,t){if(r!=e)throw new Error(t||"Assertion failed: "+r+" != "+e)};var a0={exports:{}};typeof Object.create=="function"?a0.exports=function(r,e){e&&(r.super_=e,r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}))}:a0.exports=function(r,e){if(e){r.super_=e;var t=function(){};t.prototype=e.prototype,r.prototype=new t,r.prototype.constructor=r}};var c_=Yo,h_=a0.exports;Rt.inherits=h_;function f_(r,e){return(r.charCodeAt(e)&64512)!==55296||e<0||e+1>=r.length?!1:(r.charCodeAt(e+1)&64512)===56320}function u_(r,e){if(Array.isArray(r))return r.slice();if(!r)return[];var t=[];if(typeof r=="string")if(e){if(e==="hex")for(r=r.replace(/[^a-z0-9]+/ig,""),r.length%2!==0&&(r="0"+r),s=0;s<r.length;s+=2)t.push(parseInt(r[s]+r[s+1],16))}else for(var i=0,s=0;s<r.length;s++){var a=r.charCodeAt(s);a<128?t[i++]=a:a<2048?(t[i++]=a>>6|192,t[i++]=a&63|128):f_(r,s)?(a=65536+((a&1023)<<10)+(r.charCodeAt(++s)&1023),t[i++]=a>>18|240,t[i++]=a>>12&63|128,t[i++]=a>>6&63|128,t[i++]=a&63|128):(t[i++]=a>>12|224,t[i++]=a>>6&63|128,t[i++]=a&63|128)}else for(s=0;s<r.length;s++)t[s]=r[s]|0;return t}Rt.toArray=u_;function d_(r){for(var e="",t=0;t<r.length;t++)e+=vv(r[t].toString(16));return e}Rt.toHex=d_;function gv(r){var e=r>>>24|r>>>8&65280|r<<8&16711680|(r&255)<<24;return e>>>0}Rt.htonl=gv;function l_(r,e){for(var t="",i=0;i<r.length;i++){var s=r[i];e==="little"&&(s=gv(s)),t+=bv(s.toString(16))}return t}Rt.toHex32=l_;function vv(r){return r.length===1?"0"+r:r}Rt.zero2=vv;function bv(r){return r.length===7?"0"+r:r.length===6?"00"+r:r.length===5?"000"+r:r.length===4?"0000"+r:r.length===3?"00000"+r:r.length===2?"000000"+r:r.length===1?"0000000"+r:r}Rt.zero8=bv;function p_(r,e,t,i){var s=t-e;c_(s%4===0);for(var a=new Array(s/4),f=0,p=e;f<a.length;f++,p+=4){var y;i==="big"?y=r[p]<<24|r[p+1]<<16|r[p+2]<<8|r[p+3]:y=r[p+3]<<24|r[p+2]<<16|r[p+1]<<8|r[p],a[f]=y>>>0}return a}Rt.join32=p_;function g_(r,e){for(var t=new Array(r.length*4),i=0,s=0;i<r.length;i++,s+=4){var a=r[i];e==="big"?(t[s]=a>>>24,t[s+1]=a>>>16&255,t[s+2]=a>>>8&255,t[s+3]=a&255):(t[s+3]=a>>>24,t[s+2]=a>>>16&255,t[s+1]=a>>>8&255,t[s]=a&255)}return t}Rt.split32=g_;function v_(r,e){return r>>>e|r<<32-e}Rt.rotr32=v_;function b_(r,e){return r<<e|r>>>32-e}Rt.rotl32=b_;function m_(r,e){return r+e>>>0}Rt.sum32=m_;function y_(r,e,t){return r+e+t>>>0}Rt.sum32_3=y_;function w_(r,e,t,i){return r+e+t+i>>>0}Rt.sum32_4=w_;function __(r,e,t,i,s){return r+e+t+i+s>>>0}Rt.sum32_5=__;function A_(r,e,t,i){var s=r[e],a=r[e+1],f=i+a>>>0,p=(f<i?1:0)+t+s;r[e]=p>>>0,r[e+1]=f}Rt.sum64=A_;function x_(r,e,t,i){var s=e+i>>>0,a=(s<e?1:0)+r+t;return a>>>0}Rt.sum64_hi=x_;function E_(r,e,t,i){var s=e+i;return s>>>0}Rt.sum64_lo=E_;function I_(r,e,t,i,s,a,f,p){var y=0,v=e;v=v+i>>>0,y+=v<e?1:0,v=v+a>>>0,y+=v<a?1:0,v=v+p>>>0,y+=v<p?1:0;var A=r+t+s+f+y;return A>>>0}Rt.sum64_4_hi=I_;function M_(r,e,t,i,s,a,f,p){var y=e+i+a+p;return y>>>0}Rt.sum64_4_lo=M_;function S_(r,e,t,i,s,a,f,p,y,v){var A=0,E=e;E=E+i>>>0,A+=E<e?1:0,E=E+a>>>0,A+=E<a?1:0,E=E+p>>>0,A+=E<p?1:0,E=E+v>>>0,A+=E<v?1:0;var N=r+t+s+f+y+A;return N>>>0}Rt.sum64_5_hi=S_;function P_(r,e,t,i,s,a,f,p,y,v){var A=e+i+a+p+v;return A>>>0}Rt.sum64_5_lo=P_;function R_(r,e,t){var i=e<<32-t|r>>>t;return i>>>0}Rt.rotr64_hi=R_;function N_(r,e,t){var i=r<<32-t|e>>>t;return i>>>0}Rt.rotr64_lo=N_;function C_(r,e,t){return r>>>t}Rt.shr64_hi=C_;function O_(r,e,t){var i=r<<32-t|e>>>t;return i>>>0}Rt.shr64_lo=O_;var Qa={},Gp=Rt,T_=Yo;function ah(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}Qa.BlockHash=ah,ah.prototype.update=function(r,e){if(r=Gp.toArray(r,e),this.pending?this.pending=this.pending.concat(r):this.pending=r,this.pendingTotal+=r.length,this.pending.length>=this._delta8){r=this.pending;var t=r.length%this._delta8;this.pending=r.slice(r.length-t,r.length),this.pending.length===0&&(this.pending=null),r=Gp.join32(r,0,r.length-t,this.endian);for(var i=0;i<r.length;i+=this._delta32)this._update(r,i,i+this._delta32)}return this},ah.prototype.digest=function(r){return this.update(this._pad()),T_(this.pending===null),this._digest(r)},ah.prototype._pad=function(){var r=this.pendingTotal,e=this._delta8,t=e-(r+this.padLength)%e,i=new Array(t+this.padLength);i[0]=128;for(var s=1;s<t;s++)i[s]=0;if(r<<=3,this.endian==="big"){for(var a=8;a<this.padLength;a++)i[s++]=0;i[s++]=0,i[s++]=0,i[s++]=0,i[s++]=0,i[s++]=r>>>24&255,i[s++]=r>>>16&255,i[s++]=r>>>8&255,i[s++]=r&255}else for(i[s++]=r&255,i[s++]=r>>>8&255,i[s++]=r>>>16&255,i[s++]=r>>>24&255,i[s++]=0,i[s++]=0,i[s++]=0,i[s++]=0,a=8;a<this.padLength;a++)i[s++]=0;return i};var Ma={},kn={},q_=Rt,Pn=q_.rotr32;function D_(r,e,t,i){if(r===0)return mv(e,t,i);if(r===1||r===3)return wv(e,t,i);if(r===2)return yv(e,t,i)}kn.ft_1=D_;function mv(r,e,t){return r&e^~r&t}kn.ch32=mv;function yv(r,e,t){return r&e^r&t^e&t}kn.maj32=yv;function wv(r,e,t){return r^e^t}kn.p32=wv;function B_(r){return Pn(r,2)^Pn(r,13)^Pn(r,22)}kn.s0_256=B_;function $_(r){return Pn(r,6)^Pn(r,11)^Pn(r,25)}kn.s1_256=$_;function z_(r){return Pn(r,7)^Pn(r,18)^r>>>3}kn.g0_256=z_;function k_(r){return Pn(r,17)^Pn(r,19)^r>>>10}kn.g1_256=k_;var ka=Rt,L_=Qa,U_=kn,Ou=ka.rotl32,Eo=ka.sum32,j_=ka.sum32_5,F_=U_.ft_1,_v=L_.BlockHash,K_=[1518500249,1859775393,2400959708,3395469782];function An(){if(!(this instanceof An))return new An;_v.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}ka.inherits(An,_v);var H_=An;An.blockSize=512,An.outSize=160,An.hmacStrength=80,An.padLength=64,An.prototype._update=function(r,e){for(var t=this.W,i=0;i<16;i++)t[i]=r[e+i];for(;i<t.length;i++)t[i]=Ou(t[i-3]^t[i-8]^t[i-14]^t[i-16],1);var s=this.h[0],a=this.h[1],f=this.h[2],p=this.h[3],y=this.h[4];for(i=0;i<t.length;i++){var v=~~(i/20),A=j_(Ou(s,5),F_(v,a,f,p),y,t[i],K_[v]);y=p,p=f,f=Ou(a,30),a=s,s=A}this.h[0]=Eo(this.h[0],s),this.h[1]=Eo(this.h[1],a),this.h[2]=Eo(this.h[2],f),this.h[3]=Eo(this.h[3],p),this.h[4]=Eo(this.h[4],y)},An.prototype._digest=function(r){return r==="hex"?ka.toHex32(this.h,"big"):ka.split32(this.h,"big")};var La=Rt,V_=Qa,Ya=kn,G_=Yo,Zi=La.sum32,W_=La.sum32_4,J_=La.sum32_5,Q_=Ya.ch32,Y_=Ya.maj32,X_=Ya.s0_256,Z_=Ya.s1_256,eA=Ya.g0_256,tA=Ya.g1_256,Av=V_.BlockHash,rA=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function xn(){if(!(this instanceof xn))return new xn;Av.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=rA,this.W=new Array(64)}La.inherits(xn,Av);var xv=xn;xn.blockSize=512,xn.outSize=256,xn.hmacStrength=192,xn.padLength=64,xn.prototype._update=function(r,e){for(var t=this.W,i=0;i<16;i++)t[i]=r[e+i];for(;i<t.length;i++)t[i]=W_(tA(t[i-2]),t[i-7],eA(t[i-15]),t[i-16]);var s=this.h[0],a=this.h[1],f=this.h[2],p=this.h[3],y=this.h[4],v=this.h[5],A=this.h[6],E=this.h[7];for(G_(this.k.length===t.length),i=0;i<t.length;i++){var N=J_(E,Z_(y),Q_(y,v,A),this.k[i],t[i]),O=Zi(X_(s),Y_(s,a,f));E=A,A=v,v=y,y=Zi(p,N),p=f,f=a,a=s,s=Zi(N,O)}this.h[0]=Zi(this.h[0],s),this.h[1]=Zi(this.h[1],a),this.h[2]=Zi(this.h[2],f),this.h[3]=Zi(this.h[3],p),this.h[4]=Zi(this.h[4],y),this.h[5]=Zi(this.h[5],v),this.h[6]=Zi(this.h[6],A),this.h[7]=Zi(this.h[7],E)},xn.prototype._digest=function(r){return r==="hex"?La.toHex32(this.h,"big"):La.split32(this.h,"big")};var o0=Rt,Ev=xv;function es(){if(!(this instanceof es))return new es;Ev.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}o0.inherits(es,Ev);var iA=es;es.blockSize=512,es.outSize=224,es.hmacStrength=192,es.padLength=64,es.prototype._digest=function(r){return r==="hex"?o0.toHex32(this.h.slice(0,7),"big"):o0.split32(this.h.slice(0,7),"big")};var ci=Rt,nA=Qa,sA=Yo,Rn=ci.rotr64_hi,Nn=ci.rotr64_lo,Iv=ci.shr64_hi,Mv=ci.shr64_lo,ms=ci.sum64,Tu=ci.sum64_hi,qu=ci.sum64_lo,aA=ci.sum64_4_hi,oA=ci.sum64_4_lo,cA=ci.sum64_5_hi,hA=ci.sum64_5_lo,Sv=nA.BlockHash,fA=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function sn(){if(!(this instanceof sn))return new sn;Sv.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=fA,this.W=new Array(160)}ci.inherits(sn,Sv);var Pv=sn;sn.blockSize=1024,sn.outSize=512,sn.hmacStrength=192,sn.padLength=128,sn.prototype._prepareBlock=function(r,e){for(var t=this.W,i=0;i<32;i++)t[i]=r[e+i];for(;i<t.length;i+=2){var s=_A(t[i-4],t[i-3]),a=AA(t[i-4],t[i-3]),f=t[i-14],p=t[i-13],y=yA(t[i-30],t[i-29]),v=wA(t[i-30],t[i-29]),A=t[i-32],E=t[i-31];t[i]=aA(s,a,f,p,y,v,A,E),t[i+1]=oA(s,a,f,p,y,v,A,E)}},sn.prototype._update=function(r,e){this._prepareBlock(r,e);var t=this.W,i=this.h[0],s=this.h[1],a=this.h[2],f=this.h[3],p=this.h[4],y=this.h[5],v=this.h[6],A=this.h[7],E=this.h[8],N=this.h[9],O=this.h[10],T=this.h[11],F=this.h[12],G=this.h[13],W=this.h[14],ee=this.h[15];sA(this.k.length===t.length);for(var de=0;de<t.length;de+=2){var se=W,ae=ee,ue=bA(E,N),ne=mA(E,N),ve=uA(E,N,O,T,F),Ae=dA(E,N,O,T,F,G),ot=this.k[de],$=this.k[de+1],b=t[de],c=t[de+1],u=cA(se,ae,ue,ne,ve,Ae,ot,$,b,c),g=hA(se,ae,ue,ne,ve,Ae,ot,$,b,c);se=gA(i,s),ae=vA(i,s),ue=lA(i,s,a,f,p),ne=pA(i,s,a,f,p,y);var _=Tu(se,ae,ue,ne),M=qu(se,ae,ue,ne);W=F,ee=G,F=O,G=T,O=E,T=N,E=Tu(v,A,u,g),N=qu(A,A,u,g),v=p,A=y,p=a,y=f,a=i,f=s,i=Tu(u,g,_,M),s=qu(u,g,_,M)}ms(this.h,0,i,s),ms(this.h,2,a,f),ms(this.h,4,p,y),ms(this.h,6,v,A),ms(this.h,8,E,N),ms(this.h,10,O,T),ms(this.h,12,F,G),ms(this.h,14,W,ee)},sn.prototype._digest=function(r){return r==="hex"?ci.toHex32(this.h,"big"):ci.split32(this.h,"big")};function uA(r,e,t,i,s){var a=r&t^~r&s;return a<0&&(a+=4294967296),a}function dA(r,e,t,i,s,a){var f=e&i^~e&a;return f<0&&(f+=4294967296),f}function lA(r,e,t,i,s){var a=r&t^r&s^t&s;return a<0&&(a+=4294967296),a}function pA(r,e,t,i,s,a){var f=e&i^e&a^i&a;return f<0&&(f+=4294967296),f}function gA(r,e){var t=Rn(r,e,28),i=Rn(e,r,2),s=Rn(e,r,7),a=t^i^s;return a<0&&(a+=4294967296),a}function vA(r,e){var t=Nn(r,e,28),i=Nn(e,r,2),s=Nn(e,r,7),a=t^i^s;return a<0&&(a+=4294967296),a}function bA(r,e){var t=Rn(r,e,14),i=Rn(r,e,18),s=Rn(e,r,9),a=t^i^s;return a<0&&(a+=4294967296),a}function mA(r,e){var t=Nn(r,e,14),i=Nn(r,e,18),s=Nn(e,r,9),a=t^i^s;return a<0&&(a+=4294967296),a}function yA(r,e){var t=Rn(r,e,1),i=Rn(r,e,8),s=Iv(r,e,7),a=t^i^s;return a<0&&(a+=4294967296),a}function wA(r,e){var t=Nn(r,e,1),i=Nn(r,e,8),s=Mv(r,e,7),a=t^i^s;return a<0&&(a+=4294967296),a}function _A(r,e){var t=Rn(r,e,19),i=Rn(e,r,29),s=Iv(r,e,6),a=t^i^s;return a<0&&(a+=4294967296),a}function AA(r,e){var t=Nn(r,e,19),i=Nn(e,r,29),s=Mv(r,e,6),a=t^i^s;return a<0&&(a+=4294967296),a}var c0=Rt,Rv=Pv;function ts(){if(!(this instanceof ts))return new ts;Rv.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}c0.inherits(ts,Rv);var xA=ts;ts.blockSize=1024,ts.outSize=384,ts.hmacStrength=192,ts.padLength=128,ts.prototype._digest=function(r){return r==="hex"?c0.toHex32(this.h.slice(0,12),"big"):c0.split32(this.h.slice(0,12),"big")},Ma.sha1=H_,Ma.sha224=iA,Ma.sha256=xv,Ma.sha384=xA,Ma.sha512=Pv;var Nv={},Qs=Rt,EA=Qa,oh=Qs.rotl32,Wp=Qs.sum32,Io=Qs.sum32_3,Jp=Qs.sum32_4,Cv=EA.BlockHash;function wn(){if(!(this instanceof wn))return new wn;Cv.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}Qs.inherits(wn,Cv),Nv.ripemd160=wn,wn.blockSize=512,wn.outSize=160,wn.hmacStrength=192,wn.padLength=64,wn.prototype._update=function(r,e){for(var t=this.h[0],i=this.h[1],s=this.h[2],a=this.h[3],f=this.h[4],p=t,y=i,v=s,A=a,E=f,N=0;N<80;N++){var O=Wp(oh(Jp(t,Qp(N,i,s,a),r[SA[N]+e],IA(N)),RA[N]),f);t=f,f=a,a=oh(s,10),s=i,i=O,O=Wp(oh(Jp(p,Qp(79-N,y,v,A),r[PA[N]+e],MA(N)),NA[N]),E),p=E,E=A,A=oh(v,10),v=y,y=O}O=Io(this.h[1],s,A),this.h[1]=Io(this.h[2],a,E),this.h[2]=Io(this.h[3],f,p),this.h[3]=Io(this.h[4],t,y),this.h[4]=Io(this.h[0],i,v),this.h[0]=O},wn.prototype._digest=function(r){return r==="hex"?Qs.toHex32(this.h,"little"):Qs.split32(this.h,"little")};function Qp(r,e,t,i){return r<=15?e^t^i:r<=31?e&t|~e&i:r<=47?(e|~t)^i:r<=63?e&i|t&~i:e^(t|~i)}function IA(r){return r<=15?0:r<=31?1518500249:r<=47?1859775393:r<=63?2400959708:2840853838}function MA(r){return r<=15?1352829926:r<=31?1548603684:r<=47?1836072691:r<=63?2053994217:0}var SA=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],PA=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],RA=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],NA=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],CA=Rt,OA=Yo;function qa(r,e,t){if(!(this instanceof qa))return new qa(r,e,t);this.Hash=r,this.blockSize=r.blockSize/8,this.outSize=r.outSize/8,this.inner=null,this.outer=null,this._init(CA.toArray(e,t))}var TA=qa;qa.prototype._init=function(r){r.length>this.blockSize&&(r=new this.Hash().update(r).digest()),OA(r.length<=this.blockSize);for(var e=r.length;e<this.blockSize;e++)r.push(0);for(e=0;e<r.length;e++)r[e]^=54;for(this.inner=new this.Hash().update(r),e=0;e<r.length;e++)r[e]^=106;this.outer=new this.Hash().update(r)},qa.prototype.update=function(r,e){return this.inner.update(r,e),this},qa.prototype.digest=function(r){return this.outer.update(this.inner.digest()),this.outer.digest(r)},function(r){var e=r;e.utils=Rt,e.common=Qa,e.sha=Ma,e.ripemd=Nv,e.hmac=TA,e.sha1=e.sha.sha1,e.sha256=e.sha.sha256,e.sha224=e.sha.sha224,e.sha384=e.sha.sha384,e.sha512=e.sha.sha512,e.ripemd160=e.ripemd.ripemd160}(yn);function Xa(r,e,t){return t={path:e,exports:{},require:function(i,s){return qA(i,s??t.path)}},r(t,t.exports),t.exports}function qA(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var D0=Ov;function Ov(r,e){if(!r)throw new Error(e||"Assertion failed")}Ov.equal=function(r,e,t){if(r!=e)throw new Error(t||"Assertion failed: "+r+" != "+e)};var an=Xa(function(r,e){var t=e;function i(f,p){if(Array.isArray(f))return f.slice();if(!f)return[];var y=[];if(typeof f!="string"){for(var v=0;v<f.length;v++)y[v]=f[v]|0;return y}if(p==="hex"){f=f.replace(/[^a-z0-9]+/ig,""),f.length%2!==0&&(f="0"+f);for(var v=0;v<f.length;v+=2)y.push(parseInt(f[v]+f[v+1],16))}else for(var v=0;v<f.length;v++){var A=f.charCodeAt(v),E=A>>8,N=A&255;E?y.push(E,N):y.push(N)}return y}t.toArray=i;function s(f){return f.length===1?"0"+f:f}t.zero2=s;function a(f){for(var p="",y=0;y<f.length;y++)p+=s(f[y].toString(16));return p}t.toHex=a,t.encode=function(f,p){return p==="hex"?a(f):f}}),bi=Xa(function(r,e){var t=e;t.assert=D0,t.toArray=an.toArray,t.zero2=an.zero2,t.toHex=an.toHex,t.encode=an.encode;function i(y,v,A){var E=new Array(Math.max(y.bitLength(),A)+1);E.fill(0);for(var N=1<<v+1,O=y.clone(),T=0;T<E.length;T++){var F,G=O.andln(N-1);O.isOdd()?(G>(N>>1)-1?F=(N>>1)-G:F=G,O.isubn(F)):F=0,E[T]=F,O.iushrn(1)}return E}t.getNAF=i;function s(y,v){var A=[[],[]];y=y.clone(),v=v.clone();for(var E=0,N=0,O;y.cmpn(-E)>0||v.cmpn(-N)>0;){var T=y.andln(3)+E&3,F=v.andln(3)+N&3;T===3&&(T=-1),F===3&&(F=-1);var G;T&1?(O=y.andln(7)+E&7,(O===3||O===5)&&F===2?G=-T:G=T):G=0,A[0].push(G);var W;F&1?(O=v.andln(7)+N&7,(O===3||O===5)&&T===2?W=-F:W=F):W=0,A[1].push(W),2*E===G+1&&(E=1-E),2*N===W+1&&(N=1-N),y.iushrn(1),v.iushrn(1)}return A}t.getJSF=s;function a(y,v,A){var E="_"+v;y.prototype[v]=function(){return this[E]!==void 0?this[E]:this[E]=A.call(this)}}t.cachedProperty=a;function f(y){return typeof y=="string"?t.toArray(y,"hex"):y}t.parseBytes=f;function p(y){return new vt(y,"hex","le")}t.intFromLE=p}),ch=bi.getNAF,DA=bi.getJSF,Oh=bi.assert;function As(r,e){this.type=r,this.p=new vt(e.p,16),this.red=e.prime?vt.red(e.prime):vt.mont(this.p),this.zero=new vt(0).toRed(this.red),this.one=new vt(1).toRed(this.red),this.two=new vt(2).toRed(this.red),this.n=e.n&&new vt(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var t=this.n&&this.p.div(this.n);!t||t.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var na=As;As.prototype.point=function(){throw new Error("Not implemented")},As.prototype.validate=function(){throw new Error("Not implemented")},As.prototype._fixedNafMul=function(r,e){Oh(r.precomputed);var t=r._getDoubles(),i=ch(e,1,this._bitLength),s=(1<<t.step+1)-(t.step%2===0?2:1);s/=3;var a=[],f,p;for(f=0;f<i.length;f+=t.step){p=0;for(var y=f+t.step-1;y>=f;y--)p=(p<<1)+i[y];a.push(p)}for(var v=this.jpoint(null,null,null),A=this.jpoint(null,null,null),E=s;E>0;E--){for(f=0;f<a.length;f++)p=a[f],p===E?A=A.mixedAdd(t.points[f]):p===-E&&(A=A.mixedAdd(t.points[f].neg()));v=v.add(A)}return v.toP()},As.prototype._wnafMul=function(r,e){var t=4,i=r._getNAFPoints(t);t=i.wnd;for(var s=i.points,a=ch(e,t,this._bitLength),f=this.jpoint(null,null,null),p=a.length-1;p>=0;p--){for(var y=0;p>=0&&a[p]===0;p--)y++;if(p>=0&&y++,f=f.dblp(y),p<0)break;var v=a[p];Oh(v!==0),r.type==="affine"?v>0?f=f.mixedAdd(s[v-1>>1]):f=f.mixedAdd(s[-v-1>>1].neg()):v>0?f=f.add(s[v-1>>1]):f=f.add(s[-v-1>>1].neg())}return r.type==="affine"?f.toP():f},As.prototype._wnafMulAdd=function(r,e,t,i,s){var a=this._wnafT1,f=this._wnafT2,p=this._wnafT3,y=0,v,A,E;for(v=0;v<i;v++){E=e[v];var N=E._getNAFPoints(r);a[v]=N.wnd,f[v]=N.points}for(v=i-1;v>=1;v-=2){var O=v-1,T=v;if(a[O]!==1||a[T]!==1){p[O]=ch(t[O],a[O],this._bitLength),p[T]=ch(t[T],a[T],this._bitLength),y=Math.max(p[O].length,y),y=Math.max(p[T].length,y);continue}var F=[e[O],null,null,e[T]];e[O].y.cmp(e[T].y)===0?(F[1]=e[O].add(e[T]),F[2]=e[O].toJ().mixedAdd(e[T].neg())):e[O].y.cmp(e[T].y.redNeg())===0?(F[1]=e[O].toJ().mixedAdd(e[T]),F[2]=e[O].add(e[T].neg())):(F[1]=e[O].toJ().mixedAdd(e[T]),F[2]=e[O].toJ().mixedAdd(e[T].neg()));var G=[-3,-1,-5,-7,0,7,5,1,3],W=DA(t[O],t[T]);for(y=Math.max(W[0].length,y),p[O]=new Array(y),p[T]=new Array(y),A=0;A<y;A++){var ee=W[0][A]|0,de=W[1][A]|0;p[O][A]=G[(ee+1)*3+(de+1)],p[T][A]=0,f[O]=F}}var se=this.jpoint(null,null,null),ae=this._wnafT4;for(v=y;v>=0;v--){for(var ue=0;v>=0;){var ne=!0;for(A=0;A<i;A++)ae[A]=p[A][v]|0,ae[A]!==0&&(ne=!1);if(!ne)break;ue++,v--}if(v>=0&&ue++,se=se.dblp(ue),v<0)break;for(A=0;A<i;A++){var ve=ae[A];ve!==0&&(ve>0?E=f[A][ve-1>>1]:ve<0&&(E=f[A][-ve-1>>1].neg()),E.type==="affine"?se=se.mixedAdd(E):se=se.add(E))}}for(v=0;v<i;v++)f[v]=null;return s?se:se.toP()};function Ci(r,e){this.curve=r,this.type=e,this.precomputed=null}As.BasePoint=Ci,Ci.prototype.eq=function(){throw new Error("Not implemented")},Ci.prototype.validate=function(){return this.curve.validate(this)},As.prototype.decodePoint=function(r,e){r=bi.toArray(r,e);var t=this.p.byteLength();if((r[0]===4||r[0]===6||r[0]===7)&&r.length-1===2*t){r[0]===6?Oh(r[r.length-1]%2===0):r[0]===7&&Oh(r[r.length-1]%2===1);var i=this.point(r.slice(1,1+t),r.slice(1+t,1+2*t));return i}else if((r[0]===2||r[0]===3)&&r.length-1===t)return this.pointFromX(r.slice(1,1+t),r[0]===3);throw new Error("Unknown point format")},Ci.prototype.encodeCompressed=function(r){return this.encode(r,!0)},Ci.prototype._encode=function(r){var e=this.curve.p.byteLength(),t=this.getX().toArray("be",e);return r?[this.getY().isEven()?2:3].concat(t):[4].concat(t,this.getY().toArray("be",e))},Ci.prototype.encode=function(r,e){return bi.encode(this._encode(e),r)},Ci.prototype.precompute=function(r){if(this.precomputed)return this;var e={doubles:null,naf:null,beta:null};return e.naf=this._getNAFPoints(8),e.doubles=this._getDoubles(4,r),e.beta=this._getBeta(),this.precomputed=e,this},Ci.prototype._hasDoubles=function(r){if(!this.precomputed)return!1;var e=this.precomputed.doubles;return e?e.points.length>=Math.ceil((r.bitLength()+1)/e.step):!1},Ci.prototype._getDoubles=function(r,e){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var t=[this],i=this,s=0;s<e;s+=r){for(var a=0;a<r;a++)i=i.dbl();t.push(i)}return{step:r,points:t}},Ci.prototype._getNAFPoints=function(r){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var e=[this],t=(1<<r)-1,i=t===1?null:this.dbl(),s=1;s<t;s++)e[s]=e[s-1].add(i);return{wnd:r,points:e}},Ci.prototype._getBeta=function(){return null},Ci.prototype.dblp=function(r){for(var e=this,t=0;t<r;t++)e=e.dbl();return e};var B0=Xa(function(r){typeof Object.create=="function"?r.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:r.exports=function(e,t){if(t){e.super_=t;var i=function(){};i.prototype=t.prototype,e.prototype=new i,e.prototype.constructor=e}}}),BA=bi.assert;function Bi(r){na.call(this,"short",r),this.a=new vt(r.a,16).toRed(this.red),this.b=new vt(r.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(r),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}B0(Bi,na);var $A=Bi;Bi.prototype._getEndomorphism=function(r){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var e,t;if(r.beta)e=new vt(r.beta,16).toRed(this.red);else{var i=this._getEndoRoots(this.p);e=i[0].cmp(i[1])<0?i[0]:i[1],e=e.toRed(this.red)}if(r.lambda)t=new vt(r.lambda,16);else{var s=this._getEndoRoots(this.n);this.g.mul(s[0]).x.cmp(this.g.x.redMul(e))===0?t=s[0]:(t=s[1],BA(this.g.mul(t).x.cmp(this.g.x.redMul(e))===0))}var a;return r.basis?a=r.basis.map(function(f){return{a:new vt(f.a,16),b:new vt(f.b,16)}}):a=this._getEndoBasis(t),{beta:e,lambda:t,basis:a}}},Bi.prototype._getEndoRoots=function(r){var e=r===this.p?this.red:vt.mont(r),t=new vt(2).toRed(e).redInvm(),i=t.redNeg(),s=new vt(3).toRed(e).redNeg().redSqrt().redMul(t),a=i.redAdd(s).fromRed(),f=i.redSub(s).fromRed();return[a,f]},Bi.prototype._getEndoBasis=function(r){for(var e=this.n.ushrn(Math.floor(this.n.bitLength()/2)),t=r,i=this.n.clone(),s=new vt(1),a=new vt(0),f=new vt(0),p=new vt(1),y,v,A,E,N,O,T,F=0,G,W;t.cmpn(0)!==0;){var ee=i.div(t);G=i.sub(ee.mul(t)),W=f.sub(ee.mul(s));var de=p.sub(ee.mul(a));if(!A&&G.cmp(e)<0)y=T.neg(),v=s,A=G.neg(),E=W;else if(A&&++F===2)break;T=G,i=t,t=G,f=s,s=W,p=a,a=de}N=G.neg(),O=W;var se=A.sqr().add(E.sqr()),ae=N.sqr().add(O.sqr());return ae.cmp(se)>=0&&(N=y,O=v),A.negative&&(A=A.neg(),E=E.neg()),N.negative&&(N=N.neg(),O=O.neg()),[{a:A,b:E},{a:N,b:O}]},Bi.prototype._endoSplit=function(r){var e=this.endo.basis,t=e[0],i=e[1],s=i.b.mul(r).divRound(this.n),a=t.b.neg().mul(r).divRound(this.n),f=s.mul(t.a),p=a.mul(i.a),y=s.mul(t.b),v=a.mul(i.b),A=r.sub(f).sub(p),E=y.add(v).neg();return{k1:A,k2:E}},Bi.prototype.pointFromX=function(r,e){r=new vt(r,16),r.red||(r=r.toRed(this.red));var t=r.redSqr().redMul(r).redIAdd(r.redMul(this.a)).redIAdd(this.b),i=t.redSqrt();if(i.redSqr().redSub(t).cmp(this.zero)!==0)throw new Error("invalid point");var s=i.fromRed().isOdd();return(e&&!s||!e&&s)&&(i=i.redNeg()),this.point(r,i)},Bi.prototype.validate=function(r){if(r.inf)return!0;var e=r.x,t=r.y,i=this.a.redMul(e),s=e.redSqr().redMul(e).redIAdd(i).redIAdd(this.b);return t.redSqr().redISub(s).cmpn(0)===0},Bi.prototype._endoWnafMulAdd=function(r,e,t){for(var i=this._endoWnafT1,s=this._endoWnafT2,a=0;a<r.length;a++){var f=this._endoSplit(e[a]),p=r[a],y=p._getBeta();f.k1.negative&&(f.k1.ineg(),p=p.neg(!0)),f.k2.negative&&(f.k2.ineg(),y=y.neg(!0)),i[a*2]=p,i[a*2+1]=y,s[a*2]=f.k1,s[a*2+1]=f.k2}for(var v=this._wnafMulAdd(1,i,s,a*2,t),A=0;A<a*2;A++)i[A]=null,s[A]=null;return v};function pr(r,e,t,i){na.BasePoint.call(this,r,"affine"),e===null&&t===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new vt(e,16),this.y=new vt(t,16),i&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}B0(pr,na.BasePoint),Bi.prototype.point=function(r,e,t){return new pr(this,r,e,t)},Bi.prototype.pointFromJSON=function(r,e){return pr.fromJSON(this,r,e)},pr.prototype._getBeta=function(){if(this.curve.endo){var r=this.precomputed;if(r&&r.beta)return r.beta;var e=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(r){var t=this.curve,i=function(s){return t.point(s.x.redMul(t.endo.beta),s.y)};r.beta=e,e.precomputed={beta:null,naf:r.naf&&{wnd:r.naf.wnd,points:r.naf.points.map(i)},doubles:r.doubles&&{step:r.doubles.step,points:r.doubles.points.map(i)}}}return e}},pr.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},pr.fromJSON=function(r,e,t){typeof e=="string"&&(e=JSON.parse(e));var i=r.point(e[0],e[1],t);if(!e[2])return i;function s(f){return r.point(f[0],f[1],t)}var a=e[2];return i.precomputed={beta:null,doubles:a.doubles&&{step:a.doubles.step,points:[i].concat(a.doubles.points.map(s))},naf:a.naf&&{wnd:a.naf.wnd,points:[i].concat(a.naf.points.map(s))}},i},pr.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},pr.prototype.isInfinity=function(){return this.inf},pr.prototype.add=function(r){if(this.inf)return r;if(r.inf)return this;if(this.eq(r))return this.dbl();if(this.neg().eq(r))return this.curve.point(null,null);if(this.x.cmp(r.x)===0)return this.curve.point(null,null);var e=this.y.redSub(r.y);e.cmpn(0)!==0&&(e=e.redMul(this.x.redSub(r.x).redInvm()));var t=e.redSqr().redISub(this.x).redISub(r.x),i=e.redMul(this.x.redSub(t)).redISub(this.y);return this.curve.point(t,i)},pr.prototype.dbl=function(){if(this.inf)return this;var r=this.y.redAdd(this.y);if(r.cmpn(0)===0)return this.curve.point(null,null);var e=this.curve.a,t=this.x.redSqr(),i=r.redInvm(),s=t.redAdd(t).redIAdd(t).redIAdd(e).redMul(i),a=s.redSqr().redISub(this.x.redAdd(this.x)),f=s.redMul(this.x.redSub(a)).redISub(this.y);return this.curve.point(a,f)},pr.prototype.getX=function(){return this.x.fromRed()},pr.prototype.getY=function(){return this.y.fromRed()},pr.prototype.mul=function(r){return r=new vt(r,16),this.isInfinity()?this:this._hasDoubles(r)?this.curve._fixedNafMul(this,r):this.curve.endo?this.curve._endoWnafMulAdd([this],[r]):this.curve._wnafMul(this,r)},pr.prototype.mulAdd=function(r,e,t){var i=[this,e],s=[r,t];return this.curve.endo?this.curve._endoWnafMulAdd(i,s):this.curve._wnafMulAdd(1,i,s,2)},pr.prototype.jmulAdd=function(r,e,t){var i=[this,e],s=[r,t];return this.curve.endo?this.curve._endoWnafMulAdd(i,s,!0):this.curve._wnafMulAdd(1,i,s,2,!0)},pr.prototype.eq=function(r){return this===r||this.inf===r.inf&&(this.inf||this.x.cmp(r.x)===0&&this.y.cmp(r.y)===0)},pr.prototype.neg=function(r){if(this.inf)return this;var e=this.curve.point(this.x,this.y.redNeg());if(r&&this.precomputed){var t=this.precomputed,i=function(s){return s.neg()};e.precomputed={naf:t.naf&&{wnd:t.naf.wnd,points:t.naf.points.map(i)},doubles:t.doubles&&{step:t.doubles.step,points:t.doubles.points.map(i)}}}return e},pr.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var r=this.curve.jpoint(this.x,this.y,this.curve.one);return r};function wr(r,e,t,i){na.BasePoint.call(this,r,"jacobian"),e===null&&t===null&&i===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new vt(0)):(this.x=new vt(e,16),this.y=new vt(t,16),this.z=new vt(i,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}B0(wr,na.BasePoint),Bi.prototype.jpoint=function(r,e,t){return new wr(this,r,e,t)},wr.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var r=this.z.redInvm(),e=r.redSqr(),t=this.x.redMul(e),i=this.y.redMul(e).redMul(r);return this.curve.point(t,i)},wr.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},wr.prototype.add=function(r){if(this.isInfinity())return r;if(r.isInfinity())return this;var e=r.z.redSqr(),t=this.z.redSqr(),i=this.x.redMul(e),s=r.x.redMul(t),a=this.y.redMul(e.redMul(r.z)),f=r.y.redMul(t.redMul(this.z)),p=i.redSub(s),y=a.redSub(f);if(p.cmpn(0)===0)return y.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var v=p.redSqr(),A=v.redMul(p),E=i.redMul(v),N=y.redSqr().redIAdd(A).redISub(E).redISub(E),O=y.redMul(E.redISub(N)).redISub(a.redMul(A)),T=this.z.redMul(r.z).redMul(p);return this.curve.jpoint(N,O,T)},wr.prototype.mixedAdd=function(r){if(this.isInfinity())return r.toJ();if(r.isInfinity())return this;var e=this.z.redSqr(),t=this.x,i=r.x.redMul(e),s=this.y,a=r.y.redMul(e).redMul(this.z),f=t.redSub(i),p=s.redSub(a);if(f.cmpn(0)===0)return p.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var y=f.redSqr(),v=y.redMul(f),A=t.redMul(y),E=p.redSqr().redIAdd(v).redISub(A).redISub(A),N=p.redMul(A.redISub(E)).redISub(s.redMul(v)),O=this.z.redMul(f);return this.curve.jpoint(E,N,O)},wr.prototype.dblp=function(r){if(r===0)return this;if(this.isInfinity())return this;if(!r)return this.dbl();var e;if(this.curve.zeroA||this.curve.threeA){var t=this;for(e=0;e<r;e++)t=t.dbl();return t}var i=this.curve.a,s=this.curve.tinv,a=this.x,f=this.y,p=this.z,y=p.redSqr().redSqr(),v=f.redAdd(f);for(e=0;e<r;e++){var A=a.redSqr(),E=v.redSqr(),N=E.redSqr(),O=A.redAdd(A).redIAdd(A).redIAdd(i.redMul(y)),T=a.redMul(E),F=O.redSqr().redISub(T.redAdd(T)),G=T.redISub(F),W=O.redMul(G);W=W.redIAdd(W).redISub(N);var ee=v.redMul(p);e+1<r&&(y=y.redMul(N)),a=F,p=ee,v=W}return this.curve.jpoint(a,v.redMul(s),p)},wr.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},wr.prototype._zeroDbl=function(){var r,e,t;if(this.zOne){var i=this.x.redSqr(),s=this.y.redSqr(),a=s.redSqr(),f=this.x.redAdd(s).redSqr().redISub(i).redISub(a);f=f.redIAdd(f);var p=i.redAdd(i).redIAdd(i),y=p.redSqr().redISub(f).redISub(f),v=a.redIAdd(a);v=v.redIAdd(v),v=v.redIAdd(v),r=y,e=p.redMul(f.redISub(y)).redISub(v),t=this.y.redAdd(this.y)}else{var A=this.x.redSqr(),E=this.y.redSqr(),N=E.redSqr(),O=this.x.redAdd(E).redSqr().redISub(A).redISub(N);O=O.redIAdd(O);var T=A.redAdd(A).redIAdd(A),F=T.redSqr(),G=N.redIAdd(N);G=G.redIAdd(G),G=G.redIAdd(G),r=F.redISub(O).redISub(O),e=T.redMul(O.redISub(r)).redISub(G),t=this.y.redMul(this.z),t=t.redIAdd(t)}return this.curve.jpoint(r,e,t)},wr.prototype._threeDbl=function(){var r,e,t;if(this.zOne){var i=this.x.redSqr(),s=this.y.redSqr(),a=s.redSqr(),f=this.x.redAdd(s).redSqr().redISub(i).redISub(a);f=f.redIAdd(f);var p=i.redAdd(i).redIAdd(i).redIAdd(this.curve.a),y=p.redSqr().redISub(f).redISub(f);r=y;var v=a.redIAdd(a);v=v.redIAdd(v),v=v.redIAdd(v),e=p.redMul(f.redISub(y)).redISub(v),t=this.y.redAdd(this.y)}else{var A=this.z.redSqr(),E=this.y.redSqr(),N=this.x.redMul(E),O=this.x.redSub(A).redMul(this.x.redAdd(A));O=O.redAdd(O).redIAdd(O);var T=N.redIAdd(N);T=T.redIAdd(T);var F=T.redAdd(T);r=O.redSqr().redISub(F),t=this.y.redAdd(this.z).redSqr().redISub(E).redISub(A);var G=E.redSqr();G=G.redIAdd(G),G=G.redIAdd(G),G=G.redIAdd(G),e=O.redMul(T.redISub(r)).redISub(G)}return this.curve.jpoint(r,e,t)},wr.prototype._dbl=function(){var r=this.curve.a,e=this.x,t=this.y,i=this.z,s=i.redSqr().redSqr(),a=e.redSqr(),f=t.redSqr(),p=a.redAdd(a).redIAdd(a).redIAdd(r.redMul(s)),y=e.redAdd(e);y=y.redIAdd(y);var v=y.redMul(f),A=p.redSqr().redISub(v.redAdd(v)),E=v.redISub(A),N=f.redSqr();N=N.redIAdd(N),N=N.redIAdd(N),N=N.redIAdd(N);var O=p.redMul(E).redISub(N),T=t.redAdd(t).redMul(i);return this.curve.jpoint(A,O,T)},wr.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var r=this.x.redSqr(),e=this.y.redSqr(),t=this.z.redSqr(),i=e.redSqr(),s=r.redAdd(r).redIAdd(r),a=s.redSqr(),f=this.x.redAdd(e).redSqr().redISub(r).redISub(i);f=f.redIAdd(f),f=f.redAdd(f).redIAdd(f),f=f.redISub(a);var p=f.redSqr(),y=i.redIAdd(i);y=y.redIAdd(y),y=y.redIAdd(y),y=y.redIAdd(y);var v=s.redIAdd(f).redSqr().redISub(a).redISub(p).redISub(y),A=e.redMul(v);A=A.redIAdd(A),A=A.redIAdd(A);var E=this.x.redMul(p).redISub(A);E=E.redIAdd(E),E=E.redIAdd(E);var N=this.y.redMul(v.redMul(y.redISub(v)).redISub(f.redMul(p)));N=N.redIAdd(N),N=N.redIAdd(N),N=N.redIAdd(N);var O=this.z.redAdd(f).redSqr().redISub(t).redISub(p);return this.curve.jpoint(E,N,O)},wr.prototype.mul=function(r,e){return r=new vt(r,e),this.curve._wnafMul(this,r)},wr.prototype.eq=function(r){if(r.type==="affine")return this.eq(r.toJ());if(this===r)return!0;var e=this.z.redSqr(),t=r.z.redSqr();if(this.x.redMul(t).redISub(r.x.redMul(e)).cmpn(0)!==0)return!1;var i=e.redMul(this.z),s=t.redMul(r.z);return this.y.redMul(s).redISub(r.y.redMul(i)).cmpn(0)===0},wr.prototype.eqXToP=function(r){var e=this.z.redSqr(),t=r.toRed(this.curve.red).redMul(e);if(this.x.cmp(t)===0)return!0;for(var i=r.clone(),s=this.curve.redN.redMul(e);;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(t.redIAdd(s),this.x.cmp(t)===0)return!0}},wr.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},wr.prototype.isInfinity=function(){return this.z.cmpn(0)===0};var bh=Xa(function(r,e){var t=e;t.base=na,t.short=$A,t.mont=null,t.edwards=null}),mh=Xa(function(r,e){var t=e,i=bi.assert;function s(p){p.type==="short"?this.curve=new bh.short(p):p.type==="edwards"?this.curve=new bh.edwards(p):this.curve=new bh.mont(p),this.g=this.curve.g,this.n=this.curve.n,this.hash=p.hash,i(this.g.validate(),"Invalid curve"),i(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}t.PresetCurve=s;function a(p,y){Object.defineProperty(t,p,{configurable:!0,enumerable:!0,get:function(){var v=new s(y);return Object.defineProperty(t,p,{configurable:!0,enumerable:!0,value:v}),v}})}a("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:yn.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),a("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:yn.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),a("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:yn.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),a("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:yn.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),a("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:yn.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),a("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:yn.sha256,gRed:!1,g:["9"]}),a("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:yn.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var f;try{f=null.crash()}catch{f=void 0}a("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:yn.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",f]})});function xs(r){if(!(this instanceof xs))return new xs(r);this.hash=r.hash,this.predResist=!!r.predResist,this.outLen=this.hash.outSize,this.minEntropy=r.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=an.toArray(r.entropy,r.entropyEnc||"hex"),t=an.toArray(r.nonce,r.nonceEnc||"hex"),i=an.toArray(r.pers,r.persEnc||"hex");D0(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,t,i)}var Yp=xs;xs.prototype._init=function(r,e,t){var i=r.concat(e).concat(t);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var s=0;s<this.V.length;s++)this.K[s]=0,this.V[s]=1;this._update(i),this._reseed=1,this.reseedInterval=281474976710656},xs.prototype._hmac=function(){return new yn.hmac(this.hash,this.K)},xs.prototype._update=function(r){var e=this._hmac().update(this.V).update([0]);r&&(e=e.update(r)),this.K=e.digest(),this.V=this._hmac().update(this.V).digest(),r&&(this.K=this._hmac().update(this.V).update([1]).update(r).digest(),this.V=this._hmac().update(this.V).digest())},xs.prototype.reseed=function(r,e,t,i){typeof e!="string"&&(i=t,t=e,e=null),r=an.toArray(r,e),t=an.toArray(t,i),D0(r.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(r.concat(t||[])),this._reseed=1},xs.prototype.generate=function(r,e,t,i){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof e!="string"&&(i=t,t=e,e=null),t&&(t=an.toArray(t,i||"hex"),this._update(t));for(var s=[];s.length<r;)this.V=this._hmac().update(this.V).digest(),s=s.concat(this.V);var a=s.slice(0,r);return this._update(t),this._reseed++,an.encode(a,e)};var Du=bi.assert;function qr(r,e){this.ec=r,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}var Bu=qr;qr.fromPublic=function(r,e,t){return e instanceof qr?e:new qr(r,{pub:e,pubEnc:t})},qr.fromPrivate=function(r,e,t){return e instanceof qr?e:new qr(r,{priv:e,privEnc:t})},qr.prototype.validate=function(){var r=this.getPublic();return r.isInfinity()?{result:!1,reason:"Invalid public key"}:r.validate()?r.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},qr.prototype.getPublic=function(r,e){return typeof r=="string"&&(e=r,r=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),e?this.pub.encode(e,r):this.pub},qr.prototype.getPrivate=function(r){return r==="hex"?this.priv.toString(16,2):this.priv},qr.prototype._importPrivate=function(r,e){this.priv=new vt(r,e||16),this.priv=this.priv.umod(this.ec.curve.n)},qr.prototype._importPublic=function(r,e){if(r.x||r.y){this.ec.curve.type==="mont"?Du(r.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&Du(r.x&&r.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(r.x,r.y);return}this.pub=this.ec.curve.decodePoint(r,e)},qr.prototype.derive=function(r){return r.validate()||Du(r.validate(),"public point not validated"),r.mul(this.priv).getX()},qr.prototype.sign=function(r,e,t){return this.ec.sign(r,this,e,t)},qr.prototype.verify=function(r,e){return this.ec.verify(r,e,this)},qr.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var zA=bi.assert;function tf(r,e){if(r instanceof tf)return r;this._importDER(r,e)||(zA(r.r&&r.s,"Signature without r or s"),this.r=new vt(r.r,16),this.s=new vt(r.s,16),r.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=r.recoveryParam)}var hh=tf;function kA(){this.place=0}function $u(r,e){var t=r[e.place++];if(!(t&128))return t;var i=t&15;if(i===0||i>4)return!1;for(var s=0,a=0,f=e.place;a<i;a++,f++)s<<=8,s|=r[f],s>>>=0;return s<=127?!1:(e.place=f,s)}function Xp(r){for(var e=0,t=r.length-1;!r[e]&&!(r[e+1]&128)&&e<t;)e++;return e===0?r:r.slice(e)}tf.prototype._importDER=function(r,e){r=bi.toArray(r,e);var t=new kA;if(r[t.place++]!==48)return!1;var i=$u(r,t);if(i===!1||i+t.place!==r.length||r[t.place++]!==2)return!1;var s=$u(r,t);if(s===!1)return!1;var a=r.slice(t.place,s+t.place);if(t.place+=s,r[t.place++]!==2)return!1;var f=$u(r,t);if(f===!1||r.length!==f+t.place)return!1;var p=r.slice(t.place,f+t.place);if(a[0]===0)if(a[1]&128)a=a.slice(1);else return!1;if(p[0]===0)if(p[1]&128)p=p.slice(1);else return!1;return this.r=new vt(a),this.s=new vt(p),this.recoveryParam=null,!0};function zu(r,e){if(e<128){r.push(e);return}var t=1+(Math.log(e)/Math.LN2>>>3);for(r.push(t|128);--t;)r.push(e>>>(t<<3)&255);r.push(e)}tf.prototype.toDER=function(r){var e=this.r.toArray(),t=this.s.toArray();for(e[0]&128&&(e=[0].concat(e)),t[0]&128&&(t=[0].concat(t)),e=Xp(e),t=Xp(t);!t[0]&&!(t[1]&128);)t=t.slice(1);var i=[2];zu(i,e.length),i=i.concat(e),i.push(2),zu(i,t.length);var s=i.concat(t),a=[48];return zu(a,s.length),a=a.concat(s),bi.encode(a,r)};var LA=function(){throw new Error("unsupported")},Tv=bi.assert;function qi(r){if(!(this instanceof qi))return new qi(r);typeof r=="string"&&(Tv(Object.prototype.hasOwnProperty.call(mh,r),"Unknown curve "+r),r=mh[r]),r instanceof mh.PresetCurve&&(r={curve:r}),this.curve=r.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=r.curve.g,this.g.precompute(r.curve.n.bitLength()+1),this.hash=r.hash||r.curve.hash}var UA=qi;qi.prototype.keyPair=function(r){return new Bu(this,r)},qi.prototype.keyFromPrivate=function(r,e){return Bu.fromPrivate(this,r,e)},qi.prototype.keyFromPublic=function(r,e){return Bu.fromPublic(this,r,e)},qi.prototype.genKeyPair=function(r){r||(r={});for(var e=new Yp({hash:this.hash,pers:r.pers,persEnc:r.persEnc||"utf8",entropy:r.entropy||LA(this.hash.hmacStrength),entropyEnc:r.entropy&&r.entropyEnc||"utf8",nonce:this.n.toArray()}),t=this.n.byteLength(),i=this.n.sub(new vt(2));;){var s=new vt(e.generate(t));if(!(s.cmp(i)>0))return s.iaddn(1),this.keyFromPrivate(s)}},qi.prototype._truncateToN=function(r,e){var t=r.byteLength()*8-this.n.bitLength();return t>0&&(r=r.ushrn(t)),!e&&r.cmp(this.n)>=0?r.sub(this.n):r},qi.prototype.sign=function(r,e,t,i){typeof t=="object"&&(i=t,t=null),i||(i={}),e=this.keyFromPrivate(e,t),r=this._truncateToN(new vt(r,16));for(var s=this.n.byteLength(),a=e.getPrivate().toArray("be",s),f=r.toArray("be",s),p=new Yp({hash:this.hash,entropy:a,nonce:f,pers:i.pers,persEnc:i.persEnc||"utf8"}),y=this.n.sub(new vt(1)),v=0;;v++){var A=i.k?i.k(v):new vt(p.generate(this.n.byteLength()));if(A=this._truncateToN(A,!0),!(A.cmpn(1)<=0||A.cmp(y)>=0)){var E=this.g.mul(A);if(!E.isInfinity()){var N=E.getX(),O=N.umod(this.n);if(O.cmpn(0)!==0){var T=A.invm(this.n).mul(O.mul(e.getPrivate()).iadd(r));if(T=T.umod(this.n),T.cmpn(0)!==0){var F=(E.getY().isOdd()?1:0)|(N.cmp(O)!==0?2:0);return i.canonical&&T.cmp(this.nh)>0&&(T=this.n.sub(T),F^=1),new hh({r:O,s:T,recoveryParam:F})}}}}}},qi.prototype.verify=function(r,e,t,i){r=this._truncateToN(new vt(r,16)),t=this.keyFromPublic(t,i),e=new hh(e,"hex");var s=e.r,a=e.s;if(s.cmpn(1)<0||s.cmp(this.n)>=0||a.cmpn(1)<0||a.cmp(this.n)>=0)return!1;var f=a.invm(this.n),p=f.mul(r).umod(this.n),y=f.mul(s).umod(this.n),v;return this.curve._maxwellTrick?(v=this.g.jmulAdd(p,t.getPublic(),y),v.isInfinity()?!1:v.eqXToP(s)):(v=this.g.mulAdd(p,t.getPublic(),y),v.isInfinity()?!1:v.getX().umod(this.n).cmp(s)===0)},qi.prototype.recoverPubKey=function(r,e,t,i){Tv((3&t)===t,"The recovery param is more than two bits"),e=new hh(e,i);var s=this.n,a=new vt(r),f=e.r,p=e.s,y=t&1,v=t>>1;if(f.cmp(this.curve.p.umod(this.curve.n))>=0&&v)throw new Error("Unable to find sencond key candinate");v?f=this.curve.pointFromX(f.add(this.curve.n),y):f=this.curve.pointFromX(f,y);var A=e.r.invm(s),E=s.sub(a).mul(A).umod(s),N=p.mul(A).umod(s);return this.g.mulAdd(E,f,N)},qi.prototype.getKeyRecoveryParam=function(r,e,t,i){if(e=new hh(e,i),e.recoveryParam!==null)return e.recoveryParam;for(var s=0;s<4;s++){var a;try{a=this.recoverPubKey(r,e,s)}catch{continue}if(a.eq(t))return s}throw new Error("Unable to find valid recovery factor")};var jA=Xa(function(r,e){var t=e;t.version="6.5.4",t.utils=bi,t.rand=function(){throw new Error("unsupported")},t.curve=bh,t.curves=mh,t.ec=UA,t.eddsa=null}),FA=jA.ec;const KA="signing-key/5.7.0",h0=new Er(KA);let ku=null;function _s(){return ku||(ku=new FA("secp256k1")),ku}class HA{constructor(e){xo(this,"curve","secp256k1"),xo(this,"privateKey",ii(e)),P9(this.privateKey)!==32&&h0.throwArgumentError("invalid private key","privateKey","[[ REDACTED ]]");const t=_s().keyFromPrivate(Xt(this.privateKey));xo(this,"publicKey","0x"+t.getPublic(!1,"hex")),xo(this,"compressedPublicKey","0x"+t.getPublic(!0,"hex")),xo(this,"_isSigningKey",!0)}_addPoint(e){const t=_s().keyFromPublic(Xt(this.publicKey)),i=_s().keyFromPublic(Xt(e));return"0x"+t.pub.add(i.pub).encodeCompressed("hex")}signDigest(e){const t=_s().keyFromPrivate(Xt(this.privateKey)),i=Xt(e);i.length!==32&&h0.throwArgumentError("bad digest length","digest",e);const s=t.sign(i,{canonical:!0});return nv({recoveryParam:s.recoveryParam,r:Sn("0x"+s.r.toString(16),32),s:Sn("0x"+s.s.toString(16),32)})}computeSharedSecret(e){const t=_s().keyFromPrivate(Xt(this.privateKey)),i=_s().keyFromPublic(Xt(qv(e)));return Sn("0x"+t.derive(i.getPublic()).toString(16),32)}static isSigningKey(e){return!!(e&&e._isSigningKey)}}function VA(r,e){const t=nv(e),i={r:Xt(t.r),s:Xt(t.s)};return"0x"+_s().recoverPubKey(Xt(r),i,t.recoveryParam).encode("hex",!1)}function qv(r,e){const t=Xt(r);return t.length===32?new HA(t).publicKey:t.length===33?"0x"+_s().keyFromPublic(t).getPublic(!1,"hex"):t.length===65?ii(t):h0.throwArgumentError("invalid public or private key","key","[REDACTED]")}var Zp;(function(r){r[r.legacy=0]="legacy",r[r.eip2930=1]="eip2930",r[r.eip1559=2]="eip1559"})(Zp||(Zp={}));function GA(r){const e=qv(r);return n_(zp(O0(zp(e,1)),12))}function WA(r,e){return GA(VA(Xt(r),e))}const JA="https://rpc.walletconnect.com/v1";async function QA(r,e,t,i,s,a){switch(t.t){case"eip191":return YA(r,e,t.s);case"eip1271":return await XA(r,e,t.s,i,s,a);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${t.t}`)}}function YA(r,e,t){return WA(lv(e),t).toLowerCase()===r.toLowerCase()}async function XA(r,e,t,i,s,a){try{const f="0x1626ba7e",p="0000000000000000000000000000000000000000000000000000000000000040",y="0000000000000000000000000000000000000000000000000000000000000041",v=t.substring(2),A=lv(e).substring(2),E=f+A+p+y+v,N=await fetch(`${a||JA}/?chainId=${i}&projectId=${s}`,{method:"POST",body:JSON.stringify({id:ZA(),jsonrpc:"2.0",method:"eth_call",params:[{to:r,data:E},"latest"]})}),{result:O}=await N.json();return O?O.slice(0,f.length).toLowerCase()===f.toLowerCase():!1}catch(f){return console.error("isValidEip1271Signature: ",f),!1}}function ZA(){return Date.now()+Math.floor(Math.random()*1e3)}var ex=Object.defineProperty,tx=Object.defineProperties,rx=Object.getOwnPropertyDescriptors,e1=Object.getOwnPropertySymbols,ix=Object.prototype.hasOwnProperty,nx=Object.prototype.propertyIsEnumerable,t1=(r,e,t)=>e in r?ex(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,sx=(r,e)=>{for(var t in e||(e={}))ix.call(e,t)&&t1(r,t,e[t]);if(e1)for(var t of e1(e))nx.call(e,t)&&t1(r,t,e[t]);return r},ax=(r,e)=>tx(r,rx(e));const ox="did:pkh:",$0=r=>r==null?void 0:r.split(":"),Dv=r=>{const e=r&&$0(r);if(e)return r.includes(ox)?e[3]:e[1]},r1=r=>{const e=r&&$0(r);if(e)return e[2]+":"+e[3]},Th=r=>{const e=r&&$0(r);if(e)return e.pop()};async function i1(r){const{cacao:e,projectId:t}=r,{s:i,p:s}=e,a=Bv(s,s.iss),f=Th(s.iss);return await QA(f,a,i,Dv(s.iss),t)}const Bv=(r,e)=>{const t=`${r.domain} wants you to sign in with your Ethereum account:`,i=Th(e);if(!r.aud&&!r.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let s=r.statement||void 0;const a=`URI: ${r.aud||r.uri}`,f=`Version: ${r.version}`,p=`Chain ID: ${Dv(e)}`,y=`Nonce: ${r.nonce}`,v=`Issued At: ${r.iat}`,A=r.exp?`Expiration Time: ${r.exp}`:void 0,E=r.nbf?`Not Before: ${r.nbf}`:void 0,N=r.requestId?`Request ID: ${r.requestId}`:void 0,O=r.resources?`Resources:${r.resources.map(F=>`
- ${F}`).join("")}`:void 0,T=yh(r.resources);if(T){const F=Fo(T);s=vx(s,F)}return[t,i,"",s,"",a,f,p,y,v,A,E,N,O].filter(F=>F!=null).join(`
`)};function cx(r){return Buffer.from(JSON.stringify(r)).toString("base64")}function hx(r){return JSON.parse(Buffer.from(r,"base64").toString("utf-8"))}function Zs(r){if(!r)throw new Error("No recap provided, value is undefined");if(!r.att)throw new Error("No `att` property found");const e=Object.keys(r.att);if(!(e!=null&&e.length))throw new Error("No resources found in `att` property");e.forEach(t=>{const i=r.att[t];if(Array.isArray(i))throw new Error(`Resource must be an object: ${t}`);if(typeof i!="object")throw new Error(`Resource must be an object: ${t}`);if(!Object.keys(i).length)throw new Error(`Resource object is empty: ${t}`);Object.keys(i).forEach(s=>{const a=i[s];if(!Array.isArray(a))throw new Error(`Ability limits ${s} must be an array of objects, found: ${a}`);if(!a.length)throw new Error(`Value of ${s} is empty array, must be an array with objects`);a.forEach(f=>{if(typeof f!="object")throw new Error(`Ability limits (${s}) must be an array of objects, found: ${f}`)})})})}function fx(r,e,t,i={}){return t==null||t.sort((s,a)=>s.localeCompare(a)),{att:{[r]:ux(e,t,i)}}}function ux(r,e,t={}){e=e==null?void 0:e.sort((s,a)=>s.localeCompare(a));const i=e.map(s=>({[`${r}/${s}`]:[t]}));return Object.assign({},...i)}function $v(r){return Zs(r),`urn:recap:${cx(r).replace(/=/g,"")}`}function Fo(r){const e=hx(r.replace("urn:recap:",""));return Zs(e),e}function dx(r,e,t){const i=fx(r,e,t);return $v(i)}function lx(r){return r&&r.includes("urn:recap:")}function px(r,e){const t=Fo(r),i=Fo(e),s=gx(t,i);return $v(s)}function gx(r,e){Zs(r),Zs(e);const t=Object.keys(r.att).concat(Object.keys(e.att)).sort((s,a)=>s.localeCompare(a)),i={att:{}};return t.forEach(s=>{var a,f;Object.keys(((a=r.att)==null?void 0:a[s])||{}).concat(Object.keys(((f=e.att)==null?void 0:f[s])||{})).sort((p,y)=>p.localeCompare(y)).forEach(p=>{var y,v;i.att[s]=ax(sx({},i.att[s]),{[p]:((y=r.att[s])==null?void 0:y[p])||((v=e.att[s])==null?void 0:v[p])})})}),i}function vx(r="",e){Zs(e);const t="I further authorize the stated URI to perform the following actions on my behalf: ";if(r.includes(t))return r;const i=[];let s=0;Object.keys(e.att).forEach(p=>{const y=Object.keys(e.att[p]).map(E=>({ability:E.split("/")[0],action:E.split("/")[1]}));y.sort((E,N)=>E.action.localeCompare(N.action));const v={};y.forEach(E=>{v[E.ability]||(v[E.ability]=[]),v[E.ability].push(E.action)});const A=Object.keys(v).map(E=>(s++,`(${s}) '${E}': '${v[E].join("', '")}' for '${p}'.`));i.push(A.join(", ").replace(".,","."))});const a=i.join(" "),f=`${t}${a}`;return`${r?r+" ":""}${f}`}function n1(r){var e;const t=Fo(r);Zs(t);const i=(e=t.att)==null?void 0:e.eip155;return i?Object.keys(i).map(s=>s.split("/")[1]):[]}function s1(r){const e=Fo(r);Zs(e);const t=[];return Object.values(e.att).forEach(i=>{Object.values(i).forEach(s=>{var a;(a=s==null?void 0:s[0])!=null&&a.chains&&t.push(s[0].chains)})}),[...new Set(t.flat())]}function yh(r){if(!r)return;const e=r==null?void 0:r[r.length-1];return lx(e)?e:void 0}var bx=Object.defineProperty,mx=Object.defineProperties,yx=Object.getOwnPropertyDescriptors,a1=Object.getOwnPropertySymbols,wx=Object.prototype.hasOwnProperty,_x=Object.prototype.propertyIsEnumerable,o1=(r,e,t)=>e in r?bx(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Ax=(r,e)=>{for(var t in e||(e={}))wx.call(e,t)&&o1(r,t,e[t]);if(a1)for(var t of a1(e))_x.call(e,t)&&o1(r,t,e[t]);return r},xx=(r,e)=>mx(r,yx(e));const zv="base10",Fr="base16",f0="base64pad",z0="utf8",kv=0,is=1,Ex=0,c1=1,u0=12,k0=32;function Ix(){const r=ag.generateKeyPair();return{privateKey:Br(r.secretKey,Fr),publicKey:Br(r.publicKey,Fr)}}function d0(){const r=$h.randomBytes(k0);return Br(r,Fr)}function Mx(r,e){const t=ag.sharedKey(xr(r,Fr),xr(e,Fr),!0),i=new i4(zh.SHA256,t).expand(k0);return Br(i,Fr)}function wh(r){const e=zh.hash(xr(r,Fr));return Br(e,Fr)}function Zn(r){const e=zh.hash(xr(r,z0));return Br(e,Fr)}function Sx(r){return xr(`${r}`,zv)}function Xo(r){return Number(Br(r,zv))}function Px(r){const e=Sx(typeof r.type<"u"?r.type:kv);if(Xo(e)===is&&typeof r.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const t=typeof r.senderPublicKey<"u"?xr(r.senderPublicKey,Fr):void 0,i=typeof r.iv<"u"?xr(r.iv,Fr):$h.randomBytes(u0),s=new og.ChaCha20Poly1305(xr(r.symKey,Fr)).seal(i,xr(r.message,z0));return Nx({type:e,sealed:s,iv:i,senderPublicKey:t})}function Rx(r){const e=new og.ChaCha20Poly1305(xr(r.symKey,Fr)),{sealed:t,iv:i}=qh(r.encoded),s=e.open(i,t);if(s===null)throw new Error("Failed to decrypt");return Br(s,z0)}function Nx(r){if(Xo(r.type)===is){if(typeof r.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return Br(Yu([r.type,r.senderPublicKey,r.iv,r.sealed]),f0)}return Br(Yu([r.type,r.iv,r.sealed]),f0)}function qh(r){const e=xr(r,f0),t=e.slice(Ex,c1),i=c1;if(Xo(t)===is){const p=i+k0,y=p+u0,v=e.slice(i,p),A=e.slice(p,y),E=e.slice(y);return{type:t,sealed:E,iv:A,senderPublicKey:v}}const s=i+u0,a=e.slice(i,s),f=e.slice(s);return{type:t,sealed:f,iv:a}}function Cx(r,e){const t=qh(r);return Lv({type:Xo(t.type),senderPublicKey:typeof t.senderPublicKey<"u"?Br(t.senderPublicKey,Fr):void 0,receiverPublicKey:e==null?void 0:e.receiverPublicKey})}function Lv(r){const e=(r==null?void 0:r.type)||kv;if(e===is){if(typeof(r==null?void 0:r.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(r==null?void 0:r.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:r==null?void 0:r.senderPublicKey,receiverPublicKey:r==null?void 0:r.receiverPublicKey}}function h1(r){return r.type===is&&typeof r.senderPublicKey=="string"&&typeof r.receiverPublicKey=="string"}function Ox(r){return new Ag.ec("p256").keyFromPublic({x:Buffer.from(r.x,"base64").toString("hex"),y:Buffer.from(r.y,"base64").toString("hex")},"hex")}function Tx(r){let e=r.replace(/-/g,"+").replace(/_/g,"/");const t=e.length%4;return t>0&&(e+="=".repeat(4-t)),e}function qx(r){return Buffer.from(Tx(r),"base64")}function Dx(r,e){const[t,i,s]=r.split("."),a=qx(s);if(a.length!==64)throw new Error("Invalid signature length");const f=a.slice(0,32).toString("hex"),p=a.slice(32,64).toString("hex"),y=`${t}.${i}`,v=new zh.SHA256().update(Buffer.from(y)).digest(),A=Ox(e),E=Buffer.from(v).toString("hex"),N=A.verify(E,{r:f,s:p});if(!N)throw new Error("Invalid signature");const O=Zu(r);return xx(Ax({},O.payload),{isVerified:N})}const Bx="irn";function l0(r){return(r==null?void 0:r.relay)||{protocol:Bx}}function qo(r){const e=_4[r];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${r}`);return e}var $x=Object.defineProperty,zx=Object.defineProperties,kx=Object.getOwnPropertyDescriptors,f1=Object.getOwnPropertySymbols,Lx=Object.prototype.hasOwnProperty,Ux=Object.prototype.propertyIsEnumerable,u1=(r,e,t)=>e in r?$x(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,d1=(r,e)=>{for(var t in e||(e={}))Lx.call(e,t)&&u1(r,t,e[t]);if(f1)for(var t of f1(e))Ux.call(e,t)&&u1(r,t,e[t]);return r},jx=(r,e)=>zx(r,kx(e));function Fx(r,e="-"){const t={},i="relay"+e;return Object.keys(r).forEach(s=>{if(s.startsWith(i)){const a=s.replace(i,""),f=r[s];t[a]=f}}),t}function l1(r){r=r.includes("wc://")?r.replace("wc://",""):r,r=r.includes("wc:")?r.replace("wc:",""):r;const e=r.indexOf(":"),t=r.indexOf("?")!==-1?r.indexOf("?"):void 0,i=r.substring(0,e),s=r.substring(e+1,t).split("@"),a=typeof t<"u"?r.substring(t):"",f=Ah.parse(a),p=typeof f.methods=="string"?f.methods.split(","):void 0;return{protocol:i,topic:Kx(s[0]),version:parseInt(s[1],10),symKey:f.symKey,relay:Fx(f),methods:p,expiryTimestamp:f.expiryTimestamp?parseInt(f.expiryTimestamp,10):void 0}}function Kx(r){return r.startsWith("//")?r.substring(2):r}function Hx(r,e="-"){const t="relay",i={};return Object.keys(r).forEach(s=>{const a=t+e+s;r[s]&&(i[a]=r[s])}),i}function Vx(r){return`${r.protocol}:${r.topic}@${r.version}?`+Ah.stringify(d1(jx(d1({symKey:r.symKey},Hx(r.relay)),{expiryTimestamp:r.expiryTimestamp}),r.methods?{methods:r.methods.join(",")}:{}))}function Za(r){const e=[];return r.forEach(t=>{const[i,s]=t.split(":");e.push(`${i}:${s}`)}),e}function Gx(r){const e=[];return Object.values(r).forEach(t=>{e.push(...Za(t.accounts))}),e}function Wx(r,e){const t=[];return Object.values(r).forEach(i=>{Za(i.accounts).includes(e)&&t.push(...i.methods)}),t}function Jx(r,e){const t=[];return Object.values(r).forEach(i=>{Za(i.accounts).includes(e)&&t.push(...i.events)}),t}function L0(r){return r.includes(":")}function Do(r){return L0(r)?r.split(":")[0]:r}function Qx(r){const e={};return r==null||r.forEach(t=>{const[i,s]=t.split(":");e[i]||(e[i]={accounts:[],chains:[],events:[]}),e[i].accounts.push(t),e[i].chains.push(`${i}:${s}`)}),e}function p1(r,e){e=e.map(i=>i.replace("did:pkh:",""));const t=Qx(e);for(const[i,s]of Object.entries(t))s.methods?s.methods=gh(s.methods,r):s.methods=r,s.events=["chainChanged","accountsChanged"];return t}const Yx={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},Xx={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function le(r,e){const{message:t,code:i}=Xx[r];return{message:e?`${t} ${e}`:t,code:i}}function zt(r,e){const{message:t,code:i}=Yx[r];return{message:e?`${t} ${e}`:t,code:i}}function qn(r,e){return!!Array.isArray(r)}function Ko(r){return Object.getPrototypeOf(r)===Object.prototype&&Object.keys(r).length}function ni(r){return typeof r>"u"}function nr(r,e){return e&&ni(r)?!0:typeof r=="string"&&!!r.trim().length}function U0(r,e){return typeof r=="number"&&!isNaN(r)}function Zx(r,e){const{requiredNamespaces:t}=e,i=Object.keys(r.namespaces),s=Object.keys(t);let a=!0;return Gs(s,i)?(i.forEach(f=>{const{accounts:p,methods:y,events:v}=r.namespaces[f],A=Za(p),E=t[f];(!Gs(Qg(f,E),A)||!Gs(E.methods,y)||!Gs(E.events,v))&&(a=!1)}),a):!1}function Dh(r){return nr(r,!1)&&r.includes(":")?r.split(":").length===2:!1}function eE(r){if(nr(r,!1)&&r.includes(":")){const e=r.split(":");if(e.length===3){const t=e[0]+":"+e[1];return!!e[2]&&Dh(t)}}return!1}function tE(r){if(nr(r,!1))try{return typeof new URL(r)<"u"}catch{return!1}return!1}function rE(r){var e;return(e=r==null?void 0:r.proposer)==null?void 0:e.publicKey}function iE(r){return r==null?void 0:r.topic}function nE(r,e){let t=null;return nr(r==null?void 0:r.publicKey,!1)||(t=le("MISSING_OR_INVALID",`${e} controller public key should be a string`)),t}function g1(r){let e=!0;return qn(r)?r.length&&(e=r.every(t=>nr(t,!1))):e=!1,e}function sE(r,e,t){let i=null;return qn(e)&&e.length?e.forEach(s=>{i||Dh(s)||(i=zt("UNSUPPORTED_CHAINS",`${t}, chain ${s} should be a string and conform to "namespace:chainId" format`))}):Dh(r)||(i=zt("UNSUPPORTED_CHAINS",`${t}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),i}function aE(r,e,t){let i=null;return Object.entries(r).forEach(([s,a])=>{if(i)return;const f=sE(s,Qg(s,a),`${e} ${t}`);f&&(i=f)}),i}function oE(r,e){let t=null;return qn(r)?r.forEach(i=>{t||eE(i)||(t=zt("UNSUPPORTED_ACCOUNTS",`${e}, account ${i} should be a string and conform to "namespace:chainId:address" format`))}):t=zt("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),t}function cE(r,e){let t=null;return Object.values(r).forEach(i=>{if(t)return;const s=oE(i==null?void 0:i.accounts,`${e} namespace`);s&&(t=s)}),t}function hE(r,e){let t=null;return g1(r==null?void 0:r.methods)?g1(r==null?void 0:r.events)||(t=zt("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):t=zt("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),t}function Uv(r,e){let t=null;return Object.values(r).forEach(i=>{if(t)return;const s=hE(i,`${e}, namespace`);s&&(t=s)}),t}function fE(r,e,t){let i=null;if(r&&Ko(r)){const s=Uv(r,e);s&&(i=s);const a=aE(r,e,t);a&&(i=a)}else i=le("MISSING_OR_INVALID",`${e}, ${t} should be an object with data`);return i}function Lu(r,e){let t=null;if(r&&Ko(r)){const i=Uv(r,e);i&&(t=i);const s=cE(r,e);s&&(t=s)}else t=le("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return t}function jv(r){return nr(r.protocol,!0)}function uE(r,e){let t=!1;return r?r&&qn(r)&&r.length&&r.forEach(i=>{t=jv(i)}):t=!0,t}function dE(r){return typeof r=="number"}function ri(r){return typeof r<"u"&&typeof r!==null}function lE(r){return!(!r||typeof r!="object"||!r.code||!U0(r.code)||!r.message||!nr(r.message,!1))}function pE(r){return!(ni(r)||!nr(r.method,!1))}function gE(r){return!(ni(r)||ni(r.result)&&ni(r.error)||!U0(r.id)||!nr(r.jsonrpc,!1))}function vE(r){return!(ni(r)||!nr(r.name,!1))}function v1(r,e){return!(!Dh(e)||!Gx(r).includes(e))}function bE(r,e,t){return nr(t,!1)?Wx(r,e).includes(t):!1}function mE(r,e,t){return nr(t,!1)?Jx(r,e).includes(t):!1}function b1(r,e,t){let i=null;const s=yE(r),a=wE(e),f=Object.keys(s),p=Object.keys(a),y=m1(Object.keys(r)),v=m1(Object.keys(e)),A=y.filter(E=>!v.includes(E));return A.length&&(i=le("NON_CONFORMING_NAMESPACES",`${t} namespaces keys don't satisfy requiredNamespaces.
      Required: ${A.toString()}
      Received: ${Object.keys(e).toString()}`)),Gs(f,p)||(i=le("NON_CONFORMING_NAMESPACES",`${t} namespaces chains don't satisfy required namespaces.
      Required: ${f.toString()}
      Approved: ${p.toString()}`)),Object.keys(e).forEach(E=>{if(!E.includes(":")||i)return;const N=Za(e[E].accounts);N.includes(E)||(i=le("NON_CONFORMING_NAMESPACES",`${t} namespaces accounts don't satisfy namespace accounts for ${E}
        Required: ${E}
        Approved: ${N.toString()}`))}),f.forEach(E=>{i||(Gs(s[E].methods,a[E].methods)?Gs(s[E].events,a[E].events)||(i=le("NON_CONFORMING_NAMESPACES",`${t} namespaces events don't satisfy namespace events for ${E}`)):i=le("NON_CONFORMING_NAMESPACES",`${t} namespaces methods don't satisfy namespace methods for ${E}`))}),i}function yE(r){const e={};return Object.keys(r).forEach(t=>{var i;t.includes(":")?e[t]=r[t]:(i=r[t].chains)==null||i.forEach(s=>{e[s]={methods:r[t].methods,events:r[t].events}})}),e}function m1(r){return[...new Set(r.map(e=>e.includes(":")?e.split(":")[0]:e))]}function wE(r){const e={};return Object.keys(r).forEach(t=>{if(t.includes(":"))e[t]=r[t];else{const i=Za(r[t].accounts);i==null||i.forEach(s=>{e[s]={accounts:r[t].accounts.filter(a=>a.includes(`${s}:`)),methods:r[t].methods,events:r[t].events}})}}),e}function _E(r,e){return U0(r)&&r<=e.max&&r>=e.min}function y1(){const r=Qo();return new Promise(e=>{switch(r){case gi.browser:e(AE());break;case gi.reactNative:e(xE());break;case gi.node:e(EE());break;default:e(!0)}})}function AE(){return Jo()&&(navigator==null?void 0:navigator.onLine)}async function xE(){if(Wo()&&typeof global<"u"&&global!=null&&global.NetInfo){const r=await(global==null?void 0:global.NetInfo.fetch());return r==null?void 0:r.isConnected}return!0}function EE(){return!0}function IE(r){switch(Qo()){case gi.browser:ME(r);break;case gi.reactNative:SE(r);break}}function ME(r){!Wo()&&Jo()&&(window.addEventListener("online",()=>r(!0)),window.addEventListener("offline",()=>r(!1)))}function SE(r){Wo()&&typeof global<"u"&&global!=null&&global.NetInfo&&(global==null||global.NetInfo.addEventListener(e=>r(e==null?void 0:e.isConnected)))}const Uu={};class Mo{static get(e){return Uu[e]}static set(e,t){Uu[e]=t}static delete(e){delete Uu[e]}}class PE extends ta{constructor(e){super(),this.opts=e,this.protocol="wc",this.version=2}}class RE extends ta{constructor(e,t){super(),this.core=e,this.logger=t,this.records=new Map}}class NE{constructor(e,t){this.logger=e,this.core=t}}let CE=class extends ta{constructor(e,t){super(),this.relayer=e,this.logger=t}},OE=class extends ta{constructor(e){super()}},TE=class{constructor(e,t,i,s){this.core=e,this.logger=t,this.name=i}};class qE extends ta{constructor(e,t){super(),this.relayer=e,this.logger=t}}let DE=class extends ta{constructor(e,t){super(),this.core=e,this.logger=t}},BE=class{constructor(e,t,i){this.core=e,this.logger=t,this.store=i}},$E=class{constructor(e,t){this.projectId=e,this.logger=t}},zE=class{constructor(e,t,i){this.core=e,this.logger=t,this.telemetryEnabled=i}},kE=class{constructor(e){this.opts=e,this.protocol="wc",this.version=2}},LE=class{constructor(e){this.client=e}};var UE={};function jE(r,e){if(r.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),i=0;i<t.length;i++)t[i]=255;for(var s=0;s<r.length;s++){var a=r.charAt(s),f=a.charCodeAt(0);if(t[f]!==255)throw new TypeError(a+" is ambiguous");t[f]=s}var p=r.length,y=r.charAt(0),v=Math.log(p)/Math.log(256),A=Math.log(256)/Math.log(p);function E(T){if(T instanceof Uint8Array||(ArrayBuffer.isView(T)?T=new Uint8Array(T.buffer,T.byteOffset,T.byteLength):Array.isArray(T)&&(T=Uint8Array.from(T))),!(T instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(T.length===0)return"";for(var F=0,G=0,W=0,ee=T.length;W!==ee&&T[W]===0;)W++,F++;for(var de=(ee-W)*A+1>>>0,se=new Uint8Array(de);W!==ee;){for(var ae=T[W],ue=0,ne=de-1;(ae!==0||ue<G)&&ne!==-1;ne--,ue++)ae+=256*se[ne]>>>0,se[ne]=ae%p>>>0,ae=ae/p>>>0;if(ae!==0)throw new Error("Non-zero carry");G=ue,W++}for(var ve=de-G;ve!==de&&se[ve]===0;)ve++;for(var Ae=y.repeat(F);ve<de;++ve)Ae+=r.charAt(se[ve]);return Ae}function N(T){if(typeof T!="string")throw new TypeError("Expected String");if(T.length===0)return new Uint8Array;var F=0;if(T[F]!==" "){for(var G=0,W=0;T[F]===y;)G++,F++;for(var ee=(T.length-F)*v+1>>>0,de=new Uint8Array(ee);T[F];){var se=t[T.charCodeAt(F)];if(se===255)return;for(var ae=0,ue=ee-1;(se!==0||ae<W)&&ue!==-1;ue--,ae++)se+=p*de[ue]>>>0,de[ue]=se%256>>>0,se=se/256>>>0;if(se!==0)throw new Error("Non-zero carry");W=ae,F++}if(T[F]!==" "){for(var ne=ee-W;ne!==ee&&de[ne]===0;)ne++;for(var ve=new Uint8Array(G+(ee-ne)),Ae=G;ne!==ee;)ve[Ae++]=de[ne++];return ve}}}function O(T){var F=N(T);if(F)return F;throw new Error(`Non-${e} character`)}return{encode:E,decodeUnsafe:N,decode:O}}var FE=jE,KE=FE;const Fv=r=>{if(r instanceof Uint8Array&&r.constructor.name==="Uint8Array")return r;if(r instanceof ArrayBuffer)return new Uint8Array(r);if(ArrayBuffer.isView(r))return new Uint8Array(r.buffer,r.byteOffset,r.byteLength);throw new Error("Unknown type, must be binary type")},HE=r=>new TextEncoder().encode(r),VE=r=>new TextDecoder().decode(r);class GE{constructor(e,t,i){this.name=e,this.prefix=t,this.baseEncode=i}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class WE{constructor(e,t,i){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=i}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return Kv(this,e)}}class JE{constructor(e){this.decoders=e}or(e){return Kv(this,e)}decode(e){const t=e[0],i=this.decoders[t];if(i)return i.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Kv=(r,e)=>new JE({...r.decoders||{[r.prefix]:r},...e.decoders||{[e.prefix]:e}});class QE{constructor(e,t,i,s){this.name=e,this.prefix=t,this.baseEncode=i,this.baseDecode=s,this.encoder=new GE(e,t,i),this.decoder=new WE(e,t,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const rf=({name:r,prefix:e,encode:t,decode:i})=>new QE(r,e,t,i),Zo=({prefix:r,name:e,alphabet:t})=>{const{encode:i,decode:s}=KE(t,e);return rf({prefix:r,name:e,encode:i,decode:a=>Fv(s(a))})},YE=(r,e,t,i)=>{const s={};for(let A=0;A<e.length;++A)s[e[A]]=A;let a=r.length;for(;r[a-1]==="=";)--a;const f=new Uint8Array(a*t/8|0);let p=0,y=0,v=0;for(let A=0;A<a;++A){const E=s[r[A]];if(E===void 0)throw new SyntaxError(`Non-${i} character`);y=y<<t|E,p+=t,p>=8&&(p-=8,f[v++]=255&y>>p)}if(p>=t||255&y<<8-p)throw new SyntaxError("Unexpected end of data");return f},XE=(r,e,t)=>{const i=e[e.length-1]==="=",s=(1<<t)-1;let a="",f=0,p=0;for(let y=0;y<r.length;++y)for(p=p<<8|r[y],f+=8;f>t;)f-=t,a+=e[s&p>>f];if(f&&(a+=e[s&p<<t-f]),i)for(;a.length*t&7;)a+="=";return a},Mr=({name:r,prefix:e,bitsPerChar:t,alphabet:i})=>rf({prefix:e,name:r,encode(s){return XE(s,i,t)},decode(s){return YE(s,i,t,r)}}),ZE=rf({prefix:"\0",name:"identity",encode:r=>VE(r),decode:r=>HE(r)});var eI=Object.freeze({__proto__:null,identity:ZE});const tI=Mr({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var rI=Object.freeze({__proto__:null,base2:tI});const iI=Mr({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var nI=Object.freeze({__proto__:null,base8:iI});const sI=Zo({prefix:"9",name:"base10",alphabet:"0123456789"});var aI=Object.freeze({__proto__:null,base10:sI});const oI=Mr({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),cI=Mr({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var hI=Object.freeze({__proto__:null,base16:oI,base16upper:cI});const fI=Mr({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),uI=Mr({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),dI=Mr({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),lI=Mr({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),pI=Mr({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),gI=Mr({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),vI=Mr({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),bI=Mr({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),mI=Mr({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var yI=Object.freeze({__proto__:null,base32:fI,base32upper:uI,base32pad:dI,base32padupper:lI,base32hex:pI,base32hexupper:gI,base32hexpad:vI,base32hexpadupper:bI,base32z:mI});const wI=Zo({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),_I=Zo({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var AI=Object.freeze({__proto__:null,base36:wI,base36upper:_I});const xI=Zo({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),EI=Zo({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var II=Object.freeze({__proto__:null,base58btc:xI,base58flickr:EI});const MI=Mr({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),SI=Mr({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),PI=Mr({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),RI=Mr({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var NI=Object.freeze({__proto__:null,base64:MI,base64pad:SI,base64url:PI,base64urlpad:RI});const Hv=Array.from(""),CI=Hv.reduce((r,e,t)=>(r[t]=e,r),[]),OI=Hv.reduce((r,e,t)=>(r[e.codePointAt(0)]=t,r),[]);function TI(r){return r.reduce((e,t)=>(e+=CI[t],e),"")}function qI(r){const e=[];for(const t of r){const i=OI[t.codePointAt(0)];if(i===void 0)throw new Error(`Non-base256emoji character: ${t}`);e.push(i)}return new Uint8Array(e)}const DI=rf({prefix:"",name:"base256emoji",encode:TI,decode:qI});var BI=Object.freeze({__proto__:null,base256emoji:DI}),$I=Vv,w1=128,zI=127,kI=~zI,LI=Math.pow(2,31);function Vv(r,e,t){e=e||[],t=t||0;for(var i=t;r>=LI;)e[t++]=r&255|w1,r/=128;for(;r&kI;)e[t++]=r&255|w1,r>>>=7;return e[t]=r|0,Vv.bytes=t-i+1,e}var UI=p0,jI=128,_1=127;function p0(r,i){var t=0,i=i||0,s=0,a=i,f,p=r.length;do{if(a>=p)throw p0.bytes=0,new RangeError("Could not decode varint");f=r[a++],t+=s<28?(f&_1)<<s:(f&_1)*Math.pow(2,s),s+=7}while(f>=jI);return p0.bytes=a-i,t}var FI=Math.pow(2,7),KI=Math.pow(2,14),HI=Math.pow(2,21),VI=Math.pow(2,28),GI=Math.pow(2,35),WI=Math.pow(2,42),JI=Math.pow(2,49),QI=Math.pow(2,56),YI=Math.pow(2,63),XI=function(r){return r<FI?1:r<KI?2:r<HI?3:r<VI?4:r<GI?5:r<WI?6:r<JI?7:r<QI?8:r<YI?9:10},ZI={encode:$I,decode:UI,encodingLength:XI},Gv=ZI;const A1=(r,e,t=0)=>(Gv.encode(r,e,t),e),x1=r=>Gv.encodingLength(r),g0=(r,e)=>{const t=e.byteLength,i=x1(r),s=i+x1(t),a=new Uint8Array(s+t);return A1(r,a,0),A1(t,a,i),a.set(e,s),new eM(r,t,e,a)};class eM{constructor(e,t,i,s){this.code=e,this.size=t,this.digest=i,this.bytes=s}}const Wv=({name:r,code:e,encode:t})=>new tM(r,e,t);class tM{constructor(e,t,i){this.name=e,this.code=t,this.encode=i}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?g0(this.code,t):t.then(i=>g0(this.code,i))}else throw Error("Unknown type, must be binary type")}}const Jv=r=>async e=>new Uint8Array(await crypto.subtle.digest(r,e)),rM=Wv({name:"sha2-256",code:18,encode:Jv("SHA-256")}),iM=Wv({name:"sha2-512",code:19,encode:Jv("SHA-512")});var nM=Object.freeze({__proto__:null,sha256:rM,sha512:iM});const Qv=0,sM="identity",Yv=Fv,aM=r=>g0(Qv,Yv(r)),oM={code:Qv,name:sM,encode:Yv,digest:aM};var cM=Object.freeze({__proto__:null,identity:oM});new TextEncoder,new TextDecoder;const E1={...eI,...rI,...nI,...aI,...hI,...yI,...AI,...II,...NI,...BI};({...nM,...cM});function hM(r=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(r):new Uint8Array(r)}function Xv(r,e,t,i){return{name:r,prefix:e,encoder:{name:r,prefix:e,encode:t},decoder:{decode:i}}}const I1=Xv("utf8","u",r=>"u"+new TextDecoder("utf8").decode(r),r=>new TextEncoder().encode(r.substring(1))),ju=Xv("ascii","a",r=>{let e="a";for(let t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return e},r=>{r=r.substring(1);const e=hM(r.length);for(let t=0;t<r.length;t++)e[t]=r.charCodeAt(t);return e}),fM={utf8:I1,"utf-8":I1,hex:E1.base16,latin1:ju,ascii:ju,binary:ju,...E1};function uM(r,e="utf8"){const t=fM[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(r,"utf8"):t.decoder.decode(`${t.prefix}${r}`)}const Zv="wc",eb=2,j0="core",Dn=`${Zv}@2:${j0}:`,dM={name:j0,logger:"error"},lM={database:":memory:"},pM="crypto",M1="client_ed25519_seed",gM=ye.ONE_DAY,vM="keychain",bM="0.3",mM="messages",yM="0.3",wM=ye.SIX_HOURS,_M="publisher",tb="irn",AM="error",rb="wss://relay.walletconnect.org",xM="relayer",si={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},EM="_subscription",Oi={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},IM=.1,ib="2.15.2",MM=1e4,SM="0.3",PM="WALLETCONNECT_CLIENT_ID",_n={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},RM="subscription",NM="0.3",CM=ye.FIVE_SECONDS*1e3,OM="pairing",TM="0.3",So={wc_pairingDelete:{req:{ttl:ye.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:ye.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:ye.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:ye.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:ye.ONE_DAY,prompt:!1,tag:0},res:{ttl:ye.ONE_DAY,prompt:!1,tag:0}}},Na={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},en={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},qM="history",DM="0.3",BM="expirer",Ti={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},$M="0.3",zM="verify-api",kM="https://verify.walletconnect.com",nb="https://verify.walletconnect.org",Lo=nb,LM=`${Lo}/v3`,UM=[kM,nb],jM="echo",FM="https://echo.walletconnect.com",bn={pairing_started:"pairing_started",pairing_uri_validation_success:"pairing_uri_validation_success",pairing_uri_not_expired:"pairing_uri_not_expired",store_new_pairing:"store_new_pairing",subscribing_pairing_topic:"subscribing_pairing_topic",subscribe_pairing_topic_success:"subscribe_pairing_topic_success",existing_pairing:"existing_pairing",pairing_not_expired:"pairing_not_expired",emit_inactive_pairing:"emit_inactive_pairing",emit_session_proposal:"emit_session_proposal",subscribing_to_pairing_topic:"subscribing_to_pairing_topic"},Yn={no_wss_connection:"no_wss_connection",no_internet_connection:"no_internet_connection",malformed_pairing_uri:"malformed_pairing_uri",active_pairing_already_exists:"active_pairing_already_exists",subscribe_pairing_topic_failure:"subscribe_pairing_topic_failure",pairing_expired:"pairing_expired",proposal_expired:"proposal_expired",proposal_listener_not_found:"proposal_listener_not_found"},tn={session_approve_started:"session_approve_started",proposal_not_expired:"proposal_not_expired",session_namespaces_validation_success:"session_namespaces_validation_success",create_session_topic:"create_session_topic",subscribing_session_topic:"subscribing_session_topic",subscribe_session_topic_success:"subscribe_session_topic_success",publishing_session_approve:"publishing_session_approve",session_approve_publish_success:"session_approve_publish_success",store_session:"store_session",publishing_session_settle:"publishing_session_settle",session_settle_publish_success:"session_settle_publish_success"},js={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",proposal_expired:"proposal_expired",subscribe_session_topic_failure:"subscribe_session_topic_failure",session_approve_publish_failure:"session_approve_publish_failure",session_settle_publish_failure:"session_settle_publish_failure",session_approve_namespace_validation_failure:"session_approve_namespace_validation_failure",proposal_not_found:"proposal_not_found"},Fs={authenticated_session_approve_started:"authenticated_session_approve_started",authenticated_session_not_expired:"authenticated_session_not_expired",chains_caip2_compliant:"chains_caip2_compliant",chains_evm_compliant:"chains_evm_compliant",create_authenticated_session_topic:"create_authenticated_session_topic",cacaos_verified:"cacaos_verified",store_authenticated_session:"store_authenticated_session",subscribing_authenticated_session_topic:"subscribing_authenticated_session_topic",subscribe_authenticated_session_topic_success:"subscribe_authenticated_session_topic_success",publishing_authenticated_session_approve:"publishing_authenticated_session_approve",authenticated_session_approve_publish_success:"authenticated_session_approve_publish_success"},Po={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",missing_session_authenticate_request:"missing_session_authenticate_request",session_authenticate_request_expired:"session_authenticate_request_expired",chains_caip2_compliant_failure:"chains_caip2_compliant_failure",chains_evm_compliant_failure:"chains_evm_compliant_failure",invalid_cacao:"invalid_cacao",subscribe_authenticated_session_topic_failure:"subscribe_authenticated_session_topic_failure",authenticated_session_approve_publish_failure:"authenticated_session_approve_publish_failure",authenticated_session_pending_request_not_found:"authenticated_session_pending_request_not_found"},KM=.1,HM="event-client",VM=86400,GM="https://pulse.walletconnect.com/batch";class WM{constructor(e,t){this.core=e,this.logger=t,this.keychain=new Map,this.name=vM,this.version=bM,this.initialized=!1,this.storagePrefix=Dn,this.init=async()=>{if(!this.initialized){const i=await this.getKeyChain();typeof i<"u"&&(this.keychain=i),this.initialized=!0}},this.has=i=>(this.isInitialized(),this.keychain.has(i)),this.set=async(i,s)=>{this.isInitialized(),this.keychain.set(i,s),await this.persist()},this.get=i=>{this.isInitialized();const s=this.keychain.get(i);if(typeof s>"u"){const{message:a}=le("NO_MATCHING_KEY",`${this.name}: ${i}`);throw new Error(a)}return s},this.del=async i=>{this.isInitialized(),this.keychain.delete(i),await this.persist()},this.core=e,this.logger=Hr(t,this.name)}get context(){return mi(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,Yg(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?Xg(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=le("NOT_INITIALIZED",this.name);throw new Error(e)}}}class JM{constructor(e,t,i){this.core=e,this.logger=t,this.name=pM,this.randomSessionIdentifier=d0(),this.initialized=!1,this.init=async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)},this.hasKeys=s=>(this.isInitialized(),this.keychain.has(s)),this.getClientId=async()=>{this.isInitialized();const s=await this.getClientSeed(),a=ap(s);return vg(a.publicKey)},this.generateKeyPair=()=>{this.isInitialized();const s=Ix();return this.setPrivateKey(s.publicKey,s.privateKey)},this.signJWT=async s=>{this.isInitialized();const a=await this.getClientSeed(),f=ap(a),p=this.randomSessionIdentifier;return await uw(p,s,gM,f)},this.generateSharedKey=(s,a,f)=>{this.isInitialized();const p=this.getPrivateKey(s),y=Mx(p,a);return this.setSymKey(y,f)},this.setSymKey=async(s,a)=>{this.isInitialized();const f=a||wh(s);return await this.keychain.set(f,s),f},this.deleteKeyPair=async s=>{this.isInitialized(),await this.keychain.del(s)},this.deleteSymKey=async s=>{this.isInitialized(),await this.keychain.del(s)},this.encode=async(s,a,f)=>{this.isInitialized();const p=Lv(f),y=Ys(a);if(h1(p)){const N=p.senderPublicKey,O=p.receiverPublicKey;s=await this.generateSharedKey(N,O)}const v=this.getSymKey(s),{type:A,senderPublicKey:E}=p;return Px({type:A,symKey:v,message:y,senderPublicKey:E})},this.decode=async(s,a,f)=>{this.isInitialized();const p=Cx(a,f);if(h1(p)){const y=p.receiverPublicKey,v=p.senderPublicKey;s=await this.generateSharedKey(y,v)}try{const y=this.getSymKey(s),v=Rx({symKey:y,encoded:a});return Ua(v)}catch(y){this.logger.error(`Failed to decode message from topic: '${s}', clientId: '${await this.getClientId()}'`),this.logger.error(y)}},this.getPayloadType=s=>{const a=qh(s);return Xo(a.type)},this.getPayloadSenderPublicKey=s=>{const a=qh(s);return a.senderPublicKey?Br(a.senderPublicKey,Fr):void 0},this.core=e,this.logger=Hr(t,this.name),this.keychain=i||new WM(this.core,this.logger)}get context(){return mi(this.logger)}async setPrivateKey(e,t){return await this.keychain.set(e,t),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(M1)}catch{e=d0(),await this.keychain.set(M1,e)}return uM(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=le("NOT_INITIALIZED",this.name);throw new Error(e)}}}class QM extends NE{constructor(e,t){super(e,t),this.logger=e,this.core=t,this.messages=new Map,this.name=mM,this.version=yM,this.initialized=!1,this.storagePrefix=Dn,this.init=async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const i=await this.getRelayerMessages();typeof i<"u"&&(this.messages=i),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(i){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(i)}finally{this.initialized=!0}}},this.set=async(i,s)=>{this.isInitialized();const a=Zn(s);let f=this.messages.get(i);return typeof f>"u"&&(f={}),typeof f[a]<"u"||(f[a]=s,this.messages.set(i,f),await this.persist()),a},this.get=i=>{this.isInitialized();let s=this.messages.get(i);return typeof s>"u"&&(s={}),s},this.has=(i,s)=>{this.isInitialized();const a=this.get(i),f=Zn(s);return typeof a[f]<"u"},this.del=async i=>{this.isInitialized(),this.messages.delete(i),await this.persist()},this.logger=Hr(e,this.name),this.core=t}get context(){return mi(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,Yg(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?Xg(e):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){const{message:e}=le("NOT_INITIALIZED",this.name);throw new Error(e)}}}class YM extends CE{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,this.events=new zi.EventEmitter,this.name=_M,this.queue=new Map,this.publishTimeout=ye.toMiliseconds(ye.ONE_MINUTE),this.failedPublishTimeout=ye.toMiliseconds(ye.ONE_SECOND),this.needsTransportRestart=!1,this.publish=async(i,s,a)=>{var f;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:i,message:s,opts:a}});const p=(a==null?void 0:a.ttl)||wM,y=l0(a),v=(a==null?void 0:a.prompt)||!1,A=(a==null?void 0:a.tag)||0,E=(a==null?void 0:a.id)||Vs().toString(),N={topic:i,message:s,opts:{ttl:p,relay:y,prompt:v,tag:A,id:E,attestation:a==null?void 0:a.attestation}},O=`Failed to publish payload, please try again. id:${E} tag:${A}`,T=Date.now();let F,G=1;try{for(;F===void 0;){if(Date.now()-T>this.publishTimeout)throw new Error(O);this.logger.trace({id:E,attempts:G},`publisher.publish - attempt ${G}`),F=await await Oa(this.rpcPublish(i,s,p,y,v,A,E,a==null?void 0:a.attestation).catch(W=>this.logger.warn(W)),this.publishTimeout,O),G++,F||await new Promise(W=>setTimeout(W,this.failedPublishTimeout))}this.relayer.events.emit(si.publish,N),this.logger.debug("Successfully Published Payload"),this.logger.trace({type:"method",method:"publish",params:{id:E,topic:i,message:s,opts:a}})}catch(W){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(W),(f=a==null?void 0:a.internal)!=null&&f.throwOnFailedPublish)throw W;this.queue.set(E,N)}},this.on=(i,s)=>{this.events.on(i,s)},this.once=(i,s)=>{this.events.once(i,s)},this.off=(i,s)=>{this.events.off(i,s)},this.removeListener=(i,s)=>{this.events.removeListener(i,s)},this.relayer=e,this.logger=Hr(t,this.name),this.registerEventListeners()}get context(){return mi(this.logger)}rpcPublish(e,t,i,s,a,f,p,y){var v,A,E,N;const O={method:qo(s.protocol).publish,params:{topic:e,message:t,ttl:i,prompt:a,tag:f,attestation:y},id:p};return ni((v=O.params)==null?void 0:v.prompt)&&((A=O.params)==null||delete A.prompt),ni((E=O.params)==null?void 0:E.tag)&&((N=O.params)==null||delete N.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:O}),this.relayer.request(O)}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async e=>{const{topic:t,message:i,opts:s}=e;await this.publish(t,i,s)})}registerEventListeners(){this.relayer.core.heartbeat.on(ja.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(si.connection_stalled);return}this.checkQueue()}),this.relayer.on(si.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}}class XM{constructor(){this.map=new Map,this.set=(e,t)=>{const i=this.get(e);this.exists(e,t)||this.map.set(e,[...i,t])},this.get=e=>this.map.get(e)||[],this.exists=(e,t)=>this.get(e).includes(t),this.delete=(e,t)=>{if(typeof t>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const i=this.get(e);if(!this.exists(e,t))return;const s=i.filter(a=>a!==t);if(!s.length){this.map.delete(e);return}this.map.set(e,s)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}}var ZM=Object.defineProperty,eS=Object.defineProperties,tS=Object.getOwnPropertyDescriptors,S1=Object.getOwnPropertySymbols,rS=Object.prototype.hasOwnProperty,iS=Object.prototype.propertyIsEnumerable,P1=(r,e,t)=>e in r?ZM(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Ro=(r,e)=>{for(var t in e||(e={}))rS.call(e,t)&&P1(r,t,e[t]);if(S1)for(var t of S1(e))iS.call(e,t)&&P1(r,t,e[t]);return r},Fu=(r,e)=>eS(r,tS(e));class nS extends qE{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,this.subscriptions=new Map,this.topicMap=new XM,this.events=new zi.EventEmitter,this.name=RM,this.version=NM,this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=Dn,this.subscribeTimeout=ye.toMiliseconds(ye.ONE_MINUTE),this.restartInProgress=!1,this.batchSubscribeTopicsLimit=500,this.pendingBatchMessages=[],this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),this.clientId=await this.relayer.core.crypto.getClientId())},this.subscribe=async(i,s)=>{await this.restartToComplete(),this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:i,opts:s}});try{const a=l0(s),f={topic:i,relay:a};this.pending.set(i,f);const p=await this.rpcSubscribe(i,a);return typeof p=="string"&&(this.onSubscribe(p,f),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:i,opts:s}})),p}catch(a){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(a),a}},this.unsubscribe=async(i,s)=>{await this.restartToComplete(),this.isInitialized(),typeof(s==null?void 0:s.id)<"u"?await this.unsubscribeById(i,s.id,s):await this.unsubscribeByTopic(i,s)},this.isSubscribed=async i=>{if(this.topics.includes(i))return!0;const s=`${this.pendingSubscriptionWatchLabel}_${i}`;return await new Promise((a,f)=>{const p=new ye.Watch;p.start(s);const y=setInterval(()=>{!this.pending.has(i)&&this.topics.includes(i)&&(clearInterval(y),p.stop(s),a(!0)),p.elapsed(s)>=CM&&(clearInterval(y),p.stop(s),f(new Error("Subscription resolution timeout")))},this.pollingInterval)}).catch(()=>!1)},this.on=(i,s)=>{this.events.on(i,s)},this.once=(i,s)=>{this.events.once(i,s)},this.off=(i,s)=>{this.events.off(i,s)},this.removeListener=(i,s)=>{this.events.removeListener(i,s)},this.start=async()=>{await this.onConnect()},this.stop=async()=>{await this.onDisconnect()},this.restart=async()=>{this.restartInProgress=!0,await this.restore(),await this.reset(),this.restartInProgress=!1},this.relayer=e,this.logger=Hr(t,this.name),this.clientId=""}get context(){return mi(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(e,t){let i=!1;try{i=this.getSubscription(e).topic===t}catch{}return i}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,t){const i=this.topicMap.get(e);await Promise.all(i.map(async s=>await this.unsubscribeById(e,s,t)))}async unsubscribeById(e,t,i){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:i}});try{const s=l0(i);await this.rpcUnsubscribe(e,t,s);const a=zt("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,t,a),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:i}})}catch(s){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(s),s}}async rpcSubscribe(e,t){const i={method:qo(t.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i});try{return await await Oa(this.relayer.request(i).catch(s=>this.logger.warn(s)),this.subscribeTimeout)?Zn(e+this.clientId):null}catch{this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(si.connection_stalled)}return null}async rpcBatchSubscribe(e){if(!e.length)return;const t=e[0].relay,i={method:qo(t.protocol).batchSubscribe,params:{topics:e.map(s=>s.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i});try{return await await Oa(this.relayer.request(i).catch(s=>this.logger.warn(s)),this.subscribeTimeout)}catch{this.relayer.events.emit(si.connection_stalled)}}async rpcBatchFetchMessages(e){if(!e.length)return;const t=e[0].relay,i={method:qo(t.protocol).batchFetchMessages,params:{topics:e.map(a=>a.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i});let s;try{s=await await Oa(this.relayer.request(i).catch(a=>this.logger.warn(a)),this.subscribeTimeout)}catch{this.relayer.events.emit(si.connection_stalled)}return s}rpcUnsubscribe(e,t,i){const s={method:qo(i.protocol).unsubscribe,params:{topic:e,id:t}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s}),this.relayer.request(s)}onSubscribe(e,t){this.setSubscription(e,Fu(Ro({},t),{id:e})),this.pending.delete(t.topic)}onBatchSubscribe(e){e.length&&e.forEach(t=>{this.setSubscription(t.id,Ro({},t)),this.pending.delete(t.topic)})}async onUnsubscribe(e,t,i){this.events.removeAllListeners(t),this.hasSubscription(t,e)&&this.deleteSubscription(t,i),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,t){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:t}),this.addSubscription(e,t)}addSubscription(e,t){this.subscriptions.set(e,Ro({},t)),this.topicMap.set(t.topic,e),this.events.emit(_n.created,t)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const t=this.subscriptions.get(e);if(!t){const{message:i}=le("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(i)}return t}deleteSubscription(e,t){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:t});const i=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(i.topic,e),this.events.emit(_n.deleted,Fu(Ro({},i),{reason:t}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(_n.sync)}async reset(){if(this.cached.length){const e=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let t=0;t<e;t++){const i=this.cached.splice(0,this.batchSubscribeTopicsLimit);await this.batchFetchMessages(i),await this.batchSubscribe(i)}}this.events.emit(_n.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:t}=le("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){if(!e.length)return;const t=await this.rpcBatchSubscribe(e);qn(t)&&this.onBatchSubscribe(t.map((i,s)=>Fu(Ro({},e[s]),{id:i})))}async batchFetchMessages(e){if(!e.length)return;this.logger.trace(`Fetching batch messages for ${e.length} subscriptions`);const t=await this.rpcBatchFetchMessages(e);t&&t.messages&&(this.pendingBatchMessages=this.pendingBatchMessages.concat(t.messages))}async onConnect(){await this.restart(),this.onEnable()}onDisconnect(){this.onDisable()}async checkPending(){if(!this.initialized||!this.relayer.connected)return;const e=[];this.pending.forEach(t=>{e.push(t)}),await this.batchSubscribe(e),this.pendingBatchMessages.length&&(await this.relayer.handleBatchMessageEvents(this.pendingBatchMessages),this.pendingBatchMessages=[])}registerEventListeners(){this.relayer.core.heartbeat.on(ja.pulse,async()=>{await this.checkPending()}),this.events.on(_n.created,async e=>{const t=_n.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),await this.persist()}),this.events.on(_n.deleted,async e=>{const t=_n.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),await this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=le("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(){this.restartInProgress&&await new Promise(e=>{const t=setInterval(()=>{this.restartInProgress||(clearInterval(t),e())},this.pollingInterval)})}}var sS=Object.defineProperty,R1=Object.getOwnPropertySymbols,aS=Object.prototype.hasOwnProperty,oS=Object.prototype.propertyIsEnumerable,N1=(r,e,t)=>e in r?sS(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,cS=(r,e)=>{for(var t in e||(e={}))aS.call(e,t)&&N1(r,t,e[t]);if(R1)for(var t of R1(e))oS.call(e,t)&&N1(r,t,e[t]);return r};class hS extends OE{constructor(e){super(e),this.protocol="wc",this.version=2,this.events=new zi.EventEmitter,this.name=xM,this.transportExplicitlyClosed=!1,this.initialized=!1,this.connectionAttemptInProgress=!1,this.connectionStatusPollingInterval=20,this.staleConnectionErrors=["socket hang up","stalled","interrupted"],this.hasExperiencedNetworkDisruption=!1,this.requestsInFlight=new Map,this.heartBeatTimeout=ye.toMiliseconds(ye.THIRTY_SECONDS+ye.ONE_SECOND),this.request=async t=>{var i,s;this.logger.debug("Publishing Request Payload");const a=t.id||Vs().toString();await this.toEstablishConnection();try{const f=this.provider.request(t);this.requestsInFlight.set(a,{promise:f,request:t}),this.logger.trace({id:a,method:t.method,topic:(i=t.params)==null?void 0:i.topic},"relayer.request - attempt to publish...");const p=await new Promise(async(y,v)=>{const A=()=>{v(new Error(`relayer.request - publish interrupted, id: ${a}`))};this.provider.on(Oi.disconnect,A);const E=await f;this.provider.off(Oi.disconnect,A),y(E)});return this.logger.trace({id:a,method:t.method,topic:(s=t.params)==null?void 0:s.topic},"relayer.request - published"),p}catch(f){throw this.logger.debug(`Failed to Publish Request: ${a}`),f}finally{this.requestsInFlight.delete(a)}},this.resetPingTimeout=()=>{if(Uo())try{clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{var t,i,s;(s=(i=(t=this.provider)==null?void 0:t.connection)==null?void 0:i.socket)==null||s.terminate()},this.heartBeatTimeout)}catch(t){this.logger.warn(t)}},this.onPayloadHandler=t=>{this.onProviderPayload(t),this.resetPingTimeout()},this.onConnectHandler=()=>{this.logger.trace("relayer connected"),this.startPingTimeout(),this.events.emit(si.connect)},this.onDisconnectHandler=()=>{this.logger.trace("relayer disconnected"),this.onProviderDisconnect()},this.onProviderErrorHandler=t=>{this.logger.error(t),this.events.emit(si.error,t),this.logger.info("Fatal socket error received, closing transport"),this.transportClose()},this.registerProviderListeners=()=>{this.provider.on(Oi.payload,this.onPayloadHandler),this.provider.on(Oi.connect,this.onConnectHandler),this.provider.on(Oi.disconnect,this.onDisconnectHandler),this.provider.on(Oi.error,this.onProviderErrorHandler)},this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?Hr(e.logger,this.name):y0(kh({level:e.logger||AM})),this.messages=new QM(this.logger,e.core),this.subscriber=new nS(this,this.logger),this.publisher=new YM(this,this.logger),this.relayUrl=(e==null?void 0:e.relayUrl)||rb,this.projectId=e.projectId,this.bundleId=c9(),this.provider={}}async init(){this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),await this.transportOpen(),this.initialized=!0,setTimeout(async()=>{this.subscriber.topics.length===0&&this.subscriber.pending.size===0&&(this.logger.info("No topics subscribed to after init, closing transport"),await this.transportClose(),this.transportExplicitlyClosed=!1)},MM)}get context(){return mi(this.logger)}get connected(){var e,t,i;return((i=(t=(e=this.provider)==null?void 0:e.connection)==null?void 0:t.socket)==null?void 0:i.readyState)===1}get connecting(){var e,t,i;return((i=(t=(e=this.provider)==null?void 0:e.connection)==null?void 0:t.socket)==null?void 0:i.readyState)===0}async publish(e,t,i){this.isInitialized(),await this.publisher.publish(e,t,i),await this.recordMessageEvent({topic:e,message:t,publishedAt:Date.now()})}async subscribe(e,t){var i;this.isInitialized();let s=((i=this.subscriber.topicMap.get(e))==null?void 0:i[0])||"",a;const f=p=>{p.topic===e&&(this.subscriber.off(_n.created,f),a())};return await Promise.all([new Promise(p=>{a=p,this.subscriber.on(_n.created,f)}),new Promise(async p=>{s=await this.subscriber.subscribe(e,t)||s,p()})]),s}async unsubscribe(e,t){this.isInitialized(),await this.subscriber.unsubscribe(e,t)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async transportDisconnect(){if(!this.hasExperiencedNetworkDisruption&&this.connected&&this.requestsInFlight.size>0)try{await Promise.all(Array.from(this.requestsInFlight.values()).map(e=>e.promise))}catch(e){this.logger.warn(e)}this.hasExperiencedNetworkDisruption||this.connected?await Oa(this.provider.disconnect(),2e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(e){await this.confirmOnlineStateOrThrow(),e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportDisconnect()),await this.createProvider(),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;try{await new Promise(async(t,i)=>{const s=()=>{this.provider.off(Oi.disconnect,s),i(new Error("Connection interrupted while trying to subscribe"))};this.provider.on(Oi.disconnect,s),await Oa(this.provider.connect(),ye.toMiliseconds(ye.ONE_MINUTE),`Socket stalled when trying to connect to ${this.relayUrl}`).catch(a=>{i(a)}).finally(()=>{clearTimeout(this.reconnectTimeout),this.reconnectTimeout=void 0}),this.subscriber.start().catch(a=>{this.logger.error(a),this.onDisconnectHandler()}),this.hasExperiencedNetworkDisruption=!1,t()})}catch(t){this.logger.error(t);const i=t;if(this.hasExperiencedNetworkDisruption=!0,!this.isConnectionStalled(i.message))throw t}finally{this.connectionAttemptInProgress=!1}}async restartTransport(e){this.connectionAttemptInProgress||(this.relayUrl=e||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await y1())throw new Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(e){if((e==null?void 0:e.length)===0){this.logger.trace("Batch message events is empty. Ignoring...");return}const t=e.sort((i,s)=>i.publishedAt-s.publishedAt);this.logger.trace(`Batch of ${t.length} message events sorted`);for(const i of t)try{await this.onMessageEvent(i)}catch(s){this.logger.warn(s)}this.logger.trace(`Batch of ${t.length} message events processed`)}startPingTimeout(){var e,t,i,s,a;if(Uo())try{(t=(e=this.provider)==null?void 0:e.connection)!=null&&t.socket&&((a=(s=(i=this.provider)==null?void 0:i.connection)==null?void 0:s.socket)==null||a.once("ping",()=>{this.resetPingTimeout()})),this.resetPingTimeout()}catch(f){this.logger.warn(f)}}isConnectionStalled(e){return this.staleConnectionErrors.some(t=>e.includes(t))}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new hn(new Nw(p9({sdkVersion:ib,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId}))),this.registerProviderListeners()}async recordMessageEvent(e){const{topic:t,message:i}=e;await this.messages.set(t,i)}async shouldIgnoreMessageEvent(e){const{topic:t,message:i}=e;if(!i||i.length===0)return this.logger.debug(`Ignoring invalid/empty message: ${i}`),!0;if(!await this.subscriber.isSubscribed(t))return this.logger.debug(`Ignoring message for non-subscribed topic ${t}`),!0;const s=this.messages.has(t,i);return s&&this.logger.debug(`Ignoring duplicate message: ${i}`),s}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),E0(e)){if(!e.method.endsWith(EM))return;const t=e.params,{topic:i,message:s,publishedAt:a,attestation:f}=t.data,p={topic:i,message:s,publishedAt:a,attestation:f};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(cS({type:"event",event:t.id},p)),this.events.emit(t.id,p),await this.acknowledgePayload(e),await this.onMessageEvent(p)}else Fh(e)&&this.events.emit(si.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(this.events.emit(si.message,e),await this.recordMessageEvent(e))}async acknowledgePayload(e){const t=Uh(e.id,!0);await this.provider.connection.send(t)}unregisterProviderListeners(){this.provider.off(Oi.payload,this.onPayloadHandler),this.provider.off(Oi.connect,this.onConnectHandler),this.provider.off(Oi.disconnect,this.onDisconnectHandler),this.provider.off(Oi.error,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let e=await y1();IE(async t=>{e!==t&&(e=t,t?await this.restartTransport().catch(i=>this.logger.error(i)):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))})}async onProviderDisconnect(){await this.subscriber.stop(),this.requestsInFlight.clear(),clearTimeout(this.pingTimeout),this.events.emit(si.disconnect),this.connectionAttemptInProgress=!1,!this.transportExplicitlyClosed&&(this.reconnectTimeout||(this.reconnectTimeout=setTimeout(async()=>{await this.transportOpen().catch(e=>this.logger.error(e))},ye.toMiliseconds(IM))))}isInitialized(){if(!this.initialized){const{message:e}=le("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){await this.confirmOnlineStateOrThrow(),!this.connected&&(this.connectionAttemptInProgress&&await new Promise(e=>{const t=setInterval(()=>{this.connected&&(clearInterval(t),e())},this.connectionStatusPollingInterval)}),await this.transportOpen())}}var fS=Object.defineProperty,C1=Object.getOwnPropertySymbols,uS=Object.prototype.hasOwnProperty,dS=Object.prototype.propertyIsEnumerable,O1=(r,e,t)=>e in r?fS(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,T1=(r,e)=>{for(var t in e||(e={}))uS.call(e,t)&&O1(r,t,e[t]);if(C1)for(var t of C1(e))dS.call(e,t)&&O1(r,t,e[t]);return r};class sa extends TE{constructor(e,t,i,s=Dn,a=void 0){super(e,t,i,s),this.core=e,this.logger=t,this.name=i,this.map=new Map,this.version=SM,this.cached=[],this.initialized=!1,this.storagePrefix=Dn,this.recentlyDeleted=[],this.recentlyDeletedLimit=200,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(f=>{this.getKey&&f!==null&&!ni(f)?this.map.set(this.getKey(f),f):rE(f)?this.map.set(f.id,f):iE(f)&&this.map.set(f.topic,f)}),this.cached=[],this.initialized=!0)},this.set=async(f,p)=>{this.isInitialized(),this.map.has(f)?await this.update(f,p):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:f,value:p}),this.map.set(f,p),await this.persist())},this.get=f=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:f}),this.getData(f)),this.getAll=f=>(this.isInitialized(),f?this.values.filter(p=>Object.keys(f).every(y=>Ow(p[y],f[y]))):this.values),this.update=async(f,p)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:f,update:p});const y=T1(T1({},this.getData(f)),p);this.map.set(f,y),await this.persist()},this.delete=async(f,p)=>{this.isInitialized(),this.map.has(f)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:f,reason:p}),this.map.delete(f),this.addToRecentlyDeleted(f),await this.persist())},this.logger=Hr(t,this.name),this.storagePrefix=s,this.getKey=a}get context(){return mi(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(e){this.recentlyDeleted.push(e),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const t=this.map.get(e);if(!t){if(this.recentlyDeleted.includes(e)){const{message:s}=le("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${e}`);throw this.logger.error(s),new Error(s)}const{message:i}=le("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(i),new Error(i)}return t}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:t}=le("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=le("NOT_INITIALIZED",this.name);throw new Error(e)}}}class lS{constructor(e,t){this.core=e,this.logger=t,this.name=OM,this.version=TM,this.events=new w0,this.initialized=!1,this.storagePrefix=Dn,this.ignoredPayloadTypes=[is],this.registeredMethods=[],this.init=async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))},this.register=({methods:i})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...i])]},this.create=async i=>{this.isInitialized();const s=d0(),a=await this.core.crypto.setSymKey(s),f=Ar(ye.FIVE_MINUTES),p={protocol:tb},y={topic:a,expiry:f,relay:p,active:!1},v=Vx({protocol:this.core.protocol,version:this.core.version,topic:a,symKey:s,relay:p,expiryTimestamp:f,methods:i==null?void 0:i.methods});return this.core.expirer.set(a,f),await this.pairings.set(a,y),await this.core.relayer.subscribe(a),{topic:a,uri:v}},this.pair=async i=>{this.isInitialized();const s=this.core.eventClient.createEvent({properties:{topic:i==null?void 0:i.uri,trace:[bn.pairing_started]}});this.isValidPair(i,s);const{topic:a,symKey:f,relay:p,expiryTimestamp:y,methods:v}=l1(i.uri);s.props.properties.topic=a,s.addTrace(bn.pairing_uri_validation_success),s.addTrace(bn.pairing_uri_not_expired);let A;if(this.pairings.keys.includes(a)){if(A=this.pairings.get(a),s.addTrace(bn.existing_pairing),A.active)throw s.setError(Yn.active_pairing_already_exists),new Error(`Pairing already exists: ${a}. Please try again with a new connection URI.`);s.addTrace(bn.pairing_not_expired)}const E=y||Ar(ye.FIVE_MINUTES),N={topic:a,relay:p,expiry:E,active:!1,methods:v};this.core.expirer.set(a,E),await this.pairings.set(a,N),s.addTrace(bn.store_new_pairing),i.activatePairing&&await this.activate({topic:a}),this.events.emit(Na.create,N),s.addTrace(bn.emit_inactive_pairing),this.core.crypto.keychain.has(a)||await this.core.crypto.setSymKey(f,a),s.addTrace(bn.subscribing_pairing_topic);try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{s.setError(Yn.no_internet_connection)}try{await this.core.relayer.subscribe(a,{relay:p})}catch(O){throw s.setError(Yn.subscribe_pairing_topic_failure),O}return s.addTrace(bn.subscribe_pairing_topic_success),N},this.activate=async({topic:i})=>{this.isInitialized();const s=Ar(ye.THIRTY_DAYS);this.core.expirer.set(i,s),await this.pairings.update(i,{active:!0,expiry:s})},this.ping=async i=>{this.isInitialized(),await this.isValidPing(i);const{topic:s}=i;if(this.pairings.keys.includes(s)){const a=await this.sendRequest(s,"wc_pairingPing",{}),{done:f,resolve:p,reject:y}=Hs();this.events.once(Et("pairing_ping",a),({error:v})=>{v?y(v):p()}),await f()}},this.updateExpiry=async({topic:i,expiry:s})=>{this.isInitialized(),await this.pairings.update(i,{expiry:s})},this.updateMetadata=async({topic:i,metadata:s})=>{this.isInitialized(),await this.pairings.update(i,{peerMetadata:s})},this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=async i=>{this.isInitialized(),await this.isValidDisconnect(i);const{topic:s}=i;this.pairings.keys.includes(s)&&(await this.sendRequest(s,"wc_pairingDelete",zt("USER_DISCONNECTED")),await this.deletePairing(s))},this.sendRequest=async(i,s,a)=>{const f=Ca(s,a),p=await this.core.crypto.encode(i,f),y=So[s].req;return this.core.history.set(i,f),this.core.relayer.publish(i,p,y),f.id},this.sendResult=async(i,s,a)=>{const f=Uh(i,a),p=await this.core.crypto.encode(s,f),y=await this.core.history.get(s,i),v=So[y.request.method].res;await this.core.relayer.publish(s,p,v),await this.core.history.resolve(f)},this.sendError=async(i,s,a)=>{const f=jh(i,a),p=await this.core.crypto.encode(s,f),y=await this.core.history.get(s,i),v=So[y.request.method]?So[y.request.method].res:So.unregistered_method.res;await this.core.relayer.publish(s,p,v),await this.core.history.resolve(f)},this.deletePairing=async(i,s)=>{await this.core.relayer.unsubscribe(i),await Promise.all([this.pairings.delete(i,zt("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(i),s?Promise.resolve():this.core.expirer.del(i)])},this.cleanup=async()=>{const i=this.pairings.getAll().filter(s=>ws(s.expiry));await Promise.all(i.map(s=>this.deletePairing(s.topic)))},this.onRelayEventRequest=i=>{const{topic:s,payload:a}=i;switch(a.method){case"wc_pairingPing":return this.onPairingPingRequest(s,a);case"wc_pairingDelete":return this.onPairingDeleteRequest(s,a);default:return this.onUnknownRpcMethodRequest(s,a)}},this.onRelayEventResponse=async i=>{const{topic:s,payload:a}=i,f=(await this.core.history.get(s,a.id)).request.method;switch(f){case"wc_pairingPing":return this.onPairingPingResponse(s,a);default:return this.onUnknownRpcMethodResponse(f)}},this.onPairingPingRequest=async(i,s)=>{const{id:a}=s;try{this.isValidPing({topic:i}),await this.sendResult(a,i,!0),this.events.emit(Na.ping,{id:a,topic:i})}catch(f){await this.sendError(a,i,f),this.logger.error(f)}},this.onPairingPingResponse=(i,s)=>{const{id:a}=s;setTimeout(()=>{mn(s)?this.events.emit(Et("pairing_ping",a),{}):Di(s)&&this.events.emit(Et("pairing_ping",a),{error:s.error})},500)},this.onPairingDeleteRequest=async(i,s)=>{const{id:a}=s;try{this.isValidDisconnect({topic:i}),await this.deletePairing(i),this.events.emit(Na.delete,{id:a,topic:i})}catch(f){await this.sendError(a,i,f),this.logger.error(f)}},this.onUnknownRpcMethodRequest=async(i,s)=>{const{id:a,method:f}=s;try{if(this.registeredMethods.includes(f))return;const p=zt("WC_METHOD_UNSUPPORTED",f);await this.sendError(a,i,p),this.logger.error(p)}catch(p){await this.sendError(a,i,p),this.logger.error(p)}},this.onUnknownRpcMethodResponse=i=>{this.registeredMethods.includes(i)||this.logger.error(zt("WC_METHOD_UNSUPPORTED",i))},this.isValidPair=(i,s)=>{var a;if(!ri(i)){const{message:p}=le("MISSING_OR_INVALID",`pair() params: ${i}`);throw s.setError(Yn.malformed_pairing_uri),new Error(p)}if(!tE(i.uri)){const{message:p}=le("MISSING_OR_INVALID",`pair() uri: ${i.uri}`);throw s.setError(Yn.malformed_pairing_uri),new Error(p)}const f=l1(i==null?void 0:i.uri);if(!((a=f==null?void 0:f.relay)!=null&&a.protocol)){const{message:p}=le("MISSING_OR_INVALID","pair() uri#relay-protocol");throw s.setError(Yn.malformed_pairing_uri),new Error(p)}if(!(f!=null&&f.symKey)){const{message:p}=le("MISSING_OR_INVALID","pair() uri#symKey");throw s.setError(Yn.malformed_pairing_uri),new Error(p)}if(f!=null&&f.expiryTimestamp&&ye.toMiliseconds(f==null?void 0:f.expiryTimestamp)<Date.now()){s.setError(Yn.pairing_expired);const{message:p}=le("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(p)}},this.isValidPing=async i=>{if(!ri(i)){const{message:a}=le("MISSING_OR_INVALID",`ping() params: ${i}`);throw new Error(a)}const{topic:s}=i;await this.isValidPairingTopic(s)},this.isValidDisconnect=async i=>{if(!ri(i)){const{message:a}=le("MISSING_OR_INVALID",`disconnect() params: ${i}`);throw new Error(a)}const{topic:s}=i;await this.isValidPairingTopic(s)},this.isValidPairingTopic=async i=>{if(!nr(i,!1)){const{message:s}=le("MISSING_OR_INVALID",`pairing topic should be a string: ${i}`);throw new Error(s)}if(!this.pairings.keys.includes(i)){const{message:s}=le("NO_MATCHING_KEY",`pairing topic doesn't exist: ${i}`);throw new Error(s)}if(ws(this.pairings.get(i).expiry)){await this.deletePairing(i);const{message:s}=le("EXPIRED",`pairing topic: ${i}`);throw new Error(s)}},this.core=e,this.logger=Hr(t,this.name),this.pairings=new sa(this.core,this.logger,this.name,this.storagePrefix)}get context(){return mi(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=le("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(si.message,async e=>{const{topic:t,message:i}=e;if(!this.pairings.keys.includes(t)||this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(i)))return;const s=await this.core.crypto.decode(t,i);try{E0(s)?(this.core.history.set(t,s),this.onRelayEventRequest({topic:t,payload:s})):Fh(s)&&(await this.core.history.resolve(s),await this.onRelayEventResponse({topic:t,payload:s}),this.core.history.delete(t,s.id))}catch(a){this.logger.error(a)}})}registerExpirerEvents(){this.core.expirer.on(Ti.expired,async e=>{const{topic:t}=ev(e.target);t&&this.pairings.keys.includes(t)&&(await this.deletePairing(t,!0),this.events.emit(Na.expire,{topic:t}))})}}class pS extends RE{constructor(e,t){super(e,t),this.core=e,this.logger=t,this.records=new Map,this.events=new zi.EventEmitter,this.name=qM,this.version=DM,this.cached=[],this.initialized=!1,this.storagePrefix=Dn,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(i=>this.records.set(i.id,i)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.set=(i,s,a)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:i,request:s,chainId:a}),this.records.has(s.id))return;const f={id:s.id,topic:i,request:{method:s.method,params:s.params||null},chainId:a,expiry:Ar(ye.THIRTY_DAYS)};this.records.set(f.id,f),this.persist(),this.events.emit(en.created,f)},this.resolve=async i=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:i}),!this.records.has(i.id))return;const s=await this.getRecord(i.id);typeof s.response>"u"&&(s.response=Di(i)?{error:i.error}:{result:i.result},this.records.set(s.id,s),this.persist(),this.events.emit(en.updated,s))},this.get=async(i,s)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:i,id:s}),await this.getRecord(s)),this.delete=(i,s)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:s}),this.values.forEach(a=>{if(a.topic===i){if(typeof s<"u"&&a.id!==s)return;this.records.delete(a.id),this.events.emit(en.deleted,a)}}),this.persist()},this.exists=async(i,s)=>(this.isInitialized(),this.records.has(s)?(await this.getRecord(s)).topic===i:!1),this.on=(i,s)=>{this.events.on(i,s)},this.once=(i,s)=>{this.events.once(i,s)},this.off=(i,s)=>{this.events.off(i,s)},this.removeListener=(i,s)=>{this.events.removeListener(i,s)},this.logger=Hr(t,this.name)}get context(){return mi(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(t=>{if(typeof t.response<"u")return;const i={topic:t.topic,request:Ca(t.request.method,t.request.params,t.id),chainId:t.chainId};return e.push(i)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const t=this.records.get(e);if(!t){const{message:i}=le("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(i)}return t}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(en.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:t}=le("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(en.created,e=>{const t=en.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e})}),this.events.on(en.updated,e=>{const t=en.updated;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e})}),this.events.on(en.deleted,e=>{const t=en.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e})}),this.core.heartbeat.on(ja.pulse,()=>{this.cleanup()})}cleanup(){try{this.isInitialized();let e=!1;this.records.forEach(t=>{ye.toMiliseconds(t.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${t.id}`),this.records.delete(t.id),this.events.emit(en.deleted,t,!1),e=!0)}),e&&this.persist()}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=le("NOT_INITIALIZED",this.name);throw new Error(e)}}}class gS extends DE{constructor(e,t){super(e,t),this.core=e,this.logger=t,this.expirations=new Map,this.events=new zi.EventEmitter,this.name=BM,this.version=$M,this.cached=[],this.initialized=!1,this.storagePrefix=Dn,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(i=>this.expirations.set(i.target,i)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.has=i=>{try{const s=this.formatTarget(i);return typeof this.getExpiration(s)<"u"}catch{return!1}},this.set=(i,s)=>{this.isInitialized();const a=this.formatTarget(i),f={target:a,expiry:s};this.expirations.set(a,f),this.checkExpiry(a,f),this.events.emit(Ti.created,{target:a,expiration:f})},this.get=i=>{this.isInitialized();const s=this.formatTarget(i);return this.getExpiration(s)},this.del=i=>{if(this.isInitialized(),this.has(i)){const s=this.formatTarget(i),a=this.getExpiration(s);this.expirations.delete(s),this.events.emit(Ti.deleted,{target:s,expiration:a})}},this.on=(i,s)=>{this.events.on(i,s)},this.once=(i,s)=>{this.events.once(i,s)},this.off=(i,s)=>{this.events.off(i,s)},this.removeListener=(i,s)=>{this.events.removeListener(i,s)},this.logger=Hr(t,this.name)}get context(){return mi(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return g9(e);if(typeof e=="number")return v9(e);const{message:t}=le("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(t)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(Ti.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:t}=le("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const t=this.expirations.get(e);if(!t){const{message:i}=le("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.warn(i),new Error(i)}return t}checkExpiry(e,t){const{expiry:i}=t;ye.toMiliseconds(i)-Date.now()<=0&&this.expire(e,t)}expire(e,t){this.expirations.delete(e),this.events.emit(Ti.expired,{target:e,expiration:t})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,t)=>this.checkExpiry(t,e))}registerEventListeners(){this.core.heartbeat.on(ja.pulse,()=>this.checkExpirations()),this.events.on(Ti.created,e=>{const t=Ti.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()}),this.events.on(Ti.expired,e=>{const t=Ti.expired;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()}),this.events.on(Ti.deleted,e=>{const t=Ti.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=le("NOT_INITIALIZED",this.name);throw new Error(e)}}}var Gt={};Object.defineProperty(Gt,"__esModule",{value:!0}),Gt.getLocalStorage=Gt.getLocalStorageOrThrow=Gt.getCrypto=Gt.getCryptoOrThrow=Gt.getLocation=Gt.getLocationOrThrow=Gt.getNavigator=Gt.getNavigatorOrThrow=sb=Gt.getDocument=Gt.getDocumentOrThrow=Gt.getFromWindowOrThrow=Gt.getFromWindow=void 0;function aa(r){let e;return typeof window<"u"&&typeof window[r]<"u"&&(e=window[r]),e}Gt.getFromWindow=aa;function eo(r){const e=aa(r);if(!e)throw new Error(`${r} is not defined in Window`);return e}Gt.getFromWindowOrThrow=eo;function vS(){return eo("document")}Gt.getDocumentOrThrow=vS;function bS(){return aa("document")}var sb=Gt.getDocument=bS;function mS(){return eo("navigator")}Gt.getNavigatorOrThrow=mS;function yS(){return aa("navigator")}Gt.getNavigator=yS;function wS(){return eo("location")}Gt.getLocationOrThrow=wS;function _S(){return aa("location")}Gt.getLocation=_S;function AS(){return eo("crypto")}Gt.getCryptoOrThrow=AS;function xS(){return aa("crypto")}Gt.getCrypto=xS;function ES(){return eo("localStorage")}Gt.getLocalStorageOrThrow=ES;function IS(){return aa("localStorage")}Gt.getLocalStorage=IS;class MS extends BE{constructor(e,t,i){super(e,t,i),this.core=e,this.logger=t,this.store=i,this.name=zM,this.verifyUrlV3=LM,this.storagePrefix=Dn,this.version=eb,this.init=async()=>{var s;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&ye.toMiliseconds((s=this.publicKey)==null?void 0:s.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()),this.publicKey||await this.fetchAndPersistPublicKey())},this.register=async s=>{if(!Jo()||this.isDevEnv)return;const a=window.location.origin,{id:f,decryptedId:p}=s,y=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${a}&id=${f}&decryptedId=${p}`;try{const v=sb(),A=this.startAbortTimer(ye.ONE_SECOND*5),E=await new Promise((N,O)=>{const T=()=>{window.removeEventListener("message",G),v.body.removeChild(F),O("attestation aborted")};this.abortController.signal.addEventListener("abort",T);const F=v.createElement("iframe");F.src=y,F.style.display="none",F.addEventListener("error",T,{signal:this.abortController.signal});const G=W=>{if(!W.data)return;const ee=JSON.parse(W.data);if(ee.type==="verify_attestation"){if(Zu(ee.attestation).payload.id!==f)return;clearInterval(A),v.body.removeChild(F),this.abortController.signal.removeEventListener("abort",T),window.removeEventListener("message",G),N(ee.attestation===null?"":ee.attestation)}};v.body.appendChild(F),window.addEventListener("message",G,{signal:this.abortController.signal})});return this.logger.debug("jwt attestation",E),E}catch(v){this.logger.warn(v)}return""},this.resolve=async s=>{if(this.isDevEnv)return"";const{attestationId:a,hash:f,encryptedId:p}=s;if(a===""){this.logger.debug("resolve: attestationId is empty, skipping");return}if(a){if(Zu(a).payload.id!==p)return;const v=await this.isValidJwtAttestation(a);if(v)return v}if(!f)return;const y=this.getVerifyUrl(s==null?void 0:s.verifyUrl);return this.fetchAttestation(f,y)},this.fetchAttestation=async(s,a)=>{this.logger.debug(`resolving attestation: ${s} from url: ${a}`);const f=this.startAbortTimer(ye.ONE_SECOND*5),p=await fetch(`${a}/attestation/${s}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(f),p.status===200?await p.json():void 0},this.getVerifyUrl=s=>{let a=s||Lo;return UM.includes(a)||(this.logger.info(`verify url: ${a}, not included in trusted list, assigning default: ${Lo}`),a=Lo),a},this.fetchPublicKey=async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);const s=this.startAbortTimer(ye.FIVE_SECONDS),a=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(s),await a.json()}catch(s){this.logger.warn(s)}},this.persistPublicKey=async s=>{this.logger.debug("persisting public key to local storage",s),await this.store.setItem(this.storeKey,s),this.publicKey=s},this.removePublicKey=async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0},this.isValidJwtAttestation=async s=>{const a=await this.getPublicKey();try{if(a)return this.validateAttestation(s,a)}catch(p){this.logger.error(p),this.logger.warn("error validating attestation")}const f=await this.fetchAndPersistPublicKey();try{if(f)return this.validateAttestation(s,f)}catch(p){this.logger.error(p),this.logger.warn("error validating attestation")}},this.getPublicKey=async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey(),this.fetchAndPersistPublicKey=async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise(async a=>{const f=await this.fetchPublicKey();f&&(await this.persistPublicKey(f),a(f))});const s=await this.fetchPromise;return this.fetchPromise=void 0,s},this.validateAttestation=(s,a)=>{const f=Dx(s,a.publicKey),p={hasExpired:ye.toMiliseconds(f.exp)<Date.now(),payload:f};if(p.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),new Error("JWT attestation expired");return{origin:p.payload.origin,isScam:p.payload.isScam}},this.logger=Hr(t,this.name),this.abortController=new AbortController,this.isDevEnv=Uo()&&UE.IS_VITEST,this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return mi(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),ye.toMiliseconds(e))}}class SS extends $E{constructor(e,t){super(e,t),this.projectId=e,this.logger=t,this.context=jM,this.registerDeviceToken=async i=>{const{clientId:s,token:a,notificationType:f,enableEncrypted:p=!1}=i,y=`${FM}/${this.projectId}/clients`;await fetch(y,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:s,type:f,token:a,always_raw:p})})},this.logger=Hr(t,this.context)}}var PS=Object.defineProperty,q1=Object.getOwnPropertySymbols,RS=Object.prototype.hasOwnProperty,NS=Object.prototype.propertyIsEnumerable,D1=(r,e,t)=>e in r?PS(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,No=(r,e)=>{for(var t in e||(e={}))RS.call(e,t)&&D1(r,t,e[t]);if(q1)for(var t of q1(e))NS.call(e,t)&&D1(r,t,e[t]);return r};class CS extends zE{constructor(e,t,i=!0){super(e,t,i),this.core=e,this.logger=t,this.context=HM,this.storagePrefix=Dn,this.storageVersion=KM,this.events=new Map,this.shouldPersist=!1,this.createEvent=s=>{const{event:a="ERROR",type:f="",properties:{topic:p,trace:y}}=s,v=y9(),A=this.core.projectId||"",E=Date.now(),N=No({eventId:v,bundleId:A,timestamp:E,props:{event:a,type:f,properties:{topic:p,trace:y}}},this.setMethods(v));return this.telemetryEnabled&&(this.events.set(v,N),this.shouldPersist=!0),N},this.getEvent=s=>{const{eventId:a,topic:f}=s;if(a)return this.events.get(a);const p=Array.from(this.events.values()).find(y=>y.props.properties.topic===f);if(p)return No(No({},p),this.setMethods(p.eventId))},this.deleteEvent=s=>{const{eventId:a}=s;this.events.delete(a),this.shouldPersist=!0},this.setEventListeners=()=>{this.core.heartbeat.on(ja.pulse,async()=>{this.shouldPersist&&await this.persist(),this.events.forEach(s=>{ye.fromMiliseconds(Date.now())-ye.fromMiliseconds(s.timestamp)>VM&&(this.events.delete(s.eventId),this.shouldPersist=!0)})})},this.setMethods=s=>({addTrace:a=>this.addTrace(s,a),setError:a=>this.setError(s,a)}),this.addTrace=(s,a)=>{const f=this.events.get(s);f&&(f.props.properties.trace.push(a),this.events.set(s,f),this.shouldPersist=!0)},this.setError=(s,a)=>{const f=this.events.get(s);f&&(f.props.type=a,f.timestamp=Date.now(),this.events.set(s,f),this.shouldPersist=!0)},this.persist=async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1},this.restore=async()=>{try{const s=await this.core.storage.getItem(this.storageKey)||[];if(!s.length)return;s.forEach(a=>{this.events.set(a.eventId,No(No({},a),this.setMethods(a.eventId)))})}catch(s){this.logger.warn(s)}},this.submit=async()=>{if(!this.telemetryEnabled||this.events.size===0)return;const s=[];for(const[a,f]of this.events)f.props.type&&s.push(f);if(s.length!==0)try{if((await fetch(`${GM}?projectId=${this.core.projectId}&st=events_sdk&sv=js-${ib}`,{method:"POST",body:JSON.stringify(s)})).ok)for(const a of s)this.events.delete(a.eventId),this.shouldPersist=!0}catch(a){this.logger.warn(a)}},this.logger=Hr(t,this.context),i?this.restore().then(async()=>{await this.submit(),this.setEventListeners()}):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}}var OS=Object.defineProperty,B1=Object.getOwnPropertySymbols,TS=Object.prototype.hasOwnProperty,qS=Object.prototype.propertyIsEnumerable,$1=(r,e,t)=>e in r?OS(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,z1=(r,e)=>{for(var t in e||(e={}))TS.call(e,t)&&$1(r,t,e[t]);if(B1)for(var t of B1(e))qS.call(e,t)&&$1(r,t,e[t]);return r};class F0 extends PE{constructor(e){var t;super(e),this.protocol=Zv,this.version=eb,this.name=j0,this.events=new zi.EventEmitter,this.initialized=!1,this.on=(f,p)=>this.events.on(f,p),this.once=(f,p)=>this.events.once(f,p),this.off=(f,p)=>this.events.off(f,p),this.removeListener=(f,p)=>this.events.removeListener(f,p),this.projectId=e==null?void 0:e.projectId,this.relayUrl=(e==null?void 0:e.relayUrl)||rb,this.customStoragePrefix=e!=null&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const i=kh({level:typeof(e==null?void 0:e.logger)=="string"&&e.logger?e.logger:dM.logger}),{logger:s,chunkLoggerController:a}=s4({opts:i,maxSizeInBytes:e==null?void 0:e.maxLogBlobSizeInBytes,loggerOverride:e==null?void 0:e.logger});this.logChunkController=a,(t=this.logChunkController)!=null&&t.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var f,p;(f=this.logChunkController)!=null&&f.downloadLogsBlobInBrowser&&((p=this.logChunkController)==null||p.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=Hr(s,this.name),this.heartbeat=new _0,this.crypto=new JM(this,this.logger,e==null?void 0:e.keychain),this.history=new pS(this,this.logger),this.expirer=new gS(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new Y4(z1(z1({},lM),e==null?void 0:e.storageOptions)),this.relayer=new hS({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new lS(this,this.logger),this.verify=new MS(this,this.logger,this.storage),this.echoClient=new SS(this.projectId||"",this.logger),this.eventClient=new CS(this,this.logger,e==null?void 0:e.telemetryEnabled)}static async init(e){const t=new F0(e);await t.initialize();const i=await t.crypto.getClientId();return await t.storage.setItem(PM,i),t}get context(){return mi(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var e;return(e=this.logChunkController)==null?void 0:e.logsToBlob({clientId:await this.crypto.getClientId()})}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}}const DS=F0,ab="wc",ob=2,cb="client",K0=`${ab}@${ob}:${cb}:`,Ku={name:cb,logger:"error",controller:!1,relayUrl:"wss://relay.walletconnect.com"},k1="WALLETCONNECT_DEEPLINK_CHOICE",BS="proposal",hb="Proposal expired",$S="session",Ia=ye.SEVEN_DAYS,zS="engine",_r={wc_sessionPropose:{req:{ttl:ye.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:ye.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:ye.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:ye.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:ye.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:ye.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:ye.ONE_DAY,prompt:!1,tag:1104},res:{ttl:ye.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:ye.ONE_DAY,prompt:!1,tag:1106},res:{ttl:ye.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:ye.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:ye.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:ye.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:ye.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:ye.ONE_DAY,prompt:!1,tag:1112},res:{ttl:ye.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:ye.ONE_DAY,prompt:!1,tag:1114},res:{ttl:ye.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:ye.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:ye.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:ye.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:ye.FIVE_MINUTES,prompt:!1,tag:1119}}},Hu={min:ye.FIVE_MINUTES,max:ye.SEVEN_DAYS},vn={idle:"IDLE",active:"ACTIVE"},kS="request",LS=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],US="wc",jS="auth",FS="authKeys",KS="pairingTopics",HS="requests",nf=`${US}@${1.5}:${jS}:`,_h=`${nf}:PUB_KEY`;var VS=Object.defineProperty,GS=Object.defineProperties,WS=Object.getOwnPropertyDescriptors,L1=Object.getOwnPropertySymbols,JS=Object.prototype.hasOwnProperty,QS=Object.prototype.propertyIsEnumerable,U1=(r,e,t)=>e in r?VS(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,fr=(r,e)=>{for(var t in e||(e={}))JS.call(e,t)&&U1(r,t,e[t]);if(L1)for(var t of L1(e))QS.call(e,t)&&U1(r,t,e[t]);return r},Ks=(r,e)=>GS(r,WS(e));class YS extends LE{constructor(e){super(e),this.name=zS,this.events=new w0,this.initialized=!1,this.requestQueue={state:vn.idle,queue:[]},this.sessionRequestQueue={state:vn.idle,queue:[]},this.requestQueueDelay=ye.ONE_SECOND,this.expectedPairingMethodMap=new Map,this.recentlyDeletedMap=new Map,this.recentlyDeletedLimit=200,this.relayMessageCache=[],this.init=async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),this.client.core.pairing.register({methods:Object.keys(_r)}),this.initialized=!0,setTimeout(()=>{this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},ye.toMiliseconds(this.requestQueueDelay)))},this.connect=async t=>{await this.isInitialized();const i=Ks(fr({},t),{requiredNamespaces:t.requiredNamespaces||{},optionalNamespaces:t.optionalNamespaces||{}});await this.isValidConnect(i);const{pairingTopic:s,requiredNamespaces:a,optionalNamespaces:f,sessionProperties:p,relays:y}=i;let v=s,A,E=!1;try{v&&(E=this.client.core.pairing.pairings.get(v).active)}catch(se){throw this.client.logger.error(`connect() -> pairing.get(${v}) failed`),se}if(!v||!E){const{topic:se,uri:ae}=await this.client.core.pairing.create();v=se,A=ae}if(!v){const{message:se}=le("NO_MATCHING_KEY",`connect() pairing topic: ${v}`);throw new Error(se)}const N=await this.client.core.crypto.generateKeyPair(),O=_r.wc_sessionPropose.req.ttl||ye.FIVE_MINUTES,T=Ar(O),F=fr({requiredNamespaces:a,optionalNamespaces:f,relays:y??[{protocol:tb}],proposer:{publicKey:N,metadata:this.client.metadata},expiryTimestamp:T,pairingTopic:v},p&&{sessionProperties:p}),{reject:G,resolve:W,done:ee}=Hs(O,hb);this.events.once(Et("session_connect"),async({error:se,session:ae})=>{if(se)G(se);else if(ae){ae.self.publicKey=N;const ue=Ks(fr({},ae),{pairingTopic:F.pairingTopic,requiredNamespaces:F.requiredNamespaces,optionalNamespaces:F.optionalNamespaces});await this.client.session.set(ae.topic,ue),await this.setExpiry(ae.topic,ae.expiry),v&&await this.client.core.pairing.updateMetadata({topic:v,metadata:ae.peer.metadata}),this.cleanupDuplicatePairings(ue),W(ue)}});const de=await this.sendRequest({topic:v,method:"wc_sessionPropose",params:F,throwOnFailedPublish:!0});return await this.setProposal(de,fr({id:de},F)),{uri:A,approval:ee}},this.pair=async t=>{await this.isInitialized();try{return await this.client.core.pairing.pair(t)}catch(i){throw this.client.logger.error("pair() failed"),i}},this.approve=async t=>{var i,s,a;const f=this.client.core.eventClient.createEvent({properties:{topic:(i=t==null?void 0:t.id)==null?void 0:i.toString(),trace:[tn.session_approve_started]}});try{await this.isInitialized()}catch(ne){throw f.setError(js.no_internet_connection),ne}try{await this.isValidProposalId(t==null?void 0:t.id)}catch(ne){throw this.client.logger.error(`approve() -> proposal.get(${t==null?void 0:t.id}) failed`),f.setError(js.proposal_not_found),ne}try{await this.isValidApprove(t)}catch(ne){throw this.client.logger.error("approve() -> isValidApprove() failed"),f.setError(js.session_approve_namespace_validation_failure),ne}const{id:p,relayProtocol:y,namespaces:v,sessionProperties:A,sessionConfig:E}=t,N=this.client.proposal.get(p);this.client.core.eventClient.deleteEvent({eventId:f.eventId});const{pairingTopic:O,proposer:T,requiredNamespaces:F,optionalNamespaces:G}=N;let W=(s=this.client.core.eventClient)==null?void 0:s.getEvent({topic:O});W||(W=(a=this.client.core.eventClient)==null?void 0:a.createEvent({type:tn.session_approve_started,properties:{topic:O,trace:[tn.session_approve_started,tn.session_namespaces_validation_success]}}));const ee=await this.client.core.crypto.generateKeyPair(),de=T.publicKey,se=await this.client.core.crypto.generateSharedKey(ee,de),ae=fr(fr({relay:{protocol:y??"irn"},namespaces:v,controller:{publicKey:ee,metadata:this.client.metadata},expiry:Ar(Ia)},A&&{sessionProperties:A}),E&&{sessionConfig:E});W.addTrace(tn.subscribing_session_topic);try{await this.client.core.relayer.subscribe(se)}catch(ne){throw W.setError(js.subscribe_session_topic_failure),ne}W.addTrace(tn.subscribe_session_topic_success);const ue=Ks(fr({},ae),{topic:se,requiredNamespaces:F,optionalNamespaces:G,pairingTopic:O,acknowledged:!1,self:ae.controller,peer:{publicKey:T.publicKey,metadata:T.metadata},controller:ee});await this.client.session.set(se,ue),W.addTrace(tn.store_session);try{W.addTrace(tn.publishing_session_settle),await this.sendRequest({topic:se,method:"wc_sessionSettle",params:ae,throwOnFailedPublish:!0}).catch(ne=>{throw W==null||W.setError(js.session_settle_publish_failure),ne}),W.addTrace(tn.session_settle_publish_success),W.addTrace(tn.publishing_session_approve),await this.sendResult({id:p,topic:O,result:{relay:{protocol:y??"irn"},responderPublicKey:ee},throwOnFailedPublish:!0}).catch(ne=>{throw W==null||W.setError(js.session_approve_publish_failure),ne}),W.addTrace(tn.session_approve_publish_success)}catch(ne){throw this.client.logger.error(ne),this.client.session.delete(se,zt("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(se),ne}return this.client.core.eventClient.deleteEvent({eventId:W.eventId}),await this.client.core.pairing.updateMetadata({topic:O,metadata:T.metadata}),await this.client.proposal.delete(p,zt("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:O}),await this.setExpiry(se,Ar(Ia)),{topic:se,acknowledged:()=>Promise.resolve(this.client.session.get(se))}},this.reject=async t=>{await this.isInitialized();try{await this.isValidReject(t)}catch(f){throw this.client.logger.error("reject() -> isValidReject() failed"),f}const{id:i,reason:s}=t;let a;try{a=this.client.proposal.get(i).pairingTopic}catch(f){throw this.client.logger.error(`reject() -> proposal.get(${i}) failed`),f}a&&(await this.sendError({id:i,topic:a,error:s,rpcOpts:_r.wc_sessionPropose.reject}),await this.client.proposal.delete(i,zt("USER_DISCONNECTED")))},this.update=async t=>{await this.isInitialized();try{await this.isValidUpdate(t)}catch(E){throw this.client.logger.error("update() -> isValidUpdate() failed"),E}const{topic:i,namespaces:s}=t,{done:a,resolve:f,reject:p}=Hs(),y=ys(),v=Vs().toString(),A=this.client.session.get(i).namespaces;return this.events.once(Et("session_update",y),({error:E})=>{E?p(E):f()}),await this.client.session.update(i,{namespaces:s}),await this.sendRequest({topic:i,method:"wc_sessionUpdate",params:{namespaces:s},throwOnFailedPublish:!0,clientRpcId:y,relayRpcId:v}).catch(E=>{this.client.logger.error(E),this.client.session.update(i,{namespaces:A}),p(E)}),{acknowledged:a}},this.extend=async t=>{await this.isInitialized();try{await this.isValidExtend(t)}catch(y){throw this.client.logger.error("extend() -> isValidExtend() failed"),y}const{topic:i}=t,s=ys(),{done:a,resolve:f,reject:p}=Hs();return this.events.once(Et("session_extend",s),({error:y})=>{y?p(y):f()}),await this.setExpiry(i,Ar(Ia)),this.sendRequest({topic:i,method:"wc_sessionExtend",params:{},clientRpcId:s,throwOnFailedPublish:!0}).catch(y=>{p(y)}),{acknowledged:a}},this.request=async t=>{await this.isInitialized();try{await this.isValidRequest(t)}catch(O){throw this.client.logger.error("request() -> isValidRequest() failed"),O}const{chainId:i,request:s,topic:a,expiry:f=_r.wc_sessionRequest.req.ttl}=t,p=this.client.session.get(a),y=ys(),v=Vs().toString(),{done:A,resolve:E,reject:N}=Hs(f,"Request expired. Please try again.");return this.events.once(Et("session_request",y),({error:O,result:T})=>{O?N(O):E(T)}),await Promise.all([new Promise(async O=>{await this.sendRequest({clientRpcId:y,relayRpcId:v,topic:a,method:"wc_sessionRequest",params:{request:Ks(fr({},s),{expiryTimestamp:Ar(f)}),chainId:i},expiry:f,throwOnFailedPublish:!0}).catch(T=>N(T)),this.client.events.emit("session_request_sent",{topic:a,request:s,chainId:i,id:y}),O()}),new Promise(async O=>{var T;if(!((T=p.sessionConfig)!=null&&T.disableDeepLink)){const F=await m9(this.client.core.storage,k1);b9({id:y,topic:a,wcDeepLink:F})}O()}),A()]).then(O=>O[2])},this.respond=async t=>{await this.isInitialized(),await this.isValidRespond(t);const{topic:i,response:s}=t,{id:a}=s;mn(s)?await this.sendResult({id:a,topic:i,result:s.result,throwOnFailedPublish:!0}):Di(s)&&await this.sendError({id:a,topic:i,error:s.error}),this.cleanupAfterResponse(t)},this.ping=async t=>{await this.isInitialized();try{await this.isValidPing(t)}catch(s){throw this.client.logger.error("ping() -> isValidPing() failed"),s}const{topic:i}=t;if(this.client.session.keys.includes(i)){const s=ys(),a=Vs().toString(),{done:f,resolve:p,reject:y}=Hs();this.events.once(Et("session_ping",s),({error:v})=>{v?y(v):p()}),await Promise.all([this.sendRequest({topic:i,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:s,relayRpcId:a}),f()])}else this.client.core.pairing.pairings.keys.includes(i)&&await this.client.core.pairing.ping({topic:i})},this.emit=async t=>{await this.isInitialized(),await this.isValidEmit(t);const{topic:i,event:s,chainId:a}=t,f=Vs().toString();await this.sendRequest({topic:i,method:"wc_sessionEvent",params:{event:s,chainId:a},throwOnFailedPublish:!0,relayRpcId:f})},this.disconnect=async t=>{await this.isInitialized(),await this.isValidDisconnect(t);const{topic:i}=t;if(this.client.session.keys.includes(i))await this.sendRequest({topic:i,method:"wc_sessionDelete",params:zt("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:i,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(i))await this.client.core.pairing.disconnect({topic:i});else{const{message:s}=le("MISMATCHED_TOPIC",`Session or pairing topic not found: ${i}`);throw new Error(s)}},this.find=t=>(this.isInitialized(),this.client.session.getAll().filter(i=>Zx(i,t))),this.getPendingSessionRequests=()=>this.client.pendingRequest.getAll(),this.authenticate=async t=>{this.isInitialized(),this.isValidAuthenticate(t);const{chains:i,statement:s="",uri:a,domain:f,nonce:p,type:y,exp:v,nbf:A,methods:E=[],expiry:N}=t,O=[...t.resources||[]],{topic:T,uri:F}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"]});this.client.logger.info({message:"Generated new pairing",pairing:{topic:T,uri:F}});const G=await this.client.core.crypto.generateKeyPair(),W=wh(G);if(await Promise.all([this.client.auth.authKeys.set(_h,{responseTopic:W,publicKey:G}),this.client.auth.pairingTopics.set(W,{topic:W,pairingTopic:T})]),await this.client.core.relayer.subscribe(W),this.client.logger.info(`sending request to new pairing topic: ${T}`),E.length>0){const{namespace:c}=$o(i[0]);let u=dx(c,"request",E);yh(O)&&(u=px(u,O.pop())),O.push(u)}const ee=N&&N>_r.wc_sessionAuthenticate.req.ttl?N:_r.wc_sessionAuthenticate.req.ttl,de={authPayload:{type:y??"caip122",chains:i,statement:s,aud:a,domain:f,version:"1",nonce:p,iat:new Date().toISOString(),exp:v,nbf:A,resources:O},requester:{publicKey:G,metadata:this.client.metadata},expiryTimestamp:Ar(ee)},se={eip155:{chains:i,methods:[...new Set(["personal_sign",...E])],events:["chainChanged","accountsChanged"]}},ae={requiredNamespaces:{},optionalNamespaces:se,relays:[{protocol:"irn"}],pairingTopic:T,proposer:{publicKey:G,metadata:this.client.metadata},expiryTimestamp:Ar(_r.wc_sessionPropose.req.ttl)},{done:ue,resolve:ne,reject:ve}=Hs(ee,"Request expired"),Ae=async({error:c,session:u})=>{if(this.events.off(Et("session_request",$),ot),c)ve(c);else if(u){u.self.publicKey=G,await this.client.session.set(u.topic,u),await this.setExpiry(u.topic,u.expiry),T&&await this.client.core.pairing.updateMetadata({topic:T,metadata:u.peer.metadata});const g=this.client.session.get(u.topic);await this.deleteProposal(b),ne({session:g})}},ot=async c=>{if(await this.deletePendingAuthRequest($,{message:"fulfilled",code:0}),c.error){const d=zt("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return c.error.code===d.code?void 0:(this.events.off(Et("session_connect"),Ae),ve(c.error.message))}await this.deleteProposal(b),this.events.off(Et("session_connect"),Ae);const{cacaos:u,responder:g}=c.result,_=[],M=[];for(const d of u){await i1({cacao:d,projectId:this.client.core.projectId})||(this.client.logger.error(d,"Signature verification failed"),ve(zt("SESSION_SETTLEMENT_FAILED","Signature verification failed")));const{p:l}=d,R=yh(l.resources),X=[r1(l.iss)],te=Th(l.iss);if(R){const I=n1(R),J=s1(R);_.push(...I),X.push(...J)}for(const I of X)M.push(`${I}:${te}`)}const S=await this.client.core.crypto.generateSharedKey(G,g.publicKey);let x;_.length>0&&(x={topic:S,acknowledged:!0,self:{publicKey:G,metadata:this.client.metadata},peer:g,controller:g.publicKey,expiry:Ar(Ia),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:T,namespaces:p1([...new Set(_)],[...new Set(M)])},await this.client.core.relayer.subscribe(S),await this.client.session.set(S,x),T&&await this.client.core.pairing.updateMetadata({topic:T,metadata:g.metadata}),x=this.client.session.get(S)),ne({auths:u,session:x})},$=ys(),b=ys();this.events.once(Et("session_connect"),Ae),this.events.once(Et("session_request",$),ot);try{await Promise.all([this.sendRequest({topic:T,method:"wc_sessionAuthenticate",params:de,expiry:t.expiry,throwOnFailedPublish:!0,clientRpcId:$}),this.sendRequest({topic:T,method:"wc_sessionPropose",params:ae,expiry:_r.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:b})])}catch(c){throw this.events.off(Et("session_connect"),Ae),this.events.off(Et("session_request",$),ot),c}return await this.setProposal(b,fr({id:b},ae)),await this.setAuthRequest($,{request:Ks(fr({},de),{verifyContext:{}}),pairingTopic:T}),{uri:F,response:ue}},this.approveSessionAuthenticate=async t=>{const{id:i,auths:s}=t,a=this.client.core.eventClient.createEvent({properties:{topic:i.toString(),trace:[Fs.authenticated_session_approve_started]}});try{this.isInitialized()}catch(F){throw a.setError(Po.no_internet_connection),F}const f=this.getPendingAuthRequest(i);if(!f)throw a.setError(Po.authenticated_session_pending_request_not_found),new Error(`Could not find pending auth request with id ${i}`);const p=f.requester.publicKey,y=await this.client.core.crypto.generateKeyPair(),v=wh(p),A={type:is,receiverPublicKey:p,senderPublicKey:y},E=[],N=[];for(const F of s){if(!await i1({cacao:F,projectId:this.client.core.projectId})){a.setError(Po.invalid_cacao);const se=zt("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:i,topic:v,error:se,encodeOpts:A}),new Error(se.message)}a.addTrace(Fs.cacaos_verified);const{p:G}=F,W=yh(G.resources),ee=[r1(G.iss)],de=Th(G.iss);if(W){const se=n1(W),ae=s1(W);E.push(...se),ee.push(...ae)}for(const se of ee)N.push(`${se}:${de}`)}const O=await this.client.core.crypto.generateSharedKey(y,p);a.addTrace(Fs.create_authenticated_session_topic);let T;if((E==null?void 0:E.length)>0){T={topic:O,acknowledged:!0,self:{publicKey:y,metadata:this.client.metadata},peer:{publicKey:p,metadata:f.requester.metadata},controller:p,expiry:Ar(Ia),authentication:s,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:f.pairingTopic,namespaces:p1([...new Set(E)],[...new Set(N)])},a.addTrace(Fs.subscribing_authenticated_session_topic);try{await this.client.core.relayer.subscribe(O)}catch(F){throw a.setError(Po.subscribe_authenticated_session_topic_failure),F}a.addTrace(Fs.subscribe_authenticated_session_topic_success),await this.client.session.set(O,T),a.addTrace(Fs.store_authenticated_session),await this.client.core.pairing.updateMetadata({topic:f.pairingTopic,metadata:f.requester.metadata})}a.addTrace(Fs.publishing_authenticated_session_approve);try{await this.sendResult({topic:v,id:i,result:{cacaos:s,responder:{publicKey:y,metadata:this.client.metadata}},encodeOpts:A,throwOnFailedPublish:!0})}catch(F){throw a.setError(Po.authenticated_session_approve_publish_failure),F}return await this.client.auth.requests.delete(i,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:f.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:a.eventId}),{session:T}},this.rejectSessionAuthenticate=async t=>{await this.isInitialized();const{id:i,reason:s}=t,a=this.getPendingAuthRequest(i);if(!a)throw new Error(`Could not find pending auth request with id ${i}`);const f=a.requester.publicKey,p=await this.client.core.crypto.generateKeyPair(),y=wh(f),v={type:is,receiverPublicKey:f,senderPublicKey:p};await this.sendError({id:i,topic:y,error:s,encodeOpts:v,rpcOpts:_r.wc_sessionAuthenticate.reject}),await this.client.auth.requests.delete(i,{message:"rejected",code:0}),await this.client.proposal.delete(i,zt("USER_DISCONNECTED"))},this.formatAuthMessage=t=>{this.isInitialized();const{request:i,iss:s}=t;return Bv(i,s)},this.processRelayMessageCache=()=>{setTimeout(async()=>{if(this.relayMessageCache.length!==0)for(;this.relayMessageCache.length>0;)try{const t=this.relayMessageCache.shift();t&&await this.onRelayMessage(t)}catch(t){this.client.logger.error(t)}},50)},this.cleanupDuplicatePairings=async t=>{if(t.pairingTopic)try{const i=this.client.core.pairing.pairings.get(t.pairingTopic),s=this.client.core.pairing.pairings.getAll().filter(a=>{var f,p;return((f=a.peerMetadata)==null?void 0:f.url)&&((p=a.peerMetadata)==null?void 0:p.url)===t.peer.metadata.url&&a.topic&&a.topic!==i.topic});if(s.length===0)return;this.client.logger.info(`Cleaning up ${s.length} duplicate pairing(s)`),await Promise.all(s.map(a=>this.client.core.pairing.disconnect({topic:a.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(i){this.client.logger.error(i)}},this.deleteSession=async t=>{var i;const{topic:s,expirerHasDeleted:a=!1,emitEvent:f=!0,id:p=0}=t,{self:y}=this.client.session.get(s);await this.client.core.relayer.unsubscribe(s),await this.client.session.delete(s,zt("USER_DISCONNECTED")),this.addToRecentlyDeleted(s,"session"),this.client.core.crypto.keychain.has(y.publicKey)&&await this.client.core.crypto.deleteKeyPair(y.publicKey),this.client.core.crypto.keychain.has(s)&&await this.client.core.crypto.deleteSymKey(s),a||this.client.core.expirer.del(s),this.client.core.storage.removeItem(k1).catch(v=>this.client.logger.warn(v)),this.getPendingSessionRequests().forEach(v=>{v.topic===s&&this.deletePendingSessionRequest(v.id,zt("USER_DISCONNECTED"))}),s===((i=this.sessionRequestQueue.queue[0])==null?void 0:i.topic)&&(this.sessionRequestQueue.state=vn.idle),f&&this.client.events.emit("session_delete",{id:p,topic:s})},this.deleteProposal=async(t,i)=>{if(i)try{const s=this.client.proposal.get(t),a=this.client.core.eventClient.getEvent({topic:s.pairingTopic});a==null||a.setError(js.proposal_expired)}catch{}await Promise.all([this.client.proposal.delete(t,zt("USER_DISCONNECTED")),i?Promise.resolve():this.client.core.expirer.del(t)]),this.addToRecentlyDeleted(t,"proposal")},this.deletePendingSessionRequest=async(t,i,s=!1)=>{await Promise.all([this.client.pendingRequest.delete(t,i),s?Promise.resolve():this.client.core.expirer.del(t)]),this.addToRecentlyDeleted(t,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(a=>a.id!==t),s&&(this.sessionRequestQueue.state=vn.idle,this.client.events.emit("session_request_expire",{id:t}))},this.deletePendingAuthRequest=async(t,i,s=!1)=>{await Promise.all([this.client.auth.requests.delete(t,i),s?Promise.resolve():this.client.core.expirer.del(t)])},this.setExpiry=async(t,i)=>{this.client.session.keys.includes(t)&&(this.client.core.expirer.set(t,i),await this.client.session.update(t,{expiry:i}))},this.setProposal=async(t,i)=>{this.client.core.expirer.set(t,Ar(_r.wc_sessionPropose.req.ttl)),await this.client.proposal.set(t,i)},this.setAuthRequest=async(t,i)=>{const{request:s,pairingTopic:a}=i;this.client.core.expirer.set(t,s.expiryTimestamp),await this.client.auth.requests.set(t,{authPayload:s.authPayload,requester:s.requester,expiryTimestamp:s.expiryTimestamp,id:t,pairingTopic:a,verifyContext:s.verifyContext})},this.setPendingSessionRequest=async t=>{const{id:i,topic:s,params:a,verifyContext:f}=t,p=a.request.expiryTimestamp||Ar(_r.wc_sessionRequest.req.ttl);this.client.core.expirer.set(i,p),await this.client.pendingRequest.set(i,{id:i,topic:s,params:a,verifyContext:f})},this.sendRequest=async t=>{const{topic:i,method:s,params:a,expiry:f,relayRpcId:p,clientRpcId:y,throwOnFailedPublish:v}=t,A=Ca(s,a,y);let E;try{E=await this.client.core.crypto.encode(i,A)}catch(T){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${i} failed`),T}let N;if(LS.includes(s)){const T=Zn(JSON.stringify(A)),F=Zn(E);N=await this.client.core.verify.register({id:F,decryptedId:T})}const O=_r[s].req;return O.attestation=N,f&&(O.ttl=f),p&&(O.id=p),this.client.core.history.set(i,A),v?(O.internal=Ks(fr({},O.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(i,E,O)):this.client.core.relayer.publish(i,E,O).catch(T=>this.client.logger.error(T)),A.id},this.sendResult=async t=>{const{id:i,topic:s,result:a,throwOnFailedPublish:f,encodeOpts:p}=t,y=Uh(i,a);let v;try{v=await this.client.core.crypto.encode(s,y,p)}catch(N){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${s} failed`),N}let A;try{A=await this.client.core.history.get(s,i)}catch(N){throw this.client.logger.error(`sendResult() -> history.get(${s}, ${i}) failed`),N}const E=_r[A.request.method].res;f?(E.internal=Ks(fr({},E.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(s,v,E)):this.client.core.relayer.publish(s,v,E).catch(N=>this.client.logger.error(N)),await this.client.core.history.resolve(y)},this.sendError=async t=>{const{id:i,topic:s,error:a,encodeOpts:f,rpcOpts:p}=t,y=jh(i,a);let v;try{v=await this.client.core.crypto.encode(s,y,f)}catch(N){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${s} failed`),N}let A;try{A=await this.client.core.history.get(s,i)}catch(N){throw this.client.logger.error(`sendError() -> history.get(${s}, ${i}) failed`),N}const E=p||_r[A.request.method].res;this.client.core.relayer.publish(s,v,E),await this.client.core.history.resolve(y)},this.cleanup=async()=>{const t=[],i=[];this.client.session.getAll().forEach(s=>{let a=!1;ws(s.expiry)&&(a=!0),this.client.core.crypto.keychain.has(s.topic)||(a=!0),a&&t.push(s.topic)}),this.client.proposal.getAll().forEach(s=>{ws(s.expiryTimestamp)&&i.push(s.id)}),await Promise.all([...t.map(s=>this.deleteSession({topic:s})),...i.map(s=>this.deleteProposal(s))])},this.onRelayEventRequest=async t=>{this.requestQueue.queue.push(t),await this.processRequestsQueue()},this.processRequestsQueue=async()=>{if(this.requestQueue.state===vn.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=vn.active;const t=this.requestQueue.queue.shift();if(t)try{await this.processRequest(t)}catch(i){this.client.logger.warn(i)}}this.requestQueue.state=vn.idle},this.processRequest=async t=>{const{topic:i,payload:s,attestation:a,encryptedId:f}=t,p=s.method;if(!this.shouldIgnorePairingRequest({topic:i,requestMethod:p}))switch(p){case"wc_sessionPropose":return await this.onSessionProposeRequest({topic:i,payload:s,attestation:a,encryptedId:f});case"wc_sessionSettle":return await this.onSessionSettleRequest(i,s);case"wc_sessionUpdate":return await this.onSessionUpdateRequest(i,s);case"wc_sessionExtend":return await this.onSessionExtendRequest(i,s);case"wc_sessionPing":return await this.onSessionPingRequest(i,s);case"wc_sessionDelete":return await this.onSessionDeleteRequest(i,s);case"wc_sessionRequest":return await this.onSessionRequest({topic:i,payload:s,attestation:a,encryptedId:f});case"wc_sessionEvent":return await this.onSessionEventRequest(i,s);case"wc_sessionAuthenticate":return await this.onSessionAuthenticateRequest({topic:i,payload:s,attestation:a,encryptedId:f});default:return this.client.logger.info(`Unsupported request method ${p}`)}},this.onRelayEventResponse=async t=>{const{topic:i,payload:s}=t,a=(await this.client.core.history.get(i,s.id)).request.method;switch(a){case"wc_sessionPropose":return this.onSessionProposeResponse(i,s);case"wc_sessionSettle":return this.onSessionSettleResponse(i,s);case"wc_sessionUpdate":return this.onSessionUpdateResponse(i,s);case"wc_sessionExtend":return this.onSessionExtendResponse(i,s);case"wc_sessionPing":return this.onSessionPingResponse(i,s);case"wc_sessionRequest":return this.onSessionRequestResponse(i,s);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(i,s);default:return this.client.logger.info(`Unsupported response method ${a}`)}},this.onRelayEventUnknownPayload=t=>{const{topic:i}=t,{message:s}=le("MISSING_OR_INVALID",`Decoded payload on topic ${i} is not identifiable as a JSON-RPC request or a response.`);throw new Error(s)},this.shouldIgnorePairingRequest=t=>{const{topic:i,requestMethod:s}=t,a=this.expectedPairingMethodMap.get(i);return!a||a.includes(s)?!1:!!(a.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)},this.onSessionProposeRequest=async t=>{const{topic:i,payload:s,attestation:a,encryptedId:f}=t,{params:p,id:y}=s;try{const v=this.client.core.eventClient.getEvent({topic:i});this.isValidConnect(fr({},s.params));const A=p.expiryTimestamp||Ar(_r.wc_sessionPropose.req.ttl),E=fr({id:y,pairingTopic:i,expiryTimestamp:A},p);await this.setProposal(y,E);const N=await this.getVerifyContext({attestationId:a,hash:Zn(JSON.stringify(s)),encryptedId:f,metadata:E.proposer.metadata});this.client.events.listenerCount("session_proposal")===0&&(console.warn("No listener for session_proposal event"),v==null||v.setError(Yn.proposal_listener_not_found)),v==null||v.addTrace(bn.emit_session_proposal),this.client.events.emit("session_proposal",{id:y,params:E,verifyContext:N})}catch(v){await this.sendError({id:y,topic:i,error:v,rpcOpts:_r.wc_sessionPropose.autoReject}),this.client.logger.error(v)}},this.onSessionProposeResponse=async(t,i)=>{const{id:s}=i;if(mn(i)){const{result:a}=i;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:a});const f=this.client.proposal.get(s);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:f});const p=f.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:p});const y=a.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:y});const v=await this.client.core.crypto.generateSharedKey(p,y);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:v});const A=await this.client.core.relayer.subscribe(v);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:A}),await this.client.core.pairing.activate({topic:t})}else if(Di(i)){await this.client.proposal.delete(s,zt("USER_DISCONNECTED"));const a=Et("session_connect");if(this.events.listenerCount(a)===0)throw new Error(`emitting ${a} without any listeners, 954`);this.events.emit(Et("session_connect"),{error:i.error})}},this.onSessionSettleRequest=async(t,i)=>{const{id:s,params:a}=i;try{this.isValidSessionSettleRequest(a);const{relay:f,controller:p,expiry:y,namespaces:v,sessionProperties:A,sessionConfig:E}=i.params,N=fr(fr({topic:t,relay:f,expiry:y,namespaces:v,acknowledged:!0,pairingTopic:"",requiredNamespaces:{},optionalNamespaces:{},controller:p.publicKey,self:{publicKey:"",metadata:this.client.metadata},peer:{publicKey:p.publicKey,metadata:p.metadata}},A&&{sessionProperties:A}),E&&{sessionConfig:E}),O=Et("session_connect");if(this.events.listenerCount(O)===0)throw new Error(`emitting ${O} without any listeners 997`);this.events.emit(Et("session_connect"),{session:N}),await this.sendResult({id:i.id,topic:t,result:!0,throwOnFailedPublish:!0})}catch(f){await this.sendError({id:s,topic:t,error:f}),this.client.logger.error(f)}},this.onSessionSettleResponse=async(t,i)=>{const{id:s}=i;mn(i)?(await this.client.session.update(t,{acknowledged:!0}),this.events.emit(Et("session_approve",s),{})):Di(i)&&(await this.client.session.delete(t,zt("USER_DISCONNECTED")),this.events.emit(Et("session_approve",s),{error:i.error}))},this.onSessionUpdateRequest=async(t,i)=>{const{params:s,id:a}=i;try{const f=`${t}_session_update`,p=Mo.get(f);if(p&&this.isRequestOutOfSync(p,a)){this.client.logger.info(`Discarding out of sync request - ${a}`),this.sendError({id:a,topic:t,error:zt("INVALID_UPDATE_REQUEST")});return}this.isValidUpdate(fr({topic:t},s));try{Mo.set(f,a),await this.client.session.update(t,{namespaces:s.namespaces}),await this.sendResult({id:a,topic:t,result:!0,throwOnFailedPublish:!0})}catch(y){throw Mo.delete(f),y}this.client.events.emit("session_update",{id:a,topic:t,params:s})}catch(f){await this.sendError({id:a,topic:t,error:f}),this.client.logger.error(f)}},this.isRequestOutOfSync=(t,i)=>parseInt(i.toString().slice(0,-3))<=parseInt(t.toString().slice(0,-3)),this.onSessionUpdateResponse=(t,i)=>{const{id:s}=i,a=Et("session_update",s);if(this.events.listenerCount(a)===0)throw new Error(`emitting ${a} without any listeners`);mn(i)?this.events.emit(Et("session_update",s),{}):Di(i)&&this.events.emit(Et("session_update",s),{error:i.error})},this.onSessionExtendRequest=async(t,i)=>{const{id:s}=i;try{this.isValidExtend({topic:t}),await this.setExpiry(t,Ar(Ia)),await this.sendResult({id:s,topic:t,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_extend",{id:s,topic:t})}catch(a){await this.sendError({id:s,topic:t,error:a}),this.client.logger.error(a)}},this.onSessionExtendResponse=(t,i)=>{const{id:s}=i,a=Et("session_extend",s);if(this.events.listenerCount(a)===0)throw new Error(`emitting ${a} without any listeners`);mn(i)?this.events.emit(Et("session_extend",s),{}):Di(i)&&this.events.emit(Et("session_extend",s),{error:i.error})},this.onSessionPingRequest=async(t,i)=>{const{id:s}=i;try{this.isValidPing({topic:t}),await this.sendResult({id:s,topic:t,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:s,topic:t})}catch(a){await this.sendError({id:s,topic:t,error:a}),this.client.logger.error(a)}},this.onSessionPingResponse=(t,i)=>{const{id:s}=i,a=Et("session_ping",s);if(this.events.listenerCount(a)===0)throw new Error(`emitting ${a} without any listeners`);setTimeout(()=>{mn(i)?this.events.emit(Et("session_ping",s),{}):Di(i)&&this.events.emit(Et("session_ping",s),{error:i.error})},500)},this.onSessionDeleteRequest=async(t,i)=>{const{id:s}=i;try{this.isValidDisconnect({topic:t,reason:i.params}),await Promise.all([new Promise(a=>{this.client.core.relayer.once(si.publish,async()=>{a(await this.deleteSession({topic:t,id:s}))})}),this.sendResult({id:s,topic:t,result:!0,throwOnFailedPublish:!0}),this.cleanupPendingSentRequestsForTopic({topic:t,error:zt("USER_DISCONNECTED")})])}catch(a){this.client.logger.error(a)}},this.onSessionRequest=async t=>{var i;const{topic:s,payload:a,attestation:f,encryptedId:p}=t,{id:y,params:v}=a;try{await this.isValidRequest(fr({topic:s},v));const A=this.client.session.get(s),E=await this.getVerifyContext({attestationId:f,hash:Zn(JSON.stringify(Ca("wc_sessionRequest",v,y))),encryptedId:p,metadata:A.peer.metadata}),N={id:y,topic:s,params:v,verifyContext:E};await this.setPendingSessionRequest(N),(i=this.client.signConfig)!=null&&i.disableRequestQueue?this.emitSessionRequest(N):(this.addSessionRequestToSessionRequestQueue(N),this.processSessionRequestQueue())}catch(A){await this.sendError({id:y,topic:s,error:A}),this.client.logger.error(A)}},this.onSessionRequestResponse=(t,i)=>{const{id:s}=i,a=Et("session_request",s);if(this.events.listenerCount(a)===0)throw new Error(`emitting ${a} without any listeners`);mn(i)?this.events.emit(Et("session_request",s),{result:i.result}):Di(i)&&this.events.emit(Et("session_request",s),{error:i.error})},this.onSessionEventRequest=async(t,i)=>{const{id:s,params:a}=i;try{const f=`${t}_session_event_${a.event.name}`,p=Mo.get(f);if(p&&this.isRequestOutOfSync(p,s)){this.client.logger.info(`Discarding out of sync request - ${s}`);return}this.isValidEmit(fr({topic:t},a)),this.client.events.emit("session_event",{id:s,topic:t,params:a}),Mo.set(f,s)}catch(f){await this.sendError({id:s,topic:t,error:f}),this.client.logger.error(f)}},this.onSessionAuthenticateResponse=(t,i)=>{const{id:s}=i;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:t,payload:i}),mn(i)?this.events.emit(Et("session_request",s),{result:i.result}):Di(i)&&this.events.emit(Et("session_request",s),{error:i.error})},this.onSessionAuthenticateRequest=async t=>{const{topic:i,payload:s,attestation:a,encryptedId:f}=t;try{const{requester:p,authPayload:y,expiryTimestamp:v}=s.params,A=await this.getVerifyContext({attestationId:a,hash:Zn(JSON.stringify(s)),encryptedId:f,metadata:this.client.metadata}),E={requester:p,pairingTopic:i,id:s.id,authPayload:y,verifyContext:A,expiryTimestamp:v};await this.setAuthRequest(s.id,{request:E,pairingTopic:i}),this.client.events.emit("session_authenticate",{topic:i,params:s.params,id:s.id,verifyContext:A})}catch(p){this.client.logger.error(p);const y=s.params.requester.publicKey,v=await this.client.core.crypto.generateKeyPair(),A={type:is,receiverPublicKey:y,senderPublicKey:v};await this.sendError({id:s.id,topic:i,error:p,encodeOpts:A,rpcOpts:_r.wc_sessionAuthenticate.autoReject})}},this.addSessionRequestToSessionRequestQueue=t=>{this.sessionRequestQueue.queue.push(t)},this.cleanupAfterResponse=t=>{this.deletePendingSessionRequest(t.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=vn.idle,this.processSessionRequestQueue()},ye.toMiliseconds(this.requestQueueDelay))},this.cleanupPendingSentRequestsForTopic=({topic:t,error:i})=>{const s=this.client.core.history.pending;s.length>0&&s.filter(a=>a.topic===t&&a.request.method==="wc_sessionRequest").forEach(a=>{const f=a.request.id,p=Et("session_request",f);if(this.events.listenerCount(p)===0)throw new Error(`emitting ${p} without any listeners`);this.events.emit(Et("session_request",a.request.id),{error:i})})},this.processSessionRequestQueue=()=>{if(this.sessionRequestQueue.state===vn.active){this.client.logger.info("session request queue is already active.");return}const t=this.sessionRequestQueue.queue[0];if(!t){this.client.logger.info("session request queue is empty.");return}try{this.sessionRequestQueue.state=vn.active,this.emitSessionRequest(t)}catch(i){this.client.logger.error(i)}},this.emitSessionRequest=t=>{this.client.events.emit("session_request",t)},this.onPairingCreated=t=>{if(t.methods&&this.expectedPairingMethodMap.set(t.topic,t.methods),t.active)return;const i=this.client.proposal.getAll().find(s=>s.pairingTopic===t.topic);i&&this.onSessionProposeRequest({topic:t.topic,payload:Ca("wc_sessionPropose",{requiredNamespaces:i.requiredNamespaces,optionalNamespaces:i.optionalNamespaces,relays:i.relays,proposer:i.proposer,sessionProperties:i.sessionProperties},i.id)})},this.isValidConnect=async t=>{if(!ri(t)){const{message:y}=le("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(t)}`);throw new Error(y)}const{pairingTopic:i,requiredNamespaces:s,optionalNamespaces:a,sessionProperties:f,relays:p}=t;if(ni(i)||await this.isValidPairingTopic(i),!uE(p)){const{message:y}=le("MISSING_OR_INVALID",`connect() relays: ${p}`);throw new Error(y)}!ni(s)&&Ko(s)!==0&&this.validateNamespaces(s,"requiredNamespaces"),!ni(a)&&Ko(a)!==0&&this.validateNamespaces(a,"optionalNamespaces"),ni(f)||this.validateSessionProps(f,"sessionProperties")},this.validateNamespaces=(t,i)=>{const s=fE(t,"connect()",i);if(s)throw new Error(s.message)},this.isValidApprove=async t=>{if(!ri(t))throw new Error(le("MISSING_OR_INVALID",`approve() params: ${t}`).message);const{id:i,namespaces:s,relayProtocol:a,sessionProperties:f}=t;this.checkRecentlyDeleted(i),await this.isValidProposalId(i);const p=this.client.proposal.get(i),y=Lu(s,"approve()");if(y)throw new Error(y.message);const v=b1(p.requiredNamespaces,s,"approve()");if(v)throw new Error(v.message);if(!nr(a,!0)){const{message:A}=le("MISSING_OR_INVALID",`approve() relayProtocol: ${a}`);throw new Error(A)}ni(f)||this.validateSessionProps(f,"sessionProperties")},this.isValidReject=async t=>{if(!ri(t)){const{message:a}=le("MISSING_OR_INVALID",`reject() params: ${t}`);throw new Error(a)}const{id:i,reason:s}=t;if(this.checkRecentlyDeleted(i),await this.isValidProposalId(i),!lE(s)){const{message:a}=le("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(s)}`);throw new Error(a)}},this.isValidSessionSettleRequest=t=>{if(!ri(t)){const{message:v}=le("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${t}`);throw new Error(v)}const{relay:i,controller:s,namespaces:a,expiry:f}=t;if(!jv(i)){const{message:v}=le("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(v)}const p=nE(s,"onSessionSettleRequest()");if(p)throw new Error(p.message);const y=Lu(a,"onSessionSettleRequest()");if(y)throw new Error(y.message);if(ws(f)){const{message:v}=le("EXPIRED","onSessionSettleRequest()");throw new Error(v)}},this.isValidUpdate=async t=>{if(!ri(t)){const{message:y}=le("MISSING_OR_INVALID",`update() params: ${t}`);throw new Error(y)}const{topic:i,namespaces:s}=t;this.checkRecentlyDeleted(i),await this.isValidSessionTopic(i);const a=this.client.session.get(i),f=Lu(s,"update()");if(f)throw new Error(f.message);const p=b1(a.requiredNamespaces,s,"update()");if(p)throw new Error(p.message)},this.isValidExtend=async t=>{if(!ri(t)){const{message:s}=le("MISSING_OR_INVALID",`extend() params: ${t}`);throw new Error(s)}const{topic:i}=t;this.checkRecentlyDeleted(i),await this.isValidSessionTopic(i)},this.isValidRequest=async t=>{if(!ri(t)){const{message:y}=le("MISSING_OR_INVALID",`request() params: ${t}`);throw new Error(y)}const{topic:i,request:s,chainId:a,expiry:f}=t;this.checkRecentlyDeleted(i),await this.isValidSessionTopic(i);const{namespaces:p}=this.client.session.get(i);if(!v1(p,a)){const{message:y}=le("MISSING_OR_INVALID",`request() chainId: ${a}`);throw new Error(y)}if(!pE(s)){const{message:y}=le("MISSING_OR_INVALID",`request() ${JSON.stringify(s)}`);throw new Error(y)}if(!bE(p,a,s.method)){const{message:y}=le("MISSING_OR_INVALID",`request() method: ${s.method}`);throw new Error(y)}if(f&&!_E(f,Hu)){const{message:y}=le("MISSING_OR_INVALID",`request() expiry: ${f}. Expiry must be a number (in seconds) between ${Hu.min} and ${Hu.max}`);throw new Error(y)}},this.isValidRespond=async t=>{var i;if(!ri(t)){const{message:f}=le("MISSING_OR_INVALID",`respond() params: ${t}`);throw new Error(f)}const{topic:s,response:a}=t;try{await this.isValidSessionTopic(s)}catch(f){throw(i=t==null?void 0:t.response)!=null&&i.id&&this.cleanupAfterResponse(t),f}if(!gE(a)){const{message:f}=le("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(a)}`);throw new Error(f)}},this.isValidPing=async t=>{if(!ri(t)){const{message:s}=le("MISSING_OR_INVALID",`ping() params: ${t}`);throw new Error(s)}const{topic:i}=t;await this.isValidSessionOrPairingTopic(i)},this.isValidEmit=async t=>{if(!ri(t)){const{message:p}=le("MISSING_OR_INVALID",`emit() params: ${t}`);throw new Error(p)}const{topic:i,event:s,chainId:a}=t;await this.isValidSessionTopic(i);const{namespaces:f}=this.client.session.get(i);if(!v1(f,a)){const{message:p}=le("MISSING_OR_INVALID",`emit() chainId: ${a}`);throw new Error(p)}if(!vE(s)){const{message:p}=le("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(p)}if(!mE(f,a,s.name)){const{message:p}=le("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(p)}},this.isValidDisconnect=async t=>{if(!ri(t)){const{message:s}=le("MISSING_OR_INVALID",`disconnect() params: ${t}`);throw new Error(s)}const{topic:i}=t;await this.isValidSessionOrPairingTopic(i)},this.isValidAuthenticate=t=>{const{chains:i,uri:s,domain:a,nonce:f}=t;if(!Array.isArray(i)||i.length===0)throw new Error("chains is required and must be a non-empty array");if(!nr(s,!1))throw new Error("uri is required parameter");if(!nr(a,!1))throw new Error("domain is required parameter");if(!nr(f,!1))throw new Error("nonce is required parameter");if([...new Set(i.map(y=>$o(y).namespace))].length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");const{namespace:p}=$o(i[0]);if(p!=="eip155")throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")},this.getVerifyContext=async t=>{const{attestationId:i,hash:s,encryptedId:a,metadata:f}=t,p={verified:{verifyUrl:f.verifyUrl||Lo,validation:"UNKNOWN",origin:f.url||""}};try{const y=await this.client.core.verify.resolve({attestationId:i,hash:s,encryptedId:a,verifyUrl:f.verifyUrl});y&&(p.verified.origin=y.origin,p.verified.isScam=y.isScam,p.verified.validation=y.origin===new URL(f.url).origin?"VALID":"INVALID")}catch(y){this.client.logger.warn(y)}return this.client.logger.debug(`Verify context: ${JSON.stringify(p)}`),p},this.validateSessionProps=(t,i)=>{Object.values(t).forEach(s=>{if(!nr(s,!1)){const{message:a}=le("MISSING_OR_INVALID",`${i} must be in Record<string, string> format. Received: ${JSON.stringify(s)}`);throw new Error(a)}})},this.getPendingAuthRequest=t=>{const i=this.client.auth.requests.get(t);return typeof i=="object"?i:void 0},this.addToRecentlyDeleted=(t,i)=>{if(this.recentlyDeletedMap.set(t,i),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let s=0;const a=this.recentlyDeletedLimit/2;for(const f of this.recentlyDeletedMap.keys()){if(s++>=a)break;this.recentlyDeletedMap.delete(f)}}},this.checkRecentlyDeleted=t=>{const i=this.recentlyDeletedMap.get(t);if(i){const{message:s}=le("MISSING_OR_INVALID",`Record was recently deleted - ${i}: ${t}`);throw new Error(s)}}}async isInitialized(){if(!this.initialized){const{message:e}=le("NOT_INITIALIZED",this.name);throw new Error(e)}await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(si.message,e=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(e):this.onRelayMessage(e)})}async onRelayMessage(e){const{topic:t,message:i,attestation:s}=e,{publicKey:a}=this.client.auth.authKeys.keys.includes(_h)?this.client.auth.authKeys.get(_h):{responseTopic:void 0,publicKey:void 0},f=await this.client.core.crypto.decode(t,i,{receiverPublicKey:a});try{E0(f)?(this.client.core.history.set(t,f),this.onRelayEventRequest({topic:t,payload:f,attestation:s,encryptedId:Zn(i)})):Fh(f)?(await this.client.core.history.resolve(f),await this.onRelayEventResponse({topic:t,payload:f}),this.client.core.history.delete(t,f.id)):this.onRelayEventUnknownPayload({topic:t,payload:f})}catch(p){this.client.logger.error(p)}}registerExpirerEvents(){this.client.core.expirer.on(Ti.expired,async e=>{const{topic:t,id:i}=ev(e.target);if(i&&this.client.pendingRequest.keys.includes(i))return await this.deletePendingSessionRequest(i,le("EXPIRED"),!0);if(i&&this.client.auth.requests.keys.includes(i))return await this.deletePendingAuthRequest(i,le("EXPIRED"),!0);t?this.client.session.keys.includes(t)&&(await this.deleteSession({topic:t,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:t})):i&&(await this.deleteProposal(i,!0),this.client.events.emit("proposal_expire",{id:i}))})}registerPairingEvents(){this.client.core.pairing.events.on(Na.create,e=>this.onPairingCreated(e)),this.client.core.pairing.events.on(Na.delete,e=>{this.addToRecentlyDeleted(e.topic,"pairing")})}isValidPairingTopic(e){if(!nr(e,!1)){const{message:t}=le("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(t)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:t}=le("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(t)}if(ws(this.client.core.pairing.pairings.get(e).expiry)){const{message:t}=le("EXPIRED",`pairing topic: ${e}`);throw new Error(t)}}async isValidSessionTopic(e){if(!nr(e,!1)){const{message:t}=le("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(t)}if(this.checkRecentlyDeleted(e),!this.client.session.keys.includes(e)){const{message:t}=le("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(t)}if(ws(this.client.session.get(e).expiry)){await this.deleteSession({topic:e});const{message:t}=le("EXPIRED",`session topic: ${e}`);throw new Error(t)}if(!this.client.core.crypto.keychain.has(e)){const{message:t}=le("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw await this.deleteSession({topic:e}),new Error(t)}}async isValidSessionOrPairingTopic(e){if(this.checkRecentlyDeleted(e),this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(nr(e,!1)){const{message:t}=le("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(t)}else{const{message:t}=le("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(t)}}async isValidProposalId(e){if(!dE(e)){const{message:t}=le("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(t)}if(!this.client.proposal.keys.includes(e)){const{message:t}=le("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(t)}if(ws(this.client.proposal.get(e).expiryTimestamp)){await this.deleteProposal(e);const{message:t}=le("EXPIRED",`proposal id: ${e}`);throw new Error(t)}}}class XS extends sa{constructor(e,t){super(e,t,BS,K0),this.core=e,this.logger=t}}class ZS extends sa{constructor(e,t){super(e,t,$S,K0),this.core=e,this.logger=t}}class eP extends sa{constructor(e,t){super(e,t,kS,K0,i=>i.id),this.core=e,this.logger=t}}class tP extends sa{constructor(e,t){super(e,t,FS,nf,()=>_h),this.core=e,this.logger=t}}class rP extends sa{constructor(e,t){super(e,t,KS,nf),this.core=e,this.logger=t}}class iP extends sa{constructor(e,t){super(e,t,HS,nf,i=>i.id),this.core=e,this.logger=t}}class nP{constructor(e,t){this.core=e,this.logger=t,this.authKeys=new tP(this.core,this.logger),this.pairingTopics=new rP(this.core,this.logger),this.requests=new iP(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}}class H0 extends kE{constructor(e){super(e),this.protocol=ab,this.version=ob,this.name=Ku.name,this.events=new zi.EventEmitter,this.on=(i,s)=>this.events.on(i,s),this.once=(i,s)=>this.events.once(i,s),this.off=(i,s)=>this.events.off(i,s),this.removeListener=(i,s)=>this.events.removeListener(i,s),this.removeAllListeners=i=>this.events.removeAllListeners(i),this.connect=async i=>{try{return await this.engine.connect(i)}catch(s){throw this.logger.error(s.message),s}},this.pair=async i=>{try{return await this.engine.pair(i)}catch(s){throw this.logger.error(s.message),s}},this.approve=async i=>{try{return await this.engine.approve(i)}catch(s){throw this.logger.error(s.message),s}},this.reject=async i=>{try{return await this.engine.reject(i)}catch(s){throw this.logger.error(s.message),s}},this.update=async i=>{try{return await this.engine.update(i)}catch(s){throw this.logger.error(s.message),s}},this.extend=async i=>{try{return await this.engine.extend(i)}catch(s){throw this.logger.error(s.message),s}},this.request=async i=>{try{return await this.engine.request(i)}catch(s){throw this.logger.error(s.message),s}},this.respond=async i=>{try{return await this.engine.respond(i)}catch(s){throw this.logger.error(s.message),s}},this.ping=async i=>{try{return await this.engine.ping(i)}catch(s){throw this.logger.error(s.message),s}},this.emit=async i=>{try{return await this.engine.emit(i)}catch(s){throw this.logger.error(s.message),s}},this.disconnect=async i=>{try{return await this.engine.disconnect(i)}catch(s){throw this.logger.error(s.message),s}},this.find=i=>{try{return this.engine.find(i)}catch(s){throw this.logger.error(s.message),s}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(i){throw this.logger.error(i.message),i}},this.authenticate=async i=>{try{return await this.engine.authenticate(i)}catch(s){throw this.logger.error(s.message),s}},this.formatAuthMessage=i=>{try{return this.engine.formatAuthMessage(i)}catch(s){throw this.logger.error(s.message),s}},this.approveSessionAuthenticate=async i=>{try{return await this.engine.approveSessionAuthenticate(i)}catch(s){throw this.logger.error(s.message),s}},this.rejectSessionAuthenticate=async i=>{try{return await this.engine.rejectSessionAuthenticate(i)}catch(s){throw this.logger.error(s.message),s}},this.name=(e==null?void 0:e.name)||Ku.name,this.metadata=(e==null?void 0:e.metadata)||f9(),this.signConfig=e==null?void 0:e.signConfig;const t=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:y0(kh({level:(e==null?void 0:e.logger)||Ku.logger}));this.core=(e==null?void 0:e.core)||new DS(e),this.logger=Hr(t,this.name),this.session=new ZS(this.core,this.logger),this.proposal=new XS(this.core,this.logger),this.pendingRequest=new eP(this.core,this.logger),this.engine=new YS(this),this.auth=new nP(this.core,this.logger)}static async init(e){const t=new H0(e);return await t.initialize(),t}get context(){return mi(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.engine.init(),await this.auth.init(),this.logger.info("SignClient Initialization Success"),this.engine.processRelayMessageCache()}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}}const j1="error",sP="wss://relay.walletconnect.com",aP="wc",oP="universal_provider",F1=`${aP}@2:${oP}:`,cP="https://rpc.walletconnect.com/v1/",Sa="generic",fn={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};var Co=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},v0={exports:{}};/**
* @license
* Lodash <https://lodash.com/>
* Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
* Released under MIT license <https://lodash.com/license>
* Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
* Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
*/(function(r,e){(function(){var t,i="4.17.21",s=200,a="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",f="Expected a function",p="Invalid `variable` option passed into `_.template`",y="__lodash_hash_undefined__",v=500,A="__lodash_placeholder__",E=1,N=2,O=4,T=1,F=2,G=1,W=2,ee=4,de=8,se=16,ae=32,ue=64,ne=128,ve=256,Ae=512,ot=30,$="...",b=800,c=16,u=1,g=2,_=3,M=1/0,S=9007199254740991,x=17976931348623157e292,d=NaN,l=4294967295,R=l-1,X=l>>>1,te=[["ary",ne],["bind",G],["bindKey",W],["curry",de],["curryRight",se],["flip",Ae],["partial",ae],["partialRight",ue],["rearg",ve]],I="[object Arguments]",J="[object Array]",D="[object AsyncFunction]",k="[object Boolean]",L="[object Date]",m="[object DOMException]",z="[object Error]",Y="[object Function]",oe="[object GeneratorFunction]",ce="[object Map]",pe="[object Number]",ge="[object Null]",Te="[object Object]",nt="[object Promise]",Me="[object Proxy]",Ve="[object RegExp]",ze="[object Set]",_e="[object String]",je="[object Symbol]",Ge="[object Undefined]",be="[object WeakMap]",Fe="[object WeakSet]",De="[object ArrayBuffer]",we="[object DataView]",Je="[object Float32Array]",ke="[object Float64Array]",Pe="[object Int8Array]",ct="[object Int16Array]",ft="[object Int32Array]",qe="[object Uint8Array]",ht="[object Uint8ClampedArray]",ut="[object Uint16Array]",Be="[object Uint32Array]",wt=/\b__p \+= '';/g,dt=/\b(__p \+=) '' \+/g,Le=/(__e\(.*?\)|\b__t\)) \+\n'';/g,At=/&(?:amp|lt|gt|quot|#39);/g,It=/[&<>"']/g,xe=RegExp(At.source),Ke=RegExp(It.source),Qe=/<%-([\s\S]+?)%>/g,Ee=/<%([\s\S]+?)%>/g,We=/<%=([\s\S]+?)%>/g,He=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Re=/^\w*$/,st=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ye=/[\\^$.*+?()[\]{}|]/g,Ne=RegExp(Ye.source),Xe=/^\s+/,et=/\s/,Ie=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ue=/\{\n\/\* \[wrapped with (.+)\] \*/,at=/,? & /,Ce=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Ot=/[()=,{}\[\]\/\s]/,Tt=/\\(\\)?/g,tt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,bt=/\w*$/,Sr=/^[-+]0x[0-9a-f]+$/i,Pr=/^0b[01]+$/i,Rr=/^\[object .+?Constructor\]$/,Nr=/^0o[0-7]+$/i,Cr=/^(?:0|[1-9]\d*)$/,Qt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Vr=/($^)/,Ui=/['\n\r\u2028\u2029\\]/g,Gr="\\ud800-\\udfff",ji="\\u0300-\\u036f",Fi="\\ufe20-\\ufe2f",Wr="\\u20d0-\\u20ff",wi=ji+Fi+Wr,_i="\\u2700-\\u27bf",or="a-z\\xdf-\\xf6\\xf8-\\xff",Ki="\\xac\\xb1\\xd7\\xf7",Hi="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Vi="\\u2000-\\u206f",Ss=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ec="A-Z\\xc0-\\xd6\\xd8-\\xde",tc="\\ufe0e\\ufe0f",Ps=Ki+Hi+Vi+Ss,to="[']",Rs="["+Gr+"]",ro="["+Ps+"]",Ns="["+wi+"]",rc="\\d+",sf="["+_i+"]",ic="["+or+"]",nc="[^"+Gr+Ps+rc+_i+or+ec+"]",ca="\\ud83c[\\udffb-\\udfff]",af="(?:"+Ns+"|"+ca+")",sc="[^"+Gr+"]",ha="(?:\\ud83c[\\udde6-\\uddff]){2}",os="[\\ud800-\\udbff][\\udc00-\\udfff]",hi="["+ec+"]",ac="\\u200d",oc="(?:"+ic+"|"+nc+")",un="(?:"+hi+"|"+nc+")",cc="(?:"+to+"(?:d|ll|m|re|s|t|ve))?",hc="(?:"+to+"(?:D|LL|M|RE|S|T|VE))?",fc=af+"?",uc="["+tc+"]?",of="(?:"+ac+"(?:"+[sc,ha,os].join("|")+")"+uc+fc+")*",Ln="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",dc="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",lc=uc+fc+of,fa="(?:"+[sf,ha,os].join("|")+")"+lc,cf="(?:"+[sc+Ns+"?",Ns,ha,os,Rs].join("|")+")",io=RegExp(to,"g"),hf=RegExp(Ns,"g"),ua=RegExp(ca+"(?="+ca+")|"+cf+lc,"g"),pc=RegExp([hi+"?"+ic+"+"+cc+"(?="+[ro,hi,"$"].join("|")+")",un+"+"+hc+"(?="+[ro,hi+oc,"$"].join("|")+")",hi+"?"+oc+"+"+cc,hi+"+"+hc,dc,Ln,rc,fa].join("|"),"g"),gc=RegExp("["+ac+Gr+wi+tc+"]"),Cs=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,vc=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],ff=-1,Lt={};Lt[Je]=Lt[ke]=Lt[Pe]=Lt[ct]=Lt[ft]=Lt[qe]=Lt[ht]=Lt[ut]=Lt[Be]=!0,Lt[I]=Lt[J]=Lt[De]=Lt[k]=Lt[we]=Lt[L]=Lt[z]=Lt[Y]=Lt[ce]=Lt[pe]=Lt[Te]=Lt[Ve]=Lt[ze]=Lt[_e]=Lt[be]=!1;var kt={};kt[I]=kt[J]=kt[De]=kt[we]=kt[k]=kt[L]=kt[Je]=kt[ke]=kt[Pe]=kt[ct]=kt[ft]=kt[ce]=kt[pe]=kt[Te]=kt[Ve]=kt[ze]=kt[_e]=kt[je]=kt[qe]=kt[ht]=kt[ut]=kt[Be]=!0,kt[z]=kt[Y]=kt[be]=!1;var B={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},K={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},he={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Se={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Ut=parseFloat,pt=parseInt,Ht=typeof Co=="object"&&Co&&Co.Object===Object&&Co,sr=typeof self=="object"&&self&&self.Object===Object&&self,Nt=Ht||sr||Function("return this")(),jt=e&&!e.nodeType&&e,er=jt&&!0&&r&&!r.nodeType&&r,Jr=er&&er.exports===jt,ar=Jr&&Ht.process,Vt=function(){try{var H=er&&er.require&&er.require("util").types;return H||ar&&ar.binding&&ar.binding("util")}catch{}}(),$r=Vt&&Vt.isArrayBuffer,Gi=Vt&&Vt.isDate,Ai=Vt&&Vt.isMap,dn=Vt&&Vt.isRegExp,no=Vt&&Vt.isSet,Os=Vt&&Vt.isTypedArray;function dr(H,Z,Q){switch(Q.length){case 0:return H.call(Z);case 1:return H.call(Z,Q[0]);case 2:return H.call(Z,Q[0],Q[1]);case 3:return H.call(Z,Q[0],Q[1],Q[2])}return H.apply(Z,Q)}function db(H,Z,Q,Oe){for(var lt=-1,qt=H==null?0:H.length;++lt<qt;){var cr=H[lt];Z(Oe,cr,Q(cr),H)}return Oe}function xi(H,Z){for(var Q=-1,Oe=H==null?0:H.length;++Q<Oe&&Z(H[Q],Q,H)!==!1;);return H}function lb(H,Z){for(var Q=H==null?0:H.length;Q--&&Z(H[Q],Q,H)!==!1;);return H}function W0(H,Z){for(var Q=-1,Oe=H==null?0:H.length;++Q<Oe;)if(!Z(H[Q],Q,H))return!1;return!0}function cs(H,Z){for(var Q=-1,Oe=H==null?0:H.length,lt=0,qt=[];++Q<Oe;){var cr=H[Q];Z(cr,Q,H)&&(qt[lt++]=cr)}return qt}function bc(H,Z){var Q=H==null?0:H.length;return!!Q&&da(H,Z,0)>-1}function uf(H,Z,Q){for(var Oe=-1,lt=H==null?0:H.length;++Oe<lt;)if(Q(Z,H[Oe]))return!0;return!1}function Wt(H,Z){for(var Q=-1,Oe=H==null?0:H.length,lt=Array(Oe);++Q<Oe;)lt[Q]=Z(H[Q],Q,H);return lt}function hs(H,Z){for(var Q=-1,Oe=Z.length,lt=H.length;++Q<Oe;)H[lt+Q]=Z[Q];return H}function df(H,Z,Q,Oe){var lt=-1,qt=H==null?0:H.length;for(Oe&&qt&&(Q=H[++lt]);++lt<qt;)Q=Z(Q,H[lt],lt,H);return Q}function pb(H,Z,Q,Oe){var lt=H==null?0:H.length;for(Oe&&lt&&(Q=H[--lt]);lt--;)Q=Z(Q,H[lt],lt,H);return Q}function lf(H,Z){for(var Q=-1,Oe=H==null?0:H.length;++Q<Oe;)if(Z(H[Q],Q,H))return!0;return!1}var gb=pf("length");function vb(H){return H.split("")}function bb(H){return H.match(Ce)||[]}function J0(H,Z,Q){var Oe;return Q(H,function(lt,qt,cr){if(Z(lt,qt,cr))return Oe=qt,!1}),Oe}function mc(H,Z,Q,Oe){for(var lt=H.length,qt=Q+(Oe?1:-1);Oe?qt--:++qt<lt;)if(Z(H[qt],qt,H))return qt;return-1}function da(H,Z,Q){return Z===Z?Rb(H,Z,Q):mc(H,Q0,Q)}function mb(H,Z,Q,Oe){for(var lt=Q-1,qt=H.length;++lt<qt;)if(Oe(H[lt],Z))return lt;return-1}function Q0(H){return H!==H}function Y0(H,Z){var Q=H==null?0:H.length;return Q?vf(H,Z)/Q:d}function pf(H){return function(Z){return Z==null?t:Z[H]}}function gf(H){return function(Z){return H==null?t:H[Z]}}function X0(H,Z,Q,Oe,lt){return lt(H,function(qt,cr,Ft){Q=Oe?(Oe=!1,qt):Z(Q,qt,cr,Ft)}),Q}function yb(H,Z){var Q=H.length;for(H.sort(Z);Q--;)H[Q]=H[Q].value;return H}function vf(H,Z){for(var Q,Oe=-1,lt=H.length;++Oe<lt;){var qt=Z(H[Oe]);qt!==t&&(Q=Q===t?qt:Q+qt)}return Q}function bf(H,Z){for(var Q=-1,Oe=Array(H);++Q<H;)Oe[Q]=Z(Q);return Oe}function wb(H,Z){return Wt(Z,function(Q){return[Q,H[Q]]})}function Z0(H){return H&&H.slice(0,id(H)+1).replace(Xe,"")}function fi(H){return function(Z){return H(Z)}}function mf(H,Z){return Wt(Z,function(Q){return H[Q]})}function so(H,Z){return H.has(Z)}function ed(H,Z){for(var Q=-1,Oe=H.length;++Q<Oe&&da(Z,H[Q],0)>-1;);return Q}function td(H,Z){for(var Q=H.length;Q--&&da(Z,H[Q],0)>-1;);return Q}function _b(H,Z){for(var Q=H.length,Oe=0;Q--;)H[Q]===Z&&++Oe;return Oe}var Ab=gf(B),xb=gf(K);function Eb(H){return"\\"+Se[H]}function Ib(H,Z){return H==null?t:H[Z]}function la(H){return gc.test(H)}function Mb(H){return Cs.test(H)}function Sb(H){for(var Z,Q=[];!(Z=H.next()).done;)Q.push(Z.value);return Q}function yf(H){var Z=-1,Q=Array(H.size);return H.forEach(function(Oe,lt){Q[++Z]=[lt,Oe]}),Q}function rd(H,Z){return function(Q){return H(Z(Q))}}function fs(H,Z){for(var Q=-1,Oe=H.length,lt=0,qt=[];++Q<Oe;){var cr=H[Q];(cr===Z||cr===A)&&(H[Q]=A,qt[lt++]=Q)}return qt}function yc(H){var Z=-1,Q=Array(H.size);return H.forEach(function(Oe){Q[++Z]=Oe}),Q}function Pb(H){var Z=-1,Q=Array(H.size);return H.forEach(function(Oe){Q[++Z]=[Oe,Oe]}),Q}function Rb(H,Z,Q){for(var Oe=Q-1,lt=H.length;++Oe<lt;)if(H[Oe]===Z)return Oe;return-1}function Nb(H,Z,Q){for(var Oe=Q+1;Oe--;)if(H[Oe]===Z)return Oe;return Oe}function pa(H){return la(H)?Ob(H):gb(H)}function Wi(H){return la(H)?Tb(H):vb(H)}function id(H){for(var Z=H.length;Z--&&et.test(H.charAt(Z)););return Z}var Cb=gf(he);function Ob(H){for(var Z=ua.lastIndex=0;ua.test(H);)++Z;return Z}function Tb(H){return H.match(ua)||[]}function qb(H){return H.match(pc)||[]}var Db=function H(Z){Z=Z==null?Nt:ga.defaults(Nt.Object(),Z,ga.pick(Nt,vc));var Q=Z.Array,Oe=Z.Date,lt=Z.Error,qt=Z.Function,cr=Z.Math,Ft=Z.Object,wf=Z.RegExp,Bb=Z.String,Ei=Z.TypeError,wc=Q.prototype,$b=qt.prototype,va=Ft.prototype,_c=Z["__core-js_shared__"],Ac=$b.toString,$t=va.hasOwnProperty,zb=0,nd=function(){var n=/[^.]+$/.exec(_c&&_c.keys&&_c.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}(),xc=va.toString,kb=Ac.call(Ft),Lb=Nt._,Ub=wf("^"+Ac.call($t).replace(Ye,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ec=Jr?Z.Buffer:t,us=Z.Symbol,Ic=Z.Uint8Array,sd=Ec?Ec.allocUnsafe:t,Mc=rd(Ft.getPrototypeOf,Ft),ad=Ft.create,od=va.propertyIsEnumerable,Sc=wc.splice,cd=us?us.isConcatSpreadable:t,ao=us?us.iterator:t,Ts=us?us.toStringTag:t,Pc=function(){try{var n=zs(Ft,"defineProperty");return n({},"",{}),n}catch{}}(),jb=Z.clearTimeout!==Nt.clearTimeout&&Z.clearTimeout,Fb=Oe&&Oe.now!==Nt.Date.now&&Oe.now,Kb=Z.setTimeout!==Nt.setTimeout&&Z.setTimeout,Rc=cr.ceil,Nc=cr.floor,_f=Ft.getOwnPropertySymbols,Hb=Ec?Ec.isBuffer:t,hd=Z.isFinite,Vb=wc.join,Gb=rd(Ft.keys,Ft),hr=cr.max,Or=cr.min,Wb=Oe.now,Jb=Z.parseInt,fd=cr.random,Qb=wc.reverse,Af=zs(Z,"DataView"),oo=zs(Z,"Map"),xf=zs(Z,"Promise"),ba=zs(Z,"Set"),co=zs(Z,"WeakMap"),ho=zs(Ft,"create"),Cc=co&&new co,ma={},Yb=ks(Af),Xb=ks(oo),Zb=ks(xf),e2=ks(ba),t2=ks(co),Oc=us?us.prototype:t,fo=Oc?Oc.valueOf:t,ud=Oc?Oc.toString:t;function C(n){if(Yt(n)&&!gt(n)&&!(n instanceof Mt)){if(n instanceof Ii)return n;if($t.call(n,"__wrapped__"))return dl(n)}return new Ii(n)}var ya=function(){function n(){}return function(o){if(!Jt(o))return{};if(ad)return ad(o);n.prototype=o;var h=new n;return n.prototype=t,h}}();function Tc(){}function Ii(n,o){this.__wrapped__=n,this.__actions__=[],this.__chain__=!!o,this.__index__=0,this.__values__=t}C.templateSettings={escape:Qe,evaluate:Ee,interpolate:We,variable:"",imports:{_:C}},C.prototype=Tc.prototype,C.prototype.constructor=C,Ii.prototype=ya(Tc.prototype),Ii.prototype.constructor=Ii;function Mt(n){this.__wrapped__=n,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=l,this.__views__=[]}function r2(){var n=new Mt(this.__wrapped__);return n.__actions__=Qr(this.__actions__),n.__dir__=this.__dir__,n.__filtered__=this.__filtered__,n.__iteratees__=Qr(this.__iteratees__),n.__takeCount__=this.__takeCount__,n.__views__=Qr(this.__views__),n}function i2(){if(this.__filtered__){var n=new Mt(this);n.__dir__=-1,n.__filtered__=!0}else n=this.clone(),n.__dir__*=-1;return n}function n2(){var n=this.__wrapped__.value(),o=this.__dir__,h=gt(n),w=o<0,P=h?n.length:0,q=vm(0,P,this.__views__),U=q.start,j=q.end,V=j-U,re=w?j:U-1,ie=this.__iteratees__,fe=ie.length,me=0,$e=Or(V,this.__takeCount__);if(!h||!w&&P==V&&$e==V)return Dd(n,this.__actions__);var rt=[];e:for(;V--&&me<$e;){re+=o;for(var yt=-1,it=n[re];++yt<fe;){var xt=ie[yt],Ct=xt.iteratee,li=xt.type,Lr=Ct(it);if(li==g)it=Lr;else if(!Lr){if(li==u)continue e;break e}}rt[me++]=it}return rt}Mt.prototype=ya(Tc.prototype),Mt.prototype.constructor=Mt;function qs(n){var o=-1,h=n==null?0:n.length;for(this.clear();++o<h;){var w=n[o];this.set(w[0],w[1])}}function s2(){this.__data__=ho?ho(null):{},this.size=0}function a2(n){var o=this.has(n)&&delete this.__data__[n];return this.size-=o?1:0,o}function o2(n){var o=this.__data__;if(ho){var h=o[n];return h===y?t:h}return $t.call(o,n)?o[n]:t}function c2(n){var o=this.__data__;return ho?o[n]!==t:$t.call(o,n)}function h2(n,o){var h=this.__data__;return this.size+=this.has(n)?0:1,h[n]=ho&&o===t?y:o,this}qs.prototype.clear=s2,qs.prototype.delete=a2,qs.prototype.get=o2,qs.prototype.has=c2,qs.prototype.set=h2;function Un(n){var o=-1,h=n==null?0:n.length;for(this.clear();++o<h;){var w=n[o];this.set(w[0],w[1])}}function f2(){this.__data__=[],this.size=0}function u2(n){var o=this.__data__,h=qc(o,n);if(h<0)return!1;var w=o.length-1;return h==w?o.pop():Sc.call(o,h,1),--this.size,!0}function d2(n){var o=this.__data__,h=qc(o,n);return h<0?t:o[h][1]}function l2(n){return qc(this.__data__,n)>-1}function p2(n,o){var h=this.__data__,w=qc(h,n);return w<0?(++this.size,h.push([n,o])):h[w][1]=o,this}Un.prototype.clear=f2,Un.prototype.delete=u2,Un.prototype.get=d2,Un.prototype.has=l2,Un.prototype.set=p2;function jn(n){var o=-1,h=n==null?0:n.length;for(this.clear();++o<h;){var w=n[o];this.set(w[0],w[1])}}function g2(){this.size=0,this.__data__={hash:new qs,map:new(oo||Un),string:new qs}}function v2(n){var o=Vc(this,n).delete(n);return this.size-=o?1:0,o}function b2(n){return Vc(this,n).get(n)}function m2(n){return Vc(this,n).has(n)}function y2(n,o){var h=Vc(this,n),w=h.size;return h.set(n,o),this.size+=h.size==w?0:1,this}jn.prototype.clear=g2,jn.prototype.delete=v2,jn.prototype.get=b2,jn.prototype.has=m2,jn.prototype.set=y2;function Ds(n){var o=-1,h=n==null?0:n.length;for(this.__data__=new jn;++o<h;)this.add(n[o])}function w2(n){return this.__data__.set(n,y),this}function _2(n){return this.__data__.has(n)}Ds.prototype.add=Ds.prototype.push=w2,Ds.prototype.has=_2;function Ji(n){var o=this.__data__=new Un(n);this.size=o.size}function A2(){this.__data__=new Un,this.size=0}function x2(n){var o=this.__data__,h=o.delete(n);return this.size=o.size,h}function E2(n){return this.__data__.get(n)}function I2(n){return this.__data__.has(n)}function M2(n,o){var h=this.__data__;if(h instanceof Un){var w=h.__data__;if(!oo||w.length<s-1)return w.push([n,o]),this.size=++h.size,this;h=this.__data__=new jn(w)}return h.set(n,o),this.size=h.size,this}Ji.prototype.clear=A2,Ji.prototype.delete=x2,Ji.prototype.get=E2,Ji.prototype.has=I2,Ji.prototype.set=M2;function dd(n,o){var h=gt(n),w=!h&&Ls(n),P=!h&&!w&&vs(n),q=!h&&!w&&!P&&xa(n),U=h||w||P||q,j=U?bf(n.length,Bb):[],V=j.length;for(var re in n)(o||$t.call(n,re))&&!(U&&(re=="length"||P&&(re=="offset"||re=="parent")||q&&(re=="buffer"||re=="byteLength"||re=="byteOffset")||Vn(re,V)))&&j.push(re);return j}function ld(n){var o=n.length;return o?n[qf(0,o-1)]:t}function S2(n,o){return Gc(Qr(n),Bs(o,0,n.length))}function P2(n){return Gc(Qr(n))}function Ef(n,o,h){(h!==t&&!Qi(n[o],h)||h===t&&!(o in n))&&Fn(n,o,h)}function uo(n,o,h){var w=n[o];(!($t.call(n,o)&&Qi(w,h))||h===t&&!(o in n))&&Fn(n,o,h)}function qc(n,o){for(var h=n.length;h--;)if(Qi(n[h][0],o))return h;return-1}function R2(n,o,h,w){return ds(n,function(P,q,U){o(w,P,h(P),U)}),w}function pd(n,o){return n&&pn(o,lr(o),n)}function N2(n,o){return n&&pn(o,Xr(o),n)}function Fn(n,o,h){o=="__proto__"&&Pc?Pc(n,o,{configurable:!0,enumerable:!0,value:h,writable:!0}):n[o]=h}function If(n,o){for(var h=-1,w=o.length,P=Q(w),q=n==null;++h<w;)P[h]=q?t:su(n,o[h]);return P}function Bs(n,o,h){return n===n&&(h!==t&&(n=n<=h?n:h),o!==t&&(n=n>=o?n:o)),n}function Mi(n,o,h,w,P,q){var U,j=o&E,V=o&N,re=o&O;if(h&&(U=P?h(n,w,P,q):h(n)),U!==t)return U;if(!Jt(n))return n;var ie=gt(n);if(ie){if(U=mm(n),!j)return Qr(n,U)}else{var fe=Tr(n),me=fe==Y||fe==oe;if(vs(n))return zd(n,j);if(fe==Te||fe==I||me&&!P){if(U=V||me?{}:il(n),!j)return V?om(n,N2(U,n)):am(n,pd(U,n))}else{if(!kt[fe])return P?n:{};U=ym(n,fe,j)}}q||(q=new Ji);var $e=q.get(n);if($e)return $e;q.set(n,U),Ol(n)?n.forEach(function(it){U.add(Mi(it,o,h,it,n,q))}):Nl(n)&&n.forEach(function(it,xt){U.set(xt,Mi(it,o,h,xt,n,q))});var rt=re?V?Hf:Kf:V?Xr:lr,yt=ie?t:rt(n);return xi(yt||n,function(it,xt){yt&&(xt=it,it=n[xt]),uo(U,xt,Mi(it,o,h,xt,n,q))}),U}function C2(n){var o=lr(n);return function(h){return gd(h,n,o)}}function gd(n,o,h){var w=h.length;if(n==null)return!w;for(n=Ft(n);w--;){var P=h[w],q=o[P],U=n[P];if(U===t&&!(P in n)||!q(U))return!1}return!0}function vd(n,o,h){if(typeof n!="function")throw new Ei(f);return yo(function(){n.apply(t,h)},o)}function lo(n,o,h,w){var P=-1,q=bc,U=!0,j=n.length,V=[],re=o.length;if(!j)return V;h&&(o=Wt(o,fi(h))),w?(q=uf,U=!1):o.length>=s&&(q=so,U=!1,o=new Ds(o));e:for(;++P<j;){var ie=n[P],fe=h==null?ie:h(ie);if(ie=w||ie!==0?ie:0,U&&fe===fe){for(var me=re;me--;)if(o[me]===fe)continue e;V.push(ie)}else q(o,fe,w)||V.push(ie)}return V}var ds=Fd(ln),bd=Fd(Sf,!0);function O2(n,o){var h=!0;return ds(n,function(w,P,q){return h=!!o(w,P,q),h}),h}function Dc(n,o,h){for(var w=-1,P=n.length;++w<P;){var q=n[w],U=o(q);if(U!=null&&(j===t?U===U&&!di(U):h(U,j)))var j=U,V=q}return V}function T2(n,o,h,w){var P=n.length;for(h=mt(h),h<0&&(h=-h>P?0:P+h),w=w===t||w>P?P:mt(w),w<0&&(w+=P),w=h>w?0:ql(w);h<w;)n[h++]=o;return n}function md(n,o){var h=[];return ds(n,function(w,P,q){o(w,P,q)&&h.push(w)}),h}function yr(n,o,h,w,P){var q=-1,U=n.length;for(h||(h=_m),P||(P=[]);++q<U;){var j=n[q];o>0&&h(j)?o>1?yr(j,o-1,h,w,P):hs(P,j):w||(P[P.length]=j)}return P}var Mf=Kd(),yd=Kd(!0);function ln(n,o){return n&&Mf(n,o,lr)}function Sf(n,o){return n&&yd(n,o,lr)}function Bc(n,o){return cs(o,function(h){return Gn(n[h])})}function $s(n,o){o=ps(o,n);for(var h=0,w=o.length;n!=null&&h<w;)n=n[gn(o[h++])];return h&&h==w?n:t}function wd(n,o,h){var w=o(n);return gt(n)?w:hs(w,h(n))}function zr(n){return n==null?n===t?Ge:ge:Ts&&Ts in Ft(n)?gm(n):Pm(n)}function Pf(n,o){return n>o}function q2(n,o){return n!=null&&$t.call(n,o)}function D2(n,o){return n!=null&&o in Ft(n)}function B2(n,o,h){return n>=Or(o,h)&&n<hr(o,h)}function Rf(n,o,h){for(var w=h?uf:bc,P=n[0].length,q=n.length,U=q,j=Q(q),V=1/0,re=[];U--;){var ie=n[U];U&&o&&(ie=Wt(ie,fi(o))),V=Or(ie.length,V),j[U]=!h&&(o||P>=120&&ie.length>=120)?new Ds(U&&ie):t}ie=n[0];var fe=-1,me=j[0];e:for(;++fe<P&&re.length<V;){var $e=ie[fe],rt=o?o($e):$e;if($e=h||$e!==0?$e:0,!(me?so(me,rt):w(re,rt,h))){for(U=q;--U;){var yt=j[U];if(!(yt?so(yt,rt):w(n[U],rt,h)))continue e}me&&me.push(rt),re.push($e)}}return re}function $2(n,o,h,w){return ln(n,function(P,q,U){o(w,h(P),q,U)}),w}function po(n,o,h){o=ps(o,n),n=ol(n,o);var w=n==null?n:n[gn(Pi(o))];return w==null?t:dr(w,n,h)}function _d(n){return Yt(n)&&zr(n)==I}function z2(n){return Yt(n)&&zr(n)==De}function k2(n){return Yt(n)&&zr(n)==L}function go(n,o,h,w,P){return n===o?!0:n==null||o==null||!Yt(n)&&!Yt(o)?n!==n&&o!==o:L2(n,o,h,w,go,P)}function L2(n,o,h,w,P,q){var U=gt(n),j=gt(o),V=U?J:Tr(n),re=j?J:Tr(o);V=V==I?Te:V,re=re==I?Te:re;var ie=V==Te,fe=re==Te,me=V==re;if(me&&vs(n)){if(!vs(o))return!1;U=!0,ie=!1}if(me&&!ie)return q||(q=new Ji),U||xa(n)?el(n,o,h,w,P,q):lm(n,o,V,h,w,P,q);if(!(h&T)){var $e=ie&&$t.call(n,"__wrapped__"),rt=fe&&$t.call(o,"__wrapped__");if($e||rt){var yt=$e?n.value():n,it=rt?o.value():o;return q||(q=new Ji),P(yt,it,h,w,q)}}return me?(q||(q=new Ji),pm(n,o,h,w,P,q)):!1}function U2(n){return Yt(n)&&Tr(n)==ce}function Nf(n,o,h,w){var P=h.length,q=P,U=!w;if(n==null)return!q;for(n=Ft(n);P--;){var j=h[P];if(U&&j[2]?j[1]!==n[j[0]]:!(j[0]in n))return!1}for(;++P<q;){j=h[P];var V=j[0],re=n[V],ie=j[1];if(U&&j[2]){if(re===t&&!(V in n))return!1}else{var fe=new Ji;if(w)var me=w(re,ie,V,n,o,fe);if(!(me===t?go(ie,re,T|F,w,fe):me))return!1}}return!0}function Ad(n){if(!Jt(n)||xm(n))return!1;var o=Gn(n)?Ub:Rr;return o.test(ks(n))}function j2(n){return Yt(n)&&zr(n)==Ve}function F2(n){return Yt(n)&&Tr(n)==ze}function K2(n){return Yt(n)&&Zc(n.length)&&!!Lt[zr(n)]}function xd(n){return typeof n=="function"?n:n==null?Zr:typeof n=="object"?gt(n)?Md(n[0],n[1]):Id(n):Hl(n)}function Cf(n){if(!mo(n))return Gb(n);var o=[];for(var h in Ft(n))$t.call(n,h)&&h!="constructor"&&o.push(h);return o}function H2(n){if(!Jt(n))return Sm(n);var o=mo(n),h=[];for(var w in n)w=="constructor"&&(o||!$t.call(n,w))||h.push(w);return h}function Of(n,o){return n<o}function Ed(n,o){var h=-1,w=Yr(n)?Q(n.length):[];return ds(n,function(P,q,U){w[++h]=o(P,q,U)}),w}function Id(n){var o=Gf(n);return o.length==1&&o[0][2]?sl(o[0][0],o[0][1]):function(h){return h===n||Nf(h,n,o)}}function Md(n,o){return Jf(n)&&nl(o)?sl(gn(n),o):function(h){var w=su(h,n);return w===t&&w===o?au(h,n):go(o,w,T|F)}}function $c(n,o,h,w,P){n!==o&&Mf(o,function(q,U){if(P||(P=new Ji),Jt(q))V2(n,o,U,h,$c,w,P);else{var j=w?w(Yf(n,U),q,U+"",n,o,P):t;j===t&&(j=q),Ef(n,U,j)}},Xr)}function V2(n,o,h,w,P,q,U){var j=Yf(n,h),V=Yf(o,h),re=U.get(V);if(re){Ef(n,h,re);return}var ie=q?q(j,V,h+"",n,o,U):t,fe=ie===t;if(fe){var me=gt(V),$e=!me&&vs(V),rt=!me&&!$e&&xa(V);ie=V,me||$e||rt?gt(j)?ie=j:tr(j)?ie=Qr(j):$e?(fe=!1,ie=zd(V,!0)):rt?(fe=!1,ie=kd(V,!0)):ie=[]:wo(V)||Ls(V)?(ie=j,Ls(j)?ie=Dl(j):(!Jt(j)||Gn(j))&&(ie=il(V))):fe=!1}fe&&(U.set(V,ie),P(ie,V,w,q,U),U.delete(V)),Ef(n,h,ie)}function Sd(n,o){var h=n.length;if(h)return o+=o<0?h:0,Vn(o,h)?n[o]:t}function Pd(n,o,h){o.length?o=Wt(o,function(q){return gt(q)?function(U){return $s(U,q.length===1?q[0]:q)}:q}):o=[Zr];var w=-1;o=Wt(o,fi(Ze()));var P=Ed(n,function(q,U,j){var V=Wt(o,function(re){return re(q)});return{criteria:V,index:++w,value:q}});return yb(P,function(q,U){return sm(q,U,h)})}function G2(n,o){return Rd(n,o,function(h,w){return au(n,w)})}function Rd(n,o,h){for(var w=-1,P=o.length,q={};++w<P;){var U=o[w],j=$s(n,U);h(j,U)&&vo(q,ps(U,n),j)}return q}function W2(n){return function(o){return $s(o,n)}}function Tf(n,o,h,w){var P=w?mb:da,q=-1,U=o.length,j=n;for(n===o&&(o=Qr(o)),h&&(j=Wt(n,fi(h)));++q<U;)for(var V=0,re=o[q],ie=h?h(re):re;(V=P(j,ie,V,w))>-1;)j!==n&&Sc.call(j,V,1),Sc.call(n,V,1);return n}function Nd(n,o){for(var h=n?o.length:0,w=h-1;h--;){var P=o[h];if(h==w||P!==q){var q=P;Vn(P)?Sc.call(n,P,1):$f(n,P)}}return n}function qf(n,o){return n+Nc(fd()*(o-n+1))}function J2(n,o,h,w){for(var P=-1,q=hr(Rc((o-n)/(h||1)),0),U=Q(q);q--;)U[w?q:++P]=n,n+=h;return U}function Df(n,o){var h="";if(!n||o<1||o>S)return h;do o%2&&(h+=n),o=Nc(o/2),o&&(n+=n);while(o);return h}function _t(n,o){return Xf(al(n,o,Zr),n+"")}function Q2(n){return ld(Ea(n))}function Y2(n,o){var h=Ea(n);return Gc(h,Bs(o,0,h.length))}function vo(n,o,h,w){if(!Jt(n))return n;o=ps(o,n);for(var P=-1,q=o.length,U=q-1,j=n;j!=null&&++P<q;){var V=gn(o[P]),re=h;if(V==="__proto__"||V==="constructor"||V==="prototype")return n;if(P!=U){var ie=j[V];re=w?w(ie,V,j):t,re===t&&(re=Jt(ie)?ie:Vn(o[P+1])?[]:{})}uo(j,V,re),j=j[V]}return n}var Cd=Cc?function(n,o){return Cc.set(n,o),n}:Zr,X2=Pc?function(n,o){return Pc(n,"toString",{configurable:!0,enumerable:!1,value:cu(o),writable:!0})}:Zr;function Z2(n){return Gc(Ea(n))}function Si(n,o,h){var w=-1,P=n.length;o<0&&(o=-o>P?0:P+o),h=h>P?P:h,h<0&&(h+=P),P=o>h?0:h-o>>>0,o>>>=0;for(var q=Q(P);++w<P;)q[w]=n[w+o];return q}function em(n,o){var h;return ds(n,function(w,P,q){return h=o(w,P,q),!h}),!!h}function zc(n,o,h){var w=0,P=n==null?w:n.length;if(typeof o=="number"&&o===o&&P<=X){for(;w<P;){var q=w+P>>>1,U=n[q];U!==null&&!di(U)&&(h?U<=o:U<o)?w=q+1:P=q}return P}return Bf(n,o,Zr,h)}function Bf(n,o,h,w){var P=0,q=n==null?0:n.length;if(q===0)return 0;o=h(o);for(var U=o!==o,j=o===null,V=di(o),re=o===t;P<q;){var ie=Nc((P+q)/2),fe=h(n[ie]),me=fe!==t,$e=fe===null,rt=fe===fe,yt=di(fe);if(U)var it=w||rt;else re?it=rt&&(w||me):j?it=rt&&me&&(w||!$e):V?it=rt&&me&&!$e&&(w||!yt):$e||yt?it=!1:it=w?fe<=o:fe<o;it?P=ie+1:q=ie}return Or(q,R)}function Od(n,o){for(var h=-1,w=n.length,P=0,q=[];++h<w;){var U=n[h],j=o?o(U):U;if(!h||!Qi(j,V)){var V=j;q[P++]=U===0?0:U}}return q}function Td(n){return typeof n=="number"?n:di(n)?d:+n}function ui(n){if(typeof n=="string")return n;if(gt(n))return Wt(n,ui)+"";if(di(n))return ud?ud.call(n):"";var o=n+"";return o=="0"&&1/n==-M?"-0":o}function ls(n,o,h){var w=-1,P=bc,q=n.length,U=!0,j=[],V=j;if(h)U=!1,P=uf;else if(q>=s){var re=o?null:um(n);if(re)return yc(re);U=!1,P=so,V=new Ds}else V=o?[]:j;e:for(;++w<q;){var ie=n[w],fe=o?o(ie):ie;if(ie=h||ie!==0?ie:0,U&&fe===fe){for(var me=V.length;me--;)if(V[me]===fe)continue e;o&&V.push(fe),j.push(ie)}else P(V,fe,h)||(V!==j&&V.push(fe),j.push(ie))}return j}function $f(n,o){return o=ps(o,n),n=ol(n,o),n==null||delete n[gn(Pi(o))]}function qd(n,o,h,w){return vo(n,o,h($s(n,o)),w)}function kc(n,o,h,w){for(var P=n.length,q=w?P:-1;(w?q--:++q<P)&&o(n[q],q,n););return h?Si(n,w?0:q,w?q+1:P):Si(n,w?q+1:0,w?P:q)}function Dd(n,o){var h=n;return h instanceof Mt&&(h=h.value()),df(o,function(w,P){return P.func.apply(P.thisArg,hs([w],P.args))},h)}function zf(n,o,h){var w=n.length;if(w<2)return w?ls(n[0]):[];for(var P=-1,q=Q(w);++P<w;)for(var U=n[P],j=-1;++j<w;)j!=P&&(q[P]=lo(q[P]||U,n[j],o,h));return ls(yr(q,1),o,h)}function Bd(n,o,h){for(var w=-1,P=n.length,q=o.length,U={};++w<P;){var j=w<q?o[w]:t;h(U,n[w],j)}return U}function kf(n){return tr(n)?n:[]}function Lf(n){return typeof n=="function"?n:Zr}function ps(n,o){return gt(n)?n:Jf(n,o)?[n]:ul(Dt(n))}var tm=_t;function gs(n,o,h){var w=n.length;return h=h===t?w:h,!o&&h>=w?n:Si(n,o,h)}var $d=jb||function(n){return Nt.clearTimeout(n)};function zd(n,o){if(o)return n.slice();var h=n.length,w=sd?sd(h):new n.constructor(h);return n.copy(w),w}function Uf(n){var o=new n.constructor(n.byteLength);return new Ic(o).set(new Ic(n)),o}function rm(n,o){var h=o?Uf(n.buffer):n.buffer;return new n.constructor(h,n.byteOffset,n.byteLength)}function im(n){var o=new n.constructor(n.source,bt.exec(n));return o.lastIndex=n.lastIndex,o}function nm(n){return fo?Ft(fo.call(n)):{}}function kd(n,o){var h=o?Uf(n.buffer):n.buffer;return new n.constructor(h,n.byteOffset,n.length)}function Ld(n,o){if(n!==o){var h=n!==t,w=n===null,P=n===n,q=di(n),U=o!==t,j=o===null,V=o===o,re=di(o);if(!j&&!re&&!q&&n>o||q&&U&&V&&!j&&!re||w&&U&&V||!h&&V||!P)return 1;if(!w&&!q&&!re&&n<o||re&&h&&P&&!w&&!q||j&&h&&P||!U&&P||!V)return-1}return 0}function sm(n,o,h){for(var w=-1,P=n.criteria,q=o.criteria,U=P.length,j=h.length;++w<U;){var V=Ld(P[w],q[w]);if(V){if(w>=j)return V;var re=h[w];return V*(re=="desc"?-1:1)}}return n.index-o.index}function Ud(n,o,h,w){for(var P=-1,q=n.length,U=h.length,j=-1,V=o.length,re=hr(q-U,0),ie=Q(V+re),fe=!w;++j<V;)ie[j]=o[j];for(;++P<U;)(fe||P<q)&&(ie[h[P]]=n[P]);for(;re--;)ie[j++]=n[P++];return ie}function jd(n,o,h,w){for(var P=-1,q=n.length,U=-1,j=h.length,V=-1,re=o.length,ie=hr(q-j,0),fe=Q(ie+re),me=!w;++P<ie;)fe[P]=n[P];for(var $e=P;++V<re;)fe[$e+V]=o[V];for(;++U<j;)(me||P<q)&&(fe[$e+h[U]]=n[P++]);return fe}function Qr(n,o){var h=-1,w=n.length;for(o||(o=Q(w));++h<w;)o[h]=n[h];return o}function pn(n,o,h,w){var P=!h;h||(h={});for(var q=-1,U=o.length;++q<U;){var j=o[q],V=w?w(h[j],n[j],j,h,n):t;V===t&&(V=n[j]),P?Fn(h,j,V):uo(h,j,V)}return h}function am(n,o){return pn(n,Wf(n),o)}function om(n,o){return pn(n,tl(n),o)}function Lc(n,o){return function(h,w){var P=gt(h)?db:R2,q=o?o():{};return P(h,n,Ze(w,2),q)}}function wa(n){return _t(function(o,h){var w=-1,P=h.length,q=P>1?h[P-1]:t,U=P>2?h[2]:t;for(q=n.length>3&&typeof q=="function"?(P--,q):t,U&&kr(h[0],h[1],U)&&(q=P<3?t:q,P=1),o=Ft(o);++w<P;){var j=h[w];j&&n(o,j,w,q)}return o})}function Fd(n,o){return function(h,w){if(h==null)return h;if(!Yr(h))return n(h,w);for(var P=h.length,q=o?P:-1,U=Ft(h);(o?q--:++q<P)&&w(U[q],q,U)!==!1;);return h}}function Kd(n){return function(o,h,w){for(var P=-1,q=Ft(o),U=w(o),j=U.length;j--;){var V=U[n?j:++P];if(h(q[V],V,q)===!1)break}return o}}function cm(n,o,h){var w=o&G,P=bo(n);function q(){var U=this&&this!==Nt&&this instanceof q?P:n;return U.apply(w?h:this,arguments)}return q}function Hd(n){return function(o){o=Dt(o);var h=la(o)?Wi(o):t,w=h?h[0]:o.charAt(0),P=h?gs(h,1).join(""):o.slice(1);return w[n]()+P}}function _a(n){return function(o){return df(Fl(jl(o).replace(io,"")),n,"")}}function bo(n){return function(){var o=arguments;switch(o.length){case 0:return new n;case 1:return new n(o[0]);case 2:return new n(o[0],o[1]);case 3:return new n(o[0],o[1],o[2]);case 4:return new n(o[0],o[1],o[2],o[3]);case 5:return new n(o[0],o[1],o[2],o[3],o[4]);case 6:return new n(o[0],o[1],o[2],o[3],o[4],o[5]);case 7:return new n(o[0],o[1],o[2],o[3],o[4],o[5],o[6])}var h=ya(n.prototype),w=n.apply(h,o);return Jt(w)?w:h}}function hm(n,o,h){var w=bo(n);function P(){for(var q=arguments.length,U=Q(q),j=q,V=Aa(P);j--;)U[j]=arguments[j];var re=q<3&&U[0]!==V&&U[q-1]!==V?[]:fs(U,V);if(q-=re.length,q<h)return Qd(n,o,Uc,P.placeholder,t,U,re,t,t,h-q);var ie=this&&this!==Nt&&this instanceof P?w:n;return dr(ie,this,U)}return P}function Vd(n){return function(o,h,w){var P=Ft(o);if(!Yr(o)){var q=Ze(h,3);o=lr(o),h=function(j){return q(P[j],j,P)}}var U=n(o,h,w);return U>-1?P[q?o[U]:U]:t}}function Gd(n){return Hn(function(o){var h=o.length,w=h,P=Ii.prototype.thru;for(n&&o.reverse();w--;){var q=o[w];if(typeof q!="function")throw new Ei(f);if(P&&!U&&Hc(q)=="wrapper")var U=new Ii([],!0)}for(w=U?w:h;++w<h;){q=o[w];var j=Hc(q),V=j=="wrapper"?Vf(q):t;V&&Qf(V[0])&&V[1]==(ne|de|ae|ve)&&!V[4].length&&V[9]==1?U=U[Hc(V[0])].apply(U,V[3]):U=q.length==1&&Qf(q)?U[j]():U.thru(q)}return function(){var re=arguments,ie=re[0];if(U&&re.length==1&&gt(ie))return U.plant(ie).value();for(var fe=0,me=h?o[fe].apply(this,re):ie;++fe<h;)me=o[fe].call(this,me);return me}})}function Uc(n,o,h,w,P,q,U,j,V,re){var ie=o&ne,fe=o&G,me=o&W,$e=o&(de|se),rt=o&Ae,yt=me?t:bo(n);function it(){for(var xt=arguments.length,Ct=Q(xt),li=xt;li--;)Ct[li]=arguments[li];if($e)var Lr=Aa(it),pi=_b(Ct,Lr);if(w&&(Ct=Ud(Ct,w,P,$e)),q&&(Ct=jd(Ct,q,U,$e)),xt-=pi,$e&&xt<re){var rr=fs(Ct,Lr);return Qd(n,o,Uc,it.placeholder,h,Ct,rr,j,V,re-xt)}var Yi=fe?h:this,Jn=me?Yi[n]:n;return xt=Ct.length,j?Ct=Rm(Ct,j):rt&&xt>1&&Ct.reverse(),ie&&V<xt&&(Ct.length=V),this&&this!==Nt&&this instanceof it&&(Jn=yt||bo(Jn)),Jn.apply(Yi,Ct)}return it}function Wd(n,o){return function(h,w){return $2(h,n,o(w),{})}}function jc(n,o){return function(h,w){var P;if(h===t&&w===t)return o;if(h!==t&&(P=h),w!==t){if(P===t)return w;typeof h=="string"||typeof w=="string"?(h=ui(h),w=ui(w)):(h=Td(h),w=Td(w)),P=n(h,w)}return P}}function jf(n){return Hn(function(o){return o=Wt(o,fi(Ze())),_t(function(h){var w=this;return n(o,function(P){return dr(P,w,h)})})})}function Fc(n,o){o=o===t?" ":ui(o);var h=o.length;if(h<2)return h?Df(o,n):o;var w=Df(o,Rc(n/pa(o)));return la(o)?gs(Wi(w),0,n).join(""):w.slice(0,n)}function fm(n,o,h,w){var P=o&G,q=bo(n);function U(){for(var j=-1,V=arguments.length,re=-1,ie=w.length,fe=Q(ie+V),me=this&&this!==Nt&&this instanceof U?q:n;++re<ie;)fe[re]=w[re];for(;V--;)fe[re++]=arguments[++j];return dr(me,P?h:this,fe)}return U}function Jd(n){return function(o,h,w){return w&&typeof w!="number"&&kr(o,h,w)&&(h=w=t),o=Wn(o),h===t?(h=o,o=0):h=Wn(h),w=w===t?o<h?1:-1:Wn(w),J2(o,h,w,n)}}function Kc(n){return function(o,h){return typeof o=="string"&&typeof h=="string"||(o=Ri(o),h=Ri(h)),n(o,h)}}function Qd(n,o,h,w,P,q,U,j,V,re){var ie=o&de,fe=ie?U:t,me=ie?t:U,$e=ie?q:t,rt=ie?t:q;o|=ie?ae:ue,o&=~(ie?ue:ae),o&ee||(o&=~(G|W));var yt=[n,o,P,$e,fe,rt,me,j,V,re],it=h.apply(t,yt);return Qf(n)&&cl(it,yt),it.placeholder=w,hl(it,n,o)}function Ff(n){var o=cr[n];return function(h,w){if(h=Ri(h),w=w==null?0:Or(mt(w),292),w&&hd(h)){var P=(Dt(h)+"e").split("e"),q=o(P[0]+"e"+(+P[1]+w));return P=(Dt(q)+"e").split("e"),+(P[0]+"e"+(+P[1]-w))}return o(h)}}var um=ba&&1/yc(new ba([,-0]))[1]==M?function(n){return new ba(n)}:uu;function Yd(n){return function(o){var h=Tr(o);return h==ce?yf(o):h==ze?Pb(o):wb(o,n(o))}}function Kn(n,o,h,w,P,q,U,j){var V=o&W;if(!V&&typeof n!="function")throw new Ei(f);var re=w?w.length:0;if(re||(o&=~(ae|ue),w=P=t),U=U===t?U:hr(mt(U),0),j=j===t?j:mt(j),re-=P?P.length:0,o&ue){var ie=w,fe=P;w=P=t}var me=V?t:Vf(n),$e=[n,o,h,w,P,ie,fe,q,U,j];if(me&&Mm($e,me),n=$e[0],o=$e[1],h=$e[2],w=$e[3],P=$e[4],j=$e[9]=$e[9]===t?V?0:n.length:hr($e[9]-re,0),!j&&o&(de|se)&&(o&=~(de|se)),!o||o==G)var rt=cm(n,o,h);else o==de||o==se?rt=hm(n,o,j):(o==ae||o==(G|ae))&&!P.length?rt=fm(n,o,h,w):rt=Uc.apply(t,$e);var yt=me?Cd:cl;return hl(yt(rt,$e),n,o)}function Xd(n,o,h,w){return n===t||Qi(n,va[h])&&!$t.call(w,h)?o:n}function Zd(n,o,h,w,P,q){return Jt(n)&&Jt(o)&&(q.set(o,n),$c(n,o,t,Zd,q),q.delete(o)),n}function dm(n){return wo(n)?t:n}function el(n,o,h,w,P,q){var U=h&T,j=n.length,V=o.length;if(j!=V&&!(U&&V>j))return!1;var re=q.get(n),ie=q.get(o);if(re&&ie)return re==o&&ie==n;var fe=-1,me=!0,$e=h&F?new Ds:t;for(q.set(n,o),q.set(o,n);++fe<j;){var rt=n[fe],yt=o[fe];if(w)var it=U?w(yt,rt,fe,o,n,q):w(rt,yt,fe,n,o,q);if(it!==t){if(it)continue;me=!1;break}if($e){if(!lf(o,function(xt,Ct){if(!so($e,Ct)&&(rt===xt||P(rt,xt,h,w,q)))return $e.push(Ct)})){me=!1;break}}else if(!(rt===yt||P(rt,yt,h,w,q))){me=!1;break}}return q.delete(n),q.delete(o),me}function lm(n,o,h,w,P,q,U){switch(h){case we:if(n.byteLength!=o.byteLength||n.byteOffset!=o.byteOffset)return!1;n=n.buffer,o=o.buffer;case De:return!(n.byteLength!=o.byteLength||!q(new Ic(n),new Ic(o)));case k:case L:case pe:return Qi(+n,+o);case z:return n.name==o.name&&n.message==o.message;case Ve:case _e:return n==o+"";case ce:var j=yf;case ze:var V=w&T;if(j||(j=yc),n.size!=o.size&&!V)return!1;var re=U.get(n);if(re)return re==o;w|=F,U.set(n,o);var ie=el(j(n),j(o),w,P,q,U);return U.delete(n),ie;case je:if(fo)return fo.call(n)==fo.call(o)}return!1}function pm(n,o,h,w,P,q){var U=h&T,j=Kf(n),V=j.length,re=Kf(o),ie=re.length;if(V!=ie&&!U)return!1;for(var fe=V;fe--;){var me=j[fe];if(!(U?me in o:$t.call(o,me)))return!1}var $e=q.get(n),rt=q.get(o);if($e&&rt)return $e==o&&rt==n;var yt=!0;q.set(n,o),q.set(o,n);for(var it=U;++fe<V;){me=j[fe];var xt=n[me],Ct=o[me];if(w)var li=U?w(Ct,xt,me,o,n,q):w(xt,Ct,me,n,o,q);if(!(li===t?xt===Ct||P(xt,Ct,h,w,q):li)){yt=!1;break}it||(it=me=="constructor")}if(yt&&!it){var Lr=n.constructor,pi=o.constructor;Lr!=pi&&"constructor"in n&&"constructor"in o&&!(typeof Lr=="function"&&Lr instanceof Lr&&typeof pi=="function"&&pi instanceof pi)&&(yt=!1)}return q.delete(n),q.delete(o),yt}function Hn(n){return Xf(al(n,t,gl),n+"")}function Kf(n){return wd(n,lr,Wf)}function Hf(n){return wd(n,Xr,tl)}var Vf=Cc?function(n){return Cc.get(n)}:uu;function Hc(n){for(var o=n.name+"",h=ma[o],w=$t.call(ma,o)?h.length:0;w--;){var P=h[w],q=P.func;if(q==null||q==n)return P.name}return o}function Aa(n){var o=$t.call(C,"placeholder")?C:n;return o.placeholder}function Ze(){var n=C.iteratee||hu;return n=n===hu?xd:n,arguments.length?n(arguments[0],arguments[1]):n}function Vc(n,o){var h=n.__data__;return Am(o)?h[typeof o=="string"?"string":"hash"]:h.map}function Gf(n){for(var o=lr(n),h=o.length;h--;){var w=o[h],P=n[w];o[h]=[w,P,nl(P)]}return o}function zs(n,o){var h=Ib(n,o);return Ad(h)?h:t}function gm(n){var o=$t.call(n,Ts),h=n[Ts];try{n[Ts]=t;var w=!0}catch{}var P=xc.call(n);return w&&(o?n[Ts]=h:delete n[Ts]),P}var Wf=_f?function(n){return n==null?[]:(n=Ft(n),cs(_f(n),function(o){return od.call(n,o)}))}:du,tl=_f?function(n){for(var o=[];n;)hs(o,Wf(n)),n=Mc(n);return o}:du,Tr=zr;(Af&&Tr(new Af(new ArrayBuffer(1)))!=we||oo&&Tr(new oo)!=ce||xf&&Tr(xf.resolve())!=nt||ba&&Tr(new ba)!=ze||co&&Tr(new co)!=be)&&(Tr=function(n){var o=zr(n),h=o==Te?n.constructor:t,w=h?ks(h):"";if(w)switch(w){case Yb:return we;case Xb:return ce;case Zb:return nt;case e2:return ze;case t2:return be}return o});function vm(n,o,h){for(var w=-1,P=h.length;++w<P;){var q=h[w],U=q.size;switch(q.type){case"drop":n+=U;break;case"dropRight":o-=U;break;case"take":o=Or(o,n+U);break;case"takeRight":n=hr(n,o-U);break}}return{start:n,end:o}}function bm(n){var o=n.match(Ue);return o?o[1].split(at):[]}function rl(n,o,h){o=ps(o,n);for(var w=-1,P=o.length,q=!1;++w<P;){var U=gn(o[w]);if(!(q=n!=null&&h(n,U)))break;n=n[U]}return q||++w!=P?q:(P=n==null?0:n.length,!!P&&Zc(P)&&Vn(U,P)&&(gt(n)||Ls(n)))}function mm(n){var o=n.length,h=new n.constructor(o);return o&&typeof n[0]=="string"&&$t.call(n,"index")&&(h.index=n.index,h.input=n.input),h}function il(n){return typeof n.constructor=="function"&&!mo(n)?ya(Mc(n)):{}}function ym(n,o,h){var w=n.constructor;switch(o){case De:return Uf(n);case k:case L:return new w(+n);case we:return rm(n,h);case Je:case ke:case Pe:case ct:case ft:case qe:case ht:case ut:case Be:return kd(n,h);case ce:return new w;case pe:case _e:return new w(n);case Ve:return im(n);case ze:return new w;case je:return nm(n)}}function wm(n,o){var h=o.length;if(!h)return n;var w=h-1;return o[w]=(h>1?"& ":"")+o[w],o=o.join(h>2?", ":" "),n.replace(Ie,`{
/* [wrapped with `+o+`] */
`)}function _m(n){return gt(n)||Ls(n)||!!(cd&&n&&n[cd])}function Vn(n,o){var h=typeof n;return o=o??S,!!o&&(h=="number"||h!="symbol"&&Cr.test(n))&&n>-1&&n%1==0&&n<o}function kr(n,o,h){if(!Jt(h))return!1;var w=typeof o;return(w=="number"?Yr(h)&&Vn(o,h.length):w=="string"&&o in h)?Qi(h[o],n):!1}function Jf(n,o){if(gt(n))return!1;var h=typeof n;return h=="number"||h=="symbol"||h=="boolean"||n==null||di(n)?!0:Re.test(n)||!He.test(n)||o!=null&&n in Ft(o)}function Am(n){var o=typeof n;return o=="string"||o=="number"||o=="symbol"||o=="boolean"?n!=="__proto__":n===null}function Qf(n){var o=Hc(n),h=C[o];if(typeof h!="function"||!(o in Mt.prototype))return!1;if(n===h)return!0;var w=Vf(h);return!!w&&n===w[0]}function xm(n){return!!nd&&nd in n}var Em=_c?Gn:lu;function mo(n){var o=n&&n.constructor,h=typeof o=="function"&&o.prototype||va;return n===h}function nl(n){return n===n&&!Jt(n)}function sl(n,o){return function(h){return h==null?!1:h[n]===o&&(o!==t||n in Ft(h))}}function Im(n){var o=Yc(n,function(w){return h.size===v&&h.clear(),w}),h=o.cache;return o}function Mm(n,o){var h=n[1],w=o[1],P=h|w,q=P<(G|W|ne),U=w==ne&&h==de||w==ne&&h==ve&&n[7].length<=o[8]||w==(ne|ve)&&o[7].length<=o[8]&&h==de;if(!(q||U))return n;w&G&&(n[2]=o[2],P|=h&G?0:ee);var j=o[3];if(j){var V=n[3];n[3]=V?Ud(V,j,o[4]):j,n[4]=V?fs(n[3],A):o[4]}return j=o[5],j&&(V=n[5],n[5]=V?jd(V,j,o[6]):j,n[6]=V?fs(n[5],A):o[6]),j=o[7],j&&(n[7]=j),w&ne&&(n[8]=n[8]==null?o[8]:Or(n[8],o[8])),n[9]==null&&(n[9]=o[9]),n[0]=o[0],n[1]=P,n}function Sm(n){var o=[];if(n!=null)for(var h in Ft(n))o.push(h);return o}function Pm(n){return xc.call(n)}function al(n,o,h){return o=hr(o===t?n.length-1:o,0),function(){for(var w=arguments,P=-1,q=hr(w.length-o,0),U=Q(q);++P<q;)U[P]=w[o+P];P=-1;for(var j=Q(o+1);++P<o;)j[P]=w[P];return j[o]=h(U),dr(n,this,j)}}function ol(n,o){return o.length<2?n:$s(n,Si(o,0,-1))}function Rm(n,o){for(var h=n.length,w=Or(o.length,h),P=Qr(n);w--;){var q=o[w];n[w]=Vn(q,h)?P[q]:t}return n}function Yf(n,o){if(!(o==="constructor"&&typeof n[o]=="function")&&o!="__proto__")return n[o]}var cl=fl(Cd),yo=Kb||function(n,o){return Nt.setTimeout(n,o)},Xf=fl(X2);function hl(n,o,h){var w=o+"";return Xf(n,wm(w,Nm(bm(w),h)))}function fl(n){var o=0,h=0;return function(){var w=Wb(),P=c-(w-h);if(h=w,P>0){if(++o>=b)return arguments[0]}else o=0;return n.apply(t,arguments)}}function Gc(n,o){var h=-1,w=n.length,P=w-1;for(o=o===t?w:o;++h<o;){var q=qf(h,P),U=n[q];n[q]=n[h],n[h]=U}return n.length=o,n}var ul=Im(function(n){var o=[];return n.charCodeAt(0)===46&&o.push(""),n.replace(st,function(h,w,P,q){o.push(P?q.replace(Tt,"$1"):w||h)}),o});function gn(n){if(typeof n=="string"||di(n))return n;var o=n+"";return o=="0"&&1/n==-M?"-0":o}function ks(n){if(n!=null){try{return Ac.call(n)}catch{}try{return n+""}catch{}}return""}function Nm(n,o){return xi(te,function(h){var w="_."+h[0];o&h[1]&&!bc(n,w)&&n.push(w)}),n.sort()}function dl(n){if(n instanceof Mt)return n.clone();var o=new Ii(n.__wrapped__,n.__chain__);return o.__actions__=Qr(n.__actions__),o.__index__=n.__index__,o.__values__=n.__values__,o}function Cm(n,o,h){(h?kr(n,o,h):o===t)?o=1:o=hr(mt(o),0);var w=n==null?0:n.length;if(!w||o<1)return[];for(var P=0,q=0,U=Q(Rc(w/o));P<w;)U[q++]=Si(n,P,P+=o);return U}function Om(n){for(var o=-1,h=n==null?0:n.length,w=0,P=[];++o<h;){var q=n[o];q&&(P[w++]=q)}return P}function Tm(){var n=arguments.length;if(!n)return[];for(var o=Q(n-1),h=arguments[0],w=n;w--;)o[w-1]=arguments[w];return hs(gt(h)?Qr(h):[h],yr(o,1))}var qm=_t(function(n,o){return tr(n)?lo(n,yr(o,1,tr,!0)):[]}),Dm=_t(function(n,o){var h=Pi(o);return tr(h)&&(h=t),tr(n)?lo(n,yr(o,1,tr,!0),Ze(h,2)):[]}),Bm=_t(function(n,o){var h=Pi(o);return tr(h)&&(h=t),tr(n)?lo(n,yr(o,1,tr,!0),t,h):[]});function $m(n,o,h){var w=n==null?0:n.length;return w?(o=h||o===t?1:mt(o),Si(n,o<0?0:o,w)):[]}function zm(n,o,h){var w=n==null?0:n.length;return w?(o=h||o===t?1:mt(o),o=w-o,Si(n,0,o<0?0:o)):[]}function km(n,o){return n&&n.length?kc(n,Ze(o,3),!0,!0):[]}function Lm(n,o){return n&&n.length?kc(n,Ze(o,3),!0):[]}function Um(n,o,h,w){var P=n==null?0:n.length;return P?(h&&typeof h!="number"&&kr(n,o,h)&&(h=0,w=P),T2(n,o,h,w)):[]}function ll(n,o,h){var w=n==null?0:n.length;if(!w)return-1;var P=h==null?0:mt(h);return P<0&&(P=hr(w+P,0)),mc(n,Ze(o,3),P)}function pl(n,o,h){var w=n==null?0:n.length;if(!w)return-1;var P=w-1;return h!==t&&(P=mt(h),P=h<0?hr(w+P,0):Or(P,w-1)),mc(n,Ze(o,3),P,!0)}function gl(n){var o=n==null?0:n.length;return o?yr(n,1):[]}function jm(n){var o=n==null?0:n.length;return o?yr(n,M):[]}function Fm(n,o){var h=n==null?0:n.length;return h?(o=o===t?1:mt(o),yr(n,o)):[]}function Km(n){for(var o=-1,h=n==null?0:n.length,w={};++o<h;){var P=n[o];w[P[0]]=P[1]}return w}function vl(n){return n&&n.length?n[0]:t}function Hm(n,o,h){var w=n==null?0:n.length;if(!w)return-1;var P=h==null?0:mt(h);return P<0&&(P=hr(w+P,0)),da(n,o,P)}function Vm(n){var o=n==null?0:n.length;return o?Si(n,0,-1):[]}var Gm=_t(function(n){var o=Wt(n,kf);return o.length&&o[0]===n[0]?Rf(o):[]}),Wm=_t(function(n){var o=Pi(n),h=Wt(n,kf);return o===Pi(h)?o=t:h.pop(),h.length&&h[0]===n[0]?Rf(h,Ze(o,2)):[]}),Jm=_t(function(n){var o=Pi(n),h=Wt(n,kf);return o=typeof o=="function"?o:t,o&&h.pop(),h.length&&h[0]===n[0]?Rf(h,t,o):[]});function Qm(n,o){return n==null?"":Vb.call(n,o)}function Pi(n){var o=n==null?0:n.length;return o?n[o-1]:t}function Ym(n,o,h){var w=n==null?0:n.length;if(!w)return-1;var P=w;return h!==t&&(P=mt(h),P=P<0?hr(w+P,0):Or(P,w-1)),o===o?Nb(n,o,P):mc(n,Q0,P,!0)}function Xm(n,o){return n&&n.length?Sd(n,mt(o)):t}var Zm=_t(bl);function bl(n,o){return n&&n.length&&o&&o.length?Tf(n,o):n}function e6(n,o,h){return n&&n.length&&o&&o.length?Tf(n,o,Ze(h,2)):n}function t6(n,o,h){return n&&n.length&&o&&o.length?Tf(n,o,t,h):n}var r6=Hn(function(n,o){var h=n==null?0:n.length,w=If(n,o);return Nd(n,Wt(o,function(P){return Vn(P,h)?+P:P}).sort(Ld)),w});function i6(n,o){var h=[];if(!(n&&n.length))return h;var w=-1,P=[],q=n.length;for(o=Ze(o,3);++w<q;){var U=n[w];o(U,w,n)&&(h.push(U),P.push(w))}return Nd(n,P),h}function Zf(n){return n==null?n:Qb.call(n)}function n6(n,o,h){var w=n==null?0:n.length;return w?(h&&typeof h!="number"&&kr(n,o,h)?(o=0,h=w):(o=o==null?0:mt(o),h=h===t?w:mt(h)),Si(n,o,h)):[]}function s6(n,o){return zc(n,o)}function a6(n,o,h){return Bf(n,o,Ze(h,2))}function o6(n,o){var h=n==null?0:n.length;if(h){var w=zc(n,o);if(w<h&&Qi(n[w],o))return w}return-1}function c6(n,o){return zc(n,o,!0)}function h6(n,o,h){return Bf(n,o,Ze(h,2),!0)}function f6(n,o){var h=n==null?0:n.length;if(h){var w=zc(n,o,!0)-1;if(Qi(n[w],o))return w}return-1}function u6(n){return n&&n.length?Od(n):[]}function d6(n,o){return n&&n.length?Od(n,Ze(o,2)):[]}function l6(n){var o=n==null?0:n.length;return o?Si(n,1,o):[]}function p6(n,o,h){return n&&n.length?(o=h||o===t?1:mt(o),Si(n,0,o<0?0:o)):[]}function g6(n,o,h){var w=n==null?0:n.length;return w?(o=h||o===t?1:mt(o),o=w-o,Si(n,o<0?0:o,w)):[]}function v6(n,o){return n&&n.length?kc(n,Ze(o,3),!1,!0):[]}function b6(n,o){return n&&n.length?kc(n,Ze(o,3)):[]}var m6=_t(function(n){return ls(yr(n,1,tr,!0))}),y6=_t(function(n){var o=Pi(n);return tr(o)&&(o=t),ls(yr(n,1,tr,!0),Ze(o,2))}),w6=_t(function(n){var o=Pi(n);return o=typeof o=="function"?o:t,ls(yr(n,1,tr,!0),t,o)});function _6(n){return n&&n.length?ls(n):[]}function A6(n,o){return n&&n.length?ls(n,Ze(o,2)):[]}function x6(n,o){return o=typeof o=="function"?o:t,n&&n.length?ls(n,t,o):[]}function eu(n){if(!(n&&n.length))return[];var o=0;return n=cs(n,function(h){if(tr(h))return o=hr(h.length,o),!0}),bf(o,function(h){return Wt(n,pf(h))})}function ml(n,o){if(!(n&&n.length))return[];var h=eu(n);return o==null?h:Wt(h,function(w){return dr(o,t,w)})}var E6=_t(function(n,o){return tr(n)?lo(n,o):[]}),I6=_t(function(n){return zf(cs(n,tr))}),M6=_t(function(n){var o=Pi(n);return tr(o)&&(o=t),zf(cs(n,tr),Ze(o,2))}),S6=_t(function(n){var o=Pi(n);return o=typeof o=="function"?o:t,zf(cs(n,tr),t,o)}),P6=_t(eu);function R6(n,o){return Bd(n||[],o||[],uo)}function N6(n,o){return Bd(n||[],o||[],vo)}var C6=_t(function(n){var o=n.length,h=o>1?n[o-1]:t;return h=typeof h=="function"?(n.pop(),h):t,ml(n,h)});function yl(n){var o=C(n);return o.__chain__=!0,o}function O6(n,o){return o(n),n}function Wc(n,o){return o(n)}var T6=Hn(function(n){var o=n.length,h=o?n[0]:0,w=this.__wrapped__,P=function(q){return If(q,n)};return o>1||this.__actions__.length||!(w instanceof Mt)||!Vn(h)?this.thru(P):(w=w.slice(h,+h+(o?1:0)),w.__actions__.push({func:Wc,args:[P],thisArg:t}),new Ii(w,this.__chain__).thru(function(q){return o&&!q.length&&q.push(t),q}))});function q6(){return yl(this)}function D6(){return new Ii(this.value(),this.__chain__)}function B6(){this.__values__===t&&(this.__values__=Tl(this.value()));var n=this.__index__>=this.__values__.length,o=n?t:this.__values__[this.__index__++];return{done:n,value:o}}function $6(){return this}function z6(n){for(var o,h=this;h instanceof Tc;){var w=dl(h);w.__index__=0,w.__values__=t,o?P.__wrapped__=w:o=w;var P=w;h=h.__wrapped__}return P.__wrapped__=n,o}function k6(){var n=this.__wrapped__;if(n instanceof Mt){var o=n;return this.__actions__.length&&(o=new Mt(this)),o=o.reverse(),o.__actions__.push({func:Wc,args:[Zf],thisArg:t}),new Ii(o,this.__chain__)}return this.thru(Zf)}function L6(){return Dd(this.__wrapped__,this.__actions__)}var U6=Lc(function(n,o,h){$t.call(n,h)?++n[h]:Fn(n,h,1)});function j6(n,o,h){var w=gt(n)?W0:O2;return h&&kr(n,o,h)&&(o=t),w(n,Ze(o,3))}function F6(n,o){var h=gt(n)?cs:md;return h(n,Ze(o,3))}var K6=Vd(ll),H6=Vd(pl);function V6(n,o){return yr(Jc(n,o),1)}function G6(n,o){return yr(Jc(n,o),M)}function W6(n,o,h){return h=h===t?1:mt(h),yr(Jc(n,o),h)}function wl(n,o){var h=gt(n)?xi:ds;return h(n,Ze(o,3))}function _l(n,o){var h=gt(n)?lb:bd;return h(n,Ze(o,3))}var J6=Lc(function(n,o,h){$t.call(n,h)?n[h].push(o):Fn(n,h,[o])});function Q6(n,o,h,w){n=Yr(n)?n:Ea(n),h=h&&!w?mt(h):0;var P=n.length;return h<0&&(h=hr(P+h,0)),eh(n)?h<=P&&n.indexOf(o,h)>-1:!!P&&da(n,o,h)>-1}var Y6=_t(function(n,o,h){var w=-1,P=typeof o=="function",q=Yr(n)?Q(n.length):[];return ds(n,function(U){q[++w]=P?dr(o,U,h):po(U,o,h)}),q}),X6=Lc(function(n,o,h){Fn(n,h,o)});function Jc(n,o){var h=gt(n)?Wt:Ed;return h(n,Ze(o,3))}function Z6(n,o,h,w){return n==null?[]:(gt(o)||(o=o==null?[]:[o]),h=w?t:h,gt(h)||(h=h==null?[]:[h]),Pd(n,o,h))}var e3=Lc(function(n,o,h){n[h?0:1].push(o)},function(){return[[],[]]});function t3(n,o,h){var w=gt(n)?df:X0,P=arguments.length<3;return w(n,Ze(o,4),h,P,ds)}function r3(n,o,h){var w=gt(n)?pb:X0,P=arguments.length<3;return w(n,Ze(o,4),h,P,bd)}function i3(n,o){var h=gt(n)?cs:md;return h(n,Xc(Ze(o,3)))}function n3(n){var o=gt(n)?ld:Q2;return o(n)}function s3(n,o,h){(h?kr(n,o,h):o===t)?o=1:o=mt(o);var w=gt(n)?S2:Y2;return w(n,o)}function a3(n){var o=gt(n)?P2:Z2;return o(n)}function o3(n){if(n==null)return 0;if(Yr(n))return eh(n)?pa(n):n.length;var o=Tr(n);return o==ce||o==ze?n.size:Cf(n).length}function c3(n,o,h){var w=gt(n)?lf:em;return h&&kr(n,o,h)&&(o=t),w(n,Ze(o,3))}var h3=_t(function(n,o){if(n==null)return[];var h=o.length;return h>1&&kr(n,o[0],o[1])?o=[]:h>2&&kr(o[0],o[1],o[2])&&(o=[o[0]]),Pd(n,yr(o,1),[])}),Qc=Fb||function(){return Nt.Date.now()};function f3(n,o){if(typeof o!="function")throw new Ei(f);return n=mt(n),function(){if(--n<1)return o.apply(this,arguments)}}function Al(n,o,h){return o=h?t:o,o=n&&o==null?n.length:o,Kn(n,ne,t,t,t,t,o)}function xl(n,o){var h;if(typeof o!="function")throw new Ei(f);return n=mt(n),function(){return--n>0&&(h=o.apply(this,arguments)),n<=1&&(o=t),h}}var tu=_t(function(n,o,h){var w=G;if(h.length){var P=fs(h,Aa(tu));w|=ae}return Kn(n,w,o,h,P)}),El=_t(function(n,o,h){var w=G|W;if(h.length){var P=fs(h,Aa(El));w|=ae}return Kn(o,w,n,h,P)});function Il(n,o,h){o=h?t:o;var w=Kn(n,de,t,t,t,t,t,o);return w.placeholder=Il.placeholder,w}function Ml(n,o,h){o=h?t:o;var w=Kn(n,se,t,t,t,t,t,o);return w.placeholder=Ml.placeholder,w}function Sl(n,o,h){var w,P,q,U,j,V,re=0,ie=!1,fe=!1,me=!0;if(typeof n!="function")throw new Ei(f);o=Ri(o)||0,Jt(h)&&(ie=!!h.leading,fe="maxWait"in h,q=fe?hr(Ri(h.maxWait)||0,o):q,me="trailing"in h?!!h.trailing:me);function $e(rr){var Yi=w,Jn=P;return w=P=t,re=rr,U=n.apply(Jn,Yi),U}function rt(rr){return re=rr,j=yo(xt,o),ie?$e(rr):U}function yt(rr){var Yi=rr-V,Jn=rr-re,Vl=o-Yi;return fe?Or(Vl,q-Jn):Vl}function it(rr){var Yi=rr-V,Jn=rr-re;return V===t||Yi>=o||Yi<0||fe&&Jn>=q}function xt(){var rr=Qc();if(it(rr))return Ct(rr);j=yo(xt,yt(rr))}function Ct(rr){return j=t,me&&w?$e(rr):(w=P=t,U)}function li(){j!==t&&$d(j),re=0,w=V=P=j=t}function Lr(){return j===t?U:Ct(Qc())}function pi(){var rr=Qc(),Yi=it(rr);if(w=arguments,P=this,V=rr,Yi){if(j===t)return rt(V);if(fe)return $d(j),j=yo(xt,o),$e(V)}return j===t&&(j=yo(xt,o)),U}return pi.cancel=li,pi.flush=Lr,pi}var u3=_t(function(n,o){return vd(n,1,o)}),d3=_t(function(n,o,h){return vd(n,Ri(o)||0,h)});function l3(n){return Kn(n,Ae)}function Yc(n,o){if(typeof n!="function"||o!=null&&typeof o!="function")throw new Ei(f);var h=function(){var w=arguments,P=o?o.apply(this,w):w[0],q=h.cache;if(q.has(P))return q.get(P);var U=n.apply(this,w);return h.cache=q.set(P,U)||q,U};return h.cache=new(Yc.Cache||jn),h}Yc.Cache=jn;function Xc(n){if(typeof n!="function")throw new Ei(f);return function(){var o=arguments;switch(o.length){case 0:return!n.call(this);case 1:return!n.call(this,o[0]);case 2:return!n.call(this,o[0],o[1]);case 3:return!n.call(this,o[0],o[1],o[2])}return!n.apply(this,o)}}function p3(n){return xl(2,n)}var g3=tm(function(n,o){o=o.length==1&&gt(o[0])?Wt(o[0],fi(Ze())):Wt(yr(o,1),fi(Ze()));var h=o.length;return _t(function(w){for(var P=-1,q=Or(w.length,h);++P<q;)w[P]=o[P].call(this,w[P]);return dr(n,this,w)})}),ru=_t(function(n,o){var h=fs(o,Aa(ru));return Kn(n,ae,t,o,h)}),Pl=_t(function(n,o){var h=fs(o,Aa(Pl));return Kn(n,ue,t,o,h)}),v3=Hn(function(n,o){return Kn(n,ve,t,t,t,o)});function b3(n,o){if(typeof n!="function")throw new Ei(f);return o=o===t?o:mt(o),_t(n,o)}function m3(n,o){if(typeof n!="function")throw new Ei(f);return o=o==null?0:hr(mt(o),0),_t(function(h){var w=h[o],P=gs(h,0,o);return w&&hs(P,w),dr(n,this,P)})}function y3(n,o,h){var w=!0,P=!0;if(typeof n!="function")throw new Ei(f);return Jt(h)&&(w="leading"in h?!!h.leading:w,P="trailing"in h?!!h.trailing:P),Sl(n,o,{leading:w,maxWait:o,trailing:P})}function w3(n){return Al(n,1)}function _3(n,o){return ru(Lf(o),n)}function A3(){if(!arguments.length)return[];var n=arguments[0];return gt(n)?n:[n]}function x3(n){return Mi(n,O)}function E3(n,o){return o=typeof o=="function"?o:t,Mi(n,O,o)}function I3(n){return Mi(n,E|O)}function M3(n,o){return o=typeof o=="function"?o:t,Mi(n,E|O,o)}function S3(n,o){return o==null||gd(n,o,lr(o))}function Qi(n,o){return n===o||n!==n&&o!==o}var P3=Kc(Pf),R3=Kc(function(n,o){return n>=o}),Ls=_d(function(){return arguments}())?_d:function(n){return Yt(n)&&$t.call(n,"callee")&&!od.call(n,"callee")},gt=Q.isArray,N3=$r?fi($r):z2;function Yr(n){return n!=null&&Zc(n.length)&&!Gn(n)}function tr(n){return Yt(n)&&Yr(n)}function C3(n){return n===!0||n===!1||Yt(n)&&zr(n)==k}var vs=Hb||lu,O3=Gi?fi(Gi):k2;function T3(n){return Yt(n)&&n.nodeType===1&&!wo(n)}function q3(n){if(n==null)return!0;if(Yr(n)&&(gt(n)||typeof n=="string"||typeof n.splice=="function"||vs(n)||xa(n)||Ls(n)))return!n.length;var o=Tr(n);if(o==ce||o==ze)return!n.size;if(mo(n))return!Cf(n).length;for(var h in n)if($t.call(n,h))return!1;return!0}function D3(n,o){return go(n,o)}function B3(n,o,h){h=typeof h=="function"?h:t;var w=h?h(n,o):t;return w===t?go(n,o,t,h):!!w}function iu(n){if(!Yt(n))return!1;var o=zr(n);return o==z||o==m||typeof n.message=="string"&&typeof n.name=="string"&&!wo(n)}function $3(n){return typeof n=="number"&&hd(n)}function Gn(n){if(!Jt(n))return!1;var o=zr(n);return o==Y||o==oe||o==D||o==Me}function Rl(n){return typeof n=="number"&&n==mt(n)}function Zc(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=S}function Jt(n){var o=typeof n;return n!=null&&(o=="object"||o=="function")}function Yt(n){return n!=null&&typeof n=="object"}var Nl=Ai?fi(Ai):U2;function z3(n,o){return n===o||Nf(n,o,Gf(o))}function k3(n,o,h){return h=typeof h=="function"?h:t,Nf(n,o,Gf(o),h)}function L3(n){return Cl(n)&&n!=+n}function U3(n){if(Em(n))throw new lt(a);return Ad(n)}function j3(n){return n===null}function F3(n){return n==null}function Cl(n){return typeof n=="number"||Yt(n)&&zr(n)==pe}function wo(n){if(!Yt(n)||zr(n)!=Te)return!1;var o=Mc(n);if(o===null)return!0;var h=$t.call(o,"constructor")&&o.constructor;return typeof h=="function"&&h instanceof h&&Ac.call(h)==kb}var nu=dn?fi(dn):j2;function K3(n){return Rl(n)&&n>=-S&&n<=S}var Ol=no?fi(no):F2;function eh(n){return typeof n=="string"||!gt(n)&&Yt(n)&&zr(n)==_e}function di(n){return typeof n=="symbol"||Yt(n)&&zr(n)==je}var xa=Os?fi(Os):K2;function H3(n){return n===t}function V3(n){return Yt(n)&&Tr(n)==be}function G3(n){return Yt(n)&&zr(n)==Fe}var W3=Kc(Of),J3=Kc(function(n,o){return n<=o});function Tl(n){if(!n)return[];if(Yr(n))return eh(n)?Wi(n):Qr(n);if(ao&&n[ao])return Sb(n[ao]());var o=Tr(n),h=o==ce?yf:o==ze?yc:Ea;return h(n)}function Wn(n){if(!n)return n===0?n:0;if(n=Ri(n),n===M||n===-M){var o=n<0?-1:1;return o*x}return n===n?n:0}function mt(n){var o=Wn(n),h=o%1;return o===o?h?o-h:o:0}function ql(n){return n?Bs(mt(n),0,l):0}function Ri(n){if(typeof n=="number")return n;if(di(n))return d;if(Jt(n)){var o=typeof n.valueOf=="function"?n.valueOf():n;n=Jt(o)?o+"":o}if(typeof n!="string")return n===0?n:+n;n=Z0(n);var h=Pr.test(n);return h||Nr.test(n)?pt(n.slice(2),h?2:8):Sr.test(n)?d:+n}function Dl(n){return pn(n,Xr(n))}function Q3(n){return n?Bs(mt(n),-S,S):n===0?n:0}function Dt(n){return n==null?"":ui(n)}var Y3=wa(function(n,o){if(mo(o)||Yr(o)){pn(o,lr(o),n);return}for(var h in o)$t.call(o,h)&&uo(n,h,o[h])}),Bl=wa(function(n,o){pn(o,Xr(o),n)}),th=wa(function(n,o,h,w){pn(o,Xr(o),n,w)}),X3=wa(function(n,o,h,w){pn(o,lr(o),n,w)}),Z3=Hn(If);function ey(n,o){var h=ya(n);return o==null?h:pd(h,o)}var ty=_t(function(n,o){n=Ft(n);var h=-1,w=o.length,P=w>2?o[2]:t;for(P&&kr(o[0],o[1],P)&&(w=1);++h<w;)for(var q=o[h],U=Xr(q),j=-1,V=U.length;++j<V;){var re=U[j],ie=n[re];(ie===t||Qi(ie,va[re])&&!$t.call(n,re))&&(n[re]=q[re])}return n}),ry=_t(function(n){return n.push(t,Zd),dr($l,t,n)});function iy(n,o){return J0(n,Ze(o,3),ln)}function ny(n,o){return J0(n,Ze(o,3),Sf)}function sy(n,o){return n==null?n:Mf(n,Ze(o,3),Xr)}function ay(n,o){return n==null?n:yd(n,Ze(o,3),Xr)}function oy(n,o){return n&&ln(n,Ze(o,3))}function cy(n,o){return n&&Sf(n,Ze(o,3))}function hy(n){return n==null?[]:Bc(n,lr(n))}function fy(n){return n==null?[]:Bc(n,Xr(n))}function su(n,o,h){var w=n==null?t:$s(n,o);return w===t?h:w}function uy(n,o){return n!=null&&rl(n,o,q2)}function au(n,o){return n!=null&&rl(n,o,D2)}var dy=Wd(function(n,o,h){o!=null&&typeof o.toString!="function"&&(o=xc.call(o)),n[o]=h},cu(Zr)),ly=Wd(function(n,o,h){o!=null&&typeof o.toString!="function"&&(o=xc.call(o)),$t.call(n,o)?n[o].push(h):n[o]=[h]},Ze),py=_t(po);function lr(n){return Yr(n)?dd(n):Cf(n)}function Xr(n){return Yr(n)?dd(n,!0):H2(n)}function gy(n,o){var h={};return o=Ze(o,3),ln(n,function(w,P,q){Fn(h,o(w,P,q),w)}),h}function vy(n,o){var h={};return o=Ze(o,3),ln(n,function(w,P,q){Fn(h,P,o(w,P,q))}),h}var by=wa(function(n,o,h){$c(n,o,h)}),$l=wa(function(n,o,h,w){$c(n,o,h,w)}),my=Hn(function(n,o){var h={};if(n==null)return h;var w=!1;o=Wt(o,function(q){return q=ps(q,n),w||(w=q.length>1),q}),pn(n,Hf(n),h),w&&(h=Mi(h,E|N|O,dm));for(var P=o.length;P--;)$f(h,o[P]);return h});function yy(n,o){return zl(n,Xc(Ze(o)))}var wy=Hn(function(n,o){return n==null?{}:G2(n,o)});function zl(n,o){if(n==null)return{};var h=Wt(Hf(n),function(w){return[w]});return o=Ze(o),Rd(n,h,function(w,P){return o(w,P[0])})}function _y(n,o,h){o=ps(o,n);var w=-1,P=o.length;for(P||(P=1,n=t);++w<P;){var q=n==null?t:n[gn(o[w])];q===t&&(w=P,q=h),n=Gn(q)?q.call(n):q}return n}function Ay(n,o,h){return n==null?n:vo(n,o,h)}function xy(n,o,h,w){return w=typeof w=="function"?w:t,n==null?n:vo(n,o,h,w)}var kl=Yd(lr),Ll=Yd(Xr);function Ey(n,o,h){var w=gt(n),P=w||vs(n)||xa(n);if(o=Ze(o,4),h==null){var q=n&&n.constructor;P?h=w?new q:[]:Jt(n)?h=Gn(q)?ya(Mc(n)):{}:h={}}return(P?xi:ln)(n,function(U,j,V){return o(h,U,j,V)}),h}function Iy(n,o){return n==null?!0:$f(n,o)}function My(n,o,h){return n==null?n:qd(n,o,Lf(h))}function Sy(n,o,h,w){return w=typeof w=="function"?w:t,n==null?n:qd(n,o,Lf(h),w)}function Ea(n){return n==null?[]:mf(n,lr(n))}function Py(n){return n==null?[]:mf(n,Xr(n))}function Ry(n,o,h){return h===t&&(h=o,o=t),h!==t&&(h=Ri(h),h=h===h?h:0),o!==t&&(o=Ri(o),o=o===o?o:0),Bs(Ri(n),o,h)}function Ny(n,o,h){return o=Wn(o),h===t?(h=o,o=0):h=Wn(h),n=Ri(n),B2(n,o,h)}function Cy(n,o,h){if(h&&typeof h!="boolean"&&kr(n,o,h)&&(o=h=t),h===t&&(typeof o=="boolean"?(h=o,o=t):typeof n=="boolean"&&(h=n,n=t)),n===t&&o===t?(n=0,o=1):(n=Wn(n),o===t?(o=n,n=0):o=Wn(o)),n>o){var w=n;n=o,o=w}if(h||n%1||o%1){var P=fd();return Or(n+P*(o-n+Ut("1e-"+((P+"").length-1))),o)}return qf(n,o)}var Oy=_a(function(n,o,h){return o=o.toLowerCase(),n+(h?Ul(o):o)});function Ul(n){return ou(Dt(n).toLowerCase())}function jl(n){return n=Dt(n),n&&n.replace(Qt,Ab).replace(hf,"")}function Ty(n,o,h){n=Dt(n),o=ui(o);var w=n.length;h=h===t?w:Bs(mt(h),0,w);var P=h;return h-=o.length,h>=0&&n.slice(h,P)==o}function qy(n){return n=Dt(n),n&&Ke.test(n)?n.replace(It,xb):n}function Dy(n){return n=Dt(n),n&&Ne.test(n)?n.replace(Ye,"\\$&"):n}var By=_a(function(n,o,h){return n+(h?"-":"")+o.toLowerCase()}),$y=_a(function(n,o,h){return n+(h?" ":"")+o.toLowerCase()}),zy=Hd("toLowerCase");function ky(n,o,h){n=Dt(n),o=mt(o);var w=o?pa(n):0;if(!o||w>=o)return n;var P=(o-w)/2;return Fc(Nc(P),h)+n+Fc(Rc(P),h)}function Ly(n,o,h){n=Dt(n),o=mt(o);var w=o?pa(n):0;return o&&w<o?n+Fc(o-w,h):n}function Uy(n,o,h){n=Dt(n),o=mt(o);var w=o?pa(n):0;return o&&w<o?Fc(o-w,h)+n:n}function jy(n,o,h){return h||o==null?o=0:o&&(o=+o),Jb(Dt(n).replace(Xe,""),o||0)}function Fy(n,o,h){return(h?kr(n,o,h):o===t)?o=1:o=mt(o),Df(Dt(n),o)}function Ky(){var n=arguments,o=Dt(n[0]);return n.length<3?o:o.replace(n[1],n[2])}var Hy=_a(function(n,o,h){return n+(h?"_":"")+o.toLowerCase()});function Vy(n,o,h){return h&&typeof h!="number"&&kr(n,o,h)&&(o=h=t),h=h===t?l:h>>>0,h?(n=Dt(n),n&&(typeof o=="string"||o!=null&&!nu(o))&&(o=ui(o),!o&&la(n))?gs(Wi(n),0,h):n.split(o,h)):[]}var Gy=_a(function(n,o,h){return n+(h?" ":"")+ou(o)});function Wy(n,o,h){return n=Dt(n),h=h==null?0:Bs(mt(h),0,n.length),o=ui(o),n.slice(h,h+o.length)==o}function Jy(n,o,h){var w=C.templateSettings;h&&kr(n,o,h)&&(o=t),n=Dt(n),o=th({},o,w,Xd);var P=th({},o.imports,w.imports,Xd),q=lr(P),U=mf(P,q),j,V,re=0,ie=o.interpolate||Vr,fe="__p += '",me=wf((o.escape||Vr).source+"|"+ie.source+"|"+(ie===We?tt:Vr).source+"|"+(o.evaluate||Vr).source+"|$","g"),$e="//# sourceURL="+($t.call(o,"sourceURL")?(o.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++ff+"]")+`
`;n.replace(me,function(it,xt,Ct,li,Lr,pi){return Ct||(Ct=li),fe+=n.slice(re,pi).replace(Ui,Eb),xt&&(j=!0,fe+=`' +
__e(`+xt+`) +
'`),Lr&&(V=!0,fe+=`';
`+Lr+`;
__p += '`),Ct&&(fe+=`' +
((__t = (`+Ct+`)) == null ? '' : __t) +
'`),re=pi+it.length,it}),fe+=`';
`;var rt=$t.call(o,"variable")&&o.variable;if(!rt)fe=`with (obj) {
`+fe+`
}
`;else if(Ot.test(rt))throw new lt(p);fe=(V?fe.replace(wt,""):fe).replace(dt,"$1").replace(Le,"$1;"),fe="function("+(rt||"obj")+`) {
`+(rt?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(j?", __e = _.escape":"")+(V?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+fe+`return __p
}`;var yt=Kl(function(){return qt(q,$e+"return "+fe).apply(t,U)});if(yt.source=fe,iu(yt))throw yt;return yt}function Qy(n){return Dt(n).toLowerCase()}function Yy(n){return Dt(n).toUpperCase()}function Xy(n,o,h){if(n=Dt(n),n&&(h||o===t))return Z0(n);if(!n||!(o=ui(o)))return n;var w=Wi(n),P=Wi(o),q=ed(w,P),U=td(w,P)+1;return gs(w,q,U).join("")}function Zy(n,o,h){if(n=Dt(n),n&&(h||o===t))return n.slice(0,id(n)+1);if(!n||!(o=ui(o)))return n;var w=Wi(n),P=td(w,Wi(o))+1;return gs(w,0,P).join("")}function e5(n,o,h){if(n=Dt(n),n&&(h||o===t))return n.replace(Xe,"");if(!n||!(o=ui(o)))return n;var w=Wi(n),P=ed(w,Wi(o));return gs(w,P).join("")}function t5(n,o){var h=ot,w=$;if(Jt(o)){var P="separator"in o?o.separator:P;h="length"in o?mt(o.length):h,w="omission"in o?ui(o.omission):w}n=Dt(n);var q=n.length;if(la(n)){var U=Wi(n);q=U.length}if(h>=q)return n;var j=h-pa(w);if(j<1)return w;var V=U?gs(U,0,j).join(""):n.slice(0,j);if(P===t)return V+w;if(U&&(j+=V.length-j),nu(P)){if(n.slice(j).search(P)){var re,ie=V;for(P.global||(P=wf(P.source,Dt(bt.exec(P))+"g")),P.lastIndex=0;re=P.exec(ie);)var fe=re.index;V=V.slice(0,fe===t?j:fe)}}else if(n.indexOf(ui(P),j)!=j){var me=V.lastIndexOf(P);me>-1&&(V=V.slice(0,me))}return V+w}function r5(n){return n=Dt(n),n&&xe.test(n)?n.replace(At,Cb):n}var i5=_a(function(n,o,h){return n+(h?" ":"")+o.toUpperCase()}),ou=Hd("toUpperCase");function Fl(n,o,h){return n=Dt(n),o=h?t:o,o===t?Mb(n)?qb(n):bb(n):n.match(o)||[]}var Kl=_t(function(n,o){try{return dr(n,t,o)}catch(h){return iu(h)?h:new lt(h)}}),n5=Hn(function(n,o){return xi(o,function(h){h=gn(h),Fn(n,h,tu(n[h],n))}),n});function s5(n){var o=n==null?0:n.length,h=Ze();return n=o?Wt(n,function(w){if(typeof w[1]!="function")throw new Ei(f);return[h(w[0]),w[1]]}):[],_t(function(w){for(var P=-1;++P<o;){var q=n[P];if(dr(q[0],this,w))return dr(q[1],this,w)}})}function a5(n){return C2(Mi(n,E))}function cu(n){return function(){return n}}function o5(n,o){return n==null||n!==n?o:n}var c5=Gd(),h5=Gd(!0);function Zr(n){return n}function hu(n){return xd(typeof n=="function"?n:Mi(n,E))}function f5(n){return Id(Mi(n,E))}function u5(n,o){return Md(n,Mi(o,E))}var d5=_t(function(n,o){return function(h){return po(h,n,o)}}),l5=_t(function(n,o){return function(h){return po(n,h,o)}});function fu(n,o,h){var w=lr(o),P=Bc(o,w);h==null&&!(Jt(o)&&(P.length||!w.length))&&(h=o,o=n,n=this,P=Bc(o,lr(o)));var q=!(Jt(h)&&"chain"in h)||!!h.chain,U=Gn(n);return xi(P,function(j){var V=o[j];n[j]=V,U&&(n.prototype[j]=function(){var re=this.__chain__;if(q||re){var ie=n(this.__wrapped__),fe=ie.__actions__=Qr(this.__actions__);return fe.push({func:V,args:arguments,thisArg:n}),ie.__chain__=re,ie}return V.apply(n,hs([this.value()],arguments))})}),n}function p5(){return Nt._===this&&(Nt._=Lb),this}function uu(){}function g5(n){return n=mt(n),_t(function(o){return Sd(o,n)})}var v5=jf(Wt),b5=jf(W0),m5=jf(lf);function Hl(n){return Jf(n)?pf(gn(n)):W2(n)}function y5(n){return function(o){return n==null?t:$s(n,o)}}var w5=Jd(),_5=Jd(!0);function du(){return[]}function lu(){return!1}function A5(){return{}}function x5(){return""}function E5(){return!0}function I5(n,o){if(n=mt(n),n<1||n>S)return[];var h=l,w=Or(n,l);o=Ze(o),n-=l;for(var P=bf(w,o);++h<n;)o(h);return P}function M5(n){return gt(n)?Wt(n,gn):di(n)?[n]:Qr(ul(Dt(n)))}function S5(n){var o=++zb;return Dt(n)+o}var P5=jc(function(n,o){return n+o},0),R5=Ff("ceil"),N5=jc(function(n,o){return n/o},1),C5=Ff("floor");function O5(n){return n&&n.length?Dc(n,Zr,Pf):t}function T5(n,o){return n&&n.length?Dc(n,Ze(o,2),Pf):t}function q5(n){return Y0(n,Zr)}function D5(n,o){return Y0(n,Ze(o,2))}function B5(n){return n&&n.length?Dc(n,Zr,Of):t}function $5(n,o){return n&&n.length?Dc(n,Ze(o,2),Of):t}var z5=jc(function(n,o){return n*o},1),k5=Ff("round"),L5=jc(function(n,o){return n-o},0);function U5(n){return n&&n.length?vf(n,Zr):0}function j5(n,o){return n&&n.length?vf(n,Ze(o,2)):0}return C.after=f3,C.ary=Al,C.assign=Y3,C.assignIn=Bl,C.assignInWith=th,C.assignWith=X3,C.at=Z3,C.before=xl,C.bind=tu,C.bindAll=n5,C.bindKey=El,C.castArray=A3,C.chain=yl,C.chunk=Cm,C.compact=Om,C.concat=Tm,C.cond=s5,C.conforms=a5,C.constant=cu,C.countBy=U6,C.create=ey,C.curry=Il,C.curryRight=Ml,C.debounce=Sl,C.defaults=ty,C.defaultsDeep=ry,C.defer=u3,C.delay=d3,C.difference=qm,C.differenceBy=Dm,C.differenceWith=Bm,C.drop=$m,C.dropRight=zm,C.dropRightWhile=km,C.dropWhile=Lm,C.fill=Um,C.filter=F6,C.flatMap=V6,C.flatMapDeep=G6,C.flatMapDepth=W6,C.flatten=gl,C.flattenDeep=jm,C.flattenDepth=Fm,C.flip=l3,C.flow=c5,C.flowRight=h5,C.fromPairs=Km,C.functions=hy,C.functionsIn=fy,C.groupBy=J6,C.initial=Vm,C.intersection=Gm,C.intersectionBy=Wm,C.intersectionWith=Jm,C.invert=dy,C.invertBy=ly,C.invokeMap=Y6,C.iteratee=hu,C.keyBy=X6,C.keys=lr,C.keysIn=Xr,C.map=Jc,C.mapKeys=gy,C.mapValues=vy,C.matches=f5,C.matchesProperty=u5,C.memoize=Yc,C.merge=by,C.mergeWith=$l,C.method=d5,C.methodOf=l5,C.mixin=fu,C.negate=Xc,C.nthArg=g5,C.omit=my,C.omitBy=yy,C.once=p3,C.orderBy=Z6,C.over=v5,C.overArgs=g3,C.overEvery=b5,C.overSome=m5,C.partial=ru,C.partialRight=Pl,C.partition=e3,C.pick=wy,C.pickBy=zl,C.property=Hl,C.propertyOf=y5,C.pull=Zm,C.pullAll=bl,C.pullAllBy=e6,C.pullAllWith=t6,C.pullAt=r6,C.range=w5,C.rangeRight=_5,C.rearg=v3,C.reject=i3,C.remove=i6,C.rest=b3,C.reverse=Zf,C.sampleSize=s3,C.set=Ay,C.setWith=xy,C.shuffle=a3,C.slice=n6,C.sortBy=h3,C.sortedUniq=u6,C.sortedUniqBy=d6,C.split=Vy,C.spread=m3,C.tail=l6,C.take=p6,C.takeRight=g6,C.takeRightWhile=v6,C.takeWhile=b6,C.tap=O6,C.throttle=y3,C.thru=Wc,C.toArray=Tl,C.toPairs=kl,C.toPairsIn=Ll,C.toPath=M5,C.toPlainObject=Dl,C.transform=Ey,C.unary=w3,C.union=m6,C.unionBy=y6,C.unionWith=w6,C.uniq=_6,C.uniqBy=A6,C.uniqWith=x6,C.unset=Iy,C.unzip=eu,C.unzipWith=ml,C.update=My,C.updateWith=Sy,C.values=Ea,C.valuesIn=Py,C.without=E6,C.words=Fl,C.wrap=_3,C.xor=I6,C.xorBy=M6,C.xorWith=S6,C.zip=P6,C.zipObject=R6,C.zipObjectDeep=N6,C.zipWith=C6,C.entries=kl,C.entriesIn=Ll,C.extend=Bl,C.extendWith=th,fu(C,C),C.add=P5,C.attempt=Kl,C.camelCase=Oy,C.capitalize=Ul,C.ceil=R5,C.clamp=Ry,C.clone=x3,C.cloneDeep=I3,C.cloneDeepWith=M3,C.cloneWith=E3,C.conformsTo=S3,C.deburr=jl,C.defaultTo=o5,C.divide=N5,C.endsWith=Ty,C.eq=Qi,C.escape=qy,C.escapeRegExp=Dy,C.every=j6,C.find=K6,C.findIndex=ll,C.findKey=iy,C.findLast=H6,C.findLastIndex=pl,C.findLastKey=ny,C.floor=C5,C.forEach=wl,C.forEachRight=_l,C.forIn=sy,C.forInRight=ay,C.forOwn=oy,C.forOwnRight=cy,C.get=su,C.gt=P3,C.gte=R3,C.has=uy,C.hasIn=au,C.head=vl,C.identity=Zr,C.includes=Q6,C.indexOf=Hm,C.inRange=Ny,C.invoke=py,C.isArguments=Ls,C.isArray=gt,C.isArrayBuffer=N3,C.isArrayLike=Yr,C.isArrayLikeObject=tr,C.isBoolean=C3,C.isBuffer=vs,C.isDate=O3,C.isElement=T3,C.isEmpty=q3,C.isEqual=D3,C.isEqualWith=B3,C.isError=iu,C.isFinite=$3,C.isFunction=Gn,C.isInteger=Rl,C.isLength=Zc,C.isMap=Nl,C.isMatch=z3,C.isMatchWith=k3,C.isNaN=L3,C.isNative=U3,C.isNil=F3,C.isNull=j3,C.isNumber=Cl,C.isObject=Jt,C.isObjectLike=Yt,C.isPlainObject=wo,C.isRegExp=nu,C.isSafeInteger=K3,C.isSet=Ol,C.isString=eh,C.isSymbol=di,C.isTypedArray=xa,C.isUndefined=H3,C.isWeakMap=V3,C.isWeakSet=G3,C.join=Qm,C.kebabCase=By,C.last=Pi,C.lastIndexOf=Ym,C.lowerCase=$y,C.lowerFirst=zy,C.lt=W3,C.lte=J3,C.max=O5,C.maxBy=T5,C.mean=q5,C.meanBy=D5,C.min=B5,C.minBy=$5,C.stubArray=du,C.stubFalse=lu,C.stubObject=A5,C.stubString=x5,C.stubTrue=E5,C.multiply=z5,C.nth=Xm,C.noConflict=p5,C.noop=uu,C.now=Qc,C.pad=ky,C.padEnd=Ly,C.padStart=Uy,C.parseInt=jy,C.random=Cy,C.reduce=t3,C.reduceRight=r3,C.repeat=Fy,C.replace=Ky,C.result=_y,C.round=k5,C.runInContext=H,C.sample=n3,C.size=o3,C.snakeCase=Hy,C.some=c3,C.sortedIndex=s6,C.sortedIndexBy=a6,C.sortedIndexOf=o6,C.sortedLastIndex=c6,C.sortedLastIndexBy=h6,C.sortedLastIndexOf=f6,C.startCase=Gy,C.startsWith=Wy,C.subtract=L5,C.sum=U5,C.sumBy=j5,C.template=Jy,C.times=I5,C.toFinite=Wn,C.toInteger=mt,C.toLength=ql,C.toLower=Qy,C.toNumber=Ri,C.toSafeInteger=Q3,C.toString=Dt,C.toUpper=Yy,C.trim=Xy,C.trimEnd=Zy,C.trimStart=e5,C.truncate=t5,C.unescape=r5,C.uniqueId=S5,C.upperCase=i5,C.upperFirst=ou,C.each=wl,C.eachRight=_l,C.first=vl,fu(C,function(){var n={};return ln(C,function(o,h){$t.call(C.prototype,h)||(n[h]=o)}),n}(),{chain:!1}),C.VERSION=i,xi(["bind","bindKey","curry","curryRight","partial","partialRight"],function(n){C[n].placeholder=C}),xi(["drop","take"],function(n,o){Mt.prototype[n]=function(h){h=h===t?1:hr(mt(h),0);var w=this.__filtered__&&!o?new Mt(this):this.clone();return w.__filtered__?w.__takeCount__=Or(h,w.__takeCount__):w.__views__.push({size:Or(h,l),type:n+(w.__dir__<0?"Right":"")}),w},Mt.prototype[n+"Right"]=function(h){return this.reverse()[n](h).reverse()}}),xi(["filter","map","takeWhile"],function(n,o){var h=o+1,w=h==u||h==_;Mt.prototype[n]=function(P){var q=this.clone();return q.__iteratees__.push({iteratee:Ze(P,3),type:h}),q.__filtered__=q.__filtered__||w,q}}),xi(["head","last"],function(n,o){var h="take"+(o?"Right":"");Mt.prototype[n]=function(){return this[h](1).value()[0]}}),xi(["initial","tail"],function(n,o){var h="drop"+(o?"":"Right");Mt.prototype[n]=function(){return this.__filtered__?new Mt(this):this[h](1)}}),Mt.prototype.compact=function(){return this.filter(Zr)},Mt.prototype.find=function(n){return this.filter(n).head()},Mt.prototype.findLast=function(n){return this.reverse().find(n)},Mt.prototype.invokeMap=_t(function(n,o){return typeof n=="function"?new Mt(this):this.map(function(h){return po(h,n,o)})}),Mt.prototype.reject=function(n){return this.filter(Xc(Ze(n)))},Mt.prototype.slice=function(n,o){n=mt(n);var h=this;return h.__filtered__&&(n>0||o<0)?new Mt(h):(n<0?h=h.takeRight(-n):n&&(h=h.drop(n)),o!==t&&(o=mt(o),h=o<0?h.dropRight(-o):h.take(o-n)),h)},Mt.prototype.takeRightWhile=function(n){return this.reverse().takeWhile(n).reverse()},Mt.prototype.toArray=function(){return this.take(l)},ln(Mt.prototype,function(n,o){var h=/^(?:filter|find|map|reject)|While$/.test(o),w=/^(?:head|last)$/.test(o),P=C[w?"take"+(o=="last"?"Right":""):o],q=w||/^find/.test(o);P&&(C.prototype[o]=function(){var U=this.__wrapped__,j=w?[1]:arguments,V=U instanceof Mt,re=j[0],ie=V||gt(U),fe=function(xt){var Ct=P.apply(C,hs([xt],j));return w&&me?Ct[0]:Ct};ie&&h&&typeof re=="function"&&re.length!=1&&(V=ie=!1);var me=this.__chain__,$e=!!this.__actions__.length,rt=q&&!me,yt=V&&!$e;if(!q&&ie){U=yt?U:new Mt(this);var it=n.apply(U,j);return it.__actions__.push({func:Wc,args:[fe],thisArg:t}),new Ii(it,me)}return rt&&yt?n.apply(this,j):(it=this.thru(fe),rt?w?it.value()[0]:it.value():it)})}),xi(["pop","push","shift","sort","splice","unshift"],function(n){var o=wc[n],h=/^(?:push|sort|unshift)$/.test(n)?"tap":"thru",w=/^(?:pop|shift)$/.test(n);C.prototype[n]=function(){var P=arguments;if(w&&!this.__chain__){var q=this.value();return o.apply(gt(q)?q:[],P)}return this[h](function(U){return o.apply(gt(U)?U:[],P)})}}),ln(Mt.prototype,function(n,o){var h=C[o];if(h){var w=h.name+"";$t.call(ma,w)||(ma[w]=[]),ma[w].push({name:o,func:h})}}),ma[Uc(t,W).name]=[{name:"wrapper",func:t}],Mt.prototype.clone=r2,Mt.prototype.reverse=i2,Mt.prototype.value=n2,C.prototype.at=T6,C.prototype.chain=q6,C.prototype.commit=D6,C.prototype.next=B6,C.prototype.plant=z6,C.prototype.reverse=k6,C.prototype.toJSON=C.prototype.valueOf=C.prototype.value=L6,C.prototype.first=C.prototype.head,ao&&(C.prototype[ao]=$6),C},ga=Db();er?((er.exports=ga)._=ga,jt._=ga):Nt._=ga}).call(Co)})(v0,v0.exports);var hP=Object.defineProperty,fP=Object.defineProperties,uP=Object.getOwnPropertyDescriptors,K1=Object.getOwnPropertySymbols,dP=Object.prototype.hasOwnProperty,lP=Object.prototype.propertyIsEnumerable,H1=(r,e,t)=>e in r?hP(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,fh=(r,e)=>{for(var t in e||(e={}))dP.call(e,t)&&H1(r,t,e[t]);if(K1)for(var t of K1(e))lP.call(e,t)&&H1(r,t,e[t]);return r},pP=(r,e)=>fP(r,uP(e));function cn(r,e,t){var i;const s=$o(r);return((i=e.rpcMap)==null?void 0:i[s.reference])||`${cP}?chainId=${s.namespace}:${s.reference}&projectId=${t}`}function oa(r){return r.includes(":")?r.split(":")[1]:r}function fb(r){return r.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function gP(r,e){const t=Object.keys(e.namespaces).filter(s=>s.includes(r));if(!t.length)return[];const i=[];return t.forEach(s=>{const a=e.namespaces[s].accounts;i.push(...a)}),i}function Vu(r={},e={}){const t=V1(r),i=V1(e);return v0.exports.merge(t,i)}function V1(r){var e,t,i,s;const a={};if(!Ko(r))return a;for(const[f,p]of Object.entries(r)){const y=L0(f)?[f]:p.chains,v=p.methods||[],A=p.events||[],E=p.rpcMap||{},N=Do(f);a[N]=pP(fh(fh({},a[N]),p),{chains:gh(y,(e=a[N])==null?void 0:e.chains),methods:gh(v,(t=a[N])==null?void 0:t.methods),events:gh(A,(i=a[N])==null?void 0:i.events),rpcMap:fh(fh({},E),(s=a[N])==null?void 0:s.rpcMap)})}return a}function vP(r){return r.includes(":")?r.split(":")[2]:r}function G1(r){const e={};for(const[t,i]of Object.entries(r)){const s=i.methods||[],a=i.events||[],f=i.accounts||[],p=L0(t)?[t]:i.chains?i.chains:fb(i.accounts);e[t]={chains:p,methods:s,events:a,accounts:f}}return e}function Gu(r){return typeof r=="number"?r:r.includes("0x")?parseInt(r,16):(r=r.includes(":")?r.split(":")[1]:r,isNaN(Number(r))?r:Number(r))}const ub={},Bt=r=>ub[r],Wu=(r,e)=>{ub[r]=e};class bP{constructor(e){this.name="polkadot",this.namespace=e.namespace,this.events=Bt("events"),this.client=Bt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(fn.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var i;const s=oa(t);e[s]=this.createHttpProvider(s,(i=this.namespace.rpcMap)==null?void 0:i[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){const i=t||cn(e,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);return new hn(new Bn(i,Bt("disableProviderPing")))}}var mP=Object.defineProperty,yP=Object.defineProperties,wP=Object.getOwnPropertyDescriptors,W1=Object.getOwnPropertySymbols,_P=Object.prototype.hasOwnProperty,AP=Object.prototype.propertyIsEnumerable,J1=(r,e,t)=>e in r?mP(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Q1=(r,e)=>{for(var t in e||(e={}))_P.call(e,t)&&J1(r,t,e[t]);if(W1)for(var t of W1(e))AP.call(e,t)&&J1(r,t,e[t]);return r},Y1=(r,e)=>yP(r,wP(e));class xP{constructor(e){this.name="eip155",this.namespace=e.namespace,this.events=Bt("events"),this.client=Bt("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(e){switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain());case"wallet_getCapabilities":return await this.getCapabilities(e)}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(parseInt(e),t),this.chainId=parseInt(e),this.events.emit(fn.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,t){const i=t||cn(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);return new hn(new Bn(i,Bt("disableProviderPing")))}setHttpProvider(e,t){const i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var i;const s=parseInt(oa(t));e[s]=this.createHttpProvider(s,(i=this.namespace.rpcMap)==null?void 0:i[t])}),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}getHttpProvider(){const e=this.chainId,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}async handleSwitchChain(e){var t,i;let s=e.request.params?(t=e.request.params[0])==null?void 0:t.chainId:"0x0";s=s.startsWith("0x")?s:`0x${s}`;const a=parseInt(s,16);if(this.isChainApproved(a))this.setDefaultChain(`${a}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:s}]},chainId:(i=this.namespace.chains)==null?void 0:i[0]}),this.setDefaultChain(`${a}`);else throw new Error(`Failed to switch to chain 'eip155:${a}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}async getCapabilities(e){var t,i,s;const a=(i=(t=e.request)==null?void 0:t.params)==null?void 0:i[0];if(!a)throw new Error("Missing address parameter in `wallet_getCapabilities` request");const f=this.client.session.get(e.topic),p=((s=f==null?void 0:f.sessionProperties)==null?void 0:s.capabilities)||{};if(p!=null&&p[a])return p==null?void 0:p[a];const y=await this.client.request(e);try{await this.client.session.update(e.topic,{sessionProperties:Y1(Q1({},f.sessionProperties||{}),{capabilities:Y1(Q1({},p||{}),{[a]:y})})})}catch(v){console.warn("Failed to update session with capabilities",v)}return y}}class EP{constructor(e){this.name="solana",this.namespace=e.namespace,this.events=Bt("events"),this.client=Bt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(fn.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var i;const s=oa(t);e[s]=this.createHttpProvider(s,(i=this.namespace.rpcMap)==null?void 0:i[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){const i=t||cn(e,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);return new hn(new Bn(i,Bt("disableProviderPing")))}}class IP{constructor(e){this.name="cosmos",this.namespace=e.namespace,this.events=Bt("events"),this.client=Bt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(fn.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var i;const s=oa(t);e[s]=this.createHttpProvider(s,(i=this.namespace.rpcMap)==null?void 0:i[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){const i=t||cn(e,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);return new hn(new Bn(i,Bt("disableProviderPing")))}}class MP{constructor(e){this.name="algorand",this.namespace=e.namespace,this.events=Bt("events"),this.client=Bt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(!this.httpProviders[e]){const i=t||cn(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,i)}this.chainId=e,this.events.emit(fn.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var i;e[t]=this.createHttpProvider(t,(i=this.namespace.rpcMap)==null?void 0:i[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){const i=t||cn(e,this.namespace,this.client.core.projectId);return typeof i>"u"?void 0:new hn(new Bn(i,Bt("disableProviderPing")))}}class SP{constructor(e){this.name="cip34",this.namespace=e.namespace,this.events=Bt("events"),this.client=Bt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(fn.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{const i=this.getCardanoRPCUrl(t),s=oa(t);e[s]=this.createHttpProvider(s,i)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}getCardanoRPCUrl(e){const t=this.namespace.rpcMap;if(t)return t[e]}setHttpProvider(e,t){const i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){const i=t||this.getCardanoRPCUrl(e);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);return new hn(new Bn(i,Bt("disableProviderPing")))}}class PP{constructor(e){this.name="elrond",this.namespace=e.namespace,this.events=Bt("events"),this.client=Bt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(fn.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var i;const s=oa(t);e[s]=this.createHttpProvider(s,(i=this.namespace.rpcMap)==null?void 0:i[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){const i=t||cn(e,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);return new hn(new Bn(i,Bt("disableProviderPing")))}}class RP{constructor(e){this.name="multiversx",this.namespace=e.namespace,this.events=Bt("events"),this.client=Bt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(fn.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var i;const s=oa(t);e[s]=this.createHttpProvider(s,(i=this.namespace.rpcMap)==null?void 0:i[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){const i=t||cn(e,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);return new hn(new Bn(i,Bt("disableProviderPing")))}}class NP{constructor(e){this.name="near",this.namespace=e.namespace,this.events=Bt("events"),this.client=Bt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(this.chainId=e,!this.httpProviders[e]){const i=t||cn(`${this.name}:${e}`,this.namespace);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,i)}this.events.emit(fn.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var i;e[t]=this.createHttpProvider(t,(i=this.namespace.rpcMap)==null?void 0:i[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){const i=t||cn(e,this.namespace);return typeof i>"u"?void 0:new hn(new Bn(i,Bt("disableProviderPing")))}}class CP{constructor(e){this.name=Sa,this.namespace=e.namespace,this.events=Bt("events"),this.client=Bt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace.chains=[...new Set((this.namespace.chains||[]).concat(e.chains||[]))],this.namespace.accounts=[...new Set((this.namespace.accounts||[]).concat(e.accounts||[]))],this.namespace.methods=[...new Set((this.namespace.methods||[]).concat(e.methods||[]))],this.namespace.events=[...new Set((this.namespace.events||[]).concat(e.events||[]))],this.httpProviders=this.createHttpProviders()}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider(e.chainId).request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(fn.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){var e,t;const i={};return(t=(e=this.namespace)==null?void 0:e.accounts)==null||t.forEach(s=>{const a=$o(s);i[`${a.namespace}:${a.reference}`]=this.createHttpProvider(s)}),i}getHttpProvider(e){const t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){const i=t||cn(e,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);return new hn(new Bn(i,Bt("disableProviderPing")))}}var OP=Object.defineProperty,TP=Object.defineProperties,qP=Object.getOwnPropertyDescriptors,X1=Object.getOwnPropertySymbols,DP=Object.prototype.hasOwnProperty,BP=Object.prototype.propertyIsEnumerable,Z1=(r,e,t)=>e in r?OP(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,uh=(r,e)=>{for(var t in e||(e={}))DP.call(e,t)&&Z1(r,t,e[t]);if(X1)for(var t of X1(e))BP.call(e,t)&&Z1(r,t,e[t]);return r},Ju=(r,e)=>TP(r,qP(e));class V0{constructor(e){this.events=new w0,this.rpcProviders={},this.shouldAbortPairingAttempt=!1,this.maxPairingAttempts=10,this.disableProviderPing=!1,this.providerOpts=e,this.logger=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:y0(kh({level:(e==null?void 0:e.logger)||j1})),this.disableProviderPing=(e==null?void 0:e.disableProviderPing)||!1}static async init(e){const t=new V0(e);return await t.initialize(),t}async request(e,t,i){const[s,a]=this.validateChain(t);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(s).request({request:uh({},e),chainId:`${s}:${a}`,topic:this.session.topic,expiry:i})}sendAsync(e,t,i,s){const a=new Date().getTime();this.request(e,i,s).then(f=>t(null,Uh(a,f))).catch(f=>t(f,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:zt("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(e),await this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}async authenticate(e){if(!this.client)throw new Error("Sign Client not initialized");this.setNamespaces(e),await this.cleanupPendingPairings();const{uri:t,response:i}=await this.client.authenticate(e);t&&(this.uri=t,this.events.emit("display_uri",t));const s=await i();if(this.session=s.session,this.session){const a=G1(this.session.namespaces);this.namespaces=Vu(this.namespaces,a),this.persist("namespaces",this.namespaces),this.onConnect()}return s}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}removeListener(e,t){this.events.removeListener(e,t)}off(e,t){this.events.off(e,t)}get isWalletConnect(){return!0}async pair(e){this.shouldAbortPairingAttempt=!1;let t=0;do{if(this.shouldAbortPairingAttempt)throw new Error("Pairing aborted");if(t>=this.maxPairingAttempts)throw new Error("Max auto pairing attempts reached");const{uri:i,approval:s}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties});i&&(this.uri=i,this.events.emit("display_uri",i)),await s().then(a=>{this.session=a;const f=G1(a.namespaces);this.namespaces=Vu(this.namespaces,f),this.persist("namespaces",this.namespaces)}).catch(a=>{if(a.message!==hb)throw a;t++})}while(!this.session);return this.onConnect(),this.session}setDefaultChain(e,t){try{if(!this.session)return;const[i,s]=this.validateChain(e),a=this.getProvider(i);a.name===Sa?a.setDefaultChain(`${i}:${s}`,t):a.setDefaultChain(s,t)}catch(i){if(!/Please call connect/.test(i.message))throw i}}async cleanupPendingPairings(e={}){this.logger.info("Cleaning up inactive pairings...");const t=this.client.pairing.getAll();if(qn(t)){for(const i of t)e.deletePairings?this.client.core.expirer.set(i.topic,0):await this.client.core.relayer.subscriber.unsubscribe(i.topic);this.logger.info(`Inactive pairings cleared: ${t.length}`)}}abortPairingAttempt(){this.shouldAbortPairingAttempt=!0}async checkStorage(){if(this.namespaces=await this.getFromStore("namespaces"),this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.client.session.length){const e=this.client.session.keys.length-1;this.session=this.client.session.get(this.client.session.keys[e]),this.createProviders()}}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){this.client=this.providerOpts.client||await H0.init({core:this.providerOpts.core,logger:this.providerOpts.logger||j1,relayUrl:this.providerOpts.relayUrl||sP,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name,customStoragePrefix:this.providerOpts.customStoragePrefix,telemetryEnabled:this.providerOpts.telemetryEnabled}),this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const e=[...new Set(Object.keys(this.session.namespaces).map(t=>Do(t)))];Wu("client",this.client),Wu("events",this.events),Wu("disableProviderPing",this.disableProviderPing),e.forEach(t=>{if(!this.session)return;const i=gP(t,this.session),s=fb(i),a=Vu(this.namespaces,this.optionalNamespaces),f=Ju(uh({},a[t]),{accounts:i,chains:s});switch(t){case"eip155":this.rpcProviders[t]=new xP({namespace:f});break;case"algorand":this.rpcProviders[t]=new MP({namespace:f});break;case"solana":this.rpcProviders[t]=new EP({namespace:f});break;case"cosmos":this.rpcProviders[t]=new IP({namespace:f});break;case"polkadot":this.rpcProviders[t]=new bP({namespace:f});break;case"cip34":this.rpcProviders[t]=new SP({namespace:f});break;case"elrond":this.rpcProviders[t]=new PP({namespace:f});break;case"multiversx":this.rpcProviders[t]=new RP({namespace:f});break;case"near":this.rpcProviders[t]=new NP({namespace:f});break;default:this.rpcProviders[Sa]?this.rpcProviders[Sa].updateNamespace(f):this.rpcProviders[Sa]=new CP({namespace:f})}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",e=>{this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{const{params:t}=e,{event:i}=t;if(i.name==="accountsChanged"){const s=i.data;s&&qn(s)&&this.events.emit("accountsChanged",s.map(vP))}else if(i.name==="chainChanged"){const s=t.chainId,a=t.event.data,f=Do(s),p=Gu(s)!==Gu(a)?`${f}:${Gu(a)}`:s;this.onChainChanged(p)}else this.events.emit(i.name,i.data);this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:t})=>{var i;const{namespaces:s}=t,a=(i=this.client)==null?void 0:i.session.get(e);this.session=Ju(uh({},a),{namespaces:s}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:t})}),this.client.on("session_delete",async e=>{await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",Ju(uh({},zt("USER_DISCONNECTED")),{data:e.topic}))}),this.on(fn.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(e,!0)})}getProvider(e){return this.rpcProviders[e]||this.rpcProviders[Sa]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var t;this.getProvider(e).updateNamespace((t=this.session)==null?void 0:t.namespaces[e])})}setNamespaces(e){const{namespaces:t,optionalNamespaces:i,sessionProperties:s}=e;t&&Object.keys(t).length&&(this.namespaces=t),i&&Object.keys(i).length&&(this.optionalNamespaces=i),this.sessionProperties=s,this.persist("namespaces",t),this.persist("optionalNamespaces",i)}validateChain(e){const[t,i]=(e==null?void 0:e.split(":"))||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[t,i];if(t&&!Object.keys(this.namespaces||{}).map(f=>Do(f)).includes(t))throw new Error(`Namespace '${t}' is not configured. Please call connect() first with namespace config.`);if(t&&i)return[t,i];const s=Do(Object.keys(this.namespaces)[0]),a=this.rpcProviders[s].getDefaultChain();return[s,a]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}onChainChanged(e,t=!1){if(!this.namespaces)return;const[i,s]=this.validateChain(e);s&&(t||this.getProvider(i).setDefaultChain(s),this.namespaces[i]?this.namespaces[i].defaultChain=s:this.namespaces[`${i}:${s}`]?this.namespaces[`${i}:${s}`].defaultChain=s:this.namespaces[`${i}:${s}`]={defaultChain:s},this.persist("namespaces",this.namespaces),this.events.emit("chainChanged",s))}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.session=void 0,this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,this.persist("namespaces",void 0),this.persist("optionalNamespaces",void 0),this.persist("sessionProperties",void 0),await this.cleanupPendingPairings({deletePairings:!0})}persist(e,t){this.client.core.storage.setItem(`${F1}/${e}`,t)}async getFromStore(e){return await this.client.core.storage.getItem(`${F1}/${e}`)}}const $P=V0,zP="wc",kP="ethereum_provider",LP=`${zP}@2:${kP}:`,UP="https://rpc.walletconnect.com/v1/",b0=["eth_sendTransaction","personal_sign"],jP=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_sendCalls","wallet_getCapabilities","wallet_getCallsStatus","wallet_showCallsStatus"],m0=["chainChanged","accountsChanged"],FP=["chainChanged","accountsChanged","message","disconnect","connect"];var KP=Object.defineProperty,HP=Object.defineProperties,VP=Object.getOwnPropertyDescriptors,eg=Object.getOwnPropertySymbols,GP=Object.prototype.hasOwnProperty,WP=Object.prototype.propertyIsEnumerable,tg=(r,e,t)=>e in r?KP(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Pa=(r,e)=>{for(var t in e||(e={}))GP.call(e,t)&&tg(r,t,e[t]);if(eg)for(var t of eg(e))WP.call(e,t)&&tg(r,t,e[t]);return r},Qu=(r,e)=>HP(r,VP(e));function Bh(r){return Number(r[0].split(":")[1])}function dh(r){return`0x${r.toString(16)}`}function JP(r){const{chains:e,optionalChains:t,methods:i,optionalMethods:s,events:a,optionalEvents:f,rpcMap:p}=r;if(!qn(e))throw new Error("Invalid chains");const y={chains:e,methods:i||b0,events:a||m0,rpcMap:Pa({},e.length?{[Bh(e)]:p[Bh(e)]}:{})},v=a==null?void 0:a.filter(O=>!m0.includes(O)),A=i==null?void 0:i.filter(O=>!b0.includes(O));if(!t&&!f&&!s&&!(v!=null&&v.length)&&!(A!=null&&A.length))return{required:e.length?y:void 0};const E=(v==null?void 0:v.length)&&(A==null?void 0:A.length)||!t,N={chains:[...new Set(E?y.chains.concat(t||[]):t)],methods:[...new Set(y.methods.concat(s!=null&&s.length?s:jP))],events:[...new Set(y.events.concat(f!=null&&f.length?f:FP))],rpcMap:p};return{required:e.length?y:void 0,optional:t.length?N:void 0}}class G0{constructor(){this.events=new zi.EventEmitter,this.namespace="eip155",this.accounts=[],this.chainId=1,this.STORAGE_KEY=LP,this.on=(e,t)=>(this.events.on(e,t),this),this.once=(e,t)=>(this.events.once(e,t),this),this.removeListener=(e,t)=>(this.events.removeListener(e,t),this),this.off=(e,t)=>(this.events.off(e,t),this),this.parseAccount=e=>this.isCompatibleChainId(e)?this.parseAccountId(e).address:e,this.signer={},this.rpc={}}static async init(e){const t=new G0;return await t.initialize(e),t}async request(e,t){return await this.signer.request(e,this.formatChainId(this.chainId),t)}sendAsync(e,t,i){this.signer.sendAsync(e,t,this.formatChainId(this.chainId),i)}get connected(){return this.signer.client?this.signer.client.core.relayer.connected:!1}get connecting(){return this.signer.client?this.signer.client.core.relayer.connecting:!1}async enable(){return this.session||await this.connect(),await this.request({method:"eth_requestAccounts"})}async connect(e){if(!this.signer.client)throw new Error("Provider not initialized. Call init() first");this.loadConnectOpts(e);const{required:t,optional:i}=JP(this.rpc);try{const s=await new Promise(async(f,p)=>{var y;this.rpc.showQrModal&&((y=this.modal)==null||y.subscribeModal(v=>{!v.open&&!this.signer.session&&(this.signer.abortPairingAttempt(),p(new Error("Connection request reset. Please try again.")))})),await this.signer.connect(Qu(Pa({namespaces:Pa({},t&&{[this.namespace]:t})},i&&{optionalNamespaces:{[this.namespace]:i}}),{pairingTopic:e==null?void 0:e.pairingTopic})).then(v=>{f(v)}).catch(v=>{p(new Error(v.message))})});if(!s)return;const a=Pp(s.namespaces,[this.namespace]);this.setChainIds(this.rpc.chains.length?this.rpc.chains:a),this.setAccounts(a),this.events.emit("connect",{chainId:dh(this.chainId)})}catch(s){throw this.signer.logger.error(s),s}finally{this.modal&&this.modal.closeModal()}}async authenticate(e){if(!this.signer.client)throw new Error("Provider not initialized. Call init() first");this.loadConnectOpts({chains:e==null?void 0:e.chains});try{const t=await new Promise(async(s,a)=>{var f;this.rpc.showQrModal&&((f=this.modal)==null||f.subscribeModal(p=>{!p.open&&!this.signer.session&&(this.signer.abortPairingAttempt(),a(new Error("Connection request reset. Please try again.")))})),await this.signer.authenticate(Qu(Pa({},e),{chains:this.rpc.chains})).then(p=>{s(p)}).catch(p=>{a(new Error(p.message))})}),i=t.session;if(i){const s=Pp(i.namespaces,[this.namespace]);this.setChainIds(this.rpc.chains.length?this.rpc.chains:s),this.setAccounts(s),this.events.emit("connect",{chainId:dh(this.chainId)})}return t}catch(t){throw this.signer.logger.error(t),t}finally{this.modal&&this.modal.closeModal()}}async disconnect(){this.session&&await this.signer.disconnect(),this.reset()}get isWalletConnect(){return!0}get session(){return this.signer.session}registerEventListeners(){this.signer.on("session_event",e=>{const{params:t}=e,{event:i}=t;i.name==="accountsChanged"?(this.accounts=this.parseAccounts(i.data),this.events.emit("accountsChanged",this.accounts)):i.name==="chainChanged"?this.setChainId(this.formatChainId(i.data)):this.events.emit(i.name,i.data),this.events.emit("session_event",e)}),this.signer.on("chainChanged",e=>{const t=parseInt(e);this.chainId=t,this.events.emit("chainChanged",dh(this.chainId)),this.persist()}),this.signer.on("session_update",e=>{this.events.emit("session_update",e)}),this.signer.on("session_delete",e=>{this.reset(),this.events.emit("session_delete",e),this.events.emit("disconnect",Qu(Pa({},zt("USER_DISCONNECTED")),{data:e.topic,name:"USER_DISCONNECTED"}))}),this.signer.on("display_uri",e=>{var t,i;this.rpc.showQrModal&&((t=this.modal)==null||t.closeModal(),(i=this.modal)==null||i.openModal({uri:e})),this.events.emit("display_uri",e)})}switchEthereumChain(e){this.request({method:"wallet_switchEthereumChain",params:[{chainId:e.toString(16)}]})}isCompatibleChainId(e){return typeof e=="string"?e.startsWith(`${this.namespace}:`):!1}formatChainId(e){return`${this.namespace}:${e}`}parseChainId(e){return Number(e.split(":")[1])}setChainIds(e){const t=e.filter(i=>this.isCompatibleChainId(i)).map(i=>this.parseChainId(i));t.length&&(this.chainId=t[0],this.events.emit("chainChanged",dh(this.chainId)),this.persist())}setChainId(e){if(this.isCompatibleChainId(e)){const t=this.parseChainId(e);this.chainId=t,this.switchEthereumChain(t)}}parseAccountId(e){const[t,i,s]=e.split(":");return{chainId:`${t}:${i}`,address:s}}setAccounts(e){this.accounts=e.filter(t=>this.parseChainId(this.parseAccountId(t).chainId)===this.chainId).map(t=>this.parseAccountId(t).address),this.events.emit("accountsChanged",this.accounts)}getRpcConfig(e){var t,i;const s=(t=e==null?void 0:e.chains)!=null?t:[],a=(i=e==null?void 0:e.optionalChains)!=null?i:[],f=s.concat(a);if(!f.length)throw new Error("No chains specified in either `chains` or `optionalChains`");const p=s.length?(e==null?void 0:e.methods)||b0:[],y=s.length?(e==null?void 0:e.events)||m0:[],v=(e==null?void 0:e.optionalMethods)||[],A=(e==null?void 0:e.optionalEvents)||[],E=(e==null?void 0:e.rpcMap)||this.buildRpcMap(f,e.projectId),N=(e==null?void 0:e.qrModalOptions)||void 0;return{chains:s==null?void 0:s.map(O=>this.formatChainId(O)),optionalChains:a.map(O=>this.formatChainId(O)),methods:p,events:y,optionalMethods:v,optionalEvents:A,rpcMap:E,showQrModal:!!(e!=null&&e.showQrModal),qrModalOptions:N,projectId:e.projectId,metadata:e.metadata}}buildRpcMap(e,t){const i={};return e.forEach(s=>{i[s]=this.getRpcUrl(s,t)}),i}async initialize(e){if(this.rpc=this.getRpcConfig(e),this.chainId=this.rpc.chains.length?Bh(this.rpc.chains):Bh(this.rpc.optionalChains),this.signer=await $P.init({projectId:this.rpc.projectId,metadata:this.rpc.metadata,disableProviderPing:e.disableProviderPing,relayUrl:e.relayUrl,storageOptions:e.storageOptions,customStoragePrefix:e.customStoragePrefix,telemetryEnabled:e.telemetryEnabled}),this.registerEventListeners(),await this.loadPersistedSession(),this.rpc.showQrModal){let t;try{const{WalletConnectModal:i}=await a4(()=>import("./index-BLtrTfm0.js").then(s=>s.i),__vite__mapDeps([0,1,2]));t=i}catch{throw new Error("To use QR modal, please install @walletconnect/modal package")}if(t)try{this.modal=new t(Pa({projectId:this.rpc.projectId},this.rpc.qrModalOptions))}catch(i){throw this.signer.logger.error(i),new Error("Could not generate WalletConnectModal Instance")}}}loadConnectOpts(e){if(!e)return;const{chains:t,optionalChains:i,rpcMap:s}=e;t&&qn(t)&&(this.rpc.chains=t.map(a=>this.formatChainId(a)),t.forEach(a=>{this.rpc.rpcMap[a]=(s==null?void 0:s[a])||this.getRpcUrl(a)})),i&&qn(i)&&(this.rpc.optionalChains=[],this.rpc.optionalChains=i==null?void 0:i.map(a=>this.formatChainId(a)),i.forEach(a=>{this.rpc.rpcMap[a]=(s==null?void 0:s[a])||this.getRpcUrl(a)}))}getRpcUrl(e,t){var i;return((i=this.rpc.rpcMap)==null?void 0:i[e])||`${UP}?chainId=eip155:${e}&projectId=${t||this.rpc.projectId}`}async loadPersistedSession(){if(this.session)try{const e=await this.signer.client.core.storage.getItem(`${this.STORAGE_KEY}/chainId`),t=this.session.namespaces[`${this.namespace}:${e}`]?this.session.namespaces[`${this.namespace}:${e}`]:this.session.namespaces[this.namespace];this.setChainIds(e?[this.formatChainId(e)]:t==null?void 0:t.accounts),this.setAccounts(t==null?void 0:t.accounts)}catch(e){this.signer.logger.error("Failed to load persisted session, clearing state..."),this.signer.logger.error(e),await this.disconnect().catch(t=>this.signer.logger.warn(t))}}reset(){this.chainId=1,this.accounts=[]}persist(){this.session&&this.signer.client.core.storage.setItem(`${this.STORAGE_KEY}/chainId`,this.chainId)}parseAccounts(e){return typeof e=="string"||e instanceof String?[this.parseAccount(e)]:e.map(t=>this.parseAccount(t))}}const lR=G0;export{lR as EthereumProvider,FP as OPTIONAL_EVENTS,jP as OPTIONAL_METHODS,m0 as REQUIRED_EVENTS,b0 as REQUIRED_METHODS,G0 as default};
